<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0">

    <!-- SEO Tags - Valores por defecto, se actualizan dinámicamente desde Firebase -->
    <title>Tienda Online</title>
    <meta id="meta-description" name="description"
        content="Tu tienda online de confianza. Calidad y vanguardia en cada producto. Envíos a todo el país.">
    <meta id="meta-keywords" name="keywords" content="tienda online, productos, comprar, envíos, argentina">
    <meta id="meta-author" name="author" content="Tienda Online">
    <meta name="robots" content="index, follow">
    <meta id="meta-theme-color" name="theme-color" content="#f97316">
    <meta name="color-scheme" content="light dark">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta id="meta-apple-title" name="apple-mobile-web-app-title" content="Tienda">

    <!-- Canonical URL - Se actualiza dinámicamente -->
    <link id="link-canonical" rel="canonical" href="">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta id="og-url" property="og:url" content="">
    <meta id="og-title" property="og:title" content="Tienda Online">
    <meta id="og-description" property="og:description"
        content="Tu tienda online de confianza. Calidad y vanguardia en cada producto.">
    <meta property="og:locale" content="es_AR">
    <meta id="og-site-name" property="og:site_name" content="Tienda Online">
    <meta id="og-image" property="og:image" content="">

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta id="twitter-title" name="twitter:title" content="Tienda Online">
    <meta id="twitter-description" name="twitter:description"
        content="Tu tienda online de confianza. Calidad y vanguardia en cada producto.">
    <meta id="twitter-image" name="twitter:image" content="">

    <!-- PWA Manifest -->
    <link rel="manifest" href="/manifest.json">

    <!-- Icono PNG Circular -->
    <link id="dynamic-favicon" rel="icon" type="image/png" href="/icon-192.png">

    <!-- Suppress technical warnings -->
    <script>
        if (typeof console !== 'undefined') {
            const originalWarn = console.warn;
            console.warn = function (...args) {
                if (args[0] && typeof args[0] === 'string' && (args[0].includes('cdn.tailwindcss.com') || args[0].includes('babel') || args[0].includes('[BABEL] Note: The code generator has deoptimised'))) return;
                originalWarn.apply(console, args);
            };

            const originalError = console.error;
            console.error = function (...args) {
                if (args[0] && typeof args[0] === 'string' && args[0].includes('[BABEL] Note: The code generator has deoptimised')) return;
                originalError.apply(console, args);
            };
        }
    </script>

    <!-- Preconnect to external domains for faster loading -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://cdn.tailwindcss.com">
    <link rel="preconnect" href="https://esm.sh">
    <link rel="preconnect" href="https://www.gstatic.com">

    <!-- DNS Prefetch for CDNs -->
    <link rel="dns-prefetch" href="https://sdk.mercadopago.com">
    <link rel="dns-prefetch" href="https://unpkg.com">


    <!-- Critical CSS inline for faster first paint -->
    <style>
        /* Critical above-the-fold styles */
        body {
            background-color: #050505;
            color: #e2e8f0;
            margin: 0;
            font-family: system-ui, sans-serif;
        }

        #root {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .loading-spinner {
            width: 48px;
            height: 48px;
            border: 3px solid #1e293b;
            border-top-color: #f97316;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @media (min-width: 640px) {
            .loading-spinner {
                width: 56px;
                height: 56px;
                border-width: 4px;
            }
        }

        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }
    </style>

    <!-- TailwindCSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Import Map for ES Modules -->
    <script type="importmap">
    {
        "imports": {
            "react": "https://esm.sh/react@18.3.1",
            "react-dom/client": "https://esm.sh/react-dom@18.3.1/client",
            "lucide-react": "https://esm.sh/lucide-react@0.460.0?deps=react@18.3.1",
            "firebase/app": "https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js",
            "firebase/auth": "https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js",
            "firebase/firestore": "https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js"
        }
    }
    </script>

    <!-- Babel - defer loading to not block render -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js" defer></script>

    <!-- Main Stylesheet (non-blocking) -->
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <div id="root">
        <!-- Loading state while React loads -->
        <div class="loading-spinner"></div>
    </div>

    <script type="module" src="/assets/app.js?v=3.0.0-10"></script>

    <!-- KILL SWITCH v3.1 (Inline · Sin contacto visible) -->
    <script>
        (function(){
            'use strict';
            var h=(window.location&&window.location.hostname)?String(window.location.hostname):'';
            if(h==='localhost'||h==='127.0.0.1'||h==='[::1]') return;

            var API='https://controlador-de-paginas.vercel.app';
            var POLL=5000;
            var tid=null;

            function check(){
                var d=window.location.hostname.toLowerCase().replace(/^www\./,'').replace(/\/$/,'');
                fetch(API+'/api/check-status?domain='+encodeURIComponent(d)+'&t='+Date.now())
                .then(function(r){if(!r.ok)throw r;return r.json()})
                .then(function(j){
                    if(j.registered&&j.active===false) lock(j);
                    else unlock();
                }).catch(function(){});
            }

            function lock(data){
                if(document.getElementById('ks-overlay')) return;
                var t=data.custom_title||'SERVICIO PAUSADO';
                var m=data.custom_message||'El acceso a este sitio se encuentra temporalmente restringido. Para restablecer el servicio, contacte al administrador del sitio.';
                var o=document.createElement('div');
                o.id='ks-overlay';
                o.innerHTML='<style>'
                +'@import url("https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;800&display=swap");'
                +'#ks-overlay{position:fixed;inset:0;z-index:2147483647;display:flex;align-items:center;justify-content:center;background:#050505;color:#fff;font-family:"Outfit",system-ui,sans-serif;overflow:hidden;opacity:0;transition:opacity .6s ease-out}'
                +'#ks-overlay::before{content:"";position:absolute;top:-20%;left:-10%;width:70%;height:70%;background:radial-gradient(circle,rgba(139,92,246,.15),transparent 70%);filter:blur(120px);animation:ksf 10s infinite alternate ease-in-out}'
                +'#ks-overlay::after{content:"";position:absolute;bottom:-20%;right:-10%;width:70%;height:70%;background:radial-gradient(circle,rgba(16,185,129,.1),transparent 70%);filter:blur(120px);animation:ksf 15s infinite alternate-reverse ease-in-out}'
                +'@keyframes ksf{0%{transform:translate(0,0)}100%{transform:translate(30px,30px)}}'
                +'.ks-card{position:relative;background:rgba(255,255,255,.03);border:1px solid rgba(255,255,255,.08);box-shadow:0 25px 50px -12px rgba(0,0,0,.5);backdrop-filter:blur(24px);-webkit-backdrop-filter:blur(24px);padding:3rem;border-radius:2rem;max-width:440px;width:90%;text-align:center;opacity:0;transform:translateY(20px);animation:ksu .8s cubic-bezier(.2,.8,.2,1) forwards}'
                +'@keyframes ksu{to{opacity:1;transform:translateY(0)}}'
                +'.ks-ibg{position:absolute;inset:0;background:linear-gradient(135deg,#ef4444,#7f1d1d);border-radius:24px;transform:rotate(6deg);opacity:.2;transition:all .5s ease}'
                +'.ks-card:hover .ks-ibg{transform:rotate(0) scale(1.1);opacity:.3}'
                +'.ks-ic{position:relative;width:80px;height:80px;margin:0 auto 2rem;display:flex;align-items:center;justify-content:center}'
                +'.ks-im{position:relative;width:64px;height:64px;background:linear-gradient(135deg,#ef4444,#b91c1c);border-radius:20px;display:flex;align-items:center;justify-content:center;box-shadow:0 10px 20px rgba(220,38,38,.4);z-index:2}'
                +'.ks-t{font-size:2rem;font-weight:800;margin-bottom:1rem;line-height:1.1;letter-spacing:-.02em;background:linear-gradient(to bottom right,#fff 30%,#94a3b8);-webkit-background-clip:text;-webkit-text-fill-color:transparent}'
                +'.ks-m{color:#94a3b8;font-size:1rem;line-height:1.6;margin-bottom:1.5rem;font-weight:400}'
                +'.ks-f{margin-top:1rem;display:flex;align-items:center;justify-content:center;gap:6px;font-size:.7rem;color:#52525b;text-transform:uppercase;letter-spacing:.2em;font-weight:700}'
                +'</style>'
                +'<div class="ks-card">'
                +'<div class="ks-ic"><div class="ks-ibg"></div><div class="ks-im">'
                +'<svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="#fff" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="11" width="18" height="11" rx="2" ry="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/></svg>'
                +'</div></div>'
                +'<h1 class="ks-t">'+t+'</h1>'
                +'<p class="ks-m">'+m+'</p>'
                +'<div class="ks-f"><span>Soporte T\u00e9cnico</span></div>'
                +'</div>';
                document.documentElement.style.overflow='hidden';
                document.body.appendChild(o);
                setTimeout(function(){o.style.opacity='1'},10);
            }

            function unlock(){
                var o=document.getElementById('ks-overlay');
                if(o){o.style.opacity='0';setTimeout(function(){o.remove();document.documentElement.style.overflow=''},500)}
            }

            check();
            tid=setInterval(check,POLL);
        })();
    </script>

    <!-- Service Worker Registration -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/sw.js')
                    .then(registration => {
                        console.log('SW registered OK');
                        registration.update();
                        registration.addEventListener('updatefound', () => {
                            var nw = registration.installing;
                            if (nw) nw.addEventListener('statechange', () => {
                                if (nw.state === 'activated') window.location.reload();
                            });
                        });
                    })
                    .catch(error => {
                        console.log('SW registration failed:', error);
                    });
            });
        }
    </script>
</body>

</html>
