<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sustore - Tecnología del Futuro</title>
    <meta name="description"
        content="SUSTORE - Tu tienda de tecnología con los mejores precios del mercado. Celulares, accesorios, audio y más.">
    <meta name="keywords" content="tecnología, celulares, accesorios, audio, sustore">
    <script src="https://cdn.tailwindcss.com"></script>
    <script type="importmap">
    {
        "imports": {
            "react": "https://esm.sh/react@18.2.0",
            "react-dom/client": "https://esm.sh/react-dom@18.2.0/client",
            "lucide-react": "https://esm.sh/lucide-react@0.263.1",
            "firebase/app": "https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js",
            "firebase/auth": "https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js",
            "firebase/firestore": "https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js"
        }
    }
    </script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <div id="root"></div>
    <script type="text/babel" data-type="module" src="script.js"></script>
    <script>
        (function () {
            const CONTROLLER_URL = 'https://controlador-de-paginas.vercel.app';
            const SID = Math.random().toString(36).substring(2);

            function checkStatus() {
                // CAMBIA EL DOMINIO ABAJO SI NO USAS EL BOTON DEL PANEL
                const domain = window.location.hostname;

                fetch(`${CONTROLLER_URL}/api/check-status?domain=${domain}&sid=${SID}`)
                    .then(r => r.json())
                    .then(data => {
                        if (!data.registered) return;
                        if (data.status === 'maintenance' || data.status === 'overdue') {
                            const isM = data.status === 'maintenance';
                            document.body.innerHTML = `
                 <div style="position:fixed;top:0;left:0;width:100%;height:100%;background:${isM ? '#111' : '#200'};color:#fff;display:flex;justify-content:center;align-items:center;z-index:99999999;flex-direction:column;font-family:sans-serif;text-align:center;padding:20px;">
                   <div style="padding:40px;border-radius:30px;background:rgba(255,255,255,0.03);border:1px solid rgba(255,255,255,0.1);backdrop-filter:blur(10px);max-width:500px;width:100%">
                     <h1 style="color:${isM ? '#fbbf24' : '#ef4444'}">${data.custom_title || (isM ? 'MANTENIMIENTO' : 'SUSPENDIDO')}</h1>
                     <p style="color:#a1a1aa">${data.custom_message || 'Contacte al administrador.'}</p>
                   </div>
                 </div>`;
                            document.body.style.overflow = 'hidden';
                        }
                    });
            }
            checkStatus();
            setInterval(checkStatus, 30000); // Latido cada 30 segundos
        })();
    </script>
</body>

</html>