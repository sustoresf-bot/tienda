<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sustore - Tecnología del Futuro</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="/styles.css">
    <style>
        .boot-loader {
            position: fixed;
            inset: 0;
            background: #050505;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            color: #06b6d4;
            font-family: 'Courier New', Courier, monospace;
            padding: 20px;
            transition: opacity 0.5s ease;
        }

        .spinner {
            width: 40px;
            height: 40px;
            border: 4px solid rgba(6, 182, 212, 0.1);
            border-top: 4px solid #06b6d4;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-bottom: 20px;
        }

        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }

        #error-terminal {
            display: none;
            width: 90%;
            max-width: 800px;
            background: #1a1a1a;
            border: 1px solid #ef4444;
            border-top: 25px solid #ef4444;
            border-radius: 8px;
            margin-top: 20px;
            padding: 15px;
            color: #ef4444;
            font-size: 13px;
            white-space: pre-wrap;
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.5);
        }

        .error-title {
            position: absolute;
            top: 2px;
            left: 10px;
            color: white;
            font-weight: bold;
            font-size: 11px;
        }
    </style>
</head>

<body>
    <div id="root">
        <div class="boot-loader">
            <div class="spinner"></div>
            <div style="font-weight: 900; letter-spacing: 2px;">NEXUS OS v3.0 BOOTING...</div>
            <div id="error-terminal" style="position: relative;">
                <span class="error-title">SYSTEM_INIT_FAILURE</span>
                <div id="error-content"></div>
            </div>
            <p style="margin-top: 20px; color: #334155; font-size: 10px;">Si esta pantalla no desaparece, envía una
                captura del recuadro rojo.</p>
        </div>
    </div>

    <script type="module" src="/app.js"></script>

    <script>
        // Emergency logger
        window.onerror = function (msg, url, line, col, error) {
            const terminal = document.getElementById('error-terminal');
            const content = document.getElementById('error-content');
            if (terminal && content) {
                terminal.style.display = 'block';
                content.innerText = 'ERROR: ' + msg + '\nFILE: ' + url + '\nLINE: ' + line + ':' + col + '\nSTACK: ' + (error?.stack || 'N/A');
                console.error("Boot Critical:", msg, error);
            }
        };

        // Check if app loaded after 5 seconds
        setTimeout(() => {
            const root = document.getElementById('root');
            const boot = document.querySelector('.boot-loader');
            if (boot && boot.style.opacity !== '0' && !document.getElementById('error-terminal').style.display) {
                const terminal = document.getElementById('error-terminal');
                const content = document.getElementById('error-content');
                if (terminal && content && terminal.style.display !== 'block') {
                    terminal.style.display = 'block';
                    content.innerText = 'TIMEOUT: El sistema principal no respondió después de 5 segundos.\nCausas probables:\n1. Error de red (Firebase bloqueado)\n2. Falla catastrófica en app.js\n3. Vite no construyó el proyecto correctamente.';
                }
            }
        }, 8000);
    </script>
</body>

</html>