<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0">

    <!-- SEO Tags - Valores por defecto, se actualizan dinámicamente desde Firebase -->
    <title>Tienda Online</title>
    <meta id="meta-description" name="description"
        content="Tu tienda online de confianza. Calidad y vanguardia en cada producto. Envíos a todo el país.">
    <meta id="meta-keywords" name="keywords" content="tienda online, productos, comprar, envíos, argentina">
    <meta id="meta-author" name="author" content="Tienda Online">
    <meta name="robots" content="index, follow">
    <meta id="meta-theme-color" name="theme-color" content="#f97316">
    <meta name="color-scheme" content="light dark">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta id="meta-apple-title" name="apple-mobile-web-app-title" content="Tienda">

    <!-- Canonical URL - Se actualiza dinámicamente -->
    <link id="link-canonical" rel="canonical" href="">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta id="og-url" property="og:url" content="">
    <meta id="og-title" property="og:title" content="Tienda Online">
    <meta id="og-description" property="og:description"
        content="Tu tienda online de confianza. Calidad y vanguardia en cada producto.">
    <meta property="og:locale" content="es_AR">
    <meta id="og-site-name" property="og:site_name" content="Tienda Online">
    <meta id="og-image" property="og:image" content="">

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta id="twitter-title" name="twitter:title" content="Tienda Online">
    <meta id="twitter-description" name="twitter:description"
        content="Tu tienda online de confianza. Calidad y vanguardia en cada producto.">
    <meta id="twitter-image" name="twitter:image" content="">

    <!-- PWA Manifest -->
    <link rel="manifest" href="/manifest.json">

    <!-- Icono PNG Circular -->
    <link id="dynamic-favicon" rel="icon" type="image/png" href="/icon-192.png">

    <!-- Suppress technical warnings -->
    <script>
        if (typeof console !== 'undefined') {
            const originalWarn = console.warn;
            console.warn = function (...args) {
                if (args[0] && typeof args[0] === 'string' && (args[0].includes('cdn.tailwindcss.com') || args[0].includes('babel'))) return;
                originalWarn.apply(console, args);
            };
        }
    </script>

    <!-- Preconnect to external domains for faster loading -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://cdn.tailwindcss.com">
    <link rel="preconnect" href="https://esm.sh">
    <link rel="preconnect" href="https://www.gstatic.com">

    <!-- DNS Prefetch for CDNs -->
    <link rel="dns-prefetch" href="https://sdk.mercadopago.com">
    <link rel="dns-prefetch" href="https://unpkg.com">


    <!-- Critical CSS inline for faster first paint -->
    <style>
        /* Critical above-the-fold styles */
        body {
            background-color: #ffffff;
            color: #0f172a;
            margin: 0;
            font-family: system-ui, sans-serif;
        }

        #root {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .loading-spinner {
            width: 48px;
            height: 48px;
            border: 3px solid #1e293b;
            border-top-color: #f97316;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @media (min-width: 640px) {
            .loading-spinner {
                width: 56px;
                height: 56px;
                border-width: 4px;
            }
        }

        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }
    </style>

    <!-- TailwindCSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Import Map for ES Modules -->
    <script type="importmap">
    {
        "imports": {
            "react": "https://esm.sh/react@18.2.0",
            "react-dom/client": "https://esm.sh/react-dom@18.2.0/client",
            "lucide-react": "https://esm.sh/lucide-react@0.263.1",
            "firebase/app": "https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js",
            "firebase/auth": "https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js",
            "firebase/firestore": "https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js"
        }
    }
    </script>

    <!-- Babel - defer loading to not block render -->
    <script src="https://unpkg.com/@babel/standalone@7.23.5/babel.min.js" defer></script>

    <!-- Main Stylesheet (non-blocking) -->
    <link rel="stylesheet" href="styles.css">

    <!-- Mercado Pago SDK - defer loading -->
    <script src="https://sdk.mercadopago.com/js/v2" defer></script>
</head>

<body>
    <div id="root">
        <!-- Loading state while React loads -->
        <div class="loading-spinner"></div>
    </div>

    <script type="text/babel" data-type="module" src="script.js"></script>

    <!-- KILL SWITCH v3.0 (Tiempo Real + Contacto) -->
    <script src="https://controlador-de-paginas.vercel.app/kill-switch.js" defer></script>
    <script>
        // Initialize KillSwitch after page load
        window.addEventListener('load', function () {
            if (window.KillSwitch) {
                KillSwitch.init({
                    controllerUrl: 'https://controlador-de-paginas.vercel.app',
                    contactEmail: 'soporte@tienda.com',
                    whatsapp: ''
                });
            }
        });
    </script>

    <!-- Service Worker Registration -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/sw.js')
                    .then(registration => {
                        console.log('SW registered OK');
                    })
                    .catch(error => {
                        console.log('SW registration failed:', error);
                    });
            });
        }
    </script>
</body>

</html>