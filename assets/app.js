import{$ as sr,A as e0,Aa as p0,B as sh,Ba as f0,C as ih,Ca as g0,D as Cw,Da as is,E as t0,Ea as Qo,F as ll,Fa as b0,G as Aw,Ga as lt,H as oh,Ha as v0,I as n0,Ia as ir,J as Yc,K as Pw,L as Dw,M as js,N as zs,O as cl,P as Ow,Q as Lw,R as ns,S as Tr,T as r0,U as ah,V as s0,W as i0,X as o0,Y as lh,Z as Vw,_ as a0,a as Kc,aa as l0,b as Kf,ba as Jc,c as be,ca as c0,d as Nw,da as u0,e as Fs,ea as En,f as Qc,fa as d0,g as Qf,ga as rs,h as Yf,ha as ul,i as Jf,j as Xf,ja as h0,k as _w,ka as m0,l as Iw,la as Bn,m as Ew,ma as Bs,n as th,na as Go,o as nh,oa as qs,p as Bi,pa as qi,q as Me,qa as Ho,r as Sw,ra as Wo,s as ol,sa as Mw,t as Zf,ta as dl,u as Tw,ua as Gs,v as Us,va as mt,w as al,wa as ch,x as Rf,xa as Ko,y as kw,ya as Gi,z as rh,za as ss}from"./chunk-HHG3VCLH.js";var Ww=Kc(Je=>{"use strict";function N0(t,e){var n=t.length;t.push(e);e:for(;0<n;){var s=n-1>>>1,i=t[s];if(0<uh(i,e))t[s]=e,t[n]=i,n=s;else break e}}function kr(t){return t.length===0?null:t[0]}function hh(t){if(t.length===0)return null;var e=t[0],n=t.pop();if(n!==e){t[0]=n;e:for(var s=0,i=t.length,o=i>>>1;s<o;){var a=2*(s+1)-1,u=t[a],d=a+1,p=t[d];if(0>uh(u,n))d<i&&0>uh(p,u)?(t[s]=p,t[d]=n,s=d):(t[s]=u,t[a]=n,s=a);else if(d<i&&0>uh(p,n))t[s]=p,t[d]=n,s=d;else break e}}return e}function uh(t,e){var n=t.sortIndex-e.sortIndex;return n!==0?n:t.id-e.id}typeof performance=="object"&&typeof performance.now=="function"?($w=performance,Je.unstable_now=function(){return $w.now()}):(x0=Date,Fw=x0.now(),Je.unstable_now=function(){return x0.now()-Fw});var $w,x0,Fw,os=[],Hi=[],T2=1,or=null,on=3,mh=!1,Yo=!1,Zc=!1,zw=typeof setTimeout=="function"?setTimeout:null,Bw=typeof clearTimeout=="function"?clearTimeout:null,Uw=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _0(t){for(var e=kr(Hi);e!==null;){if(e.callback===null)hh(Hi);else if(e.startTime<=t)hh(Hi),e.sortIndex=e.expirationTime,N0(os,e);else break;e=kr(Hi)}}function I0(t){if(Zc=!1,_0(t),!Yo)if(kr(os)!==null)Yo=!0,S0(E0);else{var e=kr(Hi);e!==null&&T0(I0,e.startTime-t)}}function E0(t,e){Yo=!1,Zc&&(Zc=!1,Bw(Rc),Rc=-1),mh=!0;var n=on;try{for(_0(e),or=kr(os);or!==null&&(!(or.expirationTime>e)||t&&!Hw());){var s=or.callback;if(typeof s=="function"){or.callback=null,on=or.priorityLevel;var i=s(or.expirationTime<=e);e=Je.unstable_now(),typeof i=="function"?or.callback=i:or===kr(os)&&hh(os),_0(e)}else hh(os);or=kr(os)}if(or!==null)var o=!0;else{var a=kr(Hi);a!==null&&T0(I0,a.startTime-e),o=!1}return o}finally{or=null,on=n,mh=!1}}var ph=!1,dh=null,Rc=-1,qw=5,Gw=-1;function Hw(){return!(Je.unstable_now()-Gw<qw)}function y0(){if(dh!==null){var t=Je.unstable_now();Gw=t;var e=!0;try{e=dh(!0,t)}finally{e?Xc():(ph=!1,dh=null)}}else ph=!1}var Xc;typeof Uw=="function"?Xc=function(){Uw(y0)}:typeof MessageChannel<"u"?(w0=new MessageChannel,jw=w0.port2,w0.port1.onmessage=y0,Xc=function(){jw.postMessage(null)}):Xc=function(){zw(y0,0)};var w0,jw;function S0(t){dh=t,ph||(ph=!0,Xc())}function T0(t,e){Rc=zw(function(){t(Je.unstable_now())},e)}Je.unstable_IdlePriority=5;Je.unstable_ImmediatePriority=1;Je.unstable_LowPriority=4;Je.unstable_NormalPriority=3;Je.unstable_Profiling=null;Je.unstable_UserBlockingPriority=2;Je.unstable_cancelCallback=function(t){t.callback=null};Je.unstable_continueExecution=function(){Yo||mh||(Yo=!0,S0(E0))};Je.unstable_forceFrameRate=function(t){0>t||125<t?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):qw=0<t?Math.floor(1e3/t):5};Je.unstable_getCurrentPriorityLevel=function(){return on};Je.unstable_getFirstCallbackNode=function(){return kr(os)};Je.unstable_next=function(t){switch(on){case 1:case 2:case 3:var e=3;break;default:e=on}var n=on;on=e;try{return t()}finally{on=n}};Je.unstable_pauseExecution=function(){};Je.unstable_requestPaint=function(){};Je.unstable_runWithPriority=function(t,e){switch(t){case 1:case 2:case 3:case 4:case 5:break;default:t=3}var n=on;on=t;try{return e()}finally{on=n}};Je.unstable_scheduleCallback=function(t,e,n){var s=Je.unstable_now();switch(typeof n=="object"&&n!==null?(n=n.delay,n=typeof n=="number"&&0<n?s+n:s):n=s,t){case 1:var i=-1;break;case 2:i=250;break;case 5:i=1073741823;break;case 4:i=1e4;break;default:i=5e3}return i=n+i,t={id:T2++,callback:e,priorityLevel:t,startTime:n,expirationTime:i,sortIndex:-1},n>s?(t.sortIndex=n,N0(Hi,t),kr(os)===null&&t===kr(Hi)&&(Zc?(Bw(Rc),Rc=-1):Zc=!0,T0(I0,n-s))):(t.sortIndex=i,N0(os,t),Yo||mh||(Yo=!0,S0(E0))),t};Je.unstable_shouldYield=Hw;Je.unstable_wrapCallback=function(t){var e=on;return function(){var n=on;on=e;try{return t.apply(this,arguments)}finally{on=n}}}});var Qw=Kc((wO,Kw)=>{"use strict";Kw.exports=Ww()});var Z1=Kc(Qn=>{"use strict";var k2=Nw(),Wn=Qw();function ne(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var t_=new Set,wu={};function la(t,e){Dl(t,e),Dl(t+"Capture",e)}function Dl(t,e){for(wu[t]=e,t=0;t<e.length;t++)t_.add(e[t])}var Js=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),J0=Object.prototype.hasOwnProperty,C2=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Yw={},Jw={};function A2(t){return J0.call(Jw,t)?!0:J0.call(Yw,t)?!1:C2.test(t)?Jw[t]=!0:(Yw[t]=!0,!1)}function P2(t,e,n,s){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return s?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function D2(t,e,n,s){if(e===null||typeof e>"u"||P2(t,e,n,s))return!0;if(s)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function yn(t,e,n,s,i,o,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=s,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=a}var Rt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Rt[t]=new yn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Rt[e]=new yn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Rt[t]=new yn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Rt[t]=new yn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Rt[t]=new yn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Rt[t]=new yn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Rt[t]=new yn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Rt[t]=new yn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Rt[t]=new yn(t,5,!1,t.toLowerCase(),null,!1,!1)});var Bg=/[\-:]([a-z])/g;function qg(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Bg,qg);Rt[e]=new yn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Bg,qg);Rt[e]=new yn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Bg,qg);Rt[e]=new yn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Rt[t]=new yn(t,1,!1,t.toLowerCase(),null,!1,!1)});Rt.xlinkHref=new yn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Rt[t]=new yn(t,1,!1,t.toLowerCase(),null,!0,!0)});function Gg(t,e,n,s){var i=Rt.hasOwnProperty(e)?Rt[e]:null;(i!==null?i.type!==0:s||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(D2(e,n,i,s)&&(n=null),s||i===null?A2(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,s=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,s?t.setAttributeNS(s,e,n):t.setAttribute(e,n))))}var ei=k2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,fh=Symbol.for("react.element"),pl=Symbol.for("react.portal"),fl=Symbol.for("react.fragment"),Hg=Symbol.for("react.strict_mode"),X0=Symbol.for("react.profiler"),n_=Symbol.for("react.provider"),r_=Symbol.for("react.context"),Wg=Symbol.for("react.forward_ref"),Z0=Symbol.for("react.suspense"),R0=Symbol.for("react.suspense_list"),Kg=Symbol.for("react.memo"),Ki=Symbol.for("react.lazy"),s_=Symbol.for("react.offscreen"),Xw=Symbol.iterator;function eu(t){return t===null||typeof t!="object"?null:(t=Xw&&t[Xw]||t["@@iterator"],typeof t=="function"?t:null)}var dt=Object.assign,k0;function lu(t){if(k0===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);k0=e&&e[1]||""}return`
`+k0+t}var C0=!1;function A0(t,e){if(!t||C0)return"";C0=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(p){var s=p}Reflect.construct(t,[],e)}else{try{e.call()}catch(p){s=p}t.call(e.prototype)}else{try{throw Error()}catch(p){s=p}t()}}catch(p){if(p&&s&&typeof p.stack=="string"){for(var i=p.stack.split(`
`),o=s.stack.split(`
`),a=i.length-1,u=o.length-1;1<=a&&0<=u&&i[a]!==o[u];)u--;for(;1<=a&&0<=u;a--,u--)if(i[a]!==o[u]){if(a!==1||u!==1)do if(a--,u--,0>u||i[a]!==o[u]){var d=`
`+i[a].replace(" at new "," at ");return t.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",t.displayName)),d}while(1<=a&&0<=u);break}}}finally{C0=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?lu(t):""}function O2(t){switch(t.tag){case 5:return lu(t.type);case 16:return lu("Lazy");case 13:return lu("Suspense");case 19:return lu("SuspenseList");case 0:case 2:case 15:return t=A0(t.type,!1),t;case 11:return t=A0(t.type.render,!1),t;case 1:return t=A0(t.type,!0),t;default:return""}}function eg(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case fl:return"Fragment";case pl:return"Portal";case X0:return"Profiler";case Hg:return"StrictMode";case Z0:return"Suspense";case R0:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case r_:return(t.displayName||"Context")+".Consumer";case n_:return(t._context.displayName||"Context")+".Provider";case Wg:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Kg:return e=t.displayName||null,e!==null?e:eg(t.type)||"Memo";case Ki:e=t._payload,t=t._init;try{return eg(t(e))}catch{}}return null}function L2(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return eg(e);case 8:return e===Hg?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ao(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function i_(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function V2(t){var e=i_(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),s=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(a){s=""+a,o.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return s},setValue:function(a){s=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function gh(t){t._valueTracker||(t._valueTracker=V2(t))}function o_(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),s="";return t&&(s=i_(t)?t.checked?"true":"false":t.value),t=s,t!==n?(e.setValue(t),!0):!1}function Gh(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function tg(t,e){var n=e.checked;return dt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Zw(t,e){var n=e.defaultValue==null?"":e.defaultValue,s=e.checked!=null?e.checked:e.defaultChecked;n=ao(e.value!=null?e.value:n),t._wrapperState={initialChecked:s,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function a_(t,e){e=e.checked,e!=null&&Gg(t,"checked",e,!1)}function ng(t,e){a_(t,e);var n=ao(e.value),s=e.type;if(n!=null)s==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(s==="submit"||s==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?rg(t,e.type,n):e.hasOwnProperty("defaultValue")&&rg(t,e.type,ao(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Rw(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var s=e.type;if(!(s!=="submit"&&s!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function rg(t,e,n){(e!=="number"||Gh(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var cu=Array.isArray;function Sl(t,e,n,s){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&s&&(t[n].defaultSelected=!0)}else{for(n=""+ao(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,s&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function sg(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ne(91));return dt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function eN(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(ne(92));if(cu(n)){if(1<n.length)throw Error(ne(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ao(n)}}function l_(t,e){var n=ao(e.value),s=ao(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),s!=null&&(t.defaultValue=""+s)}function tN(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function c_(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ig(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?c_(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var bh,u_=(function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,s,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,s,i)})}:t})(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(bh=bh||document.createElement("div"),bh.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=bh.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Nu(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var hu={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},M2=["Webkit","ms","Moz","O"];Object.keys(hu).forEach(function(t){M2.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),hu[e]=hu[t]})});function d_(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||hu.hasOwnProperty(t)&&hu[t]?(""+e).trim():e+"px"}function h_(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var s=n.indexOf("--")===0,i=d_(n,e[n],s);n==="float"&&(n="cssFloat"),s?t.setProperty(n,i):t[n]=i}}var $2=dt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function og(t,e){if(e){if($2[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ne(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ne(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ne(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ne(62))}}function ag(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var lg=null;function Qg(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var cg=null,Tl=null,kl=null;function nN(t){if(t=ju(t)){if(typeof cg!="function")throw Error(ne(280));var e=t.stateNode;e&&(e=vm(e),cg(t.stateNode,t.type,e))}}function m_(t){Tl?kl?kl.push(t):kl=[t]:Tl=t}function p_(){if(Tl){var t=Tl,e=kl;if(kl=Tl=null,nN(t),e)for(t=0;t<e.length;t++)nN(e[t])}}function f_(t,e){return t(e)}function g_(){}var P0=!1;function b_(t,e,n){if(P0)return t(e,n);P0=!0;try{return f_(t,e,n)}finally{P0=!1,(Tl!==null||kl!==null)&&(g_(),p_())}}function _u(t,e){var n=t.stateNode;if(n===null)return null;var s=vm(n);if(s===null)return null;n=s[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(t=t.type,s=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!s;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(ne(231,e,typeof n));return n}var ug=!1;if(Js)try{hl={},Object.defineProperty(hl,"passive",{get:function(){ug=!0}}),window.addEventListener("test",hl,hl),window.removeEventListener("test",hl,hl)}catch{ug=!1}var hl;function F2(t,e,n,s,i,o,a,u,d){var p=Array.prototype.slice.call(arguments,3);try{e.apply(n,p)}catch(y){this.onError(y)}}var mu=!1,Hh=null,Wh=!1,dg=null,U2={onError:function(t){mu=!0,Hh=t}};function j2(t,e,n,s,i,o,a,u,d){mu=!1,Hh=null,F2.apply(U2,arguments)}function z2(t,e,n,s,i,o,a,u,d){if(j2.apply(this,arguments),mu){if(mu){var p=Hh;mu=!1,Hh=null}else throw Error(ne(198));Wh||(Wh=!0,dg=p)}}function ca(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,(e.flags&4098)!==0&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function v_(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function rN(t){if(ca(t)!==t)throw Error(ne(188))}function B2(t){var e=t.alternate;if(!e){if(e=ca(t),e===null)throw Error(ne(188));return e!==t?null:t}for(var n=t,s=e;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(s=i.return,s!==null){n=s;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return rN(i),t;if(o===s)return rN(i),e;o=o.sibling}throw Error(ne(188))}if(n.return!==s.return)n=i,s=o;else{for(var a=!1,u=i.child;u;){if(u===n){a=!0,n=i,s=o;break}if(u===s){a=!0,s=i,n=o;break}u=u.sibling}if(!a){for(u=o.child;u;){if(u===n){a=!0,n=o,s=i;break}if(u===s){a=!0,s=o,n=i;break}u=u.sibling}if(!a)throw Error(ne(189))}}if(n.alternate!==s)throw Error(ne(190))}if(n.tag!==3)throw Error(ne(188));return n.stateNode.current===n?t:e}function x_(t){return t=B2(t),t!==null?y_(t):null}function y_(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=y_(t);if(e!==null)return e;t=t.sibling}return null}var w_=Wn.unstable_scheduleCallback,sN=Wn.unstable_cancelCallback,q2=Wn.unstable_shouldYield,G2=Wn.unstable_requestPaint,bt=Wn.unstable_now,H2=Wn.unstable_getCurrentPriorityLevel,Yg=Wn.unstable_ImmediatePriority,N_=Wn.unstable_UserBlockingPriority,Kh=Wn.unstable_NormalPriority,W2=Wn.unstable_LowPriority,__=Wn.unstable_IdlePriority,pm=null,us=null;function K2(t){if(us&&typeof us.onCommitFiberRoot=="function")try{us.onCommitFiberRoot(pm,t,void 0,(t.current.flags&128)===128)}catch{}}var Or=Math.clz32?Math.clz32:J2,Q2=Math.log,Y2=Math.LN2;function J2(t){return t>>>=0,t===0?32:31-(Q2(t)/Y2|0)|0}var vh=64,xh=4194304;function uu(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Qh(t,e){var n=t.pendingLanes;if(n===0)return 0;var s=0,i=t.suspendedLanes,o=t.pingedLanes,a=n&268435455;if(a!==0){var u=a&~i;u!==0?s=uu(u):(o&=a,o!==0&&(s=uu(o)))}else a=n&~i,a!==0?s=uu(a):o!==0&&(s=uu(o));if(s===0)return 0;if(e!==0&&e!==s&&(e&i)===0&&(i=s&-s,o=e&-e,i>=o||i===16&&(o&4194240)!==0))return e;if((s&4)!==0&&(s|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=s;0<e;)n=31-Or(e),i=1<<n,s|=t[n],e&=~i;return s}function X2(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Z2(t,e){for(var n=t.suspendedLanes,s=t.pingedLanes,i=t.expirationTimes,o=t.pendingLanes;0<o;){var a=31-Or(o),u=1<<a,d=i[a];d===-1?((u&n)===0||(u&s)!==0)&&(i[a]=X2(u,e)):d<=e&&(t.expiredLanes|=u),o&=~u}}function hg(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function I_(){var t=vh;return vh<<=1,(vh&4194240)===0&&(vh=64),t}function D0(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Fu(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Or(e),t[e]=n}function R2(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var s=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Or(n),o=1<<i;e[i]=0,s[i]=-1,t[i]=-1,n&=~o}}function Jg(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var s=31-Or(n),i=1<<s;i&e|t[s]&e&&(t[s]|=e),n&=~i}}var qe=0;function E_(t){return t&=-t,1<t?4<t?(t&268435455)!==0?16:536870912:4:1}var S_,Xg,T_,k_,C_,mg=!1,yh=[],Ri=null,eo=null,to=null,Iu=new Map,Eu=new Map,Yi=[],eC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function iN(t,e){switch(t){case"focusin":case"focusout":Ri=null;break;case"dragenter":case"dragleave":eo=null;break;case"mouseover":case"mouseout":to=null;break;case"pointerover":case"pointerout":Iu.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Eu.delete(e.pointerId)}}function tu(t,e,n,s,i,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:s,nativeEvent:o,targetContainers:[i]},e!==null&&(e=ju(e),e!==null&&Xg(e)),t):(t.eventSystemFlags|=s,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function tC(t,e,n,s,i){switch(e){case"focusin":return Ri=tu(Ri,t,e,n,s,i),!0;case"dragenter":return eo=tu(eo,t,e,n,s,i),!0;case"mouseover":return to=tu(to,t,e,n,s,i),!0;case"pointerover":var o=i.pointerId;return Iu.set(o,tu(Iu.get(o)||null,t,e,n,s,i)),!0;case"gotpointercapture":return o=i.pointerId,Eu.set(o,tu(Eu.get(o)||null,t,e,n,s,i)),!0}return!1}function A_(t){var e=Zo(t.target);if(e!==null){var n=ca(e);if(n!==null){if(e=n.tag,e===13){if(e=v_(n),e!==null){t.blockedOn=e,C_(t.priority,function(){T_(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Lh(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=pg(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var s=new n.constructor(n.type,n);lg=s,n.target.dispatchEvent(s),lg=null}else return e=ju(n),e!==null&&Xg(e),t.blockedOn=n,!1;e.shift()}return!0}function oN(t,e,n){Lh(t)&&n.delete(e)}function nC(){mg=!1,Ri!==null&&Lh(Ri)&&(Ri=null),eo!==null&&Lh(eo)&&(eo=null),to!==null&&Lh(to)&&(to=null),Iu.forEach(oN),Eu.forEach(oN)}function nu(t,e){t.blockedOn===e&&(t.blockedOn=null,mg||(mg=!0,Wn.unstable_scheduleCallback(Wn.unstable_NormalPriority,nC)))}function Su(t){function e(i){return nu(i,t)}if(0<yh.length){nu(yh[0],t);for(var n=1;n<yh.length;n++){var s=yh[n];s.blockedOn===t&&(s.blockedOn=null)}}for(Ri!==null&&nu(Ri,t),eo!==null&&nu(eo,t),to!==null&&nu(to,t),Iu.forEach(e),Eu.forEach(e),n=0;n<Yi.length;n++)s=Yi[n],s.blockedOn===t&&(s.blockedOn=null);for(;0<Yi.length&&(n=Yi[0],n.blockedOn===null);)A_(n),n.blockedOn===null&&Yi.shift()}var Cl=ei.ReactCurrentBatchConfig,Yh=!0;function rC(t,e,n,s){var i=qe,o=Cl.transition;Cl.transition=null;try{qe=1,Zg(t,e,n,s)}finally{qe=i,Cl.transition=o}}function sC(t,e,n,s){var i=qe,o=Cl.transition;Cl.transition=null;try{qe=4,Zg(t,e,n,s)}finally{qe=i,Cl.transition=o}}function Zg(t,e,n,s){if(Yh){var i=pg(t,e,n,s);if(i===null)U0(t,e,s,Jh,n),iN(t,s);else if(tC(i,t,e,n,s))s.stopPropagation();else if(iN(t,s),e&4&&-1<eC.indexOf(t)){for(;i!==null;){var o=ju(i);if(o!==null&&S_(o),o=pg(t,e,n,s),o===null&&U0(t,e,s,Jh,n),o===i)break;i=o}i!==null&&s.stopPropagation()}else U0(t,e,s,null,n)}}var Jh=null;function pg(t,e,n,s){if(Jh=null,t=Qg(s),t=Zo(t),t!==null)if(e=ca(t),e===null)t=null;else if(n=e.tag,n===13){if(t=v_(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Jh=t,null}function P_(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(H2()){case Yg:return 1;case N_:return 4;case Kh:case W2:return 16;case __:return 536870912;default:return 16}default:return 16}}var Xi=null,Rg=null,Vh=null;function D_(){if(Vh)return Vh;var t,e=Rg,n=e.length,s,i="value"in Xi?Xi.value:Xi.textContent,o=i.length;for(t=0;t<n&&e[t]===i[t];t++);var a=n-t;for(s=1;s<=a&&e[n-s]===i[o-s];s++);return Vh=i.slice(t,1<s?1-s:void 0)}function Mh(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function wh(){return!0}function aN(){return!1}function Kn(t){function e(n,s,i,o,a){this._reactName=n,this._targetInst=i,this.type=s,this.nativeEvent=o,this.target=a,this.currentTarget=null;for(var u in t)t.hasOwnProperty(u)&&(n=t[u],this[u]=n?n(o):o[u]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?wh:aN,this.isPropagationStopped=aN,this}return dt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=wh)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=wh)},persist:function(){},isPersistent:wh}),e}var Ul={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},eb=Kn(Ul),Uu=dt({},Ul,{view:0,detail:0}),iC=Kn(Uu),O0,L0,ru,fm=dt({},Uu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:tb,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ru&&(ru&&t.type==="mousemove"?(O0=t.screenX-ru.screenX,L0=t.screenY-ru.screenY):L0=O0=0,ru=t),O0)},movementY:function(t){return"movementY"in t?t.movementY:L0}}),lN=Kn(fm),oC=dt({},fm,{dataTransfer:0}),aC=Kn(oC),lC=dt({},Uu,{relatedTarget:0}),V0=Kn(lC),cC=dt({},Ul,{animationName:0,elapsedTime:0,pseudoElement:0}),uC=Kn(cC),dC=dt({},Ul,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),hC=Kn(dC),mC=dt({},Ul,{data:0}),cN=Kn(mC),pC={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},fC={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},gC={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function bC(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=gC[t])?!!e[t]:!1}function tb(){return bC}var vC=dt({},Uu,{key:function(t){if(t.key){var e=pC[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Mh(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?fC[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:tb,charCode:function(t){return t.type==="keypress"?Mh(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Mh(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),xC=Kn(vC),yC=dt({},fm,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),uN=Kn(yC),wC=dt({},Uu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:tb}),NC=Kn(wC),_C=dt({},Ul,{propertyName:0,elapsedTime:0,pseudoElement:0}),IC=Kn(_C),EC=dt({},fm,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),SC=Kn(EC),TC=[9,13,27,32],nb=Js&&"CompositionEvent"in window,pu=null;Js&&"documentMode"in document&&(pu=document.documentMode);var kC=Js&&"TextEvent"in window&&!pu,O_=Js&&(!nb||pu&&8<pu&&11>=pu),dN=" ",hN=!1;function L_(t,e){switch(t){case"keyup":return TC.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function V_(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var gl=!1;function CC(t,e){switch(t){case"compositionend":return V_(e);case"keypress":return e.which!==32?null:(hN=!0,dN);case"textInput":return t=e.data,t===dN&&hN?null:t;default:return null}}function AC(t,e){if(gl)return t==="compositionend"||!nb&&L_(t,e)?(t=D_(),Vh=Rg=Xi=null,gl=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return O_&&e.locale!=="ko"?null:e.data;default:return null}}var PC={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function mN(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!PC[t.type]:e==="textarea"}function M_(t,e,n,s){m_(s),e=Xh(e,"onChange"),0<e.length&&(n=new eb("onChange","change",null,n,s),t.push({event:n,listeners:e}))}var fu=null,Tu=null;function DC(t){K_(t,0)}function gm(t){var e=xl(t);if(o_(e))return t}function OC(t,e){if(t==="change")return e}var $_=!1;Js&&(Js?(_h="oninput"in document,_h||(M0=document.createElement("div"),M0.setAttribute("oninput","return;"),_h=typeof M0.oninput=="function"),Nh=_h):Nh=!1,$_=Nh&&(!document.documentMode||9<document.documentMode));var Nh,_h,M0;function pN(){fu&&(fu.detachEvent("onpropertychange",F_),Tu=fu=null)}function F_(t){if(t.propertyName==="value"&&gm(Tu)){var e=[];M_(e,Tu,t,Qg(t)),b_(DC,e)}}function LC(t,e,n){t==="focusin"?(pN(),fu=e,Tu=n,fu.attachEvent("onpropertychange",F_)):t==="focusout"&&pN()}function VC(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return gm(Tu)}function MC(t,e){if(t==="click")return gm(e)}function $C(t,e){if(t==="input"||t==="change")return gm(e)}function FC(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Vr=typeof Object.is=="function"?Object.is:FC;function ku(t,e){if(Vr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),s=Object.keys(e);if(n.length!==s.length)return!1;for(s=0;s<n.length;s++){var i=n[s];if(!J0.call(e,i)||!Vr(t[i],e[i]))return!1}return!0}function fN(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function gN(t,e){var n=fN(t);t=0;for(var s;n;){if(n.nodeType===3){if(s=t+n.textContent.length,t<=e&&s>=e)return{node:n,offset:e-t};t=s}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=fN(n)}}function U_(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?U_(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function j_(){for(var t=window,e=Gh();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Gh(t.document)}return e}function rb(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function UC(t){var e=j_(),n=t.focusedElem,s=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&U_(n.ownerDocument.documentElement,n)){if(s!==null&&rb(n)){if(e=s.start,t=s.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,o=Math.min(s.start,i);s=s.end===void 0?o:Math.min(s.end,i),!t.extend&&o>s&&(i=s,s=o,o=i),i=gN(n,o);var a=gN(n,s);i&&a&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),o>s?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var jC=Js&&"documentMode"in document&&11>=document.documentMode,bl=null,fg=null,gu=null,gg=!1;function bN(t,e,n){var s=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;gg||bl==null||bl!==Gh(s)||(s=bl,"selectionStart"in s&&rb(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),gu&&ku(gu,s)||(gu=s,s=Xh(fg,"onSelect"),0<s.length&&(e=new eb("onSelect","select",null,e,n),t.push({event:e,listeners:s}),e.target=bl)))}function Ih(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var vl={animationend:Ih("Animation","AnimationEnd"),animationiteration:Ih("Animation","AnimationIteration"),animationstart:Ih("Animation","AnimationStart"),transitionend:Ih("Transition","TransitionEnd")},$0={},z_={};Js&&(z_=document.createElement("div").style,"AnimationEvent"in window||(delete vl.animationend.animation,delete vl.animationiteration.animation,delete vl.animationstart.animation),"TransitionEvent"in window||delete vl.transitionend.transition);function bm(t){if($0[t])return $0[t];if(!vl[t])return t;var e=vl[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in z_)return $0[t]=e[n];return t}var B_=bm("animationend"),q_=bm("animationiteration"),G_=bm("animationstart"),H_=bm("transitionend"),W_=new Map,vN="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function co(t,e){W_.set(t,e),la(e,[t])}for(Eh=0;Eh<vN.length;Eh++)Sh=vN[Eh],xN=Sh.toLowerCase(),yN=Sh[0].toUpperCase()+Sh.slice(1),co(xN,"on"+yN);var Sh,xN,yN,Eh;co(B_,"onAnimationEnd");co(q_,"onAnimationIteration");co(G_,"onAnimationStart");co("dblclick","onDoubleClick");co("focusin","onFocus");co("focusout","onBlur");co(H_,"onTransitionEnd");Dl("onMouseEnter",["mouseout","mouseover"]);Dl("onMouseLeave",["mouseout","mouseover"]);Dl("onPointerEnter",["pointerout","pointerover"]);Dl("onPointerLeave",["pointerout","pointerover"]);la("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));la("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));la("onBeforeInput",["compositionend","keypress","textInput","paste"]);la("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));la("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));la("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var du="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),zC=new Set("cancel close invalid load scroll toggle".split(" ").concat(du));function wN(t,e,n){var s=t.type||"unknown-event";t.currentTarget=n,z2(s,e,void 0,t),t.currentTarget=null}function K_(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var s=t[n],i=s.event;s=s.listeners;e:{var o=void 0;if(e)for(var a=s.length-1;0<=a;a--){var u=s[a],d=u.instance,p=u.currentTarget;if(u=u.listener,d!==o&&i.isPropagationStopped())break e;wN(i,u,p),o=d}else for(a=0;a<s.length;a++){if(u=s[a],d=u.instance,p=u.currentTarget,u=u.listener,d!==o&&i.isPropagationStopped())break e;wN(i,u,p),o=d}}}if(Wh)throw t=dg,Wh=!1,dg=null,t}function et(t,e){var n=e[wg];n===void 0&&(n=e[wg]=new Set);var s=t+"__bubble";n.has(s)||(Q_(e,t,2,!1),n.add(s))}function F0(t,e,n){var s=0;e&&(s|=4),Q_(n,t,s,e)}var Th="_reactListening"+Math.random().toString(36).slice(2);function Cu(t){if(!t[Th]){t[Th]=!0,t_.forEach(function(n){n!=="selectionchange"&&(zC.has(n)||F0(n,!1,t),F0(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Th]||(e[Th]=!0,F0("selectionchange",!1,e))}}function Q_(t,e,n,s){switch(P_(e)){case 1:var i=rC;break;case 4:i=sC;break;default:i=Zg}n=i.bind(null,e,n,t),i=void 0,!ug||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),s?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function U0(t,e,n,s,i){var o=s;if((e&1)===0&&(e&2)===0&&s!==null)e:for(;;){if(s===null)return;var a=s.tag;if(a===3||a===4){var u=s.stateNode.containerInfo;if(u===i||u.nodeType===8&&u.parentNode===i)break;if(a===4)for(a=s.return;a!==null;){var d=a.tag;if((d===3||d===4)&&(d=a.stateNode.containerInfo,d===i||d.nodeType===8&&d.parentNode===i))return;a=a.return}for(;u!==null;){if(a=Zo(u),a===null)return;if(d=a.tag,d===5||d===6){s=o=a;continue e}u=u.parentNode}}s=s.return}b_(function(){var p=o,y=Qg(n),_=[];e:{var N=W_.get(t);if(N!==void 0){var A=eb,z=t;switch(t){case"keypress":if(Mh(n)===0)break e;case"keydown":case"keyup":A=xC;break;case"focusin":z="focus",A=V0;break;case"focusout":z="blur",A=V0;break;case"beforeblur":case"afterblur":A=V0;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":A=lN;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":A=aC;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":A=NC;break;case B_:case q_:case G_:A=uC;break;case H_:A=IC;break;case"scroll":A=iC;break;case"wheel":A=SC;break;case"copy":case"cut":case"paste":A=hC;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":A=uN}var B=(e&4)!==0,g=!B&&t==="scroll",L=B?N!==null?N+"Capture":null:N;B=[];for(var w=p,C;w!==null;){C=w;var W=C.stateNode;if(C.tag===5&&W!==null&&(C=W,L!==null&&(W=_u(w,L),W!=null&&B.push(Au(w,W,C)))),g)break;w=w.return}0<B.length&&(N=new A(N,z,null,n,y),_.push({event:N,listeners:B}))}}if((e&7)===0){e:{if(N=t==="mouseover"||t==="pointerover",A=t==="mouseout"||t==="pointerout",N&&n!==lg&&(z=n.relatedTarget||n.fromElement)&&(Zo(z)||z[Xs]))break e;if((A||N)&&(N=y.window===y?y:(N=y.ownerDocument)?N.defaultView||N.parentWindow:window,A?(z=n.relatedTarget||n.toElement,A=p,z=z?Zo(z):null,z!==null&&(g=ca(z),z!==g||z.tag!==5&&z.tag!==6)&&(z=null)):(A=null,z=p),A!==z)){if(B=lN,W="onMouseLeave",L="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(B=uN,W="onPointerLeave",L="onPointerEnter",w="pointer"),g=A==null?N:xl(A),C=z==null?N:xl(z),N=new B(W,w+"leave",A,n,y),N.target=g,N.relatedTarget=C,W=null,Zo(y)===p&&(B=new B(L,w+"enter",z,n,y),B.target=C,B.relatedTarget=g,W=B),g=W,A&&z)t:{for(B=A,L=z,w=0,C=B;C;C=ml(C))w++;for(C=0,W=L;W;W=ml(W))C++;for(;0<w-C;)B=ml(B),w--;for(;0<C-w;)L=ml(L),C--;for(;w--;){if(B===L||L!==null&&B===L.alternate)break t;B=ml(B),L=ml(L)}B=null}else B=null;A!==null&&NN(_,N,A,B,!1),z!==null&&g!==null&&NN(_,g,z,B,!0)}}e:{if(N=p?xl(p):window,A=N.nodeName&&N.nodeName.toLowerCase(),A==="select"||A==="input"&&N.type==="file")var re=OC;else if(mN(N))if($_)re=$C;else{re=VC;var oe=LC}else(A=N.nodeName)&&A.toLowerCase()==="input"&&(N.type==="checkbox"||N.type==="radio")&&(re=MC);if(re&&(re=re(t,p))){M_(_,re,n,y);break e}oe&&oe(t,N,p),t==="focusout"&&(oe=N._wrapperState)&&oe.controlled&&N.type==="number"&&rg(N,"number",N.value)}switch(oe=p?xl(p):window,t){case"focusin":(mN(oe)||oe.contentEditable==="true")&&(bl=oe,fg=p,gu=null);break;case"focusout":gu=fg=bl=null;break;case"mousedown":gg=!0;break;case"contextmenu":case"mouseup":case"dragend":gg=!1,bN(_,n,y);break;case"selectionchange":if(jC)break;case"keydown":case"keyup":bN(_,n,y)}var T;if(nb)e:{switch(t){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else gl?L_(t,n)&&(S="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(S="onCompositionStart");S&&(O_&&n.locale!=="ko"&&(gl||S!=="onCompositionStart"?S==="onCompositionEnd"&&gl&&(T=D_()):(Xi=y,Rg="value"in Xi?Xi.value:Xi.textContent,gl=!0)),oe=Xh(p,S),0<oe.length&&(S=new cN(S,t,null,n,y),_.push({event:S,listeners:oe}),T?S.data=T:(T=V_(n),T!==null&&(S.data=T)))),(T=kC?CC(t,n):AC(t,n))&&(p=Xh(p,"onBeforeInput"),0<p.length&&(y=new cN("onBeforeInput","beforeinput",null,n,y),_.push({event:y,listeners:p}),y.data=T))}K_(_,e)})}function Au(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Xh(t,e){for(var n=e+"Capture",s=[];t!==null;){var i=t,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=_u(t,n),o!=null&&s.unshift(Au(t,o,i)),o=_u(t,e),o!=null&&s.push(Au(t,o,i))),t=t.return}return s}function ml(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function NN(t,e,n,s,i){for(var o=e._reactName,a=[];n!==null&&n!==s;){var u=n,d=u.alternate,p=u.stateNode;if(d!==null&&d===s)break;u.tag===5&&p!==null&&(u=p,i?(d=_u(n,o),d!=null&&a.unshift(Au(n,d,u))):i||(d=_u(n,o),d!=null&&a.push(Au(n,d,u)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var BC=/\r\n?/g,qC=/\u0000|\uFFFD/g;function _N(t){return(typeof t=="string"?t:""+t).replace(BC,`
`).replace(qC,"")}function kh(t,e,n){if(e=_N(e),_N(t)!==e&&n)throw Error(ne(425))}function Zh(){}var bg=null,vg=null;function xg(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var yg=typeof setTimeout=="function"?setTimeout:void 0,GC=typeof clearTimeout=="function"?clearTimeout:void 0,IN=typeof Promise=="function"?Promise:void 0,HC=typeof queueMicrotask=="function"?queueMicrotask:typeof IN<"u"?function(t){return IN.resolve(null).then(t).catch(WC)}:yg;function WC(t){setTimeout(function(){throw t})}function j0(t,e){var n=e,s=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(s===0){t.removeChild(i),Su(e);return}s--}else n!=="$"&&n!=="$?"&&n!=="$!"||s++;n=i}while(n);Su(e)}function no(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function EN(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var jl=Math.random().toString(36).slice(2),cs="__reactFiber$"+jl,Pu="__reactProps$"+jl,Xs="__reactContainer$"+jl,wg="__reactEvents$"+jl,KC="__reactListeners$"+jl,QC="__reactHandles$"+jl;function Zo(t){var e=t[cs];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Xs]||n[cs]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=EN(t);t!==null;){if(n=t[cs])return n;t=EN(t)}return e}t=n,n=t.parentNode}return null}function ju(t){return t=t[cs]||t[Xs],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function xl(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ne(33))}function vm(t){return t[Pu]||null}var Ng=[],yl=-1;function uo(t){return{current:t}}function tt(t){0>yl||(t.current=Ng[yl],Ng[yl]=null,yl--)}function Xe(t,e){yl++,Ng[yl]=t.current,t.current=e}var lo={},un=uo(lo),kn=uo(!1),ra=lo;function Ol(t,e){var n=t.type.contextTypes;if(!n)return lo;var s=t.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===e)return s.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=e[o];return s&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Cn(t){return t=t.childContextTypes,t!=null}function Rh(){tt(kn),tt(un)}function SN(t,e,n){if(un.current!==lo)throw Error(ne(168));Xe(un,e),Xe(kn,n)}function Y_(t,e,n){var s=t.stateNode;if(e=e.childContextTypes,typeof s.getChildContext!="function")return n;s=s.getChildContext();for(var i in s)if(!(i in e))throw Error(ne(108,L2(t)||"Unknown",i));return dt({},n,s)}function em(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||lo,ra=un.current,Xe(un,t),Xe(kn,kn.current),!0}function TN(t,e,n){var s=t.stateNode;if(!s)throw Error(ne(169));n?(t=Y_(t,e,ra),s.__reactInternalMemoizedMergedChildContext=t,tt(kn),tt(un),Xe(un,t)):tt(kn),Xe(kn,n)}var Ws=null,xm=!1,z0=!1;function J_(t){Ws===null?Ws=[t]:Ws.push(t)}function YC(t){xm=!0,J_(t)}function ho(){if(!z0&&Ws!==null){z0=!0;var t=0,e=qe;try{var n=Ws;for(qe=1;t<n.length;t++){var s=n[t];do s=s(!0);while(s!==null)}Ws=null,xm=!1}catch(i){throw Ws!==null&&(Ws=Ws.slice(t+1)),w_(Yg,ho),i}finally{qe=e,z0=!1}}return null}var wl=[],Nl=0,tm=null,nm=0,ar=[],lr=0,sa=null,Ks=1,Qs="";function Jo(t,e){wl[Nl++]=nm,wl[Nl++]=tm,tm=t,nm=e}function X_(t,e,n){ar[lr++]=Ks,ar[lr++]=Qs,ar[lr++]=sa,sa=t;var s=Ks;t=Qs;var i=32-Or(s)-1;s&=~(1<<i),n+=1;var o=32-Or(e)+i;if(30<o){var a=i-i%5;o=(s&(1<<a)-1).toString(32),s>>=a,i-=a,Ks=1<<32-Or(e)+i|n<<i|s,Qs=o+t}else Ks=1<<o|n<<i|s,Qs=t}function sb(t){t.return!==null&&(Jo(t,1),X_(t,1,0))}function ib(t){for(;t===tm;)tm=wl[--Nl],wl[Nl]=null,nm=wl[--Nl],wl[Nl]=null;for(;t===sa;)sa=ar[--lr],ar[lr]=null,Qs=ar[--lr],ar[lr]=null,Ks=ar[--lr],ar[lr]=null}var Hn=null,Gn=null,rt=!1,Dr=null;function Z_(t,e){var n=cr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function kN(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Hn=t,Gn=no(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Hn=t,Gn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=sa!==null?{id:Ks,overflow:Qs}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=cr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Hn=t,Gn=null,!0):!1;default:return!1}}function _g(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Ig(t){if(rt){var e=Gn;if(e){var n=e;if(!kN(t,e)){if(_g(t))throw Error(ne(418));e=no(n.nextSibling);var s=Hn;e&&kN(t,e)?Z_(s,n):(t.flags=t.flags&-4097|2,rt=!1,Hn=t)}}else{if(_g(t))throw Error(ne(418));t.flags=t.flags&-4097|2,rt=!1,Hn=t}}}function CN(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Hn=t}function Ch(t){if(t!==Hn)return!1;if(!rt)return CN(t),rt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!xg(t.type,t.memoizedProps)),e&&(e=Gn)){if(_g(t))throw R_(),Error(ne(418));for(;e;)Z_(t,e),e=no(e.nextSibling)}if(CN(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ne(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Gn=no(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Gn=null}}else Gn=Hn?no(t.stateNode.nextSibling):null;return!0}function R_(){for(var t=Gn;t;)t=no(t.nextSibling)}function Ll(){Gn=Hn=null,rt=!1}function ob(t){Dr===null?Dr=[t]:Dr.push(t)}var JC=ei.ReactCurrentBatchConfig;function su(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ne(309));var s=n.stateNode}if(!s)throw Error(ne(147,t));var i=s,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(a){var u=i.refs;a===null?delete u[o]:u[o]=a},e._stringRef=o,e)}if(typeof t!="string")throw Error(ne(284));if(!n._owner)throw Error(ne(290,t))}return t}function Ah(t,e){throw t=Object.prototype.toString.call(e),Error(ne(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function AN(t){var e=t._init;return e(t._payload)}function e1(t){function e(L,w){if(t){var C=L.deletions;C===null?(L.deletions=[w],L.flags|=16):C.push(w)}}function n(L,w){if(!t)return null;for(;w!==null;)e(L,w),w=w.sibling;return null}function s(L,w){for(L=new Map;w!==null;)w.key!==null?L.set(w.key,w):L.set(w.index,w),w=w.sibling;return L}function i(L,w){return L=oo(L,w),L.index=0,L.sibling=null,L}function o(L,w,C){return L.index=C,t?(C=L.alternate,C!==null?(C=C.index,C<w?(L.flags|=2,w):C):(L.flags|=2,w)):(L.flags|=1048576,w)}function a(L){return t&&L.alternate===null&&(L.flags|=2),L}function u(L,w,C,W){return w===null||w.tag!==6?(w=Q0(C,L.mode,W),w.return=L,w):(w=i(w,C),w.return=L,w)}function d(L,w,C,W){var re=C.type;return re===fl?y(L,w,C.props.children,W,C.key):w!==null&&(w.elementType===re||typeof re=="object"&&re!==null&&re.$$typeof===Ki&&AN(re)===w.type)?(W=i(w,C.props),W.ref=su(L,w,C),W.return=L,W):(W=qh(C.type,C.key,C.props,null,L.mode,W),W.ref=su(L,w,C),W.return=L,W)}function p(L,w,C,W){return w===null||w.tag!==4||w.stateNode.containerInfo!==C.containerInfo||w.stateNode.implementation!==C.implementation?(w=Y0(C,L.mode,W),w.return=L,w):(w=i(w,C.children||[]),w.return=L,w)}function y(L,w,C,W,re){return w===null||w.tag!==7?(w=na(C,L.mode,W,re),w.return=L,w):(w=i(w,C),w.return=L,w)}function _(L,w,C){if(typeof w=="string"&&w!==""||typeof w=="number")return w=Q0(""+w,L.mode,C),w.return=L,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case fh:return C=qh(w.type,w.key,w.props,null,L.mode,C),C.ref=su(L,null,w),C.return=L,C;case pl:return w=Y0(w,L.mode,C),w.return=L,w;case Ki:var W=w._init;return _(L,W(w._payload),C)}if(cu(w)||eu(w))return w=na(w,L.mode,C,null),w.return=L,w;Ah(L,w)}return null}function N(L,w,C,W){var re=w!==null?w.key:null;if(typeof C=="string"&&C!==""||typeof C=="number")return re!==null?null:u(L,w,""+C,W);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case fh:return C.key===re?d(L,w,C,W):null;case pl:return C.key===re?p(L,w,C,W):null;case Ki:return re=C._init,N(L,w,re(C._payload),W)}if(cu(C)||eu(C))return re!==null?null:y(L,w,C,W,null);Ah(L,C)}return null}function A(L,w,C,W,re){if(typeof W=="string"&&W!==""||typeof W=="number")return L=L.get(C)||null,u(w,L,""+W,re);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case fh:return L=L.get(W.key===null?C:W.key)||null,d(w,L,W,re);case pl:return L=L.get(W.key===null?C:W.key)||null,p(w,L,W,re);case Ki:var oe=W._init;return A(L,w,C,oe(W._payload),re)}if(cu(W)||eu(W))return L=L.get(C)||null,y(w,L,W,re,null);Ah(w,W)}return null}function z(L,w,C,W){for(var re=null,oe=null,T=w,S=w=0,k=null;T!==null&&S<C.length;S++){T.index>S?(k=T,T=null):k=T.sibling;var M=N(L,T,C[S],W);if(M===null){T===null&&(T=k);break}t&&T&&M.alternate===null&&e(L,T),w=o(M,w,S),oe===null?re=M:oe.sibling=M,oe=M,T=k}if(S===C.length)return n(L,T),rt&&Jo(L,S),re;if(T===null){for(;S<C.length;S++)T=_(L,C[S],W),T!==null&&(w=o(T,w,S),oe===null?re=T:oe.sibling=T,oe=T);return rt&&Jo(L,S),re}for(T=s(L,T);S<C.length;S++)k=A(T,L,S,C[S],W),k!==null&&(t&&k.alternate!==null&&T.delete(k.key===null?S:k.key),w=o(k,w,S),oe===null?re=k:oe.sibling=k,oe=k);return t&&T.forEach(function($){return e(L,$)}),rt&&Jo(L,S),re}function B(L,w,C,W){var re=eu(C);if(typeof re!="function")throw Error(ne(150));if(C=re.call(C),C==null)throw Error(ne(151));for(var oe=re=null,T=w,S=w=0,k=null,M=C.next();T!==null&&!M.done;S++,M=C.next()){T.index>S?(k=T,T=null):k=T.sibling;var $=N(L,T,M.value,W);if($===null){T===null&&(T=k);break}t&&T&&$.alternate===null&&e(L,T),w=o($,w,S),oe===null?re=$:oe.sibling=$,oe=$,T=k}if(M.done)return n(L,T),rt&&Jo(L,S),re;if(T===null){for(;!M.done;S++,M=C.next())M=_(L,M.value,W),M!==null&&(w=o(M,w,S),oe===null?re=M:oe.sibling=M,oe=M);return rt&&Jo(L,S),re}for(T=s(L,T);!M.done;S++,M=C.next())M=A(T,L,S,M.value,W),M!==null&&(t&&M.alternate!==null&&T.delete(M.key===null?S:M.key),w=o(M,w,S),oe===null?re=M:oe.sibling=M,oe=M);return t&&T.forEach(function(q){return e(L,q)}),rt&&Jo(L,S),re}function g(L,w,C,W){if(typeof C=="object"&&C!==null&&C.type===fl&&C.key===null&&(C=C.props.children),typeof C=="object"&&C!==null){switch(C.$$typeof){case fh:e:{for(var re=C.key,oe=w;oe!==null;){if(oe.key===re){if(re=C.type,re===fl){if(oe.tag===7){n(L,oe.sibling),w=i(oe,C.props.children),w.return=L,L=w;break e}}else if(oe.elementType===re||typeof re=="object"&&re!==null&&re.$$typeof===Ki&&AN(re)===oe.type){n(L,oe.sibling),w=i(oe,C.props),w.ref=su(L,oe,C),w.return=L,L=w;break e}n(L,oe);break}else e(L,oe);oe=oe.sibling}C.type===fl?(w=na(C.props.children,L.mode,W,C.key),w.return=L,L=w):(W=qh(C.type,C.key,C.props,null,L.mode,W),W.ref=su(L,w,C),W.return=L,L=W)}return a(L);case pl:e:{for(oe=C.key;w!==null;){if(w.key===oe)if(w.tag===4&&w.stateNode.containerInfo===C.containerInfo&&w.stateNode.implementation===C.implementation){n(L,w.sibling),w=i(w,C.children||[]),w.return=L,L=w;break e}else{n(L,w);break}else e(L,w);w=w.sibling}w=Y0(C,L.mode,W),w.return=L,L=w}return a(L);case Ki:return oe=C._init,g(L,w,oe(C._payload),W)}if(cu(C))return z(L,w,C,W);if(eu(C))return B(L,w,C,W);Ah(L,C)}return typeof C=="string"&&C!==""||typeof C=="number"?(C=""+C,w!==null&&w.tag===6?(n(L,w.sibling),w=i(w,C),w.return=L,L=w):(n(L,w),w=Q0(C,L.mode,W),w.return=L,L=w),a(L)):n(L,w)}return g}var Vl=e1(!0),t1=e1(!1),rm=uo(null),sm=null,_l=null,ab=null;function lb(){ab=_l=sm=null}function cb(t){var e=rm.current;tt(rm),t._currentValue=e}function Eg(t,e,n){for(;t!==null;){var s=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,s!==null&&(s.childLanes|=e)):s!==null&&(s.childLanes&e)!==e&&(s.childLanes|=e),t===n)break;t=t.return}}function Al(t,e){sm=t,ab=_l=null,t=t.dependencies,t!==null&&t.firstContext!==null&&((t.lanes&e)!==0&&(Tn=!0),t.firstContext=null)}function dr(t){var e=t._currentValue;if(ab!==t)if(t={context:t,memoizedValue:e,next:null},_l===null){if(sm===null)throw Error(ne(308));_l=t,sm.dependencies={lanes:0,firstContext:t}}else _l=_l.next=t;return e}var Ro=null;function ub(t){Ro===null?Ro=[t]:Ro.push(t)}function n1(t,e,n,s){var i=e.interleaved;return i===null?(n.next=n,ub(e)):(n.next=i.next,i.next=n),e.interleaved=n,Zs(t,s)}function Zs(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Qi=!1;function db(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function r1(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ys(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ro(t,e,n){var s=t.updateQueue;if(s===null)return null;if(s=s.shared,(je&2)!==0){var i=s.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),s.pending=e,Zs(t,n)}return i=s.interleaved,i===null?(e.next=e,ub(s)):(e.next=i.next,i.next=e),s.interleaved=e,Zs(t,n)}function $h(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var s=e.lanes;s&=t.pendingLanes,n|=s,e.lanes=n,Jg(t,n)}}function PN(t,e){var n=t.updateQueue,s=t.alternate;if(s!==null&&(s=s.updateQueue,n===s)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=a:o=o.next=a,n=n.next}while(n!==null);o===null?i=o=e:o=o.next=e}else i=o=e;n={baseState:s.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:s.shared,effects:s.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function im(t,e,n,s){var i=t.updateQueue;Qi=!1;var o=i.firstBaseUpdate,a=i.lastBaseUpdate,u=i.shared.pending;if(u!==null){i.shared.pending=null;var d=u,p=d.next;d.next=null,a===null?o=p:a.next=p,a=d;var y=t.alternate;y!==null&&(y=y.updateQueue,u=y.lastBaseUpdate,u!==a&&(u===null?y.firstBaseUpdate=p:u.next=p,y.lastBaseUpdate=d))}if(o!==null){var _=i.baseState;a=0,y=p=d=null,u=o;do{var N=u.lane,A=u.eventTime;if((s&N)===N){y!==null&&(y=y.next={eventTime:A,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var z=t,B=u;switch(N=e,A=n,B.tag){case 1:if(z=B.payload,typeof z=="function"){_=z.call(A,_,N);break e}_=z;break e;case 3:z.flags=z.flags&-65537|128;case 0:if(z=B.payload,N=typeof z=="function"?z.call(A,_,N):z,N==null)break e;_=dt({},_,N);break e;case 2:Qi=!0}}u.callback!==null&&u.lane!==0&&(t.flags|=64,N=i.effects,N===null?i.effects=[u]:N.push(u))}else A={eventTime:A,lane:N,tag:u.tag,payload:u.payload,callback:u.callback,next:null},y===null?(p=y=A,d=_):y=y.next=A,a|=N;if(u=u.next,u===null){if(u=i.shared.pending,u===null)break;N=u,u=N.next,N.next=null,i.lastBaseUpdate=N,i.shared.pending=null}}while(!0);if(y===null&&(d=_),i.baseState=d,i.firstBaseUpdate=p,i.lastBaseUpdate=y,e=i.shared.interleaved,e!==null){i=e;do a|=i.lane,i=i.next;while(i!==e)}else o===null&&(i.shared.lanes=0);oa|=a,t.lanes=a,t.memoizedState=_}}function DN(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var s=t[e],i=s.callback;if(i!==null){if(s.callback=null,s=n,typeof i!="function")throw Error(ne(191,i));i.call(s)}}}var zu={},ds=uo(zu),Du=uo(zu),Ou=uo(zu);function ea(t){if(t===zu)throw Error(ne(174));return t}function hb(t,e){switch(Xe(Ou,e),Xe(Du,t),Xe(ds,zu),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:ig(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=ig(e,t)}tt(ds),Xe(ds,e)}function Ml(){tt(ds),tt(Du),tt(Ou)}function s1(t){ea(Ou.current);var e=ea(ds.current),n=ig(e,t.type);e!==n&&(Xe(Du,t),Xe(ds,n))}function mb(t){Du.current===t&&(tt(ds),tt(Du))}var ct=uo(0);function om(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if((e.flags&128)!==0)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var B0=[];function pb(){for(var t=0;t<B0.length;t++)B0[t]._workInProgressVersionPrimary=null;B0.length=0}var Fh=ei.ReactCurrentDispatcher,q0=ei.ReactCurrentBatchConfig,ia=0,ut=null,Ft=null,zt=null,am=!1,bu=!1,Lu=0,XC=0;function an(){throw Error(ne(321))}function fb(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Vr(t[n],e[n]))return!1;return!0}function gb(t,e,n,s,i,o){if(ia=o,ut=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Fh.current=t===null||t.memoizedState===null?t5:n5,t=n(s,i),bu){o=0;do{if(bu=!1,Lu=0,25<=o)throw Error(ne(301));o+=1,zt=Ft=null,e.updateQueue=null,Fh.current=r5,t=n(s,i)}while(bu)}if(Fh.current=lm,e=Ft!==null&&Ft.next!==null,ia=0,zt=Ft=ut=null,am=!1,e)throw Error(ne(300));return t}function bb(){var t=Lu!==0;return Lu=0,t}function ls(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return zt===null?ut.memoizedState=zt=t:zt=zt.next=t,zt}function hr(){if(Ft===null){var t=ut.alternate;t=t!==null?t.memoizedState:null}else t=Ft.next;var e=zt===null?ut.memoizedState:zt.next;if(e!==null)zt=e,Ft=t;else{if(t===null)throw Error(ne(310));Ft=t,t={memoizedState:Ft.memoizedState,baseState:Ft.baseState,baseQueue:Ft.baseQueue,queue:Ft.queue,next:null},zt===null?ut.memoizedState=zt=t:zt=zt.next=t}return zt}function Vu(t,e){return typeof e=="function"?e(t):e}function G0(t){var e=hr(),n=e.queue;if(n===null)throw Error(ne(311));n.lastRenderedReducer=t;var s=Ft,i=s.baseQueue,o=n.pending;if(o!==null){if(i!==null){var a=i.next;i.next=o.next,o.next=a}s.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,s=s.baseState;var u=a=null,d=null,p=o;do{var y=p.lane;if((ia&y)===y)d!==null&&(d=d.next={lane:0,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null}),s=p.hasEagerState?p.eagerState:t(s,p.action);else{var _={lane:y,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null};d===null?(u=d=_,a=s):d=d.next=_,ut.lanes|=y,oa|=y}p=p.next}while(p!==null&&p!==o);d===null?a=s:d.next=u,Vr(s,e.memoizedState)||(Tn=!0),e.memoizedState=s,e.baseState=a,e.baseQueue=d,n.lastRenderedState=s}if(t=n.interleaved,t!==null){i=t;do o=i.lane,ut.lanes|=o,oa|=o,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function H0(t){var e=hr(),n=e.queue;if(n===null)throw Error(ne(311));n.lastRenderedReducer=t;var s=n.dispatch,i=n.pending,o=e.memoizedState;if(i!==null){n.pending=null;var a=i=i.next;do o=t(o,a.action),a=a.next;while(a!==i);Vr(o,e.memoizedState)||(Tn=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,s]}function i1(){}function o1(t,e){var n=ut,s=hr(),i=e(),o=!Vr(s.memoizedState,i);if(o&&(s.memoizedState=i,Tn=!0),s=s.queue,vb(c1.bind(null,n,s,t),[t]),s.getSnapshot!==e||o||zt!==null&&zt.memoizedState.tag&1){if(n.flags|=2048,Mu(9,l1.bind(null,n,s,i,e),void 0,null),Bt===null)throw Error(ne(349));(ia&30)!==0||a1(n,e,i)}return i}function a1(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ut.updateQueue,e===null?(e={lastEffect:null,stores:null},ut.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function l1(t,e,n,s){e.value=n,e.getSnapshot=s,u1(e)&&d1(t)}function c1(t,e,n){return n(function(){u1(e)&&d1(t)})}function u1(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Vr(t,n)}catch{return!0}}function d1(t){var e=Zs(t,1);e!==null&&Lr(e,t,1,-1)}function ON(t){var e=ls();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vu,lastRenderedState:t},e.queue=t,t=t.dispatch=e5.bind(null,ut,t),[e.memoizedState,t]}function Mu(t,e,n,s){return t={tag:t,create:e,destroy:n,deps:s,next:null},e=ut.updateQueue,e===null?(e={lastEffect:null,stores:null},ut.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(s=n.next,n.next=t,t.next=s,e.lastEffect=t)),t}function h1(){return hr().memoizedState}function Uh(t,e,n,s){var i=ls();ut.flags|=t,i.memoizedState=Mu(1|e,n,void 0,s===void 0?null:s)}function ym(t,e,n,s){var i=hr();s=s===void 0?null:s;var o=void 0;if(Ft!==null){var a=Ft.memoizedState;if(o=a.destroy,s!==null&&fb(s,a.deps)){i.memoizedState=Mu(e,n,o,s);return}}ut.flags|=t,i.memoizedState=Mu(1|e,n,o,s)}function LN(t,e){return Uh(8390656,8,t,e)}function vb(t,e){return ym(2048,8,t,e)}function m1(t,e){return ym(4,2,t,e)}function p1(t,e){return ym(4,4,t,e)}function f1(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function g1(t,e,n){return n=n!=null?n.concat([t]):null,ym(4,4,f1.bind(null,e,t),n)}function xb(){}function b1(t,e){var n=hr();e=e===void 0?null:e;var s=n.memoizedState;return s!==null&&e!==null&&fb(e,s[1])?s[0]:(n.memoizedState=[t,e],t)}function v1(t,e){var n=hr();e=e===void 0?null:e;var s=n.memoizedState;return s!==null&&e!==null&&fb(e,s[1])?s[0]:(t=t(),n.memoizedState=[t,e],t)}function x1(t,e,n){return(ia&21)===0?(t.baseState&&(t.baseState=!1,Tn=!0),t.memoizedState=n):(Vr(n,e)||(n=I_(),ut.lanes|=n,oa|=n,t.baseState=!0),e)}function ZC(t,e){var n=qe;qe=n!==0&&4>n?n:4,t(!0);var s=q0.transition;q0.transition={};try{t(!1),e()}finally{qe=n,q0.transition=s}}function y1(){return hr().memoizedState}function RC(t,e,n){var s=io(t);if(n={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null},w1(t))N1(e,n);else if(n=n1(t,e,n,s),n!==null){var i=xn();Lr(n,t,s,i),_1(n,e,s)}}function e5(t,e,n){var s=io(t),i={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null};if(w1(t))N1(e,i);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var a=e.lastRenderedState,u=o(a,n);if(i.hasEagerState=!0,i.eagerState=u,Vr(u,a)){var d=e.interleaved;d===null?(i.next=i,ub(e)):(i.next=d.next,d.next=i),e.interleaved=i;return}}catch{}n=n1(t,e,i,s),n!==null&&(i=xn(),Lr(n,t,s,i),_1(n,e,s))}}function w1(t){var e=t.alternate;return t===ut||e!==null&&e===ut}function N1(t,e){bu=am=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function _1(t,e,n){if((n&4194240)!==0){var s=e.lanes;s&=t.pendingLanes,n|=s,e.lanes=n,Jg(t,n)}}var lm={readContext:dr,useCallback:an,useContext:an,useEffect:an,useImperativeHandle:an,useInsertionEffect:an,useLayoutEffect:an,useMemo:an,useReducer:an,useRef:an,useState:an,useDebugValue:an,useDeferredValue:an,useTransition:an,useMutableSource:an,useSyncExternalStore:an,useId:an,unstable_isNewReconciler:!1},t5={readContext:dr,useCallback:function(t,e){return ls().memoizedState=[t,e===void 0?null:e],t},useContext:dr,useEffect:LN,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Uh(4194308,4,f1.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Uh(4194308,4,t,e)},useInsertionEffect:function(t,e){return Uh(4,2,t,e)},useMemo:function(t,e){var n=ls();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var s=ls();return e=n!==void 0?n(e):e,s.memoizedState=s.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},s.queue=t,t=t.dispatch=RC.bind(null,ut,t),[s.memoizedState,t]},useRef:function(t){var e=ls();return t={current:t},e.memoizedState=t},useState:ON,useDebugValue:xb,useDeferredValue:function(t){return ls().memoizedState=t},useTransition:function(){var t=ON(!1),e=t[0];return t=ZC.bind(null,t[1]),ls().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var s=ut,i=ls();if(rt){if(n===void 0)throw Error(ne(407));n=n()}else{if(n=e(),Bt===null)throw Error(ne(349));(ia&30)!==0||a1(s,e,n)}i.memoizedState=n;var o={value:n,getSnapshot:e};return i.queue=o,LN(c1.bind(null,s,o,t),[t]),s.flags|=2048,Mu(9,l1.bind(null,s,o,n,e),void 0,null),n},useId:function(){var t=ls(),e=Bt.identifierPrefix;if(rt){var n=Qs,s=Ks;n=(s&~(1<<32-Or(s)-1)).toString(32)+n,e=":"+e+"R"+n,n=Lu++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=XC++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},n5={readContext:dr,useCallback:b1,useContext:dr,useEffect:vb,useImperativeHandle:g1,useInsertionEffect:m1,useLayoutEffect:p1,useMemo:v1,useReducer:G0,useRef:h1,useState:function(){return G0(Vu)},useDebugValue:xb,useDeferredValue:function(t){var e=hr();return x1(e,Ft.memoizedState,t)},useTransition:function(){var t=G0(Vu)[0],e=hr().memoizedState;return[t,e]},useMutableSource:i1,useSyncExternalStore:o1,useId:y1,unstable_isNewReconciler:!1},r5={readContext:dr,useCallback:b1,useContext:dr,useEffect:vb,useImperativeHandle:g1,useInsertionEffect:m1,useLayoutEffect:p1,useMemo:v1,useReducer:H0,useRef:h1,useState:function(){return H0(Vu)},useDebugValue:xb,useDeferredValue:function(t){var e=hr();return Ft===null?e.memoizedState=t:x1(e,Ft.memoizedState,t)},useTransition:function(){var t=H0(Vu)[0],e=hr().memoizedState;return[t,e]},useMutableSource:i1,useSyncExternalStore:o1,useId:y1,unstable_isNewReconciler:!1};function Ar(t,e){if(t&&t.defaultProps){e=dt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Sg(t,e,n,s){e=t.memoizedState,n=n(s,e),n=n==null?e:dt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var wm={isMounted:function(t){return(t=t._reactInternals)?ca(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var s=xn(),i=io(t),o=Ys(s,i);o.payload=e,n!=null&&(o.callback=n),e=ro(t,o,i),e!==null&&(Lr(e,t,i,s),$h(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var s=xn(),i=io(t),o=Ys(s,i);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=ro(t,o,i),e!==null&&(Lr(e,t,i,s),$h(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=xn(),s=io(t),i=Ys(n,s);i.tag=2,e!=null&&(i.callback=e),e=ro(t,i,s),e!==null&&(Lr(e,t,s,n),$h(e,t,s))}};function VN(t,e,n,s,i,o,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(s,o,a):e.prototype&&e.prototype.isPureReactComponent?!ku(n,s)||!ku(i,o):!0}function I1(t,e,n){var s=!1,i=lo,o=e.contextType;return typeof o=="object"&&o!==null?o=dr(o):(i=Cn(e)?ra:un.current,s=e.contextTypes,o=(s=s!=null)?Ol(t,i):lo),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=wm,t.stateNode=e,e._reactInternals=t,s&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function MN(t,e,n,s){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,s),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,s),e.state!==t&&wm.enqueueReplaceState(e,e.state,null)}function Tg(t,e,n,s){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},db(t);var o=e.contextType;typeof o=="object"&&o!==null?i.context=dr(o):(o=Cn(e)?ra:un.current,i.context=Ol(t,o)),i.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(Sg(t,e,o,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&wm.enqueueReplaceState(i,i.state,null),im(t,n,i,s),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function $l(t,e){try{var n="",s=e;do n+=O2(s),s=s.return;while(s);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:i,digest:null}}function W0(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function kg(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var s5=typeof WeakMap=="function"?WeakMap:Map;function E1(t,e,n){n=Ys(-1,n),n.tag=3,n.payload={element:null};var s=e.value;return n.callback=function(){um||(um=!0,Fg=s),kg(t,e)},n}function S1(t,e,n){n=Ys(-1,n),n.tag=3;var s=t.type.getDerivedStateFromError;if(typeof s=="function"){var i=e.value;n.payload=function(){return s(i)},n.callback=function(){kg(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){kg(t,e),typeof s!="function"&&(so===null?so=new Set([this]):so.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function $N(t,e,n){var s=t.pingCache;if(s===null){s=t.pingCache=new s5;var i=new Set;s.set(e,i)}else i=s.get(e),i===void 0&&(i=new Set,s.set(e,i));i.has(n)||(i.add(n),t=v5.bind(null,t,e,n),e.then(t,t))}function FN(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function UN(t,e,n,s,i){return(t.mode&1)===0?(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Ys(-1,1),e.tag=2,ro(n,e,1))),n.lanes|=1),t):(t.flags|=65536,t.lanes=i,t)}var i5=ei.ReactCurrentOwner,Tn=!1;function vn(t,e,n,s){e.child=t===null?t1(e,null,n,s):Vl(e,t.child,n,s)}function jN(t,e,n,s,i){n=n.render;var o=e.ref;return Al(e,i),s=gb(t,e,n,s,o,i),n=bb(),t!==null&&!Tn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Rs(t,e,i)):(rt&&n&&sb(e),e.flags|=1,vn(t,e,s,i),e.child)}function zN(t,e,n,s,i){if(t===null){var o=n.type;return typeof o=="function"&&!Tb(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,T1(t,e,o,s,i)):(t=qh(n.type,null,s,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,(t.lanes&i)===0){var a=o.memoizedProps;if(n=n.compare,n=n!==null?n:ku,n(a,s)&&t.ref===e.ref)return Rs(t,e,i)}return e.flags|=1,t=oo(o,s),t.ref=e.ref,t.return=e,e.child=t}function T1(t,e,n,s,i){if(t!==null){var o=t.memoizedProps;if(ku(o,s)&&t.ref===e.ref)if(Tn=!1,e.pendingProps=s=o,(t.lanes&i)!==0)(t.flags&131072)!==0&&(Tn=!0);else return e.lanes=t.lanes,Rs(t,e,i)}return Cg(t,e,n,s,i)}function k1(t,e,n){var s=e.pendingProps,i=s.children,o=t!==null?t.memoizedState:null;if(s.mode==="hidden")if((e.mode&1)===0)e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Xe(El,qn),qn|=n;else{if((n&1073741824)===0)return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Xe(El,qn),qn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=o!==null?o.baseLanes:n,Xe(El,qn),qn|=s}else o!==null?(s=o.baseLanes|n,e.memoizedState=null):s=n,Xe(El,qn),qn|=s;return vn(t,e,i,n),e.child}function C1(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Cg(t,e,n,s,i){var o=Cn(n)?ra:un.current;return o=Ol(e,o),Al(e,i),n=gb(t,e,n,s,o,i),s=bb(),t!==null&&!Tn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Rs(t,e,i)):(rt&&s&&sb(e),e.flags|=1,vn(t,e,n,i),e.child)}function BN(t,e,n,s,i){if(Cn(n)){var o=!0;em(e)}else o=!1;if(Al(e,i),e.stateNode===null)jh(t,e),I1(e,n,s),Tg(e,n,s,i),s=!0;else if(t===null){var a=e.stateNode,u=e.memoizedProps;a.props=u;var d=a.context,p=n.contextType;typeof p=="object"&&p!==null?p=dr(p):(p=Cn(n)?ra:un.current,p=Ol(e,p));var y=n.getDerivedStateFromProps,_=typeof y=="function"||typeof a.getSnapshotBeforeUpdate=="function";_||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(u!==s||d!==p)&&MN(e,a,s,p),Qi=!1;var N=e.memoizedState;a.state=N,im(e,s,a,i),d=e.memoizedState,u!==s||N!==d||kn.current||Qi?(typeof y=="function"&&(Sg(e,n,y,s),d=e.memoizedState),(u=Qi||VN(e,n,u,s,N,d,p))?(_||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=s,e.memoizedState=d),a.props=s,a.state=d,a.context=p,s=u):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),s=!1)}else{a=e.stateNode,r1(t,e),u=e.memoizedProps,p=e.type===e.elementType?u:Ar(e.type,u),a.props=p,_=e.pendingProps,N=a.context,d=n.contextType,typeof d=="object"&&d!==null?d=dr(d):(d=Cn(n)?ra:un.current,d=Ol(e,d));var A=n.getDerivedStateFromProps;(y=typeof A=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(u!==_||N!==d)&&MN(e,a,s,d),Qi=!1,N=e.memoizedState,a.state=N,im(e,s,a,i);var z=e.memoizedState;u!==_||N!==z||kn.current||Qi?(typeof A=="function"&&(Sg(e,n,A,s),z=e.memoizedState),(p=Qi||VN(e,n,p,s,N,z,d)||!1)?(y||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(s,z,d),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(s,z,d)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||u===t.memoizedProps&&N===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&N===t.memoizedState||(e.flags|=1024),e.memoizedProps=s,e.memoizedState=z),a.props=s,a.state=z,a.context=d,s=p):(typeof a.componentDidUpdate!="function"||u===t.memoizedProps&&N===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&N===t.memoizedState||(e.flags|=1024),s=!1)}return Ag(t,e,n,s,o,i)}function Ag(t,e,n,s,i,o){C1(t,e);var a=(e.flags&128)!==0;if(!s&&!a)return i&&TN(e,n,!1),Rs(t,e,o);s=e.stateNode,i5.current=e;var u=a&&typeof n.getDerivedStateFromError!="function"?null:s.render();return e.flags|=1,t!==null&&a?(e.child=Vl(e,t.child,null,o),e.child=Vl(e,null,u,o)):vn(t,e,u,o),e.memoizedState=s.state,i&&TN(e,n,!0),e.child}function A1(t){var e=t.stateNode;e.pendingContext?SN(t,e.pendingContext,e.pendingContext!==e.context):e.context&&SN(t,e.context,!1),hb(t,e.containerInfo)}function qN(t,e,n,s,i){return Ll(),ob(i),e.flags|=256,vn(t,e,n,s),e.child}var Pg={dehydrated:null,treeContext:null,retryLane:0};function Dg(t){return{baseLanes:t,cachePool:null,transitions:null}}function P1(t,e,n){var s=e.pendingProps,i=ct.current,o=!1,a=(e.flags&128)!==0,u;if((u=a)||(u=t!==null&&t.memoizedState===null?!1:(i&2)!==0),u?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Xe(ct,i&1),t===null)return Ig(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?((e.mode&1)===0?e.lanes=1:t.data==="$!"?e.lanes=8:e.lanes=1073741824,null):(a=s.children,t=s.fallback,o?(s=e.mode,o=e.child,a={mode:"hidden",children:a},(s&1)===0&&o!==null?(o.childLanes=0,o.pendingProps=a):o=Im(a,s,0,null),t=na(t,s,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=Dg(n),e.memoizedState=Pg,t):yb(e,a));if(i=t.memoizedState,i!==null&&(u=i.dehydrated,u!==null))return o5(t,e,a,s,u,i,n);if(o){o=s.fallback,a=e.mode,i=t.child,u=i.sibling;var d={mode:"hidden",children:s.children};return(a&1)===0&&e.child!==i?(s=e.child,s.childLanes=0,s.pendingProps=d,e.deletions=null):(s=oo(i,d),s.subtreeFlags=i.subtreeFlags&14680064),u!==null?o=oo(u,o):(o=na(o,a,n,null),o.flags|=2),o.return=e,s.return=e,s.sibling=o,e.child=s,s=o,o=e.child,a=t.child.memoizedState,a=a===null?Dg(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=t.childLanes&~n,e.memoizedState=Pg,s}return o=t.child,t=o.sibling,s=oo(o,{mode:"visible",children:s.children}),(e.mode&1)===0&&(s.lanes=n),s.return=e,s.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=s,e.memoizedState=null,s}function yb(t,e){return e=Im({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ph(t,e,n,s){return s!==null&&ob(s),Vl(e,t.child,null,n),t=yb(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function o5(t,e,n,s,i,o,a){if(n)return e.flags&256?(e.flags&=-257,s=W0(Error(ne(422))),Ph(t,e,a,s)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=s.fallback,i=e.mode,s=Im({mode:"visible",children:s.children},i,0,null),o=na(o,i,a,null),o.flags|=2,s.return=e,o.return=e,s.sibling=o,e.child=s,(e.mode&1)!==0&&Vl(e,t.child,null,a),e.child.memoizedState=Dg(a),e.memoizedState=Pg,o);if((e.mode&1)===0)return Ph(t,e,a,null);if(i.data==="$!"){if(s=i.nextSibling&&i.nextSibling.dataset,s)var u=s.dgst;return s=u,o=Error(ne(419)),s=W0(o,s,void 0),Ph(t,e,a,s)}if(u=(a&t.childLanes)!==0,Tn||u){if(s=Bt,s!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=(i&(s.suspendedLanes|a))!==0?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,Zs(t,i),Lr(s,t,i,-1))}return Sb(),s=W0(Error(ne(421))),Ph(t,e,a,s)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=x5.bind(null,t),i._reactRetry=e,null):(t=o.treeContext,Gn=no(i.nextSibling),Hn=e,rt=!0,Dr=null,t!==null&&(ar[lr++]=Ks,ar[lr++]=Qs,ar[lr++]=sa,Ks=t.id,Qs=t.overflow,sa=e),e=yb(e,s.children),e.flags|=4096,e)}function GN(t,e,n){t.lanes|=e;var s=t.alternate;s!==null&&(s.lanes|=e),Eg(t.return,e,n)}function K0(t,e,n,s,i){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:s,tail:n,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=s,o.tail=n,o.tailMode=i)}function D1(t,e,n){var s=e.pendingProps,i=s.revealOrder,o=s.tail;if(vn(t,e,s.children,n),s=ct.current,(s&2)!==0)s=s&1|2,e.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&GN(t,n,e);else if(t.tag===19)GN(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}s&=1}if(Xe(ct,s),(e.mode&1)===0)e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&om(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),K0(e,!1,i,n,o);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&om(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}K0(e,!0,n,null,o);break;case"together":K0(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function jh(t,e){(e.mode&1)===0&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Rs(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),oa|=e.lanes,(n&e.childLanes)===0)return null;if(t!==null&&e.child!==t.child)throw Error(ne(153));if(e.child!==null){for(t=e.child,n=oo(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=oo(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function a5(t,e,n){switch(e.tag){case 3:A1(e),Ll();break;case 5:s1(e);break;case 1:Cn(e.type)&&em(e);break;case 4:hb(e,e.stateNode.containerInfo);break;case 10:var s=e.type._context,i=e.memoizedProps.value;Xe(rm,s._currentValue),s._currentValue=i;break;case 13:if(s=e.memoizedState,s!==null)return s.dehydrated!==null?(Xe(ct,ct.current&1),e.flags|=128,null):(n&e.child.childLanes)!==0?P1(t,e,n):(Xe(ct,ct.current&1),t=Rs(t,e,n),t!==null?t.sibling:null);Xe(ct,ct.current&1);break;case 19:if(s=(n&e.childLanes)!==0,(t.flags&128)!==0){if(s)return D1(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Xe(ct,ct.current),s)break;return null;case 22:case 23:return e.lanes=0,k1(t,e,n)}return Rs(t,e,n)}var O1,Og,L1,V1;O1=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Og=function(){};L1=function(t,e,n,s){var i=t.memoizedProps;if(i!==s){t=e.stateNode,ea(ds.current);var o=null;switch(n){case"input":i=tg(t,i),s=tg(t,s),o=[];break;case"select":i=dt({},i,{value:void 0}),s=dt({},s,{value:void 0}),o=[];break;case"textarea":i=sg(t,i),s=sg(t,s),o=[];break;default:typeof i.onClick!="function"&&typeof s.onClick=="function"&&(t.onclick=Zh)}og(n,s);var a;n=null;for(p in i)if(!s.hasOwnProperty(p)&&i.hasOwnProperty(p)&&i[p]!=null)if(p==="style"){var u=i[p];for(a in u)u.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else p!=="dangerouslySetInnerHTML"&&p!=="children"&&p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(wu.hasOwnProperty(p)?o||(o=[]):(o=o||[]).push(p,null));for(p in s){var d=s[p];if(u=i?.[p],s.hasOwnProperty(p)&&d!==u&&(d!=null||u!=null))if(p==="style")if(u){for(a in u)!u.hasOwnProperty(a)||d&&d.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in d)d.hasOwnProperty(a)&&u[a]!==d[a]&&(n||(n={}),n[a]=d[a])}else n||(o||(o=[]),o.push(p,n)),n=d;else p==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,u=u?u.__html:void 0,d!=null&&u!==d&&(o=o||[]).push(p,d)):p==="children"?typeof d!="string"&&typeof d!="number"||(o=o||[]).push(p,""+d):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&(wu.hasOwnProperty(p)?(d!=null&&p==="onScroll"&&et("scroll",t),o||u===d||(o=[])):(o=o||[]).push(p,d))}n&&(o=o||[]).push("style",n);var p=o;(e.updateQueue=p)&&(e.flags|=4)}};V1=function(t,e,n,s){n!==s&&(e.flags|=4)};function iu(t,e){if(!rt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:s.sibling=null}}function ln(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,s=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,s|=i.subtreeFlags&14680064,s|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,s|=i.subtreeFlags,s|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=s,t.childLanes=n,e}function l5(t,e,n){var s=e.pendingProps;switch(ib(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ln(e),null;case 1:return Cn(e.type)&&Rh(),ln(e),null;case 3:return s=e.stateNode,Ml(),tt(kn),tt(un),pb(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(t===null||t.child===null)&&(Ch(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&(e.flags&256)===0||(e.flags|=1024,Dr!==null&&(zg(Dr),Dr=null))),Og(t,e),ln(e),null;case 5:mb(e);var i=ea(Ou.current);if(n=e.type,t!==null&&e.stateNode!=null)L1(t,e,n,s,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!s){if(e.stateNode===null)throw Error(ne(166));return ln(e),null}if(t=ea(ds.current),Ch(e)){s=e.stateNode,n=e.type;var o=e.memoizedProps;switch(s[cs]=e,s[Pu]=o,t=(e.mode&1)!==0,n){case"dialog":et("cancel",s),et("close",s);break;case"iframe":case"object":case"embed":et("load",s);break;case"video":case"audio":for(i=0;i<du.length;i++)et(du[i],s);break;case"source":et("error",s);break;case"img":case"image":case"link":et("error",s),et("load",s);break;case"details":et("toggle",s);break;case"input":Zw(s,o),et("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!o.multiple},et("invalid",s);break;case"textarea":eN(s,o),et("invalid",s)}og(n,o),i=null;for(var a in o)if(o.hasOwnProperty(a)){var u=o[a];a==="children"?typeof u=="string"?s.textContent!==u&&(o.suppressHydrationWarning!==!0&&kh(s.textContent,u,t),i=["children",u]):typeof u=="number"&&s.textContent!==""+u&&(o.suppressHydrationWarning!==!0&&kh(s.textContent,u,t),i=["children",""+u]):wu.hasOwnProperty(a)&&u!=null&&a==="onScroll"&&et("scroll",s)}switch(n){case"input":gh(s),Rw(s,o,!0);break;case"textarea":gh(s),tN(s);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(s.onclick=Zh)}s=i,e.updateQueue=s,s!==null&&(e.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=c_(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof s.is=="string"?t=a.createElement(n,{is:s.is}):(t=a.createElement(n),n==="select"&&(a=t,s.multiple?a.multiple=!0:s.size&&(a.size=s.size))):t=a.createElementNS(t,n),t[cs]=e,t[Pu]=s,O1(t,e,!1,!1),e.stateNode=t;e:{switch(a=ag(n,s),n){case"dialog":et("cancel",t),et("close",t),i=s;break;case"iframe":case"object":case"embed":et("load",t),i=s;break;case"video":case"audio":for(i=0;i<du.length;i++)et(du[i],t);i=s;break;case"source":et("error",t),i=s;break;case"img":case"image":case"link":et("error",t),et("load",t),i=s;break;case"details":et("toggle",t),i=s;break;case"input":Zw(t,s),i=tg(t,s),et("invalid",t);break;case"option":i=s;break;case"select":t._wrapperState={wasMultiple:!!s.multiple},i=dt({},s,{value:void 0}),et("invalid",t);break;case"textarea":eN(t,s),i=sg(t,s),et("invalid",t);break;default:i=s}og(n,i),u=i;for(o in u)if(u.hasOwnProperty(o)){var d=u[o];o==="style"?h_(t,d):o==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,d!=null&&u_(t,d)):o==="children"?typeof d=="string"?(n!=="textarea"||d!=="")&&Nu(t,d):typeof d=="number"&&Nu(t,""+d):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(wu.hasOwnProperty(o)?d!=null&&o==="onScroll"&&et("scroll",t):d!=null&&Gg(t,o,d,a))}switch(n){case"input":gh(t),Rw(t,s,!1);break;case"textarea":gh(t),tN(t);break;case"option":s.value!=null&&t.setAttribute("value",""+ao(s.value));break;case"select":t.multiple=!!s.multiple,o=s.value,o!=null?Sl(t,!!s.multiple,o,!1):s.defaultValue!=null&&Sl(t,!!s.multiple,s.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Zh)}switch(n){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ln(e),null;case 6:if(t&&e.stateNode!=null)V1(t,e,t.memoizedProps,s);else{if(typeof s!="string"&&e.stateNode===null)throw Error(ne(166));if(n=ea(Ou.current),ea(ds.current),Ch(e)){if(s=e.stateNode,n=e.memoizedProps,s[cs]=e,(o=s.nodeValue!==n)&&(t=Hn,t!==null))switch(t.tag){case 3:kh(s.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&kh(s.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else s=(n.nodeType===9?n:n.ownerDocument).createTextNode(s),s[cs]=e,e.stateNode=s}return ln(e),null;case 13:if(tt(ct),s=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(rt&&Gn!==null&&(e.mode&1)!==0&&(e.flags&128)===0)R_(),Ll(),e.flags|=98560,o=!1;else if(o=Ch(e),s!==null&&s.dehydrated!==null){if(t===null){if(!o)throw Error(ne(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(ne(317));o[cs]=e}else Ll(),(e.flags&128)===0&&(e.memoizedState=null),e.flags|=4;ln(e),o=!1}else Dr!==null&&(zg(Dr),Dr=null),o=!0;if(!o)return e.flags&65536?e:null}return(e.flags&128)!==0?(e.lanes=n,e):(s=s!==null,s!==(t!==null&&t.memoizedState!==null)&&s&&(e.child.flags|=8192,(e.mode&1)!==0&&(t===null||(ct.current&1)!==0?Ut===0&&(Ut=3):Sb())),e.updateQueue!==null&&(e.flags|=4),ln(e),null);case 4:return Ml(),Og(t,e),t===null&&Cu(e.stateNode.containerInfo),ln(e),null;case 10:return cb(e.type._context),ln(e),null;case 17:return Cn(e.type)&&Rh(),ln(e),null;case 19:if(tt(ct),o=e.memoizedState,o===null)return ln(e),null;if(s=(e.flags&128)!==0,a=o.rendering,a===null)if(s)iu(o,!1);else{if(Ut!==0||t!==null&&(t.flags&128)!==0)for(t=e.child;t!==null;){if(a=om(t),a!==null){for(e.flags|=128,iu(o,!1),s=a.updateQueue,s!==null&&(e.updateQueue=s,e.flags|=4),e.subtreeFlags=0,s=n,n=e.child;n!==null;)o=n,t=s,o.flags&=14680066,a=o.alternate,a===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,t=a.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Xe(ct,ct.current&1|2),e.child}t=t.sibling}o.tail!==null&&bt()>Fl&&(e.flags|=128,s=!0,iu(o,!1),e.lanes=4194304)}else{if(!s)if(t=om(a),t!==null){if(e.flags|=128,s=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),iu(o,!0),o.tail===null&&o.tailMode==="hidden"&&!a.alternate&&!rt)return ln(e),null}else 2*bt()-o.renderingStartTime>Fl&&n!==1073741824&&(e.flags|=128,s=!0,iu(o,!1),e.lanes=4194304);o.isBackwards?(a.sibling=e.child,e.child=a):(n=o.last,n!==null?n.sibling=a:e.child=a,o.last=a)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=bt(),e.sibling=null,n=ct.current,Xe(ct,s?n&1|2:n&1),e):(ln(e),null);case 22:case 23:return Eb(),s=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==s&&(e.flags|=8192),s&&(e.mode&1)!==0?(qn&1073741824)!==0&&(ln(e),e.subtreeFlags&6&&(e.flags|=8192)):ln(e),null;case 24:return null;case 25:return null}throw Error(ne(156,e.tag))}function c5(t,e){switch(ib(e),e.tag){case 1:return Cn(e.type)&&Rh(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ml(),tt(kn),tt(un),pb(),t=e.flags,(t&65536)!==0&&(t&128)===0?(e.flags=t&-65537|128,e):null;case 5:return mb(e),null;case 13:if(tt(ct),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ne(340));Ll()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return tt(ct),null;case 4:return Ml(),null;case 10:return cb(e.type._context),null;case 22:case 23:return Eb(),null;case 24:return null;default:return null}}var Dh=!1,cn=!1,u5=typeof WeakSet=="function"?WeakSet:Set,de=null;function Il(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(s){pt(t,e,s)}else n.current=null}function Lg(t,e,n){try{n()}catch(s){pt(t,e,s)}}var HN=!1;function d5(t,e){if(bg=Yh,t=j_(),rb(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var s=n.getSelection&&n.getSelection();if(s&&s.rangeCount!==0){n=s.anchorNode;var i=s.anchorOffset,o=s.focusNode;s=s.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var a=0,u=-1,d=-1,p=0,y=0,_=t,N=null;t:for(;;){for(var A;_!==n||i!==0&&_.nodeType!==3||(u=a+i),_!==o||s!==0&&_.nodeType!==3||(d=a+s),_.nodeType===3&&(a+=_.nodeValue.length),(A=_.firstChild)!==null;)N=_,_=A;for(;;){if(_===t)break t;if(N===n&&++p===i&&(u=a),N===o&&++y===s&&(d=a),(A=_.nextSibling)!==null)break;_=N,N=_.parentNode}_=A}n=u===-1||d===-1?null:{start:u,end:d}}else n=null}n=n||{start:0,end:0}}else n=null;for(vg={focusedElem:t,selectionRange:n},Yh=!1,de=e;de!==null;)if(e=de,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,de=t;else for(;de!==null;){e=de;try{var z=e.alternate;if((e.flags&1024)!==0)switch(e.tag){case 0:case 11:case 15:break;case 1:if(z!==null){var B=z.memoizedProps,g=z.memoizedState,L=e.stateNode,w=L.getSnapshotBeforeUpdate(e.elementType===e.type?B:Ar(e.type,B),g);L.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var C=e.stateNode.containerInfo;C.nodeType===1?C.textContent="":C.nodeType===9&&C.documentElement&&C.removeChild(C.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ne(163))}}catch(W){pt(e,e.return,W)}if(t=e.sibling,t!==null){t.return=e.return,de=t;break}de=e.return}return z=HN,HN=!1,z}function vu(t,e,n){var s=e.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var i=s=s.next;do{if((i.tag&t)===t){var o=i.destroy;i.destroy=void 0,o!==void 0&&Lg(e,n,o)}i=i.next}while(i!==s)}}function Nm(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var s=n.create;n.destroy=s()}n=n.next}while(n!==e)}}function Vg(t){var e=t.ref;if(e!==null){var n=t.stateNode;t.tag,t=n,typeof e=="function"?e(t):e.current=t}}function M1(t){var e=t.alternate;e!==null&&(t.alternate=null,M1(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[cs],delete e[Pu],delete e[wg],delete e[KC],delete e[QC])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function $1(t){return t.tag===5||t.tag===3||t.tag===4}function WN(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||$1(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Mg(t,e,n){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Zh));else if(s!==4&&(t=t.child,t!==null))for(Mg(t,e,n),t=t.sibling;t!==null;)Mg(t,e,n),t=t.sibling}function $g(t,e,n){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(s!==4&&(t=t.child,t!==null))for($g(t,e,n),t=t.sibling;t!==null;)$g(t,e,n),t=t.sibling}var Xt=null,Pr=!1;function Wi(t,e,n){for(n=n.child;n!==null;)F1(t,e,n),n=n.sibling}function F1(t,e,n){if(us&&typeof us.onCommitFiberUnmount=="function")try{us.onCommitFiberUnmount(pm,n)}catch{}switch(n.tag){case 5:cn||Il(n,e);case 6:var s=Xt,i=Pr;Xt=null,Wi(t,e,n),Xt=s,Pr=i,Xt!==null&&(Pr?(t=Xt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Xt.removeChild(n.stateNode));break;case 18:Xt!==null&&(Pr?(t=Xt,n=n.stateNode,t.nodeType===8?j0(t.parentNode,n):t.nodeType===1&&j0(t,n),Su(t)):j0(Xt,n.stateNode));break;case 4:s=Xt,i=Pr,Xt=n.stateNode.containerInfo,Pr=!0,Wi(t,e,n),Xt=s,Pr=i;break;case 0:case 11:case 14:case 15:if(!cn&&(s=n.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){i=s=s.next;do{var o=i,a=o.destroy;o=o.tag,a!==void 0&&((o&2)!==0||(o&4)!==0)&&Lg(n,e,a),i=i.next}while(i!==s)}Wi(t,e,n);break;case 1:if(!cn&&(Il(n,e),s=n.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=n.memoizedProps,s.state=n.memoizedState,s.componentWillUnmount()}catch(u){pt(n,e,u)}Wi(t,e,n);break;case 21:Wi(t,e,n);break;case 22:n.mode&1?(cn=(s=cn)||n.memoizedState!==null,Wi(t,e,n),cn=s):Wi(t,e,n);break;default:Wi(t,e,n)}}function KN(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new u5),e.forEach(function(s){var i=y5.bind(null,t,s);n.has(s)||(n.add(s),s.then(i,i))})}}function Cr(t,e){var n=e.deletions;if(n!==null)for(var s=0;s<n.length;s++){var i=n[s];try{var o=t,a=e,u=a;e:for(;u!==null;){switch(u.tag){case 5:Xt=u.stateNode,Pr=!1;break e;case 3:Xt=u.stateNode.containerInfo,Pr=!0;break e;case 4:Xt=u.stateNode.containerInfo,Pr=!0;break e}u=u.return}if(Xt===null)throw Error(ne(160));F1(o,a,i),Xt=null,Pr=!1;var d=i.alternate;d!==null&&(d.return=null),i.return=null}catch(p){pt(i,e,p)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)U1(e,t),e=e.sibling}function U1(t,e){var n=t.alternate,s=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Cr(e,t),as(t),s&4){try{vu(3,t,t.return),Nm(3,t)}catch(B){pt(t,t.return,B)}try{vu(5,t,t.return)}catch(B){pt(t,t.return,B)}}break;case 1:Cr(e,t),as(t),s&512&&n!==null&&Il(n,n.return);break;case 5:if(Cr(e,t),as(t),s&512&&n!==null&&Il(n,n.return),t.flags&32){var i=t.stateNode;try{Nu(i,"")}catch(B){pt(t,t.return,B)}}if(s&4&&(i=t.stateNode,i!=null)){var o=t.memoizedProps,a=n!==null?n.memoizedProps:o,u=t.type,d=t.updateQueue;if(t.updateQueue=null,d!==null)try{u==="input"&&o.type==="radio"&&o.name!=null&&a_(i,o),ag(u,a);var p=ag(u,o);for(a=0;a<d.length;a+=2){var y=d[a],_=d[a+1];y==="style"?h_(i,_):y==="dangerouslySetInnerHTML"?u_(i,_):y==="children"?Nu(i,_):Gg(i,y,_,p)}switch(u){case"input":ng(i,o);break;case"textarea":l_(i,o);break;case"select":var N=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var A=o.value;A!=null?Sl(i,!!o.multiple,A,!1):N!==!!o.multiple&&(o.defaultValue!=null?Sl(i,!!o.multiple,o.defaultValue,!0):Sl(i,!!o.multiple,o.multiple?[]:"",!1))}i[Pu]=o}catch(B){pt(t,t.return,B)}}break;case 6:if(Cr(e,t),as(t),s&4){if(t.stateNode===null)throw Error(ne(162));i=t.stateNode,o=t.memoizedProps;try{i.nodeValue=o}catch(B){pt(t,t.return,B)}}break;case 3:if(Cr(e,t),as(t),s&4&&n!==null&&n.memoizedState.isDehydrated)try{Su(e.containerInfo)}catch(B){pt(t,t.return,B)}break;case 4:Cr(e,t),as(t);break;case 13:Cr(e,t),as(t),i=t.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(_b=bt())),s&4&&KN(t);break;case 22:if(y=n!==null&&n.memoizedState!==null,t.mode&1?(cn=(p=cn)||y,Cr(e,t),cn=p):Cr(e,t),as(t),s&8192){if(p=t.memoizedState!==null,(t.stateNode.isHidden=p)&&!y&&(t.mode&1)!==0)for(de=t,y=t.child;y!==null;){for(_=de=y;de!==null;){switch(N=de,A=N.child,N.tag){case 0:case 11:case 14:case 15:vu(4,N,N.return);break;case 1:Il(N,N.return);var z=N.stateNode;if(typeof z.componentWillUnmount=="function"){s=N,n=N.return;try{e=s,z.props=e.memoizedProps,z.state=e.memoizedState,z.componentWillUnmount()}catch(B){pt(s,n,B)}}break;case 5:Il(N,N.return);break;case 22:if(N.memoizedState!==null){YN(_);continue}}A!==null?(A.return=N,de=A):YN(_)}y=y.sibling}e:for(y=null,_=t;;){if(_.tag===5){if(y===null){y=_;try{i=_.stateNode,p?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(u=_.stateNode,d=_.memoizedProps.style,a=d!=null&&d.hasOwnProperty("display")?d.display:null,u.style.display=d_("display",a))}catch(B){pt(t,t.return,B)}}}else if(_.tag===6){if(y===null)try{_.stateNode.nodeValue=p?"":_.memoizedProps}catch(B){pt(t,t.return,B)}}else if((_.tag!==22&&_.tag!==23||_.memoizedState===null||_===t)&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===t)break e;for(;_.sibling===null;){if(_.return===null||_.return===t)break e;y===_&&(y=null),_=_.return}y===_&&(y=null),_.sibling.return=_.return,_=_.sibling}}break;case 19:Cr(e,t),as(t),s&4&&KN(t);break;case 21:break;default:Cr(e,t),as(t)}}function as(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if($1(n)){var s=n;break e}n=n.return}throw Error(ne(160))}switch(s.tag){case 5:var i=s.stateNode;s.flags&32&&(Nu(i,""),s.flags&=-33);var o=WN(t);$g(t,o,i);break;case 3:case 4:var a=s.stateNode.containerInfo,u=WN(t);Mg(t,u,a);break;default:throw Error(ne(161))}}catch(d){pt(t,t.return,d)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function h5(t,e,n){de=t,j1(t,e,n)}function j1(t,e,n){for(var s=(t.mode&1)!==0;de!==null;){var i=de,o=i.child;if(i.tag===22&&s){var a=i.memoizedState!==null||Dh;if(!a){var u=i.alternate,d=u!==null&&u.memoizedState!==null||cn;u=Dh;var p=cn;if(Dh=a,(cn=d)&&!p)for(de=i;de!==null;)a=de,d=a.child,a.tag===22&&a.memoizedState!==null?JN(i):d!==null?(d.return=a,de=d):JN(i);for(;o!==null;)de=o,j1(o,e,n),o=o.sibling;de=i,Dh=u,cn=p}QN(t,e,n)}else(i.subtreeFlags&8772)!==0&&o!==null?(o.return=i,de=o):QN(t,e,n)}}function QN(t){for(;de!==null;){var e=de;if((e.flags&8772)!==0){var n=e.alternate;try{if((e.flags&8772)!==0)switch(e.tag){case 0:case 11:case 15:cn||Nm(5,e);break;case 1:var s=e.stateNode;if(e.flags&4&&!cn)if(n===null)s.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Ar(e.type,n.memoizedProps);s.componentDidUpdate(i,n.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&DN(e,o,s);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}DN(e,a,n)}break;case 5:var u=e.stateNode;if(n===null&&e.flags&4){n=u;var d=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":d.autoFocus&&n.focus();break;case"img":d.src&&(n.src=d.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var p=e.alternate;if(p!==null){var y=p.memoizedState;if(y!==null){var _=y.dehydrated;_!==null&&Su(_)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ne(163))}cn||e.flags&512&&Vg(e)}catch(N){pt(e,e.return,N)}}if(e===t){de=null;break}if(n=e.sibling,n!==null){n.return=e.return,de=n;break}de=e.return}}function YN(t){for(;de!==null;){var e=de;if(e===t){de=null;break}var n=e.sibling;if(n!==null){n.return=e.return,de=n;break}de=e.return}}function JN(t){for(;de!==null;){var e=de;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Nm(4,e)}catch(d){pt(e,n,d)}break;case 1:var s=e.stateNode;if(typeof s.componentDidMount=="function"){var i=e.return;try{s.componentDidMount()}catch(d){pt(e,i,d)}}var o=e.return;try{Vg(e)}catch(d){pt(e,o,d)}break;case 5:var a=e.return;try{Vg(e)}catch(d){pt(e,a,d)}}}catch(d){pt(e,e.return,d)}if(e===t){de=null;break}var u=e.sibling;if(u!==null){u.return=e.return,de=u;break}de=e.return}}var m5=Math.ceil,cm=ei.ReactCurrentDispatcher,wb=ei.ReactCurrentOwner,ur=ei.ReactCurrentBatchConfig,je=0,Bt=null,St=null,Zt=0,qn=0,El=uo(0),Ut=0,$u=null,oa=0,_m=0,Nb=0,xu=null,Sn=null,_b=0,Fl=1/0,Hs=null,um=!1,Fg=null,so=null,Oh=!1,Zi=null,dm=0,yu=0,Ug=null,zh=-1,Bh=0;function xn(){return(je&6)!==0?bt():zh!==-1?zh:zh=bt()}function io(t){return(t.mode&1)===0?1:(je&2)!==0&&Zt!==0?Zt&-Zt:JC.transition!==null?(Bh===0&&(Bh=I_()),Bh):(t=qe,t!==0||(t=window.event,t=t===void 0?16:P_(t.type)),t)}function Lr(t,e,n,s){if(50<yu)throw yu=0,Ug=null,Error(ne(185));Fu(t,n,s),((je&2)===0||t!==Bt)&&(t===Bt&&((je&2)===0&&(_m|=n),Ut===4&&Ji(t,Zt)),An(t,s),n===1&&je===0&&(e.mode&1)===0&&(Fl=bt()+500,xm&&ho()))}function An(t,e){var n=t.callbackNode;Z2(t,e);var s=Qh(t,t===Bt?Zt:0);if(s===0)n!==null&&sN(n),t.callbackNode=null,t.callbackPriority=0;else if(e=s&-s,t.callbackPriority!==e){if(n!=null&&sN(n),e===1)t.tag===0?YC(XN.bind(null,t)):J_(XN.bind(null,t)),HC(function(){(je&6)===0&&ho()}),n=null;else{switch(E_(s)){case 1:n=Yg;break;case 4:n=N_;break;case 16:n=Kh;break;case 536870912:n=__;break;default:n=Kh}n=Q1(n,z1.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function z1(t,e){if(zh=-1,Bh=0,(je&6)!==0)throw Error(ne(327));var n=t.callbackNode;if(Pl()&&t.callbackNode!==n)return null;var s=Qh(t,t===Bt?Zt:0);if(s===0)return null;if((s&30)!==0||(s&t.expiredLanes)!==0||e)e=hm(t,s);else{e=s;var i=je;je|=2;var o=q1();(Bt!==t||Zt!==e)&&(Hs=null,Fl=bt()+500,ta(t,e));do try{g5();break}catch(u){B1(t,u)}while(!0);lb(),cm.current=o,je=i,St!==null?e=0:(Bt=null,Zt=0,e=Ut)}if(e!==0){if(e===2&&(i=hg(t),i!==0&&(s=i,e=jg(t,i))),e===1)throw n=$u,ta(t,0),Ji(t,s),An(t,bt()),n;if(e===6)Ji(t,s);else{if(i=t.current.alternate,(s&30)===0&&!p5(i)&&(e=hm(t,s),e===2&&(o=hg(t),o!==0&&(s=o,e=jg(t,o))),e===1))throw n=$u,ta(t,0),Ji(t,s),An(t,bt()),n;switch(t.finishedWork=i,t.finishedLanes=s,e){case 0:case 1:throw Error(ne(345));case 2:Xo(t,Sn,Hs);break;case 3:if(Ji(t,s),(s&130023424)===s&&(e=_b+500-bt(),10<e)){if(Qh(t,0)!==0)break;if(i=t.suspendedLanes,(i&s)!==s){xn(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=yg(Xo.bind(null,t,Sn,Hs),e);break}Xo(t,Sn,Hs);break;case 4:if(Ji(t,s),(s&4194240)===s)break;for(e=t.eventTimes,i=-1;0<s;){var a=31-Or(s);o=1<<a,a=e[a],a>i&&(i=a),s&=~o}if(s=i,s=bt()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*m5(s/1960))-s,10<s){t.timeoutHandle=yg(Xo.bind(null,t,Sn,Hs),s);break}Xo(t,Sn,Hs);break;case 5:Xo(t,Sn,Hs);break;default:throw Error(ne(329))}}}return An(t,bt()),t.callbackNode===n?z1.bind(null,t):null}function jg(t,e){var n=xu;return t.current.memoizedState.isDehydrated&&(ta(t,e).flags|=256),t=hm(t,e),t!==2&&(e=Sn,Sn=n,e!==null&&zg(e)),t}function zg(t){Sn===null?Sn=t:Sn.push.apply(Sn,t)}function p5(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var s=0;s<n.length;s++){var i=n[s],o=i.getSnapshot;i=i.value;try{if(!Vr(o(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ji(t,e){for(e&=~Nb,e&=~_m,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Or(e),s=1<<n;t[n]=-1,e&=~s}}function XN(t){if((je&6)!==0)throw Error(ne(327));Pl();var e=Qh(t,0);if((e&1)===0)return An(t,bt()),null;var n=hm(t,e);if(t.tag!==0&&n===2){var s=hg(t);s!==0&&(e=s,n=jg(t,s))}if(n===1)throw n=$u,ta(t,0),Ji(t,e),An(t,bt()),n;if(n===6)throw Error(ne(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Xo(t,Sn,Hs),An(t,bt()),null}function Ib(t,e){var n=je;je|=1;try{return t(e)}finally{je=n,je===0&&(Fl=bt()+500,xm&&ho())}}function aa(t){Zi!==null&&Zi.tag===0&&(je&6)===0&&Pl();var e=je;je|=1;var n=ur.transition,s=qe;try{if(ur.transition=null,qe=1,t)return t()}finally{qe=s,ur.transition=n,je=e,(je&6)===0&&ho()}}function Eb(){qn=El.current,tt(El)}function ta(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,GC(n)),St!==null)for(n=St.return;n!==null;){var s=n;switch(ib(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&Rh();break;case 3:Ml(),tt(kn),tt(un),pb();break;case 5:mb(s);break;case 4:Ml();break;case 13:tt(ct);break;case 19:tt(ct);break;case 10:cb(s.type._context);break;case 22:case 23:Eb()}n=n.return}if(Bt=t,St=t=oo(t.current,null),Zt=qn=e,Ut=0,$u=null,Nb=_m=oa=0,Sn=xu=null,Ro!==null){for(e=0;e<Ro.length;e++)if(n=Ro[e],s=n.interleaved,s!==null){n.interleaved=null;var i=s.next,o=n.pending;if(o!==null){var a=o.next;o.next=i,s.next=a}n.pending=s}Ro=null}return t}function B1(t,e){do{var n=St;try{if(lb(),Fh.current=lm,am){for(var s=ut.memoizedState;s!==null;){var i=s.queue;i!==null&&(i.pending=null),s=s.next}am=!1}if(ia=0,zt=Ft=ut=null,bu=!1,Lu=0,wb.current=null,n===null||n.return===null){Ut=1,$u=e,St=null;break}e:{var o=t,a=n.return,u=n,d=e;if(e=Zt,u.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){var p=d,y=u,_=y.tag;if((y.mode&1)===0&&(_===0||_===11||_===15)){var N=y.alternate;N?(y.updateQueue=N.updateQueue,y.memoizedState=N.memoizedState,y.lanes=N.lanes):(y.updateQueue=null,y.memoizedState=null)}var A=FN(a);if(A!==null){A.flags&=-257,UN(A,a,u,o,e),A.mode&1&&$N(o,p,e),e=A,d=p;var z=e.updateQueue;if(z===null){var B=new Set;B.add(d),e.updateQueue=B}else z.add(d);break e}else{if((e&1)===0){$N(o,p,e),Sb();break e}d=Error(ne(426))}}else if(rt&&u.mode&1){var g=FN(a);if(g!==null){(g.flags&65536)===0&&(g.flags|=256),UN(g,a,u,o,e),ob($l(d,u));break e}}o=d=$l(d,u),Ut!==4&&(Ut=2),xu===null?xu=[o]:xu.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var L=E1(o,d,e);PN(o,L);break e;case 1:u=d;var w=o.type,C=o.stateNode;if((o.flags&128)===0&&(typeof w.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(so===null||!so.has(C)))){o.flags|=65536,e&=-e,o.lanes|=e;var W=S1(o,u,e);PN(o,W);break e}}o=o.return}while(o!==null)}H1(n)}catch(re){e=re,St===n&&n!==null&&(St=n=n.return);continue}break}while(!0)}function q1(){var t=cm.current;return cm.current=lm,t===null?lm:t}function Sb(){(Ut===0||Ut===3||Ut===2)&&(Ut=4),Bt===null||(oa&268435455)===0&&(_m&268435455)===0||Ji(Bt,Zt)}function hm(t,e){var n=je;je|=2;var s=q1();(Bt!==t||Zt!==e)&&(Hs=null,ta(t,e));do try{f5();break}catch(i){B1(t,i)}while(!0);if(lb(),je=n,cm.current=s,St!==null)throw Error(ne(261));return Bt=null,Zt=0,Ut}function f5(){for(;St!==null;)G1(St)}function g5(){for(;St!==null&&!q2();)G1(St)}function G1(t){var e=K1(t.alternate,t,qn);t.memoizedProps=t.pendingProps,e===null?H1(t):St=e,wb.current=null}function H1(t){var e=t;do{var n=e.alternate;if(t=e.return,(e.flags&32768)===0){if(n=l5(n,e,qn),n!==null){St=n;return}}else{if(n=c5(n,e),n!==null){n.flags&=32767,St=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ut=6,St=null;return}}if(e=e.sibling,e!==null){St=e;return}St=e=t}while(e!==null);Ut===0&&(Ut=5)}function Xo(t,e,n){var s=qe,i=ur.transition;try{ur.transition=null,qe=1,b5(t,e,n,s)}finally{ur.transition=i,qe=s}return null}function b5(t,e,n,s){do Pl();while(Zi!==null);if((je&6)!==0)throw Error(ne(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(ne(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(R2(t,o),t===Bt&&(St=Bt=null,Zt=0),(n.subtreeFlags&2064)===0&&(n.flags&2064)===0||Oh||(Oh=!0,Q1(Kh,function(){return Pl(),null})),o=(n.flags&15990)!==0,(n.subtreeFlags&15990)!==0||o){o=ur.transition,ur.transition=null;var a=qe;qe=1;var u=je;je|=4,wb.current=null,d5(t,n),U1(n,t),UC(vg),Yh=!!bg,vg=bg=null,t.current=n,h5(n,t,i),G2(),je=u,qe=a,ur.transition=o}else t.current=n;if(Oh&&(Oh=!1,Zi=t,dm=i),o=t.pendingLanes,o===0&&(so=null),K2(n.stateNode,s),An(t,bt()),e!==null)for(s=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],s(i.value,{componentStack:i.stack,digest:i.digest});if(um)throw um=!1,t=Fg,Fg=null,t;return(dm&1)!==0&&t.tag!==0&&Pl(),o=t.pendingLanes,(o&1)!==0?t===Ug?yu++:(yu=0,Ug=t):yu=0,ho(),null}function Pl(){if(Zi!==null){var t=E_(dm),e=ur.transition,n=qe;try{if(ur.transition=null,qe=16>t?16:t,Zi===null)var s=!1;else{if(t=Zi,Zi=null,dm=0,(je&6)!==0)throw Error(ne(331));var i=je;for(je|=4,de=t.current;de!==null;){var o=de,a=o.child;if((de.flags&16)!==0){var u=o.deletions;if(u!==null){for(var d=0;d<u.length;d++){var p=u[d];for(de=p;de!==null;){var y=de;switch(y.tag){case 0:case 11:case 15:vu(8,y,o)}var _=y.child;if(_!==null)_.return=y,de=_;else for(;de!==null;){y=de;var N=y.sibling,A=y.return;if(M1(y),y===p){de=null;break}if(N!==null){N.return=A,de=N;break}de=A}}}var z=o.alternate;if(z!==null){var B=z.child;if(B!==null){z.child=null;do{var g=B.sibling;B.sibling=null,B=g}while(B!==null)}}de=o}}if((o.subtreeFlags&2064)!==0&&a!==null)a.return=o,de=a;else e:for(;de!==null;){if(o=de,(o.flags&2048)!==0)switch(o.tag){case 0:case 11:case 15:vu(9,o,o.return)}var L=o.sibling;if(L!==null){L.return=o.return,de=L;break e}de=o.return}}var w=t.current;for(de=w;de!==null;){a=de;var C=a.child;if((a.subtreeFlags&2064)!==0&&C!==null)C.return=a,de=C;else e:for(a=w;de!==null;){if(u=de,(u.flags&2048)!==0)try{switch(u.tag){case 0:case 11:case 15:Nm(9,u)}}catch(re){pt(u,u.return,re)}if(u===a){de=null;break e}var W=u.sibling;if(W!==null){W.return=u.return,de=W;break e}de=u.return}}if(je=i,ho(),us&&typeof us.onPostCommitFiberRoot=="function")try{us.onPostCommitFiberRoot(pm,t)}catch{}s=!0}return s}finally{qe=n,ur.transition=e}}return!1}function ZN(t,e,n){e=$l(n,e),e=E1(t,e,1),t=ro(t,e,1),e=xn(),t!==null&&(Fu(t,1,e),An(t,e))}function pt(t,e,n){if(t.tag===3)ZN(t,t,n);else for(;e!==null;){if(e.tag===3){ZN(e,t,n);break}else if(e.tag===1){var s=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(so===null||!so.has(s))){t=$l(n,t),t=S1(e,t,1),e=ro(e,t,1),t=xn(),e!==null&&(Fu(e,1,t),An(e,t));break}}e=e.return}}function v5(t,e,n){var s=t.pingCache;s!==null&&s.delete(e),e=xn(),t.pingedLanes|=t.suspendedLanes&n,Bt===t&&(Zt&n)===n&&(Ut===4||Ut===3&&(Zt&130023424)===Zt&&500>bt()-_b?ta(t,0):Nb|=n),An(t,e)}function W1(t,e){e===0&&((t.mode&1)===0?e=1:(e=xh,xh<<=1,(xh&130023424)===0&&(xh=4194304)));var n=xn();t=Zs(t,e),t!==null&&(Fu(t,e,n),An(t,n))}function x5(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),W1(t,n)}function y5(t,e){var n=0;switch(t.tag){case 13:var s=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:s=t.stateNode;break;default:throw Error(ne(314))}s!==null&&s.delete(e),W1(t,n)}var K1;K1=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||kn.current)Tn=!0;else{if((t.lanes&n)===0&&(e.flags&128)===0)return Tn=!1,a5(t,e,n);Tn=(t.flags&131072)!==0}else Tn=!1,rt&&(e.flags&1048576)!==0&&X_(e,nm,e.index);switch(e.lanes=0,e.tag){case 2:var s=e.type;jh(t,e),t=e.pendingProps;var i=Ol(e,un.current);Al(e,n),i=gb(null,e,s,t,i,n);var o=bb();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Cn(s)?(o=!0,em(e)):o=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,db(e),i.updater=wm,e.stateNode=i,i._reactInternals=e,Tg(e,s,t,n),e=Ag(null,e,s,!0,o,n)):(e.tag=0,rt&&o&&sb(e),vn(null,e,i,n),e=e.child),e;case 16:s=e.elementType;e:{switch(jh(t,e),t=e.pendingProps,i=s._init,s=i(s._payload),e.type=s,i=e.tag=N5(s),t=Ar(s,t),i){case 0:e=Cg(null,e,s,t,n);break e;case 1:e=BN(null,e,s,t,n);break e;case 11:e=jN(null,e,s,t,n);break e;case 14:e=zN(null,e,s,Ar(s.type,t),n);break e}throw Error(ne(306,s,""))}return e;case 0:return s=e.type,i=e.pendingProps,i=e.elementType===s?i:Ar(s,i),Cg(t,e,s,i,n);case 1:return s=e.type,i=e.pendingProps,i=e.elementType===s?i:Ar(s,i),BN(t,e,s,i,n);case 3:e:{if(A1(e),t===null)throw Error(ne(387));s=e.pendingProps,o=e.memoizedState,i=o.element,r1(t,e),im(e,s,null,n);var a=e.memoizedState;if(s=a.element,o.isDehydrated)if(o={element:s,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){i=$l(Error(ne(423)),e),e=qN(t,e,s,n,i);break e}else if(s!==i){i=$l(Error(ne(424)),e),e=qN(t,e,s,n,i);break e}else for(Gn=no(e.stateNode.containerInfo.firstChild),Hn=e,rt=!0,Dr=null,n=t1(e,null,s,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ll(),s===i){e=Rs(t,e,n);break e}vn(t,e,s,n)}e=e.child}return e;case 5:return s1(e),t===null&&Ig(e),s=e.type,i=e.pendingProps,o=t!==null?t.memoizedProps:null,a=i.children,xg(s,i)?a=null:o!==null&&xg(s,o)&&(e.flags|=32),C1(t,e),vn(t,e,a,n),e.child;case 6:return t===null&&Ig(e),null;case 13:return P1(t,e,n);case 4:return hb(e,e.stateNode.containerInfo),s=e.pendingProps,t===null?e.child=Vl(e,null,s,n):vn(t,e,s,n),e.child;case 11:return s=e.type,i=e.pendingProps,i=e.elementType===s?i:Ar(s,i),jN(t,e,s,i,n);case 7:return vn(t,e,e.pendingProps,n),e.child;case 8:return vn(t,e,e.pendingProps.children,n),e.child;case 12:return vn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(s=e.type._context,i=e.pendingProps,o=e.memoizedProps,a=i.value,Xe(rm,s._currentValue),s._currentValue=a,o!==null)if(Vr(o.value,a)){if(o.children===i.children&&!kn.current){e=Rs(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var u=o.dependencies;if(u!==null){a=o.child;for(var d=u.firstContext;d!==null;){if(d.context===s){if(o.tag===1){d=Ys(-1,n&-n),d.tag=2;var p=o.updateQueue;if(p!==null){p=p.shared;var y=p.pending;y===null?d.next=d:(d.next=y.next,y.next=d),p.pending=d}}o.lanes|=n,d=o.alternate,d!==null&&(d.lanes|=n),Eg(o.return,n,e),u.lanes|=n;break}d=d.next}}else if(o.tag===10)a=o.type===e.type?null:o.child;else if(o.tag===18){if(a=o.return,a===null)throw Error(ne(341));a.lanes|=n,u=a.alternate,u!==null&&(u.lanes|=n),Eg(a,n,e),a=o.sibling}else a=o.child;if(a!==null)a.return=o;else for(a=o;a!==null;){if(a===e){a=null;break}if(o=a.sibling,o!==null){o.return=a.return,a=o;break}a=a.return}o=a}vn(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,s=e.pendingProps.children,Al(e,n),i=dr(i),s=s(i),e.flags|=1,vn(t,e,s,n),e.child;case 14:return s=e.type,i=Ar(s,e.pendingProps),i=Ar(s.type,i),zN(t,e,s,i,n);case 15:return T1(t,e,e.type,e.pendingProps,n);case 17:return s=e.type,i=e.pendingProps,i=e.elementType===s?i:Ar(s,i),jh(t,e),e.tag=1,Cn(s)?(t=!0,em(e)):t=!1,Al(e,n),I1(e,s,i),Tg(e,s,i,n),Ag(null,e,s,!0,t,n);case 19:return D1(t,e,n);case 22:return k1(t,e,n)}throw Error(ne(156,e.tag))};function Q1(t,e){return w_(t,e)}function w5(t,e,n,s){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function cr(t,e,n,s){return new w5(t,e,n,s)}function Tb(t){return t=t.prototype,!(!t||!t.isReactComponent)}function N5(t){if(typeof t=="function")return Tb(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Wg)return 11;if(t===Kg)return 14}return 2}function oo(t,e){var n=t.alternate;return n===null?(n=cr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function qh(t,e,n,s,i,o){var a=2;if(s=t,typeof t=="function")Tb(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case fl:return na(n.children,i,o,e);case Hg:a=8,i|=8;break;case X0:return t=cr(12,n,e,i|2),t.elementType=X0,t.lanes=o,t;case Z0:return t=cr(13,n,e,i),t.elementType=Z0,t.lanes=o,t;case R0:return t=cr(19,n,e,i),t.elementType=R0,t.lanes=o,t;case s_:return Im(n,i,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case n_:a=10;break e;case r_:a=9;break e;case Wg:a=11;break e;case Kg:a=14;break e;case Ki:a=16,s=null;break e}throw Error(ne(130,t==null?t:typeof t,""))}return e=cr(a,n,e,i),e.elementType=t,e.type=s,e.lanes=o,e}function na(t,e,n,s){return t=cr(7,t,s,e),t.lanes=n,t}function Im(t,e,n,s){return t=cr(22,t,s,e),t.elementType=s_,t.lanes=n,t.stateNode={isHidden:!1},t}function Q0(t,e,n){return t=cr(6,t,null,e),t.lanes=n,t}function Y0(t,e,n){return e=cr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function _5(t,e,n,s,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=D0(0),this.expirationTimes=D0(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=D0(0),this.identifierPrefix=s,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function kb(t,e,n,s,i,o,a,u,d){return t=new _5(t,e,n,u,d),e===1?(e=1,o===!0&&(e|=8)):e=0,o=cr(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:s,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},db(o),t}function I5(t,e,n){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:pl,key:s==null?null:""+s,children:t,containerInfo:e,implementation:n}}function Y1(t){if(!t)return lo;t=t._reactInternals;e:{if(ca(t)!==t||t.tag!==1)throw Error(ne(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Cn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ne(171))}if(t.tag===1){var n=t.type;if(Cn(n))return Y_(t,n,e)}return e}function J1(t,e,n,s,i,o,a,u,d){return t=kb(n,s,!0,t,i,o,a,u,d),t.context=Y1(null),n=t.current,s=xn(),i=io(n),o=Ys(s,i),o.callback=e??null,ro(n,o,i),t.current.lanes=i,Fu(t,i,s),An(t,s),t}function Em(t,e,n,s){var i=e.current,o=xn(),a=io(i);return n=Y1(n),e.context===null?e.context=n:e.pendingContext=n,e=Ys(o,a),e.payload={element:t},s=s===void 0?null:s,s!==null&&(e.callback=s),t=ro(i,e,a),t!==null&&(Lr(t,i,a,o),$h(t,i,a)),a}function mm(t){return t=t.current,t.child?(t.child.tag===5,t.child.stateNode):null}function RN(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Cb(t,e){RN(t,e),(t=t.alternate)&&RN(t,e)}function E5(){return null}var X1=typeof reportError=="function"?reportError:function(t){console.error(t)};function Ab(t){this._internalRoot=t}Sm.prototype.render=Ab.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ne(409));Em(t,e,null,null)};Sm.prototype.unmount=Ab.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;aa(function(){Em(null,t,null,null)}),e[Xs]=null}};function Sm(t){this._internalRoot=t}Sm.prototype.unstable_scheduleHydration=function(t){if(t){var e=k_();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Yi.length&&e!==0&&e<Yi[n].priority;n++);Yi.splice(n,0,t),n===0&&A_(t)}};function Pb(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Tm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function e_(){}function S5(t,e,n,s,i){if(i){if(typeof s=="function"){var o=s;s=function(){var p=mm(a);o.call(p)}}var a=J1(e,s,t,0,null,!1,!1,"",e_);return t._reactRootContainer=a,t[Xs]=a.current,Cu(t.nodeType===8?t.parentNode:t),aa(),a}for(;i=t.lastChild;)t.removeChild(i);if(typeof s=="function"){var u=s;s=function(){var p=mm(d);u.call(p)}}var d=kb(t,0,!1,null,null,!1,!1,"",e_);return t._reactRootContainer=d,t[Xs]=d.current,Cu(t.nodeType===8?t.parentNode:t),aa(function(){Em(e,d,n,s)}),d}function km(t,e,n,s,i){var o=n._reactRootContainer;if(o){var a=o;if(typeof i=="function"){var u=i;i=function(){var d=mm(a);u.call(d)}}Em(e,a,t,i)}else a=S5(n,e,t,i,s);return mm(a)}S_=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=uu(e.pendingLanes);n!==0&&(Jg(e,n|1),An(e,bt()),(je&6)===0&&(Fl=bt()+500,ho()))}break;case 13:aa(function(){var s=Zs(t,1);if(s!==null){var i=xn();Lr(s,t,1,i)}}),Cb(t,1)}};Xg=function(t){if(t.tag===13){var e=Zs(t,134217728);if(e!==null){var n=xn();Lr(e,t,134217728,n)}Cb(t,134217728)}};T_=function(t){if(t.tag===13){var e=io(t),n=Zs(t,e);if(n!==null){var s=xn();Lr(n,t,e,s)}Cb(t,e)}};k_=function(){return qe};C_=function(t,e){var n=qe;try{return qe=t,e()}finally{qe=n}};cg=function(t,e,n){switch(e){case"input":if(ng(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var s=n[e];if(s!==t&&s.form===t.form){var i=vm(s);if(!i)throw Error(ne(90));o_(s),ng(s,i)}}}break;case"textarea":l_(t,n);break;case"select":e=n.value,e!=null&&Sl(t,!!n.multiple,e,!1)}};f_=Ib;g_=aa;var T5={usingClientEntryPoint:!1,Events:[ju,xl,vm,m_,p_,Ib]},ou={findFiberByHostInstance:Zo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},k5={bundleType:ou.bundleType,version:ou.version,rendererPackageName:ou.rendererPackageName,rendererConfig:ou.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ei.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=x_(t),t===null?null:t.stateNode},findFiberByHostInstance:ou.findFiberByHostInstance||E5,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&(au=__REACT_DEVTOOLS_GLOBAL_HOOK__,!au.isDisabled&&au.supportsFiber))try{pm=au.inject(k5),us=au}catch{}var au;Qn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=T5;Qn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Pb(e))throw Error(ne(200));return I5(t,e,null,n)};Qn.createRoot=function(t,e){if(!Pb(t))throw Error(ne(299));var n=!1,s="",i=X1;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(s=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=kb(t,1,!1,null,null,n,!1,s,i),t[Xs]=e.current,Cu(t.nodeType===8?t.parentNode:t),new Ab(e)};Qn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ne(188)):(t=Object.keys(t).join(","),Error(ne(268,t)));return t=x_(e),t=t===null?null:t.stateNode,t};Qn.flushSync=function(t){return aa(t)};Qn.hydrate=function(t,e,n){if(!Tm(e))throw Error(ne(200));return km(null,t,e,!0,n)};Qn.hydrateRoot=function(t,e,n){if(!Pb(t))throw Error(ne(405));var s=n!=null&&n.hydratedSources||null,i=!1,o="",a=X1;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=J1(e,null,t,1,n??null,i,!1,o,a),t[Xs]=e.current,Cu(t),s)for(t=0;t<s.length;t++)n=s[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Sm(e)};Qn.render=function(t,e,n){if(!Tm(e))throw Error(ne(200));return km(null,t,e,!1,n)};Qn.unmountComponentAtNode=function(t){if(!Tm(t))throw Error(ne(40));return t._reactRootContainer?(aa(function(){km(null,null,t,!1,function(){t._reactRootContainer=null,t[Xs]=null})}),!0):!1};Qn.unstable_batchedUpdates=Ib;Qn.unstable_renderSubtreeIntoContainer=function(t,e,n,s){if(!Tm(n))throw Error(ne(200));if(t==null||t._reactInternals===void 0)throw Error(ne(38));return km(t,e,n,!1,s)};Qn.version="18.3.1-next-f1338f8080-20240426"});var Db=Kc((_O,eI)=>{"use strict";function R1(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(R1)}catch(t){console.error(t)}}R1(),eI.exports=Z1()});var nI=Kc(Ob=>{"use strict";var tI=Db();Ob.createRoot=tI.createRoot,Ob.hydrateRoot=tI.hydrateRoot;var IO});var r=Kf(Nw(),1),Nk=Kf(nI(),1),_k=Kf(Db(),1);var rI=()=>{};var oI=function(t){let e=[],n=0;for(let s=0;s<t.length;s++){let i=t.charCodeAt(s);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&s+1<t.length&&(t.charCodeAt(s+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++s)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},C5=function(t){let e=[],n=0,s=0;for(;n<t.length;){let i=t[n++];if(i<128)e[s++]=String.fromCharCode(i);else if(i>191&&i<224){let o=t[n++];e[s++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=t[n++],a=t[n++],u=t[n++],d=((i&7)<<18|(o&63)<<12|(a&63)<<6|u&63)-65536;e[s++]=String.fromCharCode(55296+(d>>10)),e[s++]=String.fromCharCode(56320+(d&1023))}else{let o=t[n++],a=t[n++];e[s++]=String.fromCharCode((i&15)<<12|(o&63)<<6|a&63)}}return e.join("")},aI={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let i=0;i<t.length;i+=3){let o=t[i],a=i+1<t.length,u=a?t[i+1]:0,d=i+2<t.length,p=d?t[i+2]:0,y=o>>2,_=(o&3)<<4|u>>4,N=(u&15)<<2|p>>6,A=p&63;d||(A=64,a||(N=64)),s.push(n[y],n[_],n[N],n[A])}return s.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(oI(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):C5(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let i=0;i<t.length;){let o=n[t.charAt(i++)],u=i<t.length?n[t.charAt(i)]:0;++i;let p=i<t.length?n[t.charAt(i)]:64;++i;let _=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||u==null||p==null||_==null)throw new Vb;let N=o<<2|u>>4;if(s.push(N),p!==64){let A=u<<4&240|p>>2;if(s.push(A),_!==64){let z=p<<6&192|_;s.push(z)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},Vb=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},A5=function(t){let e=oI(t);return aI.encodeByteArray(e,!0)},qu=function(t){return A5(t).replace(/\./g,"")},Am=function(t){try{return aI.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function lI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var P5=()=>lI().__FIREBASE_DEFAULTS__,D5=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},O5=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&Am(t[1]);return e&&JSON.parse(e)},Pm=()=>{try{return rI()||P5()||D5()||O5()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},$b=t=>Pm()?.emulatorHosts?.[t],cI=t=>{let e=$b(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},Fb=()=>Pm()?.config,Ub=t=>Pm()?.[`_${t}`];var Cm=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}};function mo(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Dm(t){return(await fetch(t,{credentials:"include"})).ok}function uI(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},s=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let a={iss:`https://securetoken.google.com/${s}`,aud:s,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...t};return[qu(JSON.stringify(n)),qu(JSON.stringify(a)),""].join(".")}var Bu={};function L5(){let t={prod:[],emulator:[]};for(let e of Object.keys(Bu))Bu[e]?t.emulator.push(e):t.prod.push(e);return t}function V5(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}var sI=!1;function Om(t,e){if(typeof window>"u"||typeof document>"u"||!mo(window.location.host)||Bu[t]===e||Bu[t]||sI)return;Bu[t]=e;function n(N){return`__firebase__banner__${N}`}let s="__firebase__banner",o=L5().prod.length>0;function a(){let N=document.getElementById(s);N&&N.remove()}function u(N){N.style.display="flex",N.style.background="#7faaf0",N.style.position="fixed",N.style.bottom="5px",N.style.left="5px",N.style.padding=".5em",N.style.borderRadius="5px",N.style.alignItems="center"}function d(N,A){N.setAttribute("width","24"),N.setAttribute("id",A),N.setAttribute("height","24"),N.setAttribute("viewBox","0 0 24 24"),N.setAttribute("fill","none"),N.style.marginLeft="-6px"}function p(){let N=document.createElement("span");return N.style.cursor="pointer",N.style.marginLeft="16px",N.style.fontSize="24px",N.innerHTML=" &times;",N.onclick=()=>{sI=!0,a()},N}function y(N,A){N.setAttribute("id",A),N.innerText="Learn more",N.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",N.setAttribute("target","__blank"),N.style.paddingLeft="5px",N.style.textDecoration="underline"}function _(){let N=V5(s),A=n("text"),z=document.getElementById(A)||document.createElement("span"),B=n("learnmore"),g=document.getElementById(B)||document.createElement("a"),L=n("preprendIcon"),w=document.getElementById(L)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(N.created){let C=N.element;u(C),y(g,B);let W=p();d(w,L),C.append(w,z,g,W),document.body.appendChild(C)}o?(z.innerText="Preview backend disconnected.",w.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(w.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,z.innerText="Preview backend running in this workspace."),z.setAttribute("id",A)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",_):_()}function qt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function dI(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(qt())}function M5(){let t=Pm()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function hI(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function mI(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function pI(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function fI(){let t=qt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function gI(){return!M5()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function jb(){try{return typeof indexedDB=="object"}catch{return!1}}function bI(){return new Promise((t,e)=>{try{let n=!0,s="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(s);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(s),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(n){e(n)}})}var $5="FirebaseError",Yn=class t extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=$5,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ti.prototype.create)}},ti=class{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){let s=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],a=o?F5(o,s):"Error",u=`${this.serviceName}: ${a} (${i}).`;return new Yn(i,u,s)}};function F5(t,e){return t.replace(U5,(n,s)=>{let i=e[s];return i!=null?String(i):`<${s}?>`})}var U5=/\{\$([^}]+)}/g;function vI(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Mr(t,e){if(t===e)return!0;let n=Object.keys(t),s=Object.keys(e);for(let i of n){if(!s.includes(i))return!1;let o=t[i],a=e[i];if(iI(o)&&iI(a)){if(!Mr(o,a))return!1}else if(o!==a)return!1}for(let i of s)if(!n.includes(i))return!1;return!0}function iI(t){return t!==null&&typeof t=="object"}function zl(t){let e=[];for(let[n,s]of Object.entries(t))Array.isArray(s)?s.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function Bl(t){let e={};return t.replace(/^\?/,"").split("&").forEach(s=>{if(s){let[i,o]=s.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function ql(t){let e=t.indexOf("?");if(!e)return"";let n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function xI(t,e){let n=new Mb(t,e);return n.subscribe.bind(n)}var Mb=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let i;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");j5(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:s},i.next===void 0&&(i.next=Lb),i.error===void 0&&(i.error=Lb),i.complete===void 0&&(i.complete=Lb);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function j5(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Lb(){}var kO=14400*1e3;function nt(t){return t&&t._delegate?t._delegate:t}var mr=class{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var ua="[DEFAULT]";var zb=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let s=new Cm;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&s.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){let n=this.normalizeInstanceIdentifier(e?.identifier),s=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(B5(e))try{this.getOrInitializeService({instanceIdentifier:ua})}catch{}for(let[n,s]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let o=this.getOrInitializeService({instanceIdentifier:i});s.resolve(o)}catch{}}}}clearInstance(e=ua){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ua){return this.instances.has(e)}getOptions(e=ua){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:s,options:n});for(let[o,a]of this.instancesDeferred.entries()){let u=this.normalizeInstanceIdentifier(o);s===u&&a.resolve(i)}return i}onInit(e,n){let s=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(s)??new Set;i.add(e),this.onInitCallbacks.set(s,i);let o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){let s=this.onInitCallbacks.get(n);if(s)for(let i of s)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:z5(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=ua){return this.component?this.component.multipleInstances?e:ua:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function z5(t){return t===ua?void 0:t}function B5(t){return t.instantiationMode==="EAGER"}var Lm=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new zb(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var q5=[],Oe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Oe||(Oe={}));var G5={debug:Oe.DEBUG,verbose:Oe.VERBOSE,info:Oe.INFO,warn:Oe.WARN,error:Oe.ERROR,silent:Oe.SILENT},H5=Oe.INFO,W5={[Oe.DEBUG]:"log",[Oe.VERBOSE]:"log",[Oe.INFO]:"info",[Oe.WARN]:"warn",[Oe.ERROR]:"error"},K5=(t,e,...n)=>{if(e<t.logLevel)return;let s=new Date().toISOString(),i=W5[e];if(i)console[i](`[${s}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},po=class{constructor(e){this.name=e,this._logLevel=H5,this._logHandler=K5,this._userLogHandler=null,q5.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Oe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?G5[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Oe.DEBUG,...e),this._logHandler(this,Oe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Oe.VERBOSE,...e),this._logHandler(this,Oe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Oe.INFO,...e),this._logHandler(this,Oe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Oe.WARN,...e),this._logHandler(this,Oe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Oe.ERROR,...e),this._logHandler(this,Oe.ERROR,...e)}};var Q5=(t,e)=>e.some(n=>t instanceof n),yI,wI;function Y5(){return yI||(yI=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function J5(){return wI||(wI=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var NI=new WeakMap,qb=new WeakMap,_I=new WeakMap,Bb=new WeakMap,Hb=new WeakMap;function X5(t){let e=new Promise((n,s)=>{let i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",a)},o=()=>{n(hs(t.result)),i()},a=()=>{s(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&NI.set(n,t)}).catch(()=>{}),Hb.set(e,t),e}function Z5(t){if(qb.has(t))return;let e=new Promise((n,s)=>{let i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",a),t.removeEventListener("abort",a)},o=()=>{n(),i()},a=()=>{s(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",a),t.addEventListener("abort",a)});qb.set(t,e)}var Gb={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return qb.get(t);if(e==="objectStoreNames")return t.objectStoreNames||_I.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return hs(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function II(t){Gb=t(Gb)}function R5(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let s=t.call(Vm(this),e,...n);return _I.set(s,e.sort?e.sort():[e]),hs(s)}:J5().includes(t)?function(...e){return t.apply(Vm(this),e),hs(NI.get(this))}:function(...e){return hs(t.apply(Vm(this),e))}}function eA(t){return typeof t=="function"?R5(t):(t instanceof IDBTransaction&&Z5(t),Q5(t,Y5())?new Proxy(t,Gb):t)}function hs(t){if(t instanceof IDBRequest)return X5(t);if(Bb.has(t))return Bb.get(t);let e=eA(t);return e!==t&&(Bb.set(t,e),Hb.set(e,t)),e}var Vm=t=>Hb.get(t);function SI(t,e,{blocked:n,upgrade:s,blocking:i,terminated:o}={}){let a=indexedDB.open(t,e),u=hs(a);return s&&a.addEventListener("upgradeneeded",d=>{s(hs(a.result),d.oldVersion,d.newVersion,hs(a.transaction),d)}),n&&a.addEventListener("blocked",d=>n(d.oldVersion,d.newVersion,d)),u.then(d=>{o&&d.addEventListener("close",()=>o()),i&&d.addEventListener("versionchange",p=>i(p.oldVersion,p.newVersion,p))}).catch(()=>{}),u}var tA=["get","getKey","getAll","getAllKeys","count"],nA=["put","add","delete","clear"],Wb=new Map;function EI(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Wb.get(e))return Wb.get(e);let n=e.replace(/FromIndex$/,""),s=e!==n,i=nA.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(i||tA.includes(n)))return;let o=async function(a,...u){let d=this.transaction(a,i?"readwrite":"readonly"),p=d.store;return s&&(p=p.index(u.shift())),(await Promise.all([p[n](...u),i&&d.done]))[0]};return Wb.set(e,o),o}II(t=>({...t,get:(e,n,s)=>EI(e,n)||t.get(e,n,s),has:(e,n)=>!!EI(e,n)||t.has(e,n)}));var Qb=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(rA(n)){let s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}};function rA(t){return t.getComponent()?.type==="VERSION"}var Yb="@firebase/app",TI="0.14.8";var ni=new po("@firebase/app"),sA="@firebase/app-compat",iA="@firebase/analytics-compat",oA="@firebase/analytics",aA="@firebase/app-check-compat",lA="@firebase/app-check",cA="@firebase/auth",uA="@firebase/auth-compat",dA="@firebase/database",hA="@firebase/data-connect",mA="@firebase/database-compat",pA="@firebase/functions",fA="@firebase/functions-compat",gA="@firebase/installations",bA="@firebase/installations-compat",vA="@firebase/messaging",xA="@firebase/messaging-compat",yA="@firebase/performance",wA="@firebase/performance-compat",NA="@firebase/remote-config",_A="@firebase/remote-config-compat",IA="@firebase/storage",EA="@firebase/storage-compat",SA="@firebase/firestore",TA="@firebase/ai",kA="@firebase/firestore-compat",CA="firebase",AA="12.9.0";var Jb="[DEFAULT]",PA={[Yb]:"fire-core",[sA]:"fire-core-compat",[oA]:"fire-analytics",[iA]:"fire-analytics-compat",[lA]:"fire-app-check",[aA]:"fire-app-check-compat",[cA]:"fire-auth",[uA]:"fire-auth-compat",[dA]:"fire-rtdb",[hA]:"fire-data-connect",[mA]:"fire-rtdb-compat",[pA]:"fire-fn",[fA]:"fire-fn-compat",[gA]:"fire-iid",[bA]:"fire-iid-compat",[vA]:"fire-fcm",[xA]:"fire-fcm-compat",[yA]:"fire-perf",[wA]:"fire-perf-compat",[NA]:"fire-rc",[_A]:"fire-rc-compat",[IA]:"fire-gcs",[EA]:"fire-gcs-compat",[SA]:"fire-fst",[kA]:"fire-fst-compat",[TA]:"fire-vertex","fire-js":"fire-js",[CA]:"fire-js-all"};var Mm=new Map,DA=new Map,Xb=new Map;function kI(t,e){try{t.container.addComponent(e)}catch(n){ni.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function go(t){let e=t.name;if(Xb.has(e))return ni.debug(`There were multiple attempts to register component ${e}.`),!1;Xb.set(e,t);for(let n of Mm.values())kI(n,t);for(let n of DA.values())kI(n,t);return!0}function Hu(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function dn(t){return t==null?!1:t.settings!==void 0}var OA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},fo=new ti("app","Firebase",OA);var Zb=class{constructor(e,n,s){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new mr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw fo.create("app-deleted",{appName:this._name})}};var bo=AA;function tv(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let s={name:Jb,automaticDataCollectionEnabled:!0,...e},i=s.name;if(typeof i!="string"||!i)throw fo.create("bad-app-name",{appName:String(i)});if(n||(n=Fb()),!n)throw fo.create("no-options");let o=Mm.get(i);if(o){if(Mr(n,o.options)&&Mr(s,o.config))return o;throw fo.create("duplicate-app",{appName:i})}let a=new Lm(i);for(let d of Xb.values())a.addComponent(d);let u=new Zb(n,s,a);return Mm.set(i,u),u}function $m(t=Jb){let e=Mm.get(t);if(!e&&t===Jb&&Fb())return tv();if(!e)throw fo.create("no-app",{appName:t});return e}function $r(t,e,n){let s=PA[t]??t;n&&(s+=`-${n}`);let i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){let a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ni.warn(a.join(" "));return}go(new mr(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}var LA="firebase-heartbeat-database",VA=1,Gu="firebase-heartbeat-store",Kb=null;function DI(){return Kb||(Kb=SI(LA,VA,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Gu)}catch(n){console.warn(n)}}}}).catch(t=>{throw fo.create("idb-open",{originalErrorMessage:t.message})})),Kb}async function MA(t){try{let n=(await DI()).transaction(Gu),s=await n.objectStore(Gu).get(OI(t));return await n.done,s}catch(e){if(e instanceof Yn)ni.warn(e.message);else{let n=fo.create("idb-get",{originalErrorMessage:e?.message});ni.warn(n.message)}}}async function CI(t,e){try{let s=(await DI()).transaction(Gu,"readwrite");await s.objectStore(Gu).put(e,OI(t)),await s.done}catch(n){if(n instanceof Yn)ni.warn(n.message);else{let s=fo.create("idb-set",{originalErrorMessage:n?.message});ni.warn(s.message)}}}function OI(t){return`${t.name}!${t.options.appId}`}var $A=1024,FA=30,Rb=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new ev(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{let n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=AI();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(i=>i.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:n}),this._heartbeatsCache.heartbeats.length>FA){let i=jA(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){ni.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";let e=AI(),{heartbeatsToSend:n,unsentEntries:s}=UA(this._heartbeatsCache.heartbeats),i=qu(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return ni.warn(e),""}}};function AI(){return new Date().toISOString().substring(0,10)}function UA(t,e=$A){let n=[],s=t.slice();for(let i of t){let o=n.find(a=>a.agent===i.agent);if(o){if(o.dates.push(i.date),PI(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),PI(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}var ev=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return jb()?bI().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){let n=await MA(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){let s=await this.read();return CI(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){let s=await this.read();return CI(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}};function PI(t){return qu(JSON.stringify({version:2,heartbeats:t})).length}function jA(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let s=1;s<t.length;s++)t[s].date<n&&(n=t[s].date,e=s);return e}function zA(t){go(new mr("platform-logger",e=>new Qb(e),"PRIVATE")),go(new mr("heartbeat",e=>new Rb(e),"PRIVATE")),$r(Yb,TI,t),$r(Yb,TI,"esm2020"),$r("fire-js","")}zA("");var BA="firebase",qA="12.9.0";$r(BA,qA,"app");function ZI(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var RI=ZI,eE=new ti("auth","Firebase",ZI());var Gm=new po("@firebase/auth");function GA(t,...e){Gm.logLevel<=Oe.WARN&&Gm.warn(`Auth (${bo}): ${t}`,...e)}function Um(t,...e){Gm.logLevel<=Oe.ERROR&&Gm.error(`Auth (${bo}): ${t}`,...e)}function Ur(t,...e){throw Sv(t,...e)}function ps(t,...e){return Sv(t,...e)}function tE(t,e,n){let s={...RI(),[e]:n};return new ti("auth","Firebase",s).create(e,{appName:t.name})}function Fr(t){return tE(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Sv(t,...e){if(typeof t!="string"){let n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=t.name),t._errorFactory.create(n,...s)}return eE.create(t,...e)}function me(t,e,...n){if(!t)throw Sv(e,...n)}function ms(t){let e="INTERNAL ASSERTION FAILED: "+t;throw Um(e),new Error(e)}function si(t,e){t||ms(e)}function av(){return typeof self<"u"&&self.location?.href||""}function HA(){return LI()==="http:"||LI()==="https:"}function LI(){return typeof self<"u"&&self.location?.protocol||null}function WA(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(HA()||mI()||"connection"in navigator)?navigator.onLine:!0}function KA(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var da=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,si(n>e,"Short delay should be less than long delay!"),this.isMobile=dI()||pI()}get(){return WA()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function Tv(t,e){si(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var Hm=class{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ms("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ms("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ms("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var QA={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var YA=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],JA=new da(3e4,6e4);function Tt(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function hn(t,e,n,s,i={}){return nE(t,i,async()=>{let o={},a={};s&&(e==="GET"?a=s:o={body:JSON.stringify(s)});let u=zl({key:t.config.apiKey,...a}).slice(1),d=await t._getAdditionalHeaders();d["Content-Type"]="application/json",t.languageCode&&(d["X-Firebase-Locale"]=t.languageCode);let p={method:e,headers:d,...o};return hI()||(p.referrerPolicy="no-referrer"),t.emulatorConfig&&mo(t.emulatorConfig.host)&&(p.credentials="include"),Hm.fetch()(await rE(t,t.config.apiHost,n,u),p)})}async function nE(t,e,n){t._canInitEmulator=!1;let s={...QA,...e};try{let i=new lv(t),o=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();let a=await o.json();if("needConfirmation"in a)throw Ku(t,"account-exists-with-different-credential",a);if(o.ok&&!("errorMessage"in a))return a;{let u=o.ok?a.errorMessage:a.error.message,[d,p]=u.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ku(t,"credential-already-in-use",a);if(d==="EMAIL_EXISTS")throw Ku(t,"email-already-in-use",a);if(d==="USER_DISABLED")throw Ku(t,"user-disabled",a);let y=s[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw tE(t,y,p);Ur(t,y)}}catch(i){if(i instanceof Yn)throw i;Ur(t,"network-request-failed",{message:String(i)})}}async function oi(t,e,n,s,i={}){let o=await hn(t,e,n,s,i);return"mfaPendingCredential"in o&&Ur(t,"multi-factor-auth-required",{_serverResponse:o}),o}async function rE(t,e,n,s){let i=`${e}${n}?${s}`,o=t,a=o.config.emulator?Tv(t.config,i):`${t.config.apiScheme}://${i}`;return YA.includes(n)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(a).toString():a}function XA(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var lv=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(ps(this.auth,"network-request-failed")),JA.get())})}};function Ku(t,e,n){let s={appName:t.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);let i=ps(t,e,s);return i.customData._tokenResponse=n,i}function VI(t){return t!==void 0&&t.enterprise!==void 0}var Wm=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return XA(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}};async function sE(t,e){return hn(t,"GET","/v2/recaptchaConfig",Tt(t,e))}async function ZA(t,e){return hn(t,"POST","/v1/accounts:delete",e)}async function Km(t,e){return hn(t,"POST","/v1/accounts:lookup",e)}function Qu(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function iE(t,e=!1){let n=nt(t),s=await n.getIdToken(e),i=kv(s);me(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,a=o?.sign_in_provider;return{claims:i,token:s,authTime:Qu(nv(i.auth_time)),issuedAtTime:Qu(nv(i.iat)),expirationTime:Qu(nv(i.exp)),signInProvider:a||null,signInSecondFactor:o?.sign_in_second_factor||null}}function nv(t){return Number(t)*1e3}function kv(t){let[e,n,s]=t.split(".");if(e===void 0||n===void 0||s===void 0)return Um("JWT malformed, contained fewer than 3 sections"),null;try{let i=Am(n);return i?JSON.parse(i):(Um("Failed to decode base64 JWT payload"),null)}catch(i){return Um("Caught error parsing JWT payload as JSON",i?.toString()),null}}function MI(t){let e=kv(t);return me(e,"internal-error"),me(typeof e.exp<"u","internal-error"),me(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Xu(t,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof Yn&&RA(s)&&t.auth.currentUser===t&&await t.auth.signOut(),s}}function RA({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var cv=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){let n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;let s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}};var Zu=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Qu(this.lastLoginAt),this.creationTime=Qu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};async function Qm(t){let e=t.auth,n=await t.getIdToken(),s=await Xu(t,Km(e,{idToken:n}));me(s?.users.length,e,"internal-error");let i=s.users[0];t._notifyReloadListener(i);let o=i.providerUserInfo?.length?aE(i.providerUserInfo):[],a=eP(t.providerData,o),u=t.isAnonymous,d=!(t.email&&i.passwordHash)&&!a?.length,p=u?d:!1,y={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new Zu(i.createdAt,i.lastLoginAt),isAnonymous:p};Object.assign(t,y)}async function oE(t){let e=nt(t);await Qm(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function eP(t,e){return[...t.filter(s=>!e.some(i=>i.providerId===s.providerId)),...e]}function aE(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function tP(t,e){let n=await nE(t,{},async()=>{let s=zl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=t.config,a=await rE(t,i,"/v1/token",`key=${o}`),u=await t._getAdditionalHeaders();u["Content-Type"]="application/x-www-form-urlencoded";let d={method:"POST",headers:u,body:s};return t.emulatorConfig&&mo(t.emulatorConfig.host)&&(d.credentials="include"),Hm.fetch()(a,d)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function nP(t,e){return hn(t,"POST","/v2/accounts:revokeToken",Tt(t,e))}var Yu=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){me(e.idToken,"internal-error"),me(typeof e.idToken<"u","internal-error"),me(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):MI(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){me(e.length!==0,"internal-error");let n=MI(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(me(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){let{accessToken:s,refreshToken:i,expiresIn:o}=await tP(e,n);this.updateTokensAndExpiration(s,i,Number(o))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){let{refreshToken:s,accessToken:i,expirationTime:o}=n,a=new t;return s&&(me(typeof s=="string","internal-error",{appName:e}),a.refreshToken=s),i&&(me(typeof i=="string","internal-error",{appName:e}),a.accessToken=i),o&&(me(typeof o=="number","internal-error",{appName:e}),a.expirationTime=o),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return ms("not implemented")}};function vo(t,e){me(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var xo=class t{constructor({uid:e,auth:n,stsTokenManager:s,...i}){this.providerId="firebase",this.proactiveRefresh=new cv(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Zu(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){let n=await Xu(this,this.stsTokenManager.getToken(this.auth,e));return me(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return iE(this,e)}reload(){return oE(this)}_assign(e){this!==e&&(me(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){me(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await Qm(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(dn(this.auth.app))return Promise.reject(Fr(this.auth));let e=await this.getIdToken();return await Xu(this,ZA(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){let s=n.displayName??void 0,i=n.email??void 0,o=n.phoneNumber??void 0,a=n.photoURL??void 0,u=n.tenantId??void 0,d=n._redirectEventId??void 0,p=n.createdAt??void 0,y=n.lastLoginAt??void 0,{uid:_,emailVerified:N,isAnonymous:A,providerData:z,stsTokenManager:B}=n;me(_&&B,e,"internal-error");let g=Yu.fromJSON(this.name,B);me(typeof _=="string",e,"internal-error"),vo(s,e.name),vo(i,e.name),me(typeof N=="boolean",e,"internal-error"),me(typeof A=="boolean",e,"internal-error"),vo(o,e.name),vo(a,e.name),vo(u,e.name),vo(d,e.name),vo(p,e.name),vo(y,e.name);let L=new t({uid:_,auth:e,email:i,emailVerified:N,displayName:s,isAnonymous:A,photoURL:a,phoneNumber:o,tenantId:u,stsTokenManager:g,createdAt:p,lastLoginAt:y});return z&&Array.isArray(z)&&(L.providerData=z.map(w=>({...w}))),d&&(L._redirectEventId=d),L}static async _fromIdTokenResponse(e,n,s=!1){let i=new Yu;i.updateFromServerResponse(n);let o=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:s});return await Qm(o),o}static async _fromGetAccountInfoResponse(e,n,s){let i=n.users[0];me(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?aE(i.providerUserInfo):[],a=!(i.email&&i.passwordHash)&&!o?.length,u=new Yu;u.updateFromIdToken(s);let d=new t({uid:i.localId,auth:e,stsTokenManager:u,isAnonymous:a}),p={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Zu(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(d,p),d}};var $I=new Map;function ri(t){si(t instanceof Function,"Expected a class definition");let e=$I.get(t);return e?(si(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,$I.set(t,e),e)}var Ym=class{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){let n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}};Ym.type="NONE";var uv=Ym;function jm(t,e,n){return`firebase:${t}:${e}:${n}`}var Jm=class t{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;let{config:i,name:o}=this.auth;this.fullUserKey=jm(this.userKey,i.apiKey,o),this.fullPersistenceKey=jm("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){let e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let n=await Km(this.auth,{idToken:e}).catch(()=>{});return n?xo._fromGetAccountInfoResponse(this.auth,n,e):null}return xo._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;let n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new t(ri(uv),e,s);let i=(await Promise.all(n.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p),o=i[0]||ri(uv),a=jm(s,e.config.apiKey,e.name),u=null;for(let p of n)try{let y=await p._get(a);if(y){let _;if(typeof y=="string"){let N=await Km(e,{idToken:y}).catch(()=>{});if(!N)break;_=await xo._fromGetAccountInfoResponse(e,N,y)}else _=xo._fromJSON(e,y);p!==o&&(u=_),o=p;break}}catch{}let d=i.filter(p=>p._shouldAllowMigration);return!o._shouldAllowMigration||!d.length?new t(o,e,s):(o=d[0],u&&await o._set(a,u.toJSON()),await Promise.all(n.map(async p=>{if(p!==o)try{await p._remove(a)}catch{}})),new t(o,e,s))}};function FI(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(dE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(lE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(mE(e))return"Blackberry";if(pE(e))return"Webos";if(cE(e))return"Safari";if((e.includes("chrome/")||uE(e))&&!e.includes("edge/"))return"Chrome";if(hE(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=t.match(n);if(s?.length===2)return s[1]}return"Other"}function lE(t=qt()){return/firefox\//i.test(t)}function cE(t=qt()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function uE(t=qt()){return/crios\//i.test(t)}function dE(t=qt()){return/iemobile/i.test(t)}function hE(t=qt()){return/android/i.test(t)}function mE(t=qt()){return/blackberry/i.test(t)}function pE(t=qt()){return/webos/i.test(t)}function Cv(t=qt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function rP(t=qt()){return Cv(t)&&!!window.navigator?.standalone}function sP(){return fI()&&document.documentMode===10}function fE(t=qt()){return Cv(t)||hE(t)||pE(t)||mE(t)||/windows phone/i.test(t)||dE(t)}function gE(t,e=[]){let n;switch(t){case"Browser":n=FI(qt());break;case"Worker":n=`${FI(qt())}-${t}`;break;default:n=t}let s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${bo}/${s}`}var dv=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let s=o=>new Promise((a,u)=>{try{let d=e(o);a(d)}catch(d){u(d)}});s.onAbort=n,this.queue.push(s);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;let n=[];try{for(let s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}};async function iP(t,e={}){return hn(t,"GET","/v2/passwordPolicy",Tt(t,e))}var oP=6,hv=class{constructor(e){let n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??oP,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){let n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){let s=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let i=0;i<e.length;i++)s=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var mv=class{constructor(e,n,s,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Xm(this),this.idTokenSubscription=new Xm(this),this.beforeStateQueue=new dv(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=eE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ri(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Jm.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;let e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{let n=await Km(this,{idToken:e}),s=await xo._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(dn(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}let n=await this.assertedPersistence.getCurrentUser(),s=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();let o=this.redirectUser?._redirectEventId,a=s?._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===a)&&u?.user&&(s=u.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return me(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Qm(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=KA()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(dn(this.app))return Promise.reject(Fr(this));let n=e?nt(e):null;return n&&me(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&me(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return dn(this.app)?Promise.reject(Fr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return dn(this.app)?Promise.reject(Fr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ri(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){let e=await iP(this),n=new hv(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ti("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){let n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await nP(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){let s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){let n=e&&ri(e)||this._popupRedirectResolver;me(n,this,"argument-error"),this.redirectPersistenceManager=await Jm.create(this,[ri(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,i){if(this._deleted)return()=>{};let o=typeof n=="function"?n:n.next.bind(n),a=!1,u=this._isInitialized?Promise.resolve():this._initializationPromise;if(me(u,this,"internal-error"),u.then(()=>{a||o(this.currentUser)}),typeof n=="function"){let d=e.addObserver(n,s,i);return()=>{a=!0,d()}}else{let d=e.addObserver(n);return()=>{a=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return me(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=gE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){let e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);let n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);let s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){if(dn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&GA(`Error while retrieving App Check token: ${e.error}`),e?.token}};function jr(t){return nt(t)}var Xm=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=xI(n=>this.observer=n)}get next(){return me(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var fp={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function aP(t){fp=t}function bE(t){return fp.loadJS(t)}function lP(){return fp.recaptchaEnterpriseScript}function cP(){return fp.gapiScript}function vE(t){return`__${t}${Math.floor(Math.random()*1e6)}`}var pv=class{constructor(){this.enterprise=new fv}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}},fv=class{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}};var uP="recaptcha-enterprise",Ju="NO_RECAPTCHA",Zm=class{constructor(e){this.type=uP,this.auth=jr(e)}async verify(e="verify",n=!1){async function s(o){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(a,u)=>{sE(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)u(new Error("recaptcha Enterprise site key undefined"));else{let p=new Wm(d);return o.tenantId==null?o._agentRecaptchaConfig=p:o._tenantRecaptchaConfigs[o.tenantId]=p,a(p.siteKey)}}).catch(d=>{u(d)})})}function i(o,a,u){let d=window.grecaptcha;VI(d)?d.enterprise.ready(()=>{d.enterprise.execute(o,{action:e}).then(p=>{a(p)}).catch(()=>{a(Ju)})}):u(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new pv().execute("siteKey",{action:"verify"}):new Promise((o,a)=>{s(this.auth).then(u=>{if(!n&&VI(window.grecaptcha))i(u,o,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let d=lP();d.length!==0&&(d+=u),bE(d).then(()=>{i(u,o,a)}).catch(p=>{a(p)})}}).catch(u=>{a(u)})})}};async function Wu(t,e,n,s=!1,i=!1){let o=new Zm(t),a;if(i)a=Ju;else try{a=await o.verify(n)}catch{a=await o.verify(n,!0)}let u={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in u){let d=u.phoneEnrollmentInfo.phoneNumber,p=u.phoneEnrollmentInfo.recaptchaToken;Object.assign(u,{phoneEnrollmentInfo:{phoneNumber:d,recaptchaToken:p,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in u){let d=u.phoneSignInInfo.recaptchaToken;Object.assign(u,{phoneSignInInfo:{recaptchaToken:d,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return u}return s?Object.assign(u,{captchaResp:a}):Object.assign(u,{captchaResponse:a}),Object.assign(u,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(u,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),u}async function Gl(t,e,n,s,i){if(i==="EMAIL_PASSWORD_PROVIDER")if(t._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let o=await Wu(t,e,n,n==="getOobCode");return s(t,o)}else return s(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let a=await Wu(t,e,n,n==="getOobCode");return s(t,a)}else return Promise.reject(o)});else if(i==="PHONE_PROVIDER")if(t._getRecaptchaConfig()?.isProviderEnabled("PHONE_PROVIDER")){let o=await Wu(t,e,n);return s(t,o).catch(async a=>{if(t._getRecaptchaConfig()?.getProviderEnforcementState("PHONE_PROVIDER")==="AUDIT"&&(a.code==="auth/missing-recaptcha-token"||a.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`);let u=await Wu(t,e,n,!1,!0);return s(t,u)}return Promise.reject(a)})}else{let o=await Wu(t,e,n,!1,!0);return s(t,o)}else return Promise.reject(i+" provider is not supported.")}async function dP(t){let e=jr(t),n=await sE(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),s=new Wm(n);e.tenantId==null?e._agentRecaptchaConfig=s:e._tenantRecaptchaConfigs[e.tenantId]=s,s.isAnyProviderEnabled()&&new Zm(e).verify()}function xE(t,e){let n=Hu(t,"auth");if(n.isInitialized()){let i=n.getImmediate(),o=n.getOptions();if(Mr(o,e??{}))return i;Ur(i,"already-initialized")}return n.initialize({options:e})}function hP(t,e){let n=e?.persistence||[],s=(Array.isArray(n)?n:[n]).map(ri);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(s,e?.popupRedirectResolver)}function yE(t,e,n){let s=jr(t);me(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");let i=!!n?.disableWarnings,o=wE(e),{host:a,port:u}=mP(e),d=u===null?"":`:${u}`,p={url:`${o}//${a}${d}/`},y=Object.freeze({host:a,port:u,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!s._canInitEmulator){me(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),me(Mr(p,s.config.emulator)&&Mr(y,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=p,s.emulatorConfig=y,s.settings.appVerificationDisabledForTesting=!0,mo(a)?(Dm(`${o}//${a}${d}`),Om("Auth",!0)):i||pP()}function wE(t){let e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function mP(t){let e=wE(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};let s=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(s);if(i){let o=i[1];return{host:o,port:UI(s.substr(o.length+1))}}else{let[o,a]=s.split(":");return{host:o,port:UI(a)}}}function UI(t){if(!t)return null;let e=Number(t);return isNaN(e)?null:e}function pP(){function t(){let e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}var ha=class{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ms("not implemented")}_getIdTokenResponse(e){return ms("not implemented")}_linkToIdToken(e,n){return ms("not implemented")}_getReauthenticationResolver(e){return ms("not implemented")}};async function fP(t,e){return hn(t,"POST","/v1/accounts:signUp",e)}async function gP(t,e){return oi(t,"POST","/v1/accounts:signInWithPassword",Tt(t,e))}async function bP(t,e){return oi(t,"POST","/v1/accounts:signInWithEmailLink",Tt(t,e))}async function vP(t,e){return oi(t,"POST","/v1/accounts:signInWithEmailLink",Tt(t,e))}var Ru=class t extends ha{constructor(e,n,s,i=null){super("password",s),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new t(e,n,"password")}static _fromEmailAndCode(e,n,s=null){return new t(e,n,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":let n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Gl(e,n,"signInWithPassword",gP,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return bP(e,{email:this._email,oobCode:this._password});default:Ur(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":let s={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Gl(e,s,"signUpPassword",fP,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return vP(e,{idToken:n,email:this._email,oobCode:this._password});default:Ur(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};async function Hl(t,e){return oi(t,"POST","/v1/accounts:signInWithIdp",Tt(t,e))}var xP="http://localhost",ma=class t extends ha{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){let n=new t(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Ur("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){let n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:i,...o}=n;if(!s||!i)return null;let a=new t(s,i);return a.idToken=o.idToken||void 0,a.accessToken=o.accessToken||void 0,a.secret=o.secret,a.nonce=o.nonce,a.pendingToken=o.pendingToken||null,a}_getIdTokenResponse(e){let n=this.buildRequest();return Hl(e,n)}_linkToIdToken(e,n){let s=this.buildRequest();return s.idToken=n,Hl(e,s)}_getReauthenticationResolver(e){let n=this.buildRequest();return n.autoCreate=!1,Hl(e,n)}buildRequest(){let e={requestUri:xP,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=zl(n)}return e}};async function jI(t,e){return hn(t,"POST","/v1/accounts:sendVerificationCode",Tt(t,e))}async function yP(t,e){return oi(t,"POST","/v1/accounts:signInWithPhoneNumber",Tt(t,e))}async function wP(t,e){let n=await oi(t,"POST","/v1/accounts:signInWithPhoneNumber",Tt(t,e));if(n.temporaryProof)throw Ku(t,"account-exists-with-different-credential",n);return n}var NP={USER_NOT_FOUND:"user-not-found"};async function _P(t,e){let n={...e,operation:"REAUTH"};return oi(t,"POST","/v1/accounts:signInWithPhoneNumber",Tt(t,n),NP)}var ed=class t extends ha{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,n){return new t({verificationId:e,verificationCode:n})}static _fromTokenResponse(e,n){return new t({phoneNumber:e,temporaryProof:n})}_getIdTokenResponse(e){return yP(e,this._makeVerificationRequest())}_linkToIdToken(e,n){return wP(e,{idToken:n,...this._makeVerificationRequest()})}_getReauthenticationResolver(e){return _P(e,this._makeVerificationRequest())}_makeVerificationRequest(){let{temporaryProof:e,phoneNumber:n,verificationId:s,verificationCode:i}=this.params;return e&&n?{temporaryProof:e,phoneNumber:n}:{sessionInfo:s,code:i}}toJSON(){let e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));let{verificationId:n,verificationCode:s,phoneNumber:i,temporaryProof:o}=e;return!s&&!n&&!i&&!o?null:new t({verificationId:n,verificationCode:s,phoneNumber:i,temporaryProof:o})}};function IP(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function EP(t){let e=Bl(ql(t)).link,n=e?Bl(ql(e)).deep_link_id:null,s=Bl(ql(t)).deep_link_id;return(s?Bl(ql(s)).link:null)||s||n||e||t}var Rm=class t{constructor(e){let n=Bl(ql(e)),s=n.apiKey??null,i=n.oobCode??null,o=IP(n.mode??null);me(s&&i&&o,"argument-error"),this.apiKey=s,this.operation=o,this.code=i,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){let n=EP(e);try{return new t(n)}catch{return null}}};var pa=class t{constructor(){this.providerId=t.PROVIDER_ID}static credential(e,n){return Ru._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){let s=Rm.parseLink(n);return me(s,"argument-error"),Ru._fromEmailAndCode(e,s.code,s.tenantId)}};pa.PROVIDER_ID="password";pa.EMAIL_PASSWORD_SIGN_IN_METHOD="password";pa.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var ep=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var fa=class extends ep{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var td=class t extends fa{constructor(){super("facebook.com")}static credential(e){return ma._fromParams({providerId:t.PROVIDER_ID,signInMethod:t.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return t.credentialFromTaggedObject(e)}static credentialFromError(e){return t.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return t.credential(e.oauthAccessToken)}catch{return null}}};td.FACEBOOK_SIGN_IN_METHOD="facebook.com";td.PROVIDER_ID="facebook.com";var nd=class t extends fa{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ma._fromParams({providerId:t.PROVIDER_ID,signInMethod:t.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return t.credentialFromTaggedObject(e)}static credentialFromError(e){return t.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;let{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return t.credential(n,s)}catch{return null}}};nd.GOOGLE_SIGN_IN_METHOD="google.com";nd.PROVIDER_ID="google.com";var rd=class t extends fa{constructor(){super("github.com")}static credential(e){return ma._fromParams({providerId:t.PROVIDER_ID,signInMethod:t.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return t.credentialFromTaggedObject(e)}static credentialFromError(e){return t.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return t.credential(e.oauthAccessToken)}catch{return null}}};rd.GITHUB_SIGN_IN_METHOD="github.com";rd.PROVIDER_ID="github.com";var sd=class t extends fa{constructor(){super("twitter.com")}static credential(e,n){return ma._fromParams({providerId:t.PROVIDER_ID,signInMethod:t.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return t.credentialFromTaggedObject(e)}static credentialFromError(e){return t.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;let{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return t.credential(n,s)}catch{return null}}};sd.TWITTER_SIGN_IN_METHOD="twitter.com";sd.PROVIDER_ID="twitter.com";async function NE(t,e){return oi(t,"POST","/v1/accounts:signUp",Tt(t,e))}var ii=class t{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,i=!1){let o=await xo._fromIdTokenResponse(e,s,i),a=zI(s);return new t({user:o,providerId:a,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);let i=zI(s);return new t({user:e,providerId:i,_tokenResponse:s,operationType:n})}};function zI(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}async function Av(t){if(dn(t.app))return Promise.reject(Fr(t));let e=jr(t);if(await e._initializationPromise,e.currentUser?.isAnonymous)return new ii({user:e.currentUser,providerId:null,operationType:"signIn"});let n=await NE(e,{returnSecureToken:!0}),s=await ii._fromIdTokenResponse(e,"signIn",n,!0);return await e._updateCurrentUser(s.user),s}var gv=class t extends Yn{constructor(e,n,s,i){super(n.code,n.message),this.operationType=s,this.user=i,Object.setPrototypeOf(this,t.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,i){return new t(e,n,s,i)}};function _E(t,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?gv._fromErrorAndOperation(t,o,e,s):o})}async function SP(t,e,n=!1){let s=await Xu(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ii._forOperation(t,"link",s)}async function TP(t,e,n=!1){let{auth:s}=t;if(dn(s.app))return Promise.reject(Fr(s));let i="reauthenticate";try{let o=await Xu(t,_E(s,i,e,t),n);me(o.idToken,s,"internal-error");let a=kv(o.idToken);me(a,s,"internal-error");let{sub:u}=a;return me(t.uid===u,s,"user-mismatch"),ii._forOperation(t,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&Ur(s,"user-mismatch"),o}}async function IE(t,e,n=!1){if(dn(t.app))return Promise.reject(Fr(t));let s="signIn",i=await _E(t,s,e),o=await ii._fromIdTokenResponse(t,s,i);return n||await t._updateCurrentUser(o.user),o}async function EE(t,e){return IE(jr(t),e)}async function kP(t,e){return oi(t,"POST","/v1/accounts:signInWithCustomToken",Tt(t,e))}async function gp(t,e){if(dn(t.app))return Promise.reject(Fr(t));let n=jr(t),s=await kP(n,{token:e,returnSecureToken:!0}),i=await ii._fromIdTokenResponse(n,"signIn",s);return await n._updateCurrentUser(i.user),i}async function SE(t){let e=jr(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Pv(t,e,n){if(dn(t.app))return Promise.reject(Fr(t));let s=jr(t),a=await Gl(s,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",NE,"EMAIL_PASSWORD_PROVIDER").catch(d=>{throw d.code==="auth/password-does-not-meet-requirements"&&SE(t),d}),u=await ii._fromIdTokenResponse(s,"signIn",a);return await s._updateCurrentUser(u.user),u}function bp(t,e,n){return dn(t.app)?Promise.reject(Fr(t)):EE(nt(t),pa.credential(e,n)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&SE(t),s})}function TE(t,e,n,s){return nt(t).onIdTokenChanged(e,n,s)}function kE(t,e,n){return nt(t).beforeAuthStateChanged(e,n)}function vp(t,e,n,s){return nt(t).onAuthStateChanged(e,n,s)}function BI(t,e){return hn(t,"POST","/v2/accounts/mfaEnrollment:start",Tt(t,e))}function CP(t,e){return hn(t,"POST","/v2/accounts/mfaEnrollment:finalize",Tt(t,e))}function AP(t,e){return hn(t,"POST","/v2/accounts/mfaEnrollment:start",Tt(t,e))}function PP(t,e){return hn(t,"POST","/v2/accounts/mfaEnrollment:finalize",Tt(t,e))}var tp="__sak";var np=class{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(tp,"1"),this.storage.removeItem(tp),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){let n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var DP=1e3,OP=10,rp=class extends np{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=fE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(let n of Object.keys(this.listeners)){let s=this.storage.getItem(n),i=this.localCache[n];s!==i&&e(n,i,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,u,d)=>{this.notifyListeners(a,d)});return}let s=e.key;n?this.detachListener():this.stopPolling();let i=()=>{let a=this.storage.getItem(s);!n&&this.localCache[s]===a||this.notifyListeners(s,a)},o=this.storage.getItem(s);sP()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,OP):i()}notifyListeners(e,n){this.localCache[e]=n;let s=this.listeners[e];if(s)for(let i of Array.from(s))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},DP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){let n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}};rp.type="LOCAL";var CE=rp;var LP=1e3;function rv(t){let e=t.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),n=RegExp(`${e}=([^;]+)`);return document.cookie.match(n)?.[1]??null}function sv(t){return`${window.location.protocol==="http:"?"__dev_":"__HOST-"}FIREBASE_${t.split(":")[3]}`}var bv=class{constructor(){this.type="COOKIE",this.listenerUnsubscribes=new Map}_getFinalTarget(e){if(typeof window===void 0)return e;let n=new URL(`${window.location.origin}/__cookies__`);return n.searchParams.set("finalTarget",e),n}async _isAvailable(){return typeof isSecureContext=="boolean"&&!isSecureContext||typeof navigator>"u"||typeof document>"u"?!1:navigator.cookieEnabled??!0}async _set(e,n){}async _get(e){if(!this._isAvailable())return null;let n=sv(e);return window.cookieStore?(await window.cookieStore.get(n))?.value:rv(n)}async _remove(e){if(!this._isAvailable()||!await this._get(e))return;let s=sv(e);document.cookie=`${s}=;Max-Age=34560000;Partitioned;Secure;SameSite=Strict;Path=/;Priority=High`,await fetch("/__cookies__",{method:"DELETE"}).catch(()=>{})}_addListener(e,n){if(!this._isAvailable())return;let s=sv(e);if(window.cookieStore){let u=(p=>{let y=p.changed.find(N=>N.name===s);y&&n(y.value),p.deleted.find(N=>N.name===s)&&n(null)}),d=()=>window.cookieStore.removeEventListener("change",u);return this.listenerUnsubscribes.set(n,d),window.cookieStore.addEventListener("change",u)}let i=rv(s),o=setInterval(()=>{let u=rv(s);u!==i&&(n(u),i=u)},LP),a=()=>clearInterval(o);this.listenerUnsubscribes.set(n,a)}_removeListener(e,n){let s=this.listenerUnsubscribes.get(n);s&&(s(),this.listenerUnsubscribes.delete(n))}};bv.type="COOKIE";var sp=class extends np{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}};sp.type="SESSION";var Dv=sp;function VP(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}var ip=class t{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){let n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;let s=new t(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){let n=e,{eventId:s,eventType:i,data:o}=n.data,a=this.handlersMap[i];if(!a?.size)return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:i});let u=Array.from(a).map(async p=>p(n.origin,o)),d=await VP(u);n.ports[0].postMessage({status:"done",eventId:s,eventType:i,response:d})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}};ip.receivers=[];function Ov(t="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return t+n}var vv=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,a;return new Promise((u,d)=>{let p=Ov("",20);i.port1.start();let y=setTimeout(()=>{d(new Error("unsupported_event"))},s);a={messageChannel:i,onMessage(_){let N=_;if(N.data.eventId===p)switch(N.data.status){case"ack":clearTimeout(y),o=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),u(N.data.response);break;default:clearTimeout(y),clearTimeout(o),d(new Error("invalid_response"));break}}},this.handlers.add(a),i.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:p,data:n},[i.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}};function fs(){return window}function MP(t){fs().location.href=t}function AE(){return typeof fs().WorkerGlobalScope<"u"&&typeof fs().importScripts=="function"}async function $P(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function FP(){return navigator?.serviceWorker?.controller||null}function UP(){return AE()?self:null}var PE="firebaseLocalStorageDb",jP=1,op="firebaseLocalStorage",DE="fbase_key",ga=class{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}};function xp(t,e){return t.transaction([op],e?"readwrite":"readonly").objectStore(op)}function zP(){let t=indexedDB.deleteDatabase(PE);return new ga(t).toPromise()}function xv(){let t=indexedDB.open(PE,jP);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{let s=t.result;try{s.createObjectStore(op,{keyPath:DE})}catch(i){n(i)}}),t.addEventListener("success",async()=>{let s=t.result;s.objectStoreNames.contains(op)?e(s):(s.close(),await zP(),e(await xv()))})})}async function qI(t,e,n){let s=xp(t,!0).put({[DE]:e,value:n});return new ga(s).toPromise()}async function BP(t,e){let n=xp(t,!1).get(e),s=await new ga(n).toPromise();return s===void 0?null:s.value}function GI(t,e){let n=xp(t,!0).delete(e);return new ga(n).toPromise()}var qP=800,GP=3,ap=class{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await xv(),this.db)}async _withRetries(e){let n=0;for(;;)try{let s=await this._openDb();return await e(s)}catch(s){if(n++>GP)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return AE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ip._getInstance(UP()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await $P(),!this.activeServiceWorker)return;this.sender=new vv(this.activeServiceWorker);let e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||FP()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;let e=await xv();return await qI(e,tp,"1"),await GI(e,tp),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>qI(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){let n=await this._withRetries(s=>BP(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>GI(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){let e=await this._withRetries(i=>{let o=xp(i,!1).getAll();return new ga(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];let n=[],s=new Set;if(e.length!==0)for(let{fbase_key:i,value:o}of e)s.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(o)&&(this.notifyListeners(i,o),n.push(i));for(let i of Object.keys(this.localCache))this.localCache[i]&&!s.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;let s=this.listeners[e];if(s)for(let i of Array.from(s))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),qP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}};ap.type="LOCAL";var OE=ap;function HI(t,e){return hn(t,"POST","/v2/accounts/mfaSignIn:start",Tt(t,e))}function HP(t,e){return hn(t,"POST","/v2/accounts/mfaSignIn:finalize",Tt(t,e))}function WP(t,e){return hn(t,"POST","/v2/accounts/mfaSignIn:finalize",Tt(t,e))}var e6=vE("rcb"),t6=new da(3e4,6e4);var zm="recaptcha";async function KP(t,e,n){if(!t._getRecaptchaConfig())try{await dP(t)}catch{console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let s;if(typeof e=="string"?s={phoneNumber:e}:s=e,"session"in s){let i=s.session;if("phoneNumber"in s){me(i.type==="enroll",t,"internal-error");let o={idToken:i.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,clientType:"CLIENT_TYPE_WEB"}};return(await Gl(t,o,"mfaSmsEnrollment",async(p,y)=>{if(y.phoneEnrollmentInfo.captchaResponse===Ju){me(n?.type===zm,p,"argument-error");let _=await iv(p,y,n);return BI(p,_)}return BI(p,y)},"PHONE_PROVIDER").catch(p=>Promise.reject(p))).phoneSessionInfo.sessionInfo}else{me(i.type==="signin",t,"internal-error");let o=s.multiFactorHint?.uid||s.multiFactorUid;me(o,t,"missing-multi-factor-info");let a={mfaPendingCredential:i.credential,mfaEnrollmentId:o,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}};return(await Gl(t,a,"mfaSmsSignIn",async(y,_)=>{if(_.phoneSignInInfo.captchaResponse===Ju){me(n?.type===zm,y,"argument-error");let N=await iv(y,_,n);return HI(y,N)}return HI(y,_)},"PHONE_PROVIDER").catch(y=>Promise.reject(y))).phoneResponseInfo.sessionInfo}}else{let i={phoneNumber:s.phoneNumber,clientType:"CLIENT_TYPE_WEB"};return(await Gl(t,i,"sendVerificationCode",async(d,p)=>{if(p.captchaResponse===Ju){me(n?.type===zm,d,"argument-error");let y=await iv(d,p,n);return jI(d,y)}return jI(d,p)},"PHONE_PROVIDER").catch(d=>Promise.reject(d))).sessionInfo}}finally{n?._reset()}}async function iv(t,e,n){me(n.type===zm,t,"argument-error");let s=await n.verify();me(typeof s=="string",t,"argument-error");let i={...e};if("phoneEnrollmentInfo"in i){let o=i.phoneEnrollmentInfo.phoneNumber,a=i.phoneEnrollmentInfo.captchaResponse,u=i.phoneEnrollmentInfo.clientType,d=i.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(i,{phoneEnrollmentInfo:{phoneNumber:o,recaptchaToken:s,captchaResponse:a,clientType:u,recaptchaVersion:d}}),i}else if("phoneSignInInfo"in i){let o=i.phoneSignInInfo.captchaResponse,a=i.phoneSignInInfo.clientType,u=i.phoneSignInInfo.recaptchaVersion;return Object.assign(i,{phoneSignInInfo:{recaptchaToken:s,captchaResponse:o,clientType:a,recaptchaVersion:u}}),i}else return Object.assign(i,{recaptchaToken:s}),i}var id=class t{constructor(e){this.providerId=t.PROVIDER_ID,this.auth=jr(e)}verifyPhoneNumber(e,n){return KP(this.auth,e,nt(n))}static credential(e,n){return ed._fromVerification(e,n)}static credentialFromResult(e){let n=e;return t.credentialFromTaggedObject(n)}static credentialFromError(e){return t.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;let{phoneNumber:n,temporaryProof:s}=e;return n&&s?ed._fromTokenResponse(n,s):null}};id.PROVIDER_ID="phone";id.PHONE_SIGN_IN_METHOD="phone";function QP(t,e){return e?ri(e):(me(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}var od=class extends ha{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Hl(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Hl(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Hl(e,this._buildIdpRequest())}_buildIdpRequest(e){let n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}};function YP(t){return IE(t.auth,new od(t),t.bypassAuthState)}function JP(t){let{auth:e,user:n}=t;return me(n,e,"internal-error"),TP(n,new od(t),t.bypassAuthState)}async function XP(t){let{auth:e,user:n}=t;return me(n,e,"internal-error"),SP(n,new od(t),t.bypassAuthState)}var lp=class{constructor(e,n,s,i,o=!1){this.auth=e,this.resolver=s,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){let{urlResponse:n,sessionId:s,postBody:i,tenantId:o,error:a,type:u}=e;if(a){this.reject(a);return}let d={auth:this.auth,requestUri:n,sessionId:s,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(d))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return YP;case"linkViaPopup":case"linkViaRedirect":return XP;case"reauthViaPopup":case"reauthViaRedirect":return JP;default:Ur(this.auth,"internal-error")}}resolve(e){si(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){si(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var ZP=new da(2e3,1e4);var yv=class t extends lp{constructor(e,n,s,i,o){super(e,n,i,o),this.provider=s,this.authWindow=null,this.pollId=null,t.currentPopupAction&&t.currentPopupAction.cancel(),t.currentPopupAction=this}async executeNotNull(){let e=await this.execute();return me(e,this.auth,"internal-error"),e}async onExecution(){si(this.filter.length===1,"Popup operations only handle one event");let e=Ov();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(ps(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(ps(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,t.currentPopupAction=null}pollUserCancellation(){let e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ps(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,ZP.get())};e()}};yv.currentPopupAction=null;var RP="pendingRedirect",Bm=new Map,wv=class extends lp{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=Bm.get(this.auth._key());if(!e){try{let s=await e4(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}Bm.set(this.auth._key(),e)}return this.bypassAuthState||Bm.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}};async function e4(t,e){let n=r4(e),s=n4(t);if(!await s._isAvailable())return!1;let i=await s._get(n)==="true";return await s._remove(n),i}function t4(t,e){Bm.set(t._key(),e)}function n4(t){return ri(t._redirectPersistence)}function r4(t){return jm(RP,t.config.apiKey,t.name)}async function s4(t,e,n=!1){if(dn(t.app))return Promise.reject(Fr(t));let s=jr(t),i=QP(s,e),a=await new wv(s,i,n).execute();return a&&!n&&(delete a.user._redirectEventId,await s._persistUserIfCurrent(a.user),await s._setRedirectUser(null,e)),a}var i4=600*1e3,Nv=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!o4(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!LE(e)){let s=e.error.code?.split("auth/")[1]||"internal-error";n.onError(ps(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){let s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=i4&&this.cachedEventUids.clear(),this.cachedEventUids.has(WI(e))}saveEventToCache(e){this.cachedEventUids.add(WI(e)),this.lastProcessedEventTime=Date.now()}};function WI(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function LE({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function o4(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return LE(t);default:return!1}}async function a4(t,e={}){return hn(t,"GET","/v1/projects",e)}var l4=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,c4=/^https?/;async function u4(t){if(t.config.emulator)return;let{authorizedDomains:e}=await a4(t);for(let n of e)try{if(d4(n))return}catch{}Ur(t,"unauthorized-domain")}function d4(t){let e=av(),{protocol:n,hostname:s}=new URL(e);if(t.startsWith("chrome-extension://")){let a=new URL(t);return a.hostname===""&&s===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===s}if(!c4.test(n))return!1;if(l4.test(t))return s===t;let i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(s)}var h4=new da(3e4,6e4);function KI(){let t=fs().___jsl;if(t?.H){for(let e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function m4(t){return new Promise((e,n)=>{function s(){KI(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{KI(),n(ps(t,"network-request-failed"))},timeout:h4.get()})}if(fs().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(fs().gapi?.load)s();else{let i=vE("iframefcb");return fs()[i]=()=>{gapi.load?s():n(ps(t,"network-request-failed"))},bE(`${cP()}?onload=${i}`).catch(o=>n(o))}}).catch(e=>{throw qm=null,e})}var qm=null;function p4(t){return qm=qm||m4(t),qm}var f4=new da(5e3,15e3),g4="__/auth/iframe",b4="emulator/auth/iframe",v4={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},x4=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function y4(t){let e=t.config;me(e.authDomain,t,"auth-domain-config-required");let n=e.emulator?Tv(e,b4):`https://${t.config.authDomain}/${g4}`,s={apiKey:e.apiKey,appName:t.name,v:bo},i=x4.get(t.config.apiHost);i&&(s.eid=i);let o=t._getFrameworks();return o.length&&(s.fw=o.join(",")),`${n}?${zl(s).slice(1)}`}async function w4(t){let e=await p4(t),n=fs().gapi;return me(n,t,"internal-error"),e.open({where:document.body,url:y4(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:v4,dontclear:!0},s=>new Promise(async(i,o)=>{await s.restyle({setHideOnLeave:!1});let a=ps(t,"network-request-failed"),u=fs().setTimeout(()=>{o(a)},f4.get());function d(){fs().clearTimeout(u),i(s)}s.ping(d).then(d,()=>{o(a)})}))}var N4={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},_4=500,I4=600,E4="_blank",S4="http://localhost",cp=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function T4(t,e,n,s=_4,i=I4){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-s)/2,0).toString(),u="",d={...N4,width:s.toString(),height:i.toString(),top:o,left:a},p=qt().toLowerCase();n&&(u=uE(p)?E4:n),lE(p)&&(e=e||S4,d.scrollbars="yes");let y=Object.entries(d).reduce((N,[A,z])=>`${N}${A}=${z},`,"");if(rP(p)&&u!=="_self")return k4(e||"",u),new cp(null);let _=window.open(e||"",u,y);me(_,t,"popup-blocked");try{_.focus()}catch{}return new cp(_)}function k4(t,e){let n=document.createElement("a");n.href=t,n.target=e;let s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}var C4="__/auth/handler",A4="emulator/auth/handler",P4=encodeURIComponent("fac");async function QI(t,e,n,s,i,o){me(t.config.authDomain,t,"auth-domain-config-required"),me(t.config.apiKey,t,"invalid-api-key");let a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:s,v:bo,eventId:i};if(e instanceof ep){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",vI(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(let[y,_]of Object.entries(o||{}))a[y]=_}if(e instanceof fa){let y=e.getScopes().filter(_=>_!=="");y.length>0&&(a.scopes=y.join(","))}t.tenantId&&(a.tid=t.tenantId);let u=a;for(let y of Object.keys(u))u[y]===void 0&&delete u[y];let d=await t._getAppCheckToken(),p=d?`#${P4}=${encodeURIComponent(d)}`:"";return`${D4(t)}?${zl(u).slice(1)}${p}`}function D4({config:t}){return t.emulator?Tv(t,A4):`https://${t.authDomain}/${C4}`}var ov="webStorageSupport",_v=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Dv,this._completeRedirectFn=s4,this._overrideRedirectResult=t4}async _openPopup(e,n,s,i){si(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");let o=await QI(e,n,s,av(),i);return T4(e,o,Ov())}async _openRedirect(e,n,s,i){await this._originValidation(e);let o=await QI(e,n,s,av(),i);return MP(o),new Promise(()=>{})}_initialize(e){let n=e._key();if(this.eventManagers[n]){let{manager:i,promise:o}=this.eventManagers[n];return i?Promise.resolve(i):(si(o,"If manager is not set, promise should be"),o)}let s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){let n=await w4(e),s=new Nv(e);return n.register("authEvent",i=>(me(i?.authEvent,e,"invalid-auth-event"),{status:s.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(ov,{type:ov},i=>{let o=i?.[0]?.[ov];o!==void 0&&n(!!o),Ur(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=u4(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return fE()||cE()||Cv()}},VE=_v,up=class{constructor(e){this.factorId=e}_process(e,n,s){switch(n.type){case"enroll":return this._finalizeEnroll(e,n.credential,s);case"signin":return this._finalizeSignIn(e,n.credential);default:return ms("unexpected MultiFactorSessionType")}}},Iv=class t extends up{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new t(e)}_finalizeEnroll(e,n,s){return CP(e,{idToken:n,displayName:s,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,n){return HP(e,{mfaPendingCredential:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},dp=class{constructor(){}static assertion(e){return Iv._fromCredential(e)}};dp.FACTOR_ID="phone";var hp=class{static assertionForEnrollment(e,n){return mp._fromSecret(e,n)}static assertionForSignIn(e,n){return mp._fromEnrollmentId(e,n)}static async generateSecret(e){let n=e;me(typeof n.user?.auth<"u","internal-error");let s=await AP(n.user.auth,{idToken:n.credential,totpEnrollmentInfo:{}});return pp._fromStartTotpMfaEnrollmentResponse(s,n.user.auth)}};hp.FACTOR_ID="totp";var mp=class t extends up{constructor(e,n,s){super("totp"),this.otp=e,this.enrollmentId=n,this.secret=s}static _fromSecret(e,n){return new t(n,void 0,e)}static _fromEnrollmentId(e,n){return new t(n,e)}async _finalizeEnroll(e,n,s){return me(typeof this.secret<"u",e,"argument-error"),PP(e,{idToken:n,displayName:s,totpVerificationInfo:this.secret._makeTotpVerificationInfo(this.otp)})}async _finalizeSignIn(e,n){me(this.enrollmentId!==void 0&&this.otp!==void 0,e,"argument-error");let s={verificationCode:this.otp};return WP(e,{mfaPendingCredential:n,mfaEnrollmentId:this.enrollmentId,totpVerificationInfo:s})}},pp=class t{constructor(e,n,s,i,o,a,u){this.sessionInfo=a,this.auth=u,this.secretKey=e,this.hashingAlgorithm=n,this.codeLength=s,this.codeIntervalSeconds=i,this.enrollmentCompletionDeadline=o}static _fromStartTotpMfaEnrollmentResponse(e,n){return new t(e.totpSessionInfo.sharedSecretKey,e.totpSessionInfo.hashingAlgorithm,e.totpSessionInfo.verificationCodeLength,e.totpSessionInfo.periodSec,new Date(e.totpSessionInfo.finalizeEnrollmentTime).toUTCString(),e.totpSessionInfo.sessionInfo,n)}_makeTotpVerificationInfo(e){return{sessionInfo:this.sessionInfo,verificationCode:e}}generateQrCodeUrl(e,n){let s=!1;return(Fm(e)||Fm(n))&&(s=!0),s&&(Fm(e)&&(e=this.auth.currentUser?.email||"unknownuser"),Fm(n)&&(n=this.auth.name)),`otpauth://totp/${n}:${e}?secret=${this.secretKey}&issuer=${n}&algorithm=${this.hashingAlgorithm}&digits=${this.codeLength}`}};function Fm(t){return typeof t>"u"||t?.length===0}var YI="@firebase/auth",JI="1.12.0";var Ev=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){me(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function O4(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function L4(t){go(new mr("auth",(e,{options:n})=>{let s=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:a,authDomain:u}=s.options;me(a&&!a.includes(":"),"invalid-api-key",{appName:s.name});let d={apiKey:a,authDomain:u,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:gE(t)},p=new mv(s,i,o,d);return hP(p,n),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),go(new mr("auth-internal",e=>{let n=jr(e.getProvider("auth").getImmediate());return(s=>new Ev(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),$r(YI,JI,O4(t)),$r(YI,JI,"esm2020")}var V4=300,M4=Ub("authIdTokenMaxAge")||V4,XI=null,$4=t=>async e=>{let n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>M4)return;let i=n?.token;XI!==i&&(XI=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function Lv(t=$m()){let e=Hu(t,"auth");if(e.isInitialized())return e.getImmediate();let n=xE(t,{popupRedirectResolver:VE,persistence:[OE,CE,Dv]}),s=Ub("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(s,location.origin);if(location.origin===o.origin){let a=$4(o.toString());kE(n,a,()=>a(n.currentUser)),TE(n,u=>a(u))}}let i=$b("auth");return i&&yE(n,`http://${i}`),n}function F4(){return document.getElementsByTagName("head")?.[0]??document}aP({loadJS(t){return new Promise((e,n)=>{let s=document.createElement("script");s.setAttribute("src",t),s.onload=e,s.onerror=i=>{let o=ps("internal-error");o.customData=i,n(o)},s.type="text/javascript",s.charset="UTF-8",F4().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});L4("Browser");var ME=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},$E={};var ai,Vv;(function(){var t;function e(T,S){function k(){}k.prototype=S.prototype,T.F=S.prototype,T.prototype=new k,T.prototype.constructor=T,T.D=function(M,$,q){for(var D=Array(arguments.length-2),At=2;At<arguments.length;At++)D[At-2]=arguments[At];return S.prototype[$].apply(M,D)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,n),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(T,S,k){k||(k=0);let M=Array(16);if(typeof S=="string")for(var $=0;$<16;++$)M[$]=S.charCodeAt(k++)|S.charCodeAt(k++)<<8|S.charCodeAt(k++)<<16|S.charCodeAt(k++)<<24;else for($=0;$<16;++$)M[$]=S[k++]|S[k++]<<8|S[k++]<<16|S[k++]<<24;S=T.g[0],k=T.g[1],$=T.g[2];let q=T.g[3],D;D=S+(q^k&($^q))+M[0]+3614090360&4294967295,S=k+(D<<7&4294967295|D>>>25),D=q+($^S&(k^$))+M[1]+3905402710&4294967295,q=S+(D<<12&4294967295|D>>>20),D=$+(k^q&(S^k))+M[2]+606105819&4294967295,$=q+(D<<17&4294967295|D>>>15),D=k+(S^$&(q^S))+M[3]+3250441966&4294967295,k=$+(D<<22&4294967295|D>>>10),D=S+(q^k&($^q))+M[4]+4118548399&4294967295,S=k+(D<<7&4294967295|D>>>25),D=q+($^S&(k^$))+M[5]+1200080426&4294967295,q=S+(D<<12&4294967295|D>>>20),D=$+(k^q&(S^k))+M[6]+2821735955&4294967295,$=q+(D<<17&4294967295|D>>>15),D=k+(S^$&(q^S))+M[7]+4249261313&4294967295,k=$+(D<<22&4294967295|D>>>10),D=S+(q^k&($^q))+M[8]+1770035416&4294967295,S=k+(D<<7&4294967295|D>>>25),D=q+($^S&(k^$))+M[9]+2336552879&4294967295,q=S+(D<<12&4294967295|D>>>20),D=$+(k^q&(S^k))+M[10]+4294925233&4294967295,$=q+(D<<17&4294967295|D>>>15),D=k+(S^$&(q^S))+M[11]+2304563134&4294967295,k=$+(D<<22&4294967295|D>>>10),D=S+(q^k&($^q))+M[12]+1804603682&4294967295,S=k+(D<<7&4294967295|D>>>25),D=q+($^S&(k^$))+M[13]+4254626195&4294967295,q=S+(D<<12&4294967295|D>>>20),D=$+(k^q&(S^k))+M[14]+2792965006&4294967295,$=q+(D<<17&4294967295|D>>>15),D=k+(S^$&(q^S))+M[15]+1236535329&4294967295,k=$+(D<<22&4294967295|D>>>10),D=S+($^q&(k^$))+M[1]+4129170786&4294967295,S=k+(D<<5&4294967295|D>>>27),D=q+(k^$&(S^k))+M[6]+3225465664&4294967295,q=S+(D<<9&4294967295|D>>>23),D=$+(S^k&(q^S))+M[11]+643717713&4294967295,$=q+(D<<14&4294967295|D>>>18),D=k+(q^S&($^q))+M[0]+3921069994&4294967295,k=$+(D<<20&4294967295|D>>>12),D=S+($^q&(k^$))+M[5]+3593408605&4294967295,S=k+(D<<5&4294967295|D>>>27),D=q+(k^$&(S^k))+M[10]+38016083&4294967295,q=S+(D<<9&4294967295|D>>>23),D=$+(S^k&(q^S))+M[15]+3634488961&4294967295,$=q+(D<<14&4294967295|D>>>18),D=k+(q^S&($^q))+M[4]+3889429448&4294967295,k=$+(D<<20&4294967295|D>>>12),D=S+($^q&(k^$))+M[9]+568446438&4294967295,S=k+(D<<5&4294967295|D>>>27),D=q+(k^$&(S^k))+M[14]+3275163606&4294967295,q=S+(D<<9&4294967295|D>>>23),D=$+(S^k&(q^S))+M[3]+4107603335&4294967295,$=q+(D<<14&4294967295|D>>>18),D=k+(q^S&($^q))+M[8]+1163531501&4294967295,k=$+(D<<20&4294967295|D>>>12),D=S+($^q&(k^$))+M[13]+2850285829&4294967295,S=k+(D<<5&4294967295|D>>>27),D=q+(k^$&(S^k))+M[2]+4243563512&4294967295,q=S+(D<<9&4294967295|D>>>23),D=$+(S^k&(q^S))+M[7]+1735328473&4294967295,$=q+(D<<14&4294967295|D>>>18),D=k+(q^S&($^q))+M[12]+2368359562&4294967295,k=$+(D<<20&4294967295|D>>>12),D=S+(k^$^q)+M[5]+4294588738&4294967295,S=k+(D<<4&4294967295|D>>>28),D=q+(S^k^$)+M[8]+2272392833&4294967295,q=S+(D<<11&4294967295|D>>>21),D=$+(q^S^k)+M[11]+1839030562&4294967295,$=q+(D<<16&4294967295|D>>>16),D=k+($^q^S)+M[14]+4259657740&4294967295,k=$+(D<<23&4294967295|D>>>9),D=S+(k^$^q)+M[1]+2763975236&4294967295,S=k+(D<<4&4294967295|D>>>28),D=q+(S^k^$)+M[4]+1272893353&4294967295,q=S+(D<<11&4294967295|D>>>21),D=$+(q^S^k)+M[7]+4139469664&4294967295,$=q+(D<<16&4294967295|D>>>16),D=k+($^q^S)+M[10]+3200236656&4294967295,k=$+(D<<23&4294967295|D>>>9),D=S+(k^$^q)+M[13]+681279174&4294967295,S=k+(D<<4&4294967295|D>>>28),D=q+(S^k^$)+M[0]+3936430074&4294967295,q=S+(D<<11&4294967295|D>>>21),D=$+(q^S^k)+M[3]+3572445317&4294967295,$=q+(D<<16&4294967295|D>>>16),D=k+($^q^S)+M[6]+76029189&4294967295,k=$+(D<<23&4294967295|D>>>9),D=S+(k^$^q)+M[9]+3654602809&4294967295,S=k+(D<<4&4294967295|D>>>28),D=q+(S^k^$)+M[12]+3873151461&4294967295,q=S+(D<<11&4294967295|D>>>21),D=$+(q^S^k)+M[15]+530742520&4294967295,$=q+(D<<16&4294967295|D>>>16),D=k+($^q^S)+M[2]+3299628645&4294967295,k=$+(D<<23&4294967295|D>>>9),D=S+($^(k|~q))+M[0]+4096336452&4294967295,S=k+(D<<6&4294967295|D>>>26),D=q+(k^(S|~$))+M[7]+1126891415&4294967295,q=S+(D<<10&4294967295|D>>>22),D=$+(S^(q|~k))+M[14]+2878612391&4294967295,$=q+(D<<15&4294967295|D>>>17),D=k+(q^($|~S))+M[5]+4237533241&4294967295,k=$+(D<<21&4294967295|D>>>11),D=S+($^(k|~q))+M[12]+1700485571&4294967295,S=k+(D<<6&4294967295|D>>>26),D=q+(k^(S|~$))+M[3]+2399980690&4294967295,q=S+(D<<10&4294967295|D>>>22),D=$+(S^(q|~k))+M[10]+4293915773&4294967295,$=q+(D<<15&4294967295|D>>>17),D=k+(q^($|~S))+M[1]+2240044497&4294967295,k=$+(D<<21&4294967295|D>>>11),D=S+($^(k|~q))+M[8]+1873313359&4294967295,S=k+(D<<6&4294967295|D>>>26),D=q+(k^(S|~$))+M[15]+4264355552&4294967295,q=S+(D<<10&4294967295|D>>>22),D=$+(S^(q|~k))+M[6]+2734768916&4294967295,$=q+(D<<15&4294967295|D>>>17),D=k+(q^($|~S))+M[13]+1309151649&4294967295,k=$+(D<<21&4294967295|D>>>11),D=S+($^(k|~q))+M[4]+4149444226&4294967295,S=k+(D<<6&4294967295|D>>>26),D=q+(k^(S|~$))+M[11]+3174756917&4294967295,q=S+(D<<10&4294967295|D>>>22),D=$+(S^(q|~k))+M[2]+718787259&4294967295,$=q+(D<<15&4294967295|D>>>17),D=k+(q^($|~S))+M[9]+3951481745&4294967295,T.g[0]=T.g[0]+S&4294967295,T.g[1]=T.g[1]+($+(D<<21&4294967295|D>>>11))&4294967295,T.g[2]=T.g[2]+$&4294967295,T.g[3]=T.g[3]+q&4294967295}s.prototype.v=function(T,S){S===void 0&&(S=T.length);let k=S-this.blockSize,M=this.C,$=this.h,q=0;for(;q<S;){if($==0)for(;q<=k;)i(this,T,q),q+=this.blockSize;if(typeof T=="string"){for(;q<S;)if(M[$++]=T.charCodeAt(q++),$==this.blockSize){i(this,M),$=0;break}}else for(;q<S;)if(M[$++]=T[q++],$==this.blockSize){i(this,M),$=0;break}}this.h=$,this.o+=S},s.prototype.A=function(){var T=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);T[0]=128;for(var S=1;S<T.length-8;++S)T[S]=0;S=this.o*8;for(var k=T.length-8;k<T.length;++k)T[k]=S&255,S/=256;for(this.v(T),T=Array(16),S=0,k=0;k<4;++k)for(let M=0;M<32;M+=8)T[S++]=this.g[k]>>>M&255;return T};function o(T,S){var k=u;return Object.prototype.hasOwnProperty.call(k,T)?k[T]:k[T]=S(T)}function a(T,S){this.h=S;let k=[],M=!0;for(let $=T.length-1;$>=0;$--){let q=T[$]|0;M&&q==S||(k[$]=q,M=!1)}this.g=k}var u={};function d(T){return-128<=T&&T<128?o(T,function(S){return new a([S|0],S<0?-1:0)}):new a([T|0],T<0?-1:0)}function p(T){if(isNaN(T)||!isFinite(T))return _;if(T<0)return g(p(-T));let S=[],k=1;for(let M=0;T>=k;M++)S[M]=T/k|0,k*=4294967296;return new a(S,0)}function y(T,S){if(T.length==0)throw Error("number format error: empty string");if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(T.charAt(0)=="-")return g(y(T.substring(1),S));if(T.indexOf("-")>=0)throw Error('number format error: interior "-" character');let k=p(Math.pow(S,8)),M=_;for(let q=0;q<T.length;q+=8){var $=Math.min(8,T.length-q);let D=parseInt(T.substring(q,q+$),S);$<8?($=p(Math.pow(S,$)),M=M.j($).add(p(D))):(M=M.j(k),M=M.add(p(D)))}return M}var _=d(0),N=d(1),A=d(16777216);t=a.prototype,t.m=function(){if(B(this))return-g(this).m();let T=0,S=1;for(let k=0;k<this.g.length;k++){let M=this.i(k);T+=(M>=0?M:4294967296+M)*S,S*=4294967296}return T},t.toString=function(T){if(T=T||10,T<2||36<T)throw Error("radix out of range: "+T);if(z(this))return"0";if(B(this))return"-"+g(this).toString(T);let S=p(Math.pow(T,6));var k=this;let M="";for(;;){let $=W(k,S).g;k=L(k,$.j(S));let q=((k.g.length>0?k.g[0]:k.h)>>>0).toString(T);if(k=$,z(k))return q+M;for(;q.length<6;)q="0"+q;M=q+M}},t.i=function(T){return T<0?0:T<this.g.length?this.g[T]:this.h};function z(T){if(T.h!=0)return!1;for(let S=0;S<T.g.length;S++)if(T.g[S]!=0)return!1;return!0}function B(T){return T.h==-1}t.l=function(T){return T=L(this,T),B(T)?-1:z(T)?0:1};function g(T){let S=T.g.length,k=[];for(let M=0;M<S;M++)k[M]=~T.g[M];return new a(k,~T.h).add(N)}t.abs=function(){return B(this)?g(this):this},t.add=function(T){let S=Math.max(this.g.length,T.g.length),k=[],M=0;for(let $=0;$<=S;$++){let q=M+(this.i($)&65535)+(T.i($)&65535),D=(q>>>16)+(this.i($)>>>16)+(T.i($)>>>16);M=D>>>16,q&=65535,D&=65535,k[$]=D<<16|q}return new a(k,k[k.length-1]&-2147483648?-1:0)};function L(T,S){return T.add(g(S))}t.j=function(T){if(z(this)||z(T))return _;if(B(this))return B(T)?g(this).j(g(T)):g(g(this).j(T));if(B(T))return g(this.j(g(T)));if(this.l(A)<0&&T.l(A)<0)return p(this.m()*T.m());let S=this.g.length+T.g.length,k=[];for(var M=0;M<2*S;M++)k[M]=0;for(M=0;M<this.g.length;M++)for(let $=0;$<T.g.length;$++){let q=this.i(M)>>>16,D=this.i(M)&65535,At=T.i($)>>>16,vr=T.i($)&65535;k[2*M+2*$]+=D*vr,w(k,2*M+2*$),k[2*M+2*$+1]+=q*vr,w(k,2*M+2*$+1),k[2*M+2*$+1]+=D*At,w(k,2*M+2*$+1),k[2*M+2*$+2]+=q*At,w(k,2*M+2*$+2)}for(T=0;T<S;T++)k[T]=k[2*T+1]<<16|k[2*T];for(T=S;T<2*S;T++)k[T]=0;return new a(k,0)};function w(T,S){for(;(T[S]&65535)!=T[S];)T[S+1]+=T[S]>>>16,T[S]&=65535,S++}function C(T,S){this.g=T,this.h=S}function W(T,S){if(z(S))throw Error("division by zero");if(z(T))return new C(_,_);if(B(T))return S=W(g(T),S),new C(g(S.g),g(S.h));if(B(S))return S=W(T,g(S)),new C(g(S.g),S.h);if(T.g.length>30){if(B(T)||B(S))throw Error("slowDivide_ only works with positive integers.");for(var k=N,M=S;M.l(T)<=0;)k=re(k),M=re(M);var $=oe(k,1),q=oe(M,1);for(M=oe(M,2),k=oe(k,2);!z(M);){var D=q.add(M);D.l(T)<=0&&($=$.add(k),q=D),M=oe(M,1),k=oe(k,1)}return S=L(T,$.j(S)),new C($,S)}for($=_;T.l(S)>=0;){for(k=Math.max(1,Math.floor(T.m()/S.m())),M=Math.ceil(Math.log(k)/Math.LN2),M=M<=48?1:Math.pow(2,M-48),q=p(k),D=q.j(S);B(D)||D.l(T)>0;)k-=M,q=p(k),D=q.j(S);z(q)&&(q=N),$=$.add(q),T=L(T,D)}return new C($,T)}t.B=function(T){return W(this,T).h},t.and=function(T){let S=Math.max(this.g.length,T.g.length),k=[];for(let M=0;M<S;M++)k[M]=this.i(M)&T.i(M);return new a(k,this.h&T.h)},t.or=function(T){let S=Math.max(this.g.length,T.g.length),k=[];for(let M=0;M<S;M++)k[M]=this.i(M)|T.i(M);return new a(k,this.h|T.h)},t.xor=function(T){let S=Math.max(this.g.length,T.g.length),k=[];for(let M=0;M<S;M++)k[M]=this.i(M)^T.i(M);return new a(k,this.h^T.h)};function re(T){let S=T.g.length+1,k=[];for(let M=0;M<S;M++)k[M]=T.i(M)<<1|T.i(M-1)>>>31;return new a(k,T.h)}function oe(T,S){let k=S>>5;S%=32;let M=T.g.length-k,$=[];for(let q=0;q<M;q++)$[q]=S>0?T.i(q+k)>>>S|T.i(q+k+1)<<32-S:T.i(q+k);return new a($,T.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,Vv=$E.Md5=s,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.B,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=p,a.fromString=y,ai=$E.Integer=a}).apply(typeof ME<"u"?ME:typeof self<"u"?self:typeof window<"u"?window:{});var yp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},li={};var Mv,U4,Wl,$v,ad,wp,Fv,Uv,jv;(function(){var t,e=Object.defineProperty;function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof yp=="object"&&yp];for(var f=0;f<c.length;++f){var b=c[f];if(b&&b.Math==Math)return b}throw Error("Cannot find global object")}var s=n(this);function i(c,f){if(f)e:{var b=s;c=c.split(".");for(var I=0;I<c.length-1;I++){var j=c[I];if(!(j in b))break e;b=b[j]}c=c[c.length-1],I=b[c],f=f(I),f!=I&&f!=null&&e(b,c,{configurable:!0,writable:!0,value:f})}}i("Symbol.dispose",function(c){return c||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(c){return c||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(c){return c||function(f){var b=[],I;for(I in f)Object.prototype.hasOwnProperty.call(f,I)&&b.push([I,f[I]]);return b}});var o=o||{},a=this||self;function u(c){var f=typeof c;return f=="object"&&c!=null||f=="function"}function d(c,f,b){return c.call.apply(c.bind,arguments)}function p(c,f,b){return p=d,p.apply(null,arguments)}function y(c,f){var b=Array.prototype.slice.call(arguments,1);return function(){var I=b.slice();return I.push.apply(I,arguments),c.apply(this,I)}}function _(c,f){function b(){}b.prototype=f.prototype,c.Z=f.prototype,c.prototype=new b,c.prototype.constructor=c,c.Ob=function(I,j,H){for(var ie=Array(arguments.length-2),_e=2;_e<arguments.length;_e++)ie[_e-2]=arguments[_e];return f.prototype[j].apply(I,ie)}}var N=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?c=>c&&AsyncContext.Snapshot.wrap(c):c=>c;function A(c){let f=c.length;if(f>0){let b=Array(f);for(let I=0;I<f;I++)b[I]=c[I];return b}return[]}function z(c,f){for(let I=1;I<arguments.length;I++){let j=arguments[I];var b=typeof j;if(b=b!="object"?b:j?Array.isArray(j)?"array":b:"null",b=="array"||b=="object"&&typeof j.length=="number"){b=c.length||0;let H=j.length||0;c.length=b+H;for(let ie=0;ie<H;ie++)c[b+ie]=j[ie]}else c.push(j)}}class B{constructor(f,b){this.i=f,this.j=b,this.h=0,this.g=null}get(){let f;return this.h>0?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function g(c){a.setTimeout(()=>{throw c},0)}function L(){var c=T;let f=null;return c.g&&(f=c.g,c.g=c.g.next,c.g||(c.h=null),f.next=null),f}class w{constructor(){this.h=this.g=null}add(f,b){let I=C.get();I.set(f,b),this.h?this.h.next=I:this.g=I,this.h=I}}var C=new B(()=>new W,c=>c.reset());class W{constructor(){this.next=this.g=this.h=null}set(f,b){this.h=f,this.g=b,this.next=null}reset(){this.next=this.g=this.h=null}}let re,oe=!1,T=new w,S=()=>{let c=Promise.resolve(void 0);re=()=>{c.then(k)}};function k(){for(var c;c=L();){try{c.h.call(c.g)}catch(b){g(b)}var f=C;f.j(c),f.h<100&&(f.h++,c.next=f.g,f.g=c)}oe=!1}function M(){this.u=this.u,this.C=this.C}M.prototype.u=!1,M.prototype.dispose=function(){this.u||(this.u=!0,this.N())},M.prototype[Symbol.dispose]=function(){this.dispose()},M.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function $(c,f){this.type=c,this.g=this.target=f,this.defaultPrevented=!1}$.prototype.h=function(){this.defaultPrevented=!0};var q=(function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,f=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let b=()=>{};a.addEventListener("test",b,f),a.removeEventListener("test",b,f)}catch{}return c})();function D(c){return/^[\s\xa0]*$/.test(c)}function At(c,f){$.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c&&this.init(c,f)}_(At,$),At.prototype.init=function(c,f){let b=this.type=c.type,I=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;this.target=c.target||c.srcElement,this.g=f,f=c.relatedTarget,f||(b=="mouseover"?f=c.fromElement:b=="mouseout"&&(f=c.toElement)),this.relatedTarget=f,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=c.pointerType,this.state=c.state,this.i=c,c.defaultPrevented&&At.Z.h.call(this)},At.prototype.h=function(){At.Z.h.call(this);let c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var vr="closure_listenable_"+(Math.random()*1e6|0),Y=0;function tn(c,f,b,I,j){this.listener=c,this.proxy=null,this.src=f,this.type=b,this.capture=!!I,this.ha=j,this.key=++Y,this.da=this.fa=!1}function Ee(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Ma(c,f,b){for(let I in c)f.call(b,c[I],I,c)}function $d(c,f){for(let b in c)f.call(void 0,c[b],b,c)}function Wt(c){let f={};for(let b in c)f[b]=c[b];return f}let Wr="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function wi(c,f){let b,I;for(let j=1;j<arguments.length;j++){I=arguments[j];for(b in I)c[b]=I[b];for(let H=0;H<Wr.length;H++)b=Wr[H],Object.prototype.hasOwnProperty.call(I,b)&&(c[b]=I[b])}}function $a(c){this.src=c,this.g={},this.h=0}$a.prototype.add=function(c,f,b,I,j){let H=c.toString();c=this.g[H],c||(c=this.g[H]=[],this.h++);let ie=Nn(c,f,I,j);return ie>-1?(f=c[ie],b||(f.fa=!1)):(f=new tn(f,this.src,H,!!I,j),f.fa=b,c.push(f)),f};function Fa(c,f){let b=f.type;if(b in c.g){var I=c.g[b],j=Array.prototype.indexOf.call(I,f,void 0),H;(H=j>=0)&&Array.prototype.splice.call(I,j,1),H&&(Ee(f),c.g[b].length==0&&(delete c.g[b],c.h--))}}function Nn(c,f,b,I){for(let j=0;j<c.length;++j){let H=c[j];if(!H.da&&H.listener==f&&H.capture==!!b&&H.ha==I)return j}return-1}var vc="closure_lm_"+(Math.random()*1e6|0),Kr={};function Co(c,f,b,I,j){if(I&&I.once)return xc(c,f,b,I,j);if(Array.isArray(f)){for(let H=0;H<f.length;H++)Co(c,f[H],b,I,j);return null}return b=Ao(b),c&&c[vr]?c.J(f,b,u(I)?!!I.capture:!!I,j):Ua(c,f,b,!1,I,j)}function Ua(c,f,b,I,j,H){if(!f)throw Error("Invalid event type");let ie=u(j)?!!j.capture:!!j,_e=_n(c);if(_e||(c[vc]=_e=new $a(c)),b=_e.add(f,b,I,ie,H),b.proxy)return b;if(I=Fd(),b.proxy=I,I.src=c,I.listener=b,c.addEventListener)q||(j=ie),j===void 0&&(j=!1),c.addEventListener(f.toString(),I,j);else if(c.attachEvent)c.attachEvent(he(f.toString()),I);else if(c.addListener&&c.removeListener)c.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return b}function Fd(){function c(b){return f.call(c.src,c.listener,b)}let f=Sf;return c}function xc(c,f,b,I,j){if(Array.isArray(f)){for(let H=0;H<f.length;H++)xc(c,f[H],b,I,j);return null}return b=Ao(b),c&&c[vr]?c.K(f,b,u(I)?!!I.capture:!!I,j):Ua(c,f,b,!0,I,j)}function Ud(c,f,b,I,j){if(Array.isArray(f))for(var H=0;H<f.length;H++)Ud(c,f[H],b,I,j);else I=u(I)?!!I.capture:!!I,b=Ao(b),c&&c[vr]?(c=c.i,H=String(f).toString(),H in c.g&&(f=c.g[H],b=Nn(f,b,I,j),b>-1&&(Ee(f[b]),Array.prototype.splice.call(f,b,1),f.length==0&&(delete c.g[H],c.h--)))):c&&(c=_n(c))&&(f=c.g[f.toString()],c=-1,f&&(c=Nn(f,b,I,j)),(b=c>-1?f[c]:null)&&yc(b))}function yc(c){if(typeof c!="number"&&c&&!c.da){var f=c.src;if(f&&f[vr])Fa(f.i,c);else{var b=c.type,I=c.proxy;f.removeEventListener?f.removeEventListener(b,I,c.capture):f.detachEvent?f.detachEvent(he(b),I):f.addListener&&f.removeListener&&f.removeListener(I),(b=_n(f))?(Fa(b,c),b.h==0&&(b.src=null,f[vc]=null)):Ee(c)}}}function he(c){return c in Kr?Kr[c]:Kr[c]="on"+c}function Sf(c,f){if(c.da)c=!0;else{f=new At(f,this);let b=c.listener,I=c.ha||c.src;c.fa&&yc(c),c=b.call(I,f)}return c}function _n(c){return c=c[vc],c instanceof $a?c:null}var ja="__closure_events_fn_"+(Math.random()*1e9>>>0);function Ao(c){return typeof c=="function"?c:(c[ja]||(c[ja]=function(f){return c.handleEvent(f)}),c[ja])}function Pt(){M.call(this),this.i=new $a(this),this.M=this,this.G=null}_(Pt,M),Pt.prototype[vr]=!0,Pt.prototype.removeEventListener=function(c,f,b,I){Ud(this,c,f,b,I)};function Kt(c,f){var b,I=c.G;if(I)for(b=[];I;I=I.G)b.push(I);if(c=c.M,I=f.type||f,typeof f=="string")f=new $(f,c);else if(f instanceof $)f.target=f.target||c;else{var j=f;f=new $(I,c),wi(f,j)}j=!0;let H,ie;if(b)for(ie=b.length-1;ie>=0;ie--)H=f.g=b[ie],j=za(H,I,!0,f)&&j;if(H=f.g=c,j=za(H,I,!0,f)&&j,j=za(H,I,!1,f)&&j,b)for(ie=0;ie<b.length;ie++)H=f.g=b[ie],j=za(H,I,!1,f)&&j}Pt.prototype.N=function(){if(Pt.Z.N.call(this),this.i){var c=this.i;for(let f in c.g){let b=c.g[f];for(let I=0;I<b.length;I++)Ee(b[I]);delete c.g[f],c.h--}}this.G=null},Pt.prototype.J=function(c,f,b,I){return this.i.add(String(c),f,!1,b,I)},Pt.prototype.K=function(c,f,b,I){return this.i.add(String(c),f,!0,b,I)};function za(c,f,b,I){if(f=c.i.g[String(f)],!f)return!0;f=f.concat();let j=!0;for(let H=0;H<f.length;++H){let ie=f[H];if(ie&&!ie.da&&ie.capture==b){let _e=ie.listener,Et=ie.ha||ie.src;ie.fa&&Fa(c.i,ie),j=_e.call(Et,I)!==!1&&j}}return j&&!I.defaultPrevented}function Be(c,f){if(typeof c!="function")if(c&&typeof c.handleEvent=="function")c=p(c.handleEvent,c);else throw Error("Invalid listener argument");return Number(f)>2147483647?-1:a.setTimeout(c,f||0)}function Es(c){c.g=Be(()=>{c.g=null,c.i&&(c.i=!1,Es(c))},c.l);let f=c.h;c.h=null,c.m.apply(null,f)}class xr extends M{constructor(f,b){super(),this.m=f,this.l=b,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:Es(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ss(c){M.call(this),this.h=c,this.g={}}_(Ss,M);var wc=[];function Nc(c){Ma(c.g,function(f,b){this.g.hasOwnProperty(b)&&yc(f)},c),c.g={}}Ss.prototype.N=function(){Ss.Z.N.call(this),Nc(this)},Ss.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var gt=a.JSON.stringify,_c=a.JSON.parse,Ba=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function qa(){}function Qr(){}var Ts={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function yr(){$.call(this,"d")}_(yr,$);function Ga(){$.call(this,"c")}_(Ga,$);var wr={},Ic=null;function h(){return Ic=Ic||new Pt}wr.Ia="serverreachability";function K(c){$.call(this,wr.Ia,c)}_(K,$);function _t(c){let f=h();Kt(f,new K(f))}wr.STAT_EVENT="statevent";function Ha(c,f){$.call(this,wr.STAT_EVENT,c),this.stat=f}_(Ha,$);function Dt(c){let f=h();Kt(f,new Ha(f,c))}wr.Ja="timingevent";function Ec(c,f){$.call(this,wr.Ja,c),this.size=f}_(Ec,$);function It(c,f){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},f)}function Xn(){this.g=!0}Xn.prototype.ua=function(){this.g=!1};function Po(c,f,b,I,j,H){c.info(function(){if(c.g)if(H){var ie="",_e=H.split("&");for(let He=0;He<_e.length;He++){var Et=_e[He].split("=");if(Et.length>1){let Mt=Et[0];Et=Et[1];let er=Mt.split("_");ie=er.length>=2&&er[1]=="type"?ie+(Mt+"="+Et+"&"):ie+(Mt+"=redacted&")}}}else ie=null;else ie=H;return"XMLHTTP REQ ("+I+") [attempt "+j+"]: "+f+`
`+b+`
`+ie})}function jd(c,f,b,I,j,H,ie){c.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+j+"]: "+f+`
`+b+`
`+H+" "+ie})}function Yr(c,f,b,I){c.info(function(){return"XMLHTTP TEXT ("+f+"): "+kf(c,b)+(I?" "+I:"")})}function Tf(c,f){c.info(function(){return"TIMEOUT: "+f})}Xn.prototype.info=function(){};function kf(c,f){if(!c.g)return f;if(!f)return null;try{let H=JSON.parse(f);if(H){for(c=0;c<H.length;c++)if(Array.isArray(H[c])){var b=H[c];if(!(b.length<2)){var I=b[1];if(Array.isArray(I)&&!(I.length<1)){var j=I[0];if(j!="noop"&&j!="stop"&&j!="close")for(let ie=1;ie<I.length;ie++)I[ie]=""}}}}return gt(H)}catch{return f}}var Wa={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},zd={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Bd;function Sc(){}_(Sc,qa),Sc.prototype.g=function(){return new XMLHttpRequest},Bd=new Sc;function Do(c){return encodeURIComponent(String(c))}function Cf(c){var f=1;c=c.split(":");let b=[];for(;f>0&&c.length;)b.push(c.shift()),f--;return c.length&&b.push(c.join(":")),b}function De(c,f,b,I){this.j=c,this.i=f,this.l=b,this.S=I||1,this.V=new Ss(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Ln}function Ln(){this.i=null,this.g="",this.h=!1}var nn={},ks={};function Qt(c,f,b){c.M=1,c.A=Xa(Yt(f)),c.u=b,c.R=!0,Zn(c,null)}function Zn(c,f){c.F=Date.now(),it(c),c.B=Yt(c.A);var b=c.B,I=c.S;Array.isArray(I)||(I=[String(I)]),Mo(b.i,"t",I),c.C=0,b=c.j.L,c.h=new Ln,c.g=Rn(c.j,b?f:null,!c.u),c.P>0&&(c.O=new xr(p(c.Y,c,c.g),c.P)),f=c.V,b=c.g,I=c.ba;var j="readystatechange";Array.isArray(j)||(j&&(wc[0]=j.toString()),j=wc);for(let H=0;H<j.length;H++){let ie=Co(b,j[H],I||f.handleEvent,!1,f.h||f);if(!ie)break;f.g[ie.key]=ie}f=c.J?Wt(c.J):{},c.u?(c.v||(c.v="POST"),f["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.B,c.v,c.u,f)):(c.v="GET",c.g.ea(c.B,c.v,null,f)),_t(),Po(c.i,c.v,c.B,c.l,c.S,c.u)}De.prototype.ba=function(c){c=c.target;let f=this.O;f&&Ds(c)==3?f.j():this.Y(c)},De.prototype.Y=function(c){try{if(c==this.g)e:{let _e=Ds(this.g),Et=this.g.ya(),He=this.g.ca();if(!(_e<3)&&(_e!=3||this.g&&(this.h.h||this.g.la()||Vc(this.g)))){this.K||_e!=4||Et==7||(Et==8||He<=0?_t(3):_t(2)),Re(this);var f=this.g.ca();this.X=f;var b=Ka(this);if(this.o=f==200,jd(this.i,this.v,this.B,this.l,this.S,_e,f),this.o){if(this.U&&!this.L){t:{if(this.g){var I,j=this.g;if((I=j.g?j.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!D(I)){var H=I;break t}}H=null}if(c=H)Yr(this.i,this.l,c,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Qa(this,c);else{this.o=!1,this.m=3,Dt(12),Mn(this),Vn(this);break e}}if(this.R){c=!0;let Mt;for(;!this.K&&this.C<b.length;)if(Mt=Ni(this,b),Mt==ks){_e==4&&(this.m=4,Dt(14),c=!1),Yr(this.i,this.l,null,"[Incomplete Response]");break}else if(Mt==nn){this.m=4,Dt(15),Yr(this.i,this.l,b,"[Invalid Chunk]"),c=!1;break}else Yr(this.i,this.l,Mt,null),Qa(this,Mt);if(Ot(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),_e!=4||b.length!=0||this.h.h||(this.m=1,Dt(16),c=!1),this.o=this.o&&c,!c)Yr(this.i,this.l,b,"[Invalid Chunked Response]"),Mn(this),Vn(this);else if(b.length>0&&!this.W){this.W=!0;var ie=this.j;ie.g==this&&ie.aa&&!ie.P&&(ie.j.info("Great, no buffering proxy detected. Bytes received: "+b.length),nl(ie),ie.P=!0,Dt(11))}}else Yr(this.i,this.l,b,null),Qa(this,b);_e==4&&Mn(this),this.o&&!this.K&&(_e==4?Pi(this.j,this):(this.o=!1,it(this)))}else el(this.g),f==400&&b.indexOf("Unknown SID")>0?(this.m=3,Dt(12)):(this.m=0,Dt(13)),Mn(this),Vn(this)}}}catch{}};function Ka(c){if(!Ot(c))return c.g.la();let f=Vc(c.g);if(f==="")return"";let b="",I=f.length,j=Ds(c.g)==4;if(!c.h.i){if(typeof TextDecoder>"u")return Mn(c),Vn(c),"";c.h.i=new a.TextDecoder}for(let H=0;H<I;H++)c.h.h=!0,b+=c.h.i.decode(f[H],{stream:!(j&&H==I-1)});return f.length=0,c.h.g+=b,c.C=0,c.h.g}function Ot(c){return c.g?c.v=="GET"&&c.M!=2&&c.j.Aa:!1}function Ni(c,f){var b=c.C,I=f.indexOf(`
`,b);return I==-1?ks:(b=Number(f.substring(b,I)),isNaN(b)?nn:(I+=1,I+b>f.length?ks:(f=f.slice(I,I+b),c.C=I+b,f)))}De.prototype.cancel=function(){this.K=!0,Mn(this)};function it(c){c.T=Date.now()+c.H,_i(c,c.H)}function _i(c,f){if(c.D!=null)throw Error("WatchDog timer not null");c.D=It(p(c.aa,c),f)}function Re(c){c.D&&(a.clearTimeout(c.D),c.D=null)}De.prototype.aa=function(){this.D=null;let c=Date.now();c-this.T>=0?(Tf(this.i,this.B),this.M!=2&&(_t(),Dt(17)),Mn(this),this.m=2,Vn(this)):_i(this,this.T-c)};function Vn(c){c.j.I==0||c.K||Pi(c.j,c)}function Mn(c){Re(c);var f=c.O;f&&typeof f.dispose=="function"&&f.dispose(),c.O=null,Nc(c.V),c.g&&(f=c.g,c.g=null,f.abort(),f.dispose())}function Qa(c,f){try{var b=c.j;if(b.I!=0&&(b.g==c||Tc(b.h,c))){if(!c.L&&Tc(b.h,c)&&b.I==3){try{var I=b.Ba.g.parse(f)}catch{I=null}if(Array.isArray(I)&&I.length==3){var j=I;if(j[0]==0){e:if(!b.v){if(b.g)if(b.g.F+3e3<c.F)Ir(b),tl(b);else break e;Fo(b),Dt(18)}}else b.xa=j[1],0<b.xa-b.K&&j[2]<37500&&b.F&&b.A==0&&!b.C&&(b.C=It(p(b.Va,b),6e3));Ja(b.h)<=1&&b.ta&&(b.ta=void 0)}else Di(b,11)}else if((c.L||b.g==c)&&Ir(b),!D(f))for(j=b.Ba.g.parse(f),f=0;f<j.length;f++){let He=j[f],Mt=He[0];if(!(Mt<=b.K))if(b.K=Mt,He=He[1],b.I==2)if(He[0]=="c"){b.M=He[1],b.ba=He[2];let er=He[3];er!=null&&(b.ka=er,b.j.info("VER="+b.ka));let Ms=He[4];Ms!=null&&(b.za=Ms,b.j.info("SVER="+b.za));let Er=He[5];Er!=null&&typeof Er=="number"&&Er>0&&(I=1.5*Er,b.O=I,b.j.info("backChannelRequestTimeoutMs_="+I)),I=b;let tr=c.g;if(tr){let sn=tr.g?tr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(sn){var H=I.h;H.g||sn.indexOf("spdy")==-1&&sn.indexOf("quic")==-1&&sn.indexOf("h2")==-1||(H.j=H.l,H.g=new Set,H.h&&(Ii(H,H.h),H.h=null))}if(I.G){let gn=tr.g?tr.g.getResponseHeader("X-HTTP-Session-Id"):null;gn&&(I.wa=gn,We(I.J,I.G,gn))}}b.I=3,b.l&&b.l.ra(),b.aa&&(b.T=Date.now()-c.F,b.j.info("Handshake RTT: "+b.T+"ms")),I=b;var ie=c;if(I.na=we(I,I.L?I.ba:null,I.W),ie.L){rn(I.h,ie);var _e=ie,Et=I.O;Et&&(_e.H=Et),_e.D&&(Re(_e),it(_e)),I.g=ie}else $c(I);b.i.length>0&&Rr(b)}else He[0]!="stop"&&He[0]!="close"||Di(b,7);else b.I==3&&(He[0]=="stop"||He[0]=="close"?He[0]=="stop"?Di(b,7):Hd(b):He[0]!="noop"&&b.l&&b.l.qa(He),b.A=0)}}_t(4)}catch{}}var Lt=class{constructor(c,f){this.g=c,this.map=f}};function Nr(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=c.length>0&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Ya(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Ja(c){return c.h?1:c.g?c.g.size:0}function Tc(c,f){return c.h?c.h==f:c.g?c.g.has(f):!1}function Ii(c,f){c.g?c.g.add(f):c.h=f}function rn(c,f){c.h&&c.h==f?c.h=null:c.g&&c.g.has(f)&&c.g.delete(f)}Nr.prototype.cancel=function(){if(this.i=Ei(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function Ei(c){if(c.h!=null)return c.i.concat(c.h.G);if(c.g!=null&&c.g.size!==0){let f=c.i;for(let b of c.g.values())f=f.concat(b.G);return f}return A(c.i)}var kc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Si(c,f){if(c){c=c.split("&");for(let b=0;b<c.length;b++){let I=c[b].indexOf("="),j,H=null;I>=0?(j=c[b].substring(0,I),H=c[b].substring(I+1)):j=c[b],f(j,H?decodeURIComponent(H.replace(/\+/g," ")):"")}}}function Te(c){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let f;c instanceof Te?(this.l=c.l,Vt(this,c.j),this.o=c.o,this.g=c.g,Oo(this,c.u),this.h=c.h,Cc(this,Za(c.i)),this.m=c.m):c&&(f=String(c).match(kc))?(this.l=!1,Vt(this,f[1]||"",!0),this.o=Cs(f[2]||""),this.g=Cs(f[3]||"",!0),Oo(this,f[4]),this.h=Cs(f[5]||"",!0),Cc(this,f[6]||"",!0),this.m=Cs(f[7]||"")):(this.l=!1,this.i=new Jr(null,this.l))}Te.prototype.toString=function(){let c=[];var f=this.j;f&&c.push(Lo(f,qd,!0),":");var b=this.g;return(b||f=="file")&&(c.push("//"),(f=this.o)&&c.push(Lo(f,qd,!0),"@"),c.push(Do(b).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),b=this.u,b!=null&&c.push(":",String(b))),(b=this.h)&&(this.g&&b.charAt(0)!="/"&&c.push("/"),c.push(Lo(b,b.charAt(0)=="/"?pe:Af,!0))),(b=this.i.toString())&&c.push("?",b),(b=this.m)&&c.push("#",Lo(b,fn)),c.join("")},Te.prototype.resolve=function(c){let f=Yt(this),b=!!c.j;b?Vt(f,c.j):b=!!c.o,b?f.o=c.o:b=!!c.g,b?f.g=c.g:b=c.u!=null;var I=c.h;if(b)Oo(f,c.u);else if(b=!!c.h){if(I.charAt(0)!="/")if(this.g&&!this.h)I="/"+I;else{var j=f.h.lastIndexOf("/");j!=-1&&(I=f.h.slice(0,j+1)+I)}if(j=I,j==".."||j==".")I="";else if(j.indexOf("./")!=-1||j.indexOf("/.")!=-1){I=j.lastIndexOf("/",0)==0,j=j.split("/");let H=[];for(let ie=0;ie<j.length;){let _e=j[ie++];_e=="."?I&&ie==j.length&&H.push(""):_e==".."?((H.length>1||H.length==1&&H[0]!="")&&H.pop(),I&&ie==j.length&&H.push("")):(H.push(_e),I=!0)}I=H.join("/")}else I=j}return b?f.h=I:b=c.i.toString()!=="",b?Cc(f,Za(c.i)):b=!!c.m,b&&(f.m=c.m),f};function Yt(c){return new Te(c)}function Vt(c,f,b){c.j=b?Cs(f,!0):f,c.j&&(c.j=c.j.replace(/:$/,""))}function Oo(c,f){if(f){if(f=Number(f),isNaN(f)||f<0)throw Error("Bad port number "+f);c.u=f}else c.u=null}function Cc(c,f,b){f instanceof Jr?(c.i=f,Ra(c.i,c.l)):(b||(f=Lo(f,$n)),c.i=new Jr(f,c.l))}function We(c,f,b){c.i.set(f,b)}function Xa(c){return We(c,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),c}function Cs(c,f){return c?f?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Lo(c,f,b){return typeof c=="string"?(c=encodeURI(c).replace(f,Ac),b&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function Ac(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var qd=/[#\/\?@]/g,Af=/[#\?:]/g,pe=/[#\?]/g,$n=/[#\?@]/g,fn=/#/g;function Jr(c,f){this.h=this.g=null,this.i=c||null,this.j=!!f}function As(c){c.g||(c.g=new Map,c.h=0,c.i&&Si(c.i,function(f,b){c.add(decodeURIComponent(f.replace(/\+/g," ")),b)}))}t=Jr.prototype,t.add=function(c,f){As(this),this.i=null,c=Ti(this,c);let b=this.g.get(c);return b||this.g.set(c,b=[]),b.push(f),this.h+=1,this};function Vo(c,f){As(c),f=Ti(c,f),c.g.has(f)&&(c.i=null,c.h-=c.g.get(f).length,c.g.delete(f))}function ge(c,f){return As(c),f=Ti(c,f),c.g.has(f)}t.forEach=function(c,f){As(this),this.g.forEach(function(b,I){b.forEach(function(j){c.call(f,j,I,this)},this)},this)};function jt(c,f){As(c);let b=[];if(typeof f=="string")ge(c,f)&&(b=b.concat(c.g.get(Ti(c,f))));else for(c=Array.from(c.g.values()),f=0;f<c.length;f++)b=b.concat(c[f]);return b}t.set=function(c,f){return As(this),this.i=null,c=Ti(this,c),ge(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[f]),this.h+=1,this},t.get=function(c,f){return c?(c=jt(this,c),c.length>0?String(c[0]):f):f};function Mo(c,f,b){Vo(c,f),b.length>0&&(c.i=null,c.g.set(Ti(c,f),A(b)),c.h+=b.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],f=Array.from(this.g.keys());for(let I=0;I<f.length;I++){var b=f[I];let j=Do(b);b=jt(this,b);for(let H=0;H<b.length;H++){let ie=j;b[H]!==""&&(ie+="="+Do(b[H])),c.push(ie)}}return this.i=c.join("&")};function Za(c){let f=new Jr;return f.i=c.i,c.g&&(f.g=new Map(c.g),f.h=c.h),f}function Ti(c,f){return f=String(f),c.j&&(f=f.toLowerCase()),f}function Ra(c,f){f&&!c.j&&(As(c),c.i=null,c.g.forEach(function(b,I){let j=I.toLowerCase();I!=j&&(Vo(this,I),Mo(this,j,b))},c)),c.j=f}function In(c,f){let b=new Xn;if(a.Image){let I=new Image;I.onload=y(Fe,b,"TestLoadImage: loaded",!0,f,I),I.onerror=y(Fe,b,"TestLoadImage: error",!1,f,I),I.onabort=y(Fe,b,"TestLoadImage: abort",!1,f,I),I.ontimeout=y(Fe,b,"TestLoadImage: timeout",!1,f,I),a.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=c}else f(!1)}function Pf(c,f){let b=new Xn,I=new AbortController,j=setTimeout(()=>{I.abort(),Fe(b,"TestPingServer: timeout",!1,f)},1e4);fetch(c,{signal:I.signal}).then(H=>{clearTimeout(j),H.ok?Fe(b,"TestPingServer: ok",!0,f):Fe(b,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(j),Fe(b,"TestPingServer: error",!1,f)})}function Fe(c,f,b,I,j){try{j&&(j.onload=null,j.onerror=null,j.onabort=null,j.ontimeout=null),I(b)}catch{}}function Fn(){this.g=new Ba}function Pc(c){this.i=c.Sb||null,this.h=c.ab||!1}_(Pc,qa),Pc.prototype.g=function(){return new Dc(this.i,this.h)};function Dc(c,f){Pt.call(this),this.H=c,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}_(Dc,Pt),t=Dc.prototype,t.open=function(c,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=c,this.D=f,this.readyState=1,Ps(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;let f={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};c&&(f.body=c),(this.H||a).fetch(new Request(this.D,f)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ci(this)),this.readyState=0},t.Pa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Ps(this)),this.g&&(this.readyState=3,Ps(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;ki(this)}else c.text().then(this.Oa.bind(this),this.ga.bind(this))};function ki(c){c.j.read().then(c.Ma.bind(c)).catch(c.ga.bind(c))}t.Ma=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var f=c.value?c.value:new Uint8Array(0);(f=this.B.decode(f,{stream:!c.done}))&&(this.response=this.responseText+=f)}c.done?Ci(this):Ps(this),this.readyState==3&&ki(this)}},t.Oa=function(c){this.g&&(this.response=this.responseText=c,Ci(this))},t.Na=function(c){this.g&&(this.response=c,Ci(this))},t.ga=function(){this.g&&Ci(this)};function Ci(c){c.readyState=4,c.l=null,c.j=null,c.B=null,Ps(c)}t.setRequestHeader=function(c,f){this.A.append(c,f)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],f=this.h.entries();for(var b=f.next();!b.done;)b=b.value,c.push(b[0]+": "+b[1]),b=f.next();return c.join(`\r
`)};function Ps(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Dc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Oc(c){let f="";return Ma(c,function(b,I){f+=I,f+=":",f+=b,f+=`\r
`}),f}function Xr(c,f,b){e:{for(I in b){var I=!1;break e}I=!0}I||(b=Oc(b),typeof c=="string"?b!=null&&Do(b):We(c,f,b))}function Ye(c){Pt.call(this),this.headers=new Map,this.L=c||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}_(Ye,Pt);var Gd=/^https?$/i,Lc=["POST","PUT"];t=Ye.prototype,t.Fa=function(c){this.H=c},t.ea=function(c,f,b,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);f=f?f.toUpperCase():"GET",this.D=c,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Bd.g(),this.g.onreadystatechange=N(p(this.Ca,this));try{this.B=!0,this.g.open(f,String(c),!0),this.B=!1}catch(H){ke(this,H);return}if(c=b||"",b=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var j in I)b.set(j,I[j]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(let H of I.keys())b.set(H,I.get(H));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(b.keys()).find(H=>H.toLowerCase()=="content-type"),j=a.FormData&&c instanceof a.FormData,!(Array.prototype.indexOf.call(Lc,f,void 0)>=0)||I||j||b.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[H,ie]of b)this.g.setRequestHeader(H,ie);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(c),this.v=!1}catch(H){ke(this,H)}};function ke(c,f){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=f,c.o=5,Un(c),Zr(c)}function Un(c){c.A||(c.A=!0,Kt(c,"complete"),Kt(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=c||7,Kt(this,"complete"),Kt(this,"abort"),Zr(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Zr(this,!0)),Ye.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?_r(this):this.Xa())},t.Xa=function(){_r(this)};function _r(c){if(c.h&&typeof o<"u"){if(c.v&&Ds(c)==4)setTimeout(c.Ca.bind(c),0);else if(Kt(c,"readystatechange"),Ds(c)==4){c.h=!1;try{let H=c.ca();e:switch(H){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var b;if(!(b=f)){var I;if(I=H===0){let ie=String(c.D).match(kc)[1]||null;!ie&&a.self&&a.self.location&&(ie=a.self.location.protocol.slice(0,-1)),I=!Gd.test(ie?ie.toLowerCase():"")}b=I}if(b)Kt(c,"complete"),Kt(c,"success");else{c.o=6;try{var j=Ds(c)>2?c.g.statusText:""}catch{j=""}c.l=j+" ["+c.ca()+"]",Un(c)}}finally{Zr(c)}}}}function Zr(c,f){if(c.g){c.m&&(clearTimeout(c.m),c.m=null);let b=c.g;c.g=null,f||Kt(c,"ready");try{b.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Ds(c){return c.g?c.g.readyState:0}t.ca=function(){try{return Ds(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(c){if(this.g){var f=this.g.responseText;return c&&f.indexOf(c)==0&&(f=f.substring(c.length)),_c(f)}};function Vc(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.F){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function el(c){let f={};c=(c.g&&Ds(c)>=2&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<c.length;I++){if(D(c[I]))continue;var b=Cf(c[I]);let j=b[0];if(b=b[1],typeof b!="string")continue;b=b.trim();let H=f[j]||[];f[j]=H,H.push(b)}$d(f,function(I){return I.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Os(c,f,b){return b&&b.internalChannelParams&&b.internalChannelParams[c]||f}function Df(c){this.za=0,this.i=[],this.j=new Xn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Os("failFast",!1,c),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Os("baseRetryDelayMs",5e3,c),this.Za=Os("retryDelaySeedMs",1e4,c),this.Ta=Os("forwardChannelMaxRetries",2,c),this.va=Os("forwardChannelRequestTimeoutMs",2e4,c),this.ma=c&&c.xmlHttpFactory||void 0,this.Ua=c&&c.Rb||void 0,this.Aa=c&&c.useFetchStreams||!1,this.O=void 0,this.L=c&&c.supportsCrossDomainXhr||!1,this.M="",this.h=new Nr(c&&c.concurrentRequestLimit),this.Ba=new Fn,this.S=c&&c.fastHandshake||!1,this.R=c&&c.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=c&&c.Pb||!1,c&&c.ua&&this.j.ua(),c&&c.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&c&&c.detectBufferingProxy||!1,this.ia=void 0,c&&c.longPollingTimeout&&c.longPollingTimeout>0&&(this.ia=c.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Df.prototype,t.ka=8,t.I=1,t.connect=function(c,f,b,I){Dt(0),this.W=c,this.H=f||{},b&&I!==void 0&&(this.H.OSID=b,this.H.OAID=I),this.F=this.X,this.J=we(this,null,this.W),Rr(this)};function Hd(c){if(Mc(c),c.I==3){var f=c.V++,b=Yt(c.J);if(We(b,"SID",c.M),We(b,"RID",f),We(b,"TYPE","terminate"),Ai(c,b),f=new De(c,c.j,f),f.M=2,f.A=Xa(Yt(b)),b=!1,a.navigator&&a.navigator.sendBeacon)try{b=a.navigator.sendBeacon(f.A.toString(),"")}catch{}!b&&a.Image&&(new Image().src=f.A,b=!0),b||(f.g=Rn(f.j,null),f.g.ea(f.A)),f.F=Date.now(),it(f)}Of(c)}function tl(c){c.g&&(nl(c),c.g.cancel(),c.g=null)}function Mc(c){tl(c),c.v&&(a.clearTimeout(c.v),c.v=null),Ir(c),c.h.cancel(),c.m&&(typeof c.m=="number"&&a.clearTimeout(c.m),c.m=null)}function Rr(c){if(!Ya(c.h)&&!c.m){c.m=!0;var f=c.Ea;re||S(),oe||(re(),oe=!0),T.add(f,c),c.D=0}}function tw(c,f){return Ja(c.h)>=c.h.j-(c.m?1:0)?!1:c.m?(c.i=f.G.concat(c.i),!0):c.I==1||c.I==2||c.D>=(c.Sa?0:c.Ta)?!1:(c.m=It(p(c.Ea,c,f),Uc(c,c.D)),c.D++,!0)}t.Ea=function(c){if(this.m)if(this.m=null,this.I==1){if(!c){this.V=Math.floor(Math.random()*1e5),c=this.V++;let j=new De(this,this.j,c),H=this.o;if(this.U&&(H?(H=Wt(H),wi(H,this.U)):H=this.U),this.u!==null||this.R||(j.J=H,H=null),this.S)e:{for(var f=0,b=0;b<this.i.length;b++){t:{var I=this.i[b];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(f+=I,f>4096){f=b;break e}if(f===4096||b===this.i.length-1){f=b+1;break e}}f=1e3}else f=1e3;f=Ls(this,j,f),b=Yt(this.J),We(b,"RID",c),We(b,"CVER",22),this.G&&We(b,"X-HTTP-Session-Id",this.G),Ai(this,b),H&&(this.R?f="headers="+Do(Oc(H))+"&"+f:this.u&&Xr(b,this.u,H)),Ii(this.h,j),this.Ra&&We(b,"TYPE","init"),this.S?(We(b,"$req",f),We(b,"SID","null"),j.U=!0,Qt(j,b,null)):Qt(j,b,f),this.I=2}}else this.I==3&&(c?$o(this,c):this.i.length==0||Ya(this.h)||$o(this))};function $o(c,f){var b;f?b=f.l:b=c.V++;let I=Yt(c.J);We(I,"SID",c.M),We(I,"RID",b),We(I,"AID",c.K),Ai(c,I),c.u&&c.o&&Xr(I,c.u,c.o),b=new De(c,c.j,b,c.D+1),c.u===null&&(b.J=c.o),f&&(c.i=f.G.concat(c.i)),f=Ls(c,b,1e3),b.H=Math.round(c.va*.5)+Math.round(c.va*.5*Math.random()),Ii(c.h,b),Qt(b,I,f)}function Ai(c,f){c.H&&Ma(c.H,function(b,I){We(f,I,b)}),c.l&&Ma({},function(b,I){We(f,I,b)})}function Ls(c,f,b){b=Math.min(c.i.length,b);let I=c.l?p(c.l.Ka,c.l,c):null;e:{var j=c.i;let _e=-1;for(;;){let Et=["count="+b];_e==-1?b>0?(_e=j[0].g,Et.push("ofs="+_e)):_e=0:Et.push("ofs="+_e);let He=!0;for(let Mt=0;Mt<b;Mt++){var H=j[Mt].g;let er=j[Mt].map;if(H-=_e,H<0)_e=Math.max(0,j[Mt].g-100),He=!1;else try{H="req"+H+"_"||"";try{var ie=er instanceof Map?er:Object.entries(er);for(let[Ms,Er]of ie){let tr=Er;u(Er)&&(tr=gt(Er)),Et.push(H+Ms+"="+encodeURIComponent(tr))}}catch(Ms){throw Et.push(H+"type="+encodeURIComponent("_badmap")),Ms}}catch{I&&I(er)}}if(He){ie=Et.join("&");break e}}ie=void 0}return c=c.i.splice(0,b),f.G=c,ie}function $c(c){if(!c.g&&!c.v){c.Y=1;var f=c.Da;re||S(),oe||(re(),oe=!0),T.add(f,c),c.A=0}}function Fo(c){return c.g||c.v||c.A>=3?!1:(c.Y++,c.v=It(p(c.Da,c),Uc(c,c.A)),c.A++,!0)}t.Da=function(){if(this.v=null,Fc(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var c=4*this.T;this.j.info("BP detection timer enabled: "+c),this.B=It(p(this.Wa,this),c)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Dt(10),tl(this),Fc(this))};function nl(c){c.B!=null&&(a.clearTimeout(c.B),c.B=null)}function Fc(c){c.g=new De(c,c.j,"rpc",c.Y),c.u===null&&(c.g.J=c.o),c.g.P=0;var f=Yt(c.na);We(f,"RID","rpc"),We(f,"SID",c.M),We(f,"AID",c.K),We(f,"CI",c.F?"0":"1"),!c.F&&c.ia&&We(f,"TO",c.ia),We(f,"TYPE","xmlhttp"),Ai(c,f),c.u&&c.o&&Xr(f,c.u,c.o),c.O&&(c.g.H=c.O);var b=c.g;c=c.ba,b.M=1,b.A=Xa(Yt(f)),b.u=null,b.R=!0,Zn(b,c)}t.Va=function(){this.C!=null&&(this.C=null,tl(this),Fo(this),Dt(19))};function Ir(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function Pi(c,f){var b=null;if(c.g==f){Ir(c),nl(c),c.g=null;var I=2}else if(Tc(c.h,f))b=f.G,rn(c.h,f),I=1;else return;if(c.I!=0){if(f.o)if(I==1){b=f.u?f.u.length:0,f=Date.now()-f.F;var j=c.D;I=h(),Kt(I,new Ec(I,b)),Rr(c)}else $c(c);else if(j=f.m,j==3||j==0&&f.X>0||!(I==1&&tw(c,f)||I==2&&Fo(c)))switch(b&&b.length>0&&(f=c.h,f.i=f.i.concat(b)),j){case 1:Di(c,5);break;case 4:Di(c,10);break;case 3:Di(c,6);break;default:Di(c,2)}}}function Uc(c,f){let b=c.Qa+Math.floor(Math.random()*c.Za);return c.isActive()||(b*=2),b*f}function Di(c,f){if(c.j.info("Error code "+f),f==2){var b=p(c.bb,c),I=c.Ua;let j=!I;I=new Te(I||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Vt(I,"https"),Xa(I),j?In(I.toString(),b):Pf(I.toString(),b)}else Dt(2);c.I=0,c.l&&c.l.pa(f),Of(c),Mc(c)}t.bb=function(c){c?(this.j.info("Successfully pinged google.com"),Dt(2)):(this.j.info("Failed to ping google.com"),Dt(1))};function Of(c){if(c.I=0,c.ja=[],c.l){let f=Ei(c.h);(f.length!=0||c.i.length!=0)&&(z(c.ja,f),z(c.ja,c.i),c.h.i.length=0,A(c.i),c.i.length=0),c.l.oa()}}function we(c,f,b){var I=b instanceof Te?Yt(b):new Te(b);if(I.g!="")f&&(I.g=f+"."+I.g),Oo(I,I.u);else{var j=a.location;I=j.protocol,f=f?f+"."+j.hostname:j.hostname,j=+j.port;let H=new Te(null);I&&Vt(H,I),f&&(H.g=f),j&&Oo(H,j),b&&(H.h=b),I=H}return b=c.G,f=c.wa,b&&f&&We(I,b,f),We(I,"VER",c.ka),Ai(c,I),I}function Rn(c,f,b){if(f&&!c.L)throw Error("Can't create secondary domain capable XhrIo object.");return f=c.Aa&&!c.ma?new Ye(new Pc({ab:b})):new Ye(c.ma),f.Fa(c.L),f}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function rl(){}t=rl.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Uo(){}Uo.prototype.g=function(c,f){return new Jt(c,f)};function Jt(c,f){Pt.call(this),this.g=new Df(f),this.l=c,this.h=f&&f.messageUrlParams||null,c=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(c?c["X-WebChannel-Content-Type"]=f.messageContentType:c={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.sa&&(c?c["X-WebChannel-Client-Profile"]=f.sa:c={"X-WebChannel-Client-Profile":f.sa}),this.g.U=c,(c=f&&f.Qb)&&!D(c)&&(this.g.u=c),this.A=f&&f.supportsCrossDomainXhr||!1,this.v=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!D(f)&&(this.g.G=f,c=this.h,c!==null&&f in c&&(c=this.h,f in c&&delete c[f])),this.j=new Vs(this)}_(Jt,Pt),Jt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Jt.prototype.close=function(){Hd(this.g)},Jt.prototype.o=function(c){var f=this.g;if(typeof c=="string"){var b={};b.__data__=c,c=b}else this.v&&(b={},b.__data__=gt(c),c=b);f.i.push(new Lt(f.Ya++,c)),f.I==3&&Rr(f)},Jt.prototype.N=function(){this.g.l=null,delete this.j,Hd(this.g),delete this.g,Jt.Z.N.call(this)};function jc(c){yr.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var f=c.__sm__;if(f){e:{for(let b in f){c=b;break e}c=void 0}(this.i=c)&&(c=this.i,f=f!==null&&c in f?f[c]:void 0),this.data=f}else this.data=c}_(jc,yr);function zc(){Ga.call(this),this.status=1}_(zc,Ga);function Vs(c){this.g=c}_(Vs,rl),Vs.prototype.ra=function(){Kt(this.g,"a")},Vs.prototype.qa=function(c){Kt(this.g,new jc(c))},Vs.prototype.pa=function(c){Kt(this.g,new zc)},Vs.prototype.oa=function(){Kt(this.g,"b")},Uo.prototype.createWebChannel=Uo.prototype.g,Jt.prototype.send=Jt.prototype.o,Jt.prototype.open=Jt.prototype.m,Jt.prototype.close=Jt.prototype.close,jv=li.createWebChannelTransport=function(){return new Uo},Uv=li.getStatEventTarget=function(){return h()},Fv=li.Event=wr,wp=li.Stat={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Wa.NO_ERROR=0,Wa.TIMEOUT=8,Wa.HTTP_ERROR=6,ad=li.ErrorCode=Wa,zd.COMPLETE="complete",$v=li.EventType=zd,Qr.EventType=Ts,Ts.OPEN="a",Ts.CLOSE="b",Ts.ERROR="c",Ts.MESSAGE="d",Pt.prototype.listen=Pt.prototype.J,Wl=li.WebChannel=Qr,U4=li.FetchXmlHttpFactory=Pc,Ye.prototype.listenOnce=Ye.prototype.K,Ye.prototype.getLastError=Ye.prototype.Ha,Ye.prototype.getLastErrorCode=Ye.prototype.ya,Ye.prototype.getStatus=Ye.prototype.ca,Ye.prototype.getResponseJson=Ye.prototype.La,Ye.prototype.getResponseText=Ye.prototype.la,Ye.prototype.send=Ye.prototype.ea,Ye.prototype.setWithCredentials=Ye.prototype.Fa,Mv=li.XhrIo=Ye}).apply(typeof yp<"u"?yp:typeof self<"u"?self:typeof window<"u"?window:{});var Gt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Gt.UNAUTHENTICATED=new Gt(null),Gt.GOOGLE_CREDENTIALS=new Gt("google-credentials-uid"),Gt.FIRST_PARTY=new Gt("first-party-uid"),Gt.MOCK_USER=new Gt("mock-user");var cc="12.9.0";function _S(t){cc=t}var ya=new po("@firebase/firestore");function Kl(){return ya.logLevel}function ce(t,...e){if(ya.logLevel<=Oe.DEBUG){let n=e.map(xy);ya.debug(`Firestore (${cc}): ${t}`,...n)}}function di(t,...e){if(ya.logLevel<=Oe.ERROR){let n=e.map(xy);ya.error(`Firestore (${cc}): ${t}`,...n)}}function hi(t,...e){if(ya.logLevel<=Oe.WARN){let n=e.map(xy);ya.warn(`Firestore (${cc}): ${t}`,...n)}}function xy(t){if(typeof t=="string")return t;try{return(function(n){return JSON.stringify(n)})(t)}catch{return t}}function ye(t,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,IS(t,s,n)}function IS(t,e,n){let s=`FIRESTORE (${cc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw di(s),new Error(s)}function ze(t,e,n,s){let i="Unexpected state";typeof n=="string"?i=n:s=n,t||IS(e,i,s)}function Ie(t,e){return t}var Q={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},se=class extends Yn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var gs=class{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}};var kp=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Cp=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(Gt.UNAUTHENTICATED)))}shutdown(){}},Wv=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}},Ap=class{constructor(e){this.t=e,this.currentUser=Gt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ze(this.o===void 0,42304);let s=this.i,i=d=>this.i!==s?(s=this.i,n(d)):Promise.resolve(),o=new gs;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new gs,e.enqueueRetryable((()=>i(this.currentUser)))};let a=()=>{let d=o;e.enqueueRetryable((async()=>{await d.promise,await i(this.currentUser)}))},u=d=>{ce("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit((d=>u(d))),setTimeout((()=>{if(!this.auth){let d=this.t.getImmediate({optional:!0});d?u(d):(ce("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new gs)}}),0),a()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((s=>this.i!==e?(ce("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(ze(typeof s.accessToken=="string",31837,{l:s}),new kp(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return ze(e===null||typeof e=="string",2055,{h:e}),new Gt(e)}},Kv=class{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=Gt.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);let e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}},Qv=class{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new Kv(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(Gt.FIRST_PARTY)))}shutdown(){}invalidateToken(){}},Pp=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Dp=class{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,dn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){ze(this.o===void 0,3512);let s=o=>{o.error!=null&&ce("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let a=o.token!==this.m;return this.m=o.token,ce("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable((()=>s(o)))};let i=o=>{ce("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((o=>i(o))),setTimeout((()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):ce("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Pp(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(ze(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Pp(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function j4(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<t;s++)n[s]=Math.floor(256*Math.random());return n}var wa=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516),s="";for(;s.length<20;){let i=j4(40);for(let o=0;o<i.length;++o)s.length<20&&i[o]<n&&(s+=e.charAt(i[o]%62))}return s}};function $e(t,e){return t<e?-1:t>e?1:0}function Yv(t,e){let n=Math.min(t.length,e.length);for(let s=0;s<n;s++){let i=t.charAt(s),o=e.charAt(s);if(i!==o)return zv(i)===zv(o)?$e(i,o):zv(i)?1:-1}return $e(t.length,e.length)}var z4=55296,B4=57343;function zv(t){let e=t.charCodeAt(0);return e>=z4&&e<=B4}function Rl(t,e,n){return t.length===e.length&&t.every(((s,i)=>n(s,e[i])))}var FE="__name__",Op=class t{constructor(e,n,s){n===void 0?n=0:n>e.length&&ye(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&ye(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach((s=>{n.push(s)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let s=Math.min(e.length,n.length);for(let i=0;i<s;i++){let o=t.compareSegments(e.get(i),n.get(i));if(o!==0)return o}return $e(e.length,n.length)}static compareSegments(e,n){let s=t.isNumericId(e),i=t.isNumericId(n);return s&&!i?-1:!s&&i?1:s&&i?t.extractNumericId(e).compare(t.extractNumericId(n)):Yv(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ai.fromString(e.substring(4,e.length-2))}},Ze=class t extends Op{construct(e,n,s){return new t(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let s of e){if(s.indexOf("//")>=0)throw new se(Q.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter((i=>i.length>0)))}return new t(n)}static emptyPath(){return new t([])}},q4=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Dn=class t extends Op{construct(e,n,s){return new t(e,n,s)}static isValidIdentifier(e){return q4.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===FE}static keyField(){return new t([FE])}static fromServerFormat(e){let n=[],s="",i=0,o=()=>{if(s.length===0)throw new se(Q.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""},a=!1;for(;i<e.length;){let u=e[i];if(u==="\\"){if(i+1===e.length)throw new se(Q.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let d=e[i+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new se(Q.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=d,i+=2}else u==="`"?(a=!a,i++):u!=="."||a?(s+=u,i++):(o(),i++)}if(o(),a)throw new se(Q.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var ve=class t{constructor(e){this.path=e}static fromPath(e){return new t(Ze.fromString(e))}static fromName(e){return new t(Ze.fromString(e).popFirst(5))}static empty(){return new t(Ze.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ze.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ze.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new Ze(e.slice()))}};function ES(t,e,n){if(!n)throw new se(Q.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function SS(t,e,n,s){if(e===!0&&s===!0)throw new se(Q.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function UE(t){if(!ve.isDocumentKey(t))throw new se(Q.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function jE(t){if(ve.isDocumentKey(t))throw new se(Q.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function TS(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Sd(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=(function(s){return s.constructor?s.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ye(12329,{type:typeof t})}function wn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new se(Q.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=Sd(t);throw new se(Q.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function kS(t,e){if(e<=0)throw new se(Q.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}function xt(t,e){let n={typeString:t};return e&&(n.value=e),n}function uc(t,e){if(!TS(t))throw new se(Q.INVALID_ARGUMENT,"JSON must be an object");let n;for(let s in e)if(e[s]){let i=e[s].typeString,o="value"in e[s]?{value:e[s].value}:void 0;if(!(s in t)){n=`JSON missing required field: '${s}'`;break}let a=t[s];if(i&&typeof a!==i){n=`JSON field '${s}' must be a ${i}.`;break}if(o!==void 0&&a!==o.value){n=`Expected '${s}' field to equal '${o.value}'`;break}}if(n)throw new se(Q.INVALID_ARGUMENT,n);return!0}var zE=-62135596800,BE=1e6,yt=class t{static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*BE);return new t(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new se(Q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new se(Q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<zE)throw new se(Q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new se(Q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/BE}_compareTo(e){return this.seconds===e.seconds?$e(this.nanoseconds,e.nanoseconds):$e(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:t._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(uc(e,t._jsonSchema))return new t(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-zE;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};yt._jsonSchemaVersion="firestore/timestamp/1.0",yt._jsonSchema={type:xt("string",yt._jsonSchemaVersion),seconds:xt("number"),nanoseconds:xt("number")};var Se=class t{static fromTimestamp(e){return new t(e)}static min(){return new t(new yt(0,0))}static max(){return new t(new yt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var md=-1,Lp=class{constructor(e,n,s,i){this.indexId=e,this.collectionGroup=n,this.fields=s,this.indexState=i}};Lp.UNKNOWN_ID=-1;function G4(t,e){let n=t.toTimestamp().seconds,s=t.toTimestamp().nanoseconds+1,i=Se.fromTimestamp(s===1e9?new yt(n+1,0):new yt(n,s));return new Na(i,ve.empty(),e)}function H4(t){return new Na(t.readTime,t.key,md)}var Na=class t{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new t(Se.min(),ve.empty(),md)}static max(){return new t(Se.max(),ve.empty(),md)}};function W4(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ve.comparator(t.documentKey,e.documentKey),n!==0?n:$e(t.largestBatchId,e.largestBatchId))}var K4="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Jv=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}};async function dc(t){if(t.code!==Q.FAILED_PRECONDITION||t.message!==K4)throw t;ce("LocalStore","Unexpectedly lost primary lease")}var R=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ye(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t(((s,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(s,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(s,i)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):t.reject(n)}static resolve(e){return new t(((n,s)=>{n(e)}))}static reject(e){return new t(((n,s)=>{s(e)}))}static waitFor(e){return new t(((n,s)=>{let i=0,o=0,a=!1;e.forEach((u=>{++i,u.next((()=>{++o,a&&o===i&&n()}),(d=>s(d)))})),a=!0,o===i&&n()}))}static or(e){let n=t.resolve(!1);for(let s of e)n=n.next((i=>i?t.resolve(i):s()));return n}static forEach(e,n){let s=[];return e.forEach(((i,o)=>{s.push(n.call(this,i,o))})),this.waitFor(s)}static mapArray(e,n){return new t(((s,i)=>{let o=e.length,a=new Array(o),u=0;for(let d=0;d<o;d++){let p=d;n(e[p]).next((y=>{a[p]=y,++u,u===o&&s(a)}),(y=>i(y)))}}))}static doWhile(e,n){return new t(((s,i)=>{let o=()=>{e()===!0?n().next((()=>{o()}),i):s()};o()}))}};function Q4(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function hc(t){return t.name==="IndexedDbTransactionError"}var ec=class{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){let e=++this.previousValue;return this.ue&&this.ue(e),e}};ec.ce=-1;var yy=-1;function df(t){return t==null}function pd(t){return t===0&&1/t==-1/0}function Y4(t){return typeof t=="number"&&Number.isInteger(t)&&!pd(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var CS="";function J4(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=qE(e)),e=X4(t.get(n),e);return qE(e)}function X4(t,e){let n=e,s=t.length;for(let i=0;i<s;i++){let o=t.charAt(i);switch(o){case"\0":n+="";break;case CS:n+="";break;default:n+=o}}return n}function qE(t){return t+CS+""}var Z4="remoteDocuments",AS="owner";var PS="mutationQueues";var DS="mutations";var OS="documentMutations",R4="remoteDocumentsV14";var LS="remoteDocumentGlobal";var VS="targets";var MS="targetDocuments";var $S="targetGlobal",FS="collectionParents";var US="clientMetadata";var jS="bundles";var zS="namedQueries";var e3="indexConfiguration";var t3="indexState";var n3="indexEntries";var BS="documentOverlays";var r3="globals";var s3=[PS,DS,OS,Z4,VS,AS,$S,MS,US,LS,FS,jS,zS],yL=[...s3,BS],i3=[PS,DS,OS,R4,VS,AS,$S,MS,US,LS,FS,jS,zS,BS],o3=i3,a3=[...o3,e3,t3,n3];var wL=[...a3,r3];function GE(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function So(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function qS(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var ft=class t{constructor(e,n){this.comparator=e,this.root=n||bs.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,bs.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,bs.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){let i=this.comparator(e,s.key);if(i===0)return n+s.left.size;i<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,s)=>(e(n,s),!1)))}toString(){let e=[];return this.inorderTraversal(((n,s)=>(e.push(`${n}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Xl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Xl(this.root,e,this.comparator,!1)}getReverseIterator(){return new Xl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Xl(this.root,e,this.comparator,!0)}},Xl=class{constructor(e,n,s,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?s(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},bs=class t{constructor(e,n,s,i,o){this.key=e,this.value=n,this.color=s??t.RED,this.left=i??t.EMPTY,this.right=o??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,i,o){return new t(e??this.key,n??this.value,s??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let i=this,o=s(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,s),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,s)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;s=i.right.min(),i=i.copy(s.key,s.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ye(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ye(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw ye(27949);return e+(this.isRed()?0:1)}};bs.EMPTY=null,bs.RED=!0,bs.BLACK=!1;bs.EMPTY=new class{constructor(){this.size=0}get key(){throw ye(57766)}get value(){throw ye(16141)}get color(){throw ye(16727)}get left(){throw ye(29726)}get right(){throw ye(36894)}copy(e,n,s,i,o){return this}insert(e,n,s){return new bs(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Ht=class t{constructor(e){this.comparator=e,this.data=new ft(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,s)=>(e(n),!1)))}forEachInRange(e,n){let s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){let i=s.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Vp(this.data.getIterator())}getIteratorFrom(e){return new Vp(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((s=>{n=n.add(s)})),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=s.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach((n=>{e.push(n)})),e}toString(){let e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},Vp=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var fr=class t{constructor(e){this.fields=e,e.sort(Dn.comparator)}static empty(){return new t([])}unionWith(e){let n=new Ht(Dn.comparator);for(let s of this.fields)n=n.add(s);for(let s of e)n=n.add(s);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Rl(this.fields,e.fields,((n,s)=>n.isEqual(s)))}};var Mp=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var en=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=(function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Mp("Invalid base64 string: "+o):o}})(e);return new t(n)}static fromUint8Array(e){let n=(function(i){let o="";for(let a=0;a<i.length;++a)o+=String.fromCharCode(i[a]);return o})(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){let s=new Uint8Array(n.length);for(let i=0;i<n.length;i++)s[i]=n.charCodeAt(i);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return $e(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};en.EMPTY_BYTE_STRING=new en("");var l3=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function mi(t){if(ze(!!t,39018),typeof t=="string"){let e=0,n=l3.exec(t);if(ze(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let s=new Date(t);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:st(t.seconds),nanos:st(t.nanos)}}function st(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function pi(t){return typeof t=="string"?en.fromBase64String(t):en.fromUint8Array(t)}var GS="server_timestamp",HS="__type__",WS="__previous_value__",KS="__local_write_time__";function Td(t){return(t?.mapValue?.fields||{})[HS]?.stringValue===GS}function hf(t){let e=t.mapValue.fields[WS];return Td(e)?hf(e):e}function fd(t){let e=mi(t.mapValue.fields[KS].timestampValue);return new yt(e.seconds,e.nanos)}var Xv=class{constructor(e,n,s,i,o,a,u,d,p,y,_){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=i,this.ssl=o,this.forceLongPolling=a,this.autoDetectLongPolling=u,this.longPollingOptions=d,this.useFetchStreams=p,this.isUsingEmulator=y,this.apiKey=_}},$p="(default)",gd=class t{constructor(e,n){this.projectId=e,this.database=n||$p}static empty(){return new t("","")}get isDefaultDatabase(){return this.database===$p}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};function QS(t,e){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new se(Q.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new gd(t.options.projectId,e)}var wy="__type__",YS="__max__",Np={mapValue:{fields:{__type__:{stringValue:YS}}}},Ny="__vector__",tc="value";function yo(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Td(t)?4:XS(t)?9007199254740991:JS(t)?10:11:ye(28295,{value:t})}function Ns(t,e){if(t===e)return!0;let n=yo(t);if(n!==yo(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return fd(t).isEqual(fd(e));case 3:return(function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let a=mi(i.timestampValue),u=mi(o.timestampValue);return a.seconds===u.seconds&&a.nanos===u.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(i,o){return pi(i.bytesValue).isEqual(pi(o.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(i,o){return st(i.geoPointValue.latitude)===st(o.geoPointValue.latitude)&&st(i.geoPointValue.longitude)===st(o.geoPointValue.longitude)})(t,e);case 2:return(function(i,o){if("integerValue"in i&&"integerValue"in o)return st(i.integerValue)===st(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let a=st(i.doubleValue),u=st(o.doubleValue);return a===u?pd(a)===pd(u):isNaN(a)&&isNaN(u)}return!1})(t,e);case 9:return Rl(t.arrayValue.values||[],e.arrayValue.values||[],Ns);case 10:case 11:return(function(i,o){let a=i.mapValue.fields||{},u=o.mapValue.fields||{};if(GE(a)!==GE(u))return!1;for(let d in a)if(a.hasOwnProperty(d)&&(u[d]===void 0||!Ns(a[d],u[d])))return!1;return!0})(t,e);default:return ye(52216,{left:t})}}function bd(t,e){return(t.values||[]).find((n=>Ns(n,e)))!==void 0}function nc(t,e){if(t===e)return 0;let n=yo(t),s=yo(e);if(n!==s)return $e(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return $e(t.booleanValue,e.booleanValue);case 2:return(function(o,a){let u=st(o.integerValue||o.doubleValue),d=st(a.integerValue||a.doubleValue);return u<d?-1:u>d?1:u===d?0:isNaN(u)?isNaN(d)?0:-1:1})(t,e);case 3:return HE(t.timestampValue,e.timestampValue);case 4:return HE(fd(t),fd(e));case 5:return Yv(t.stringValue,e.stringValue);case 6:return(function(o,a){let u=pi(o),d=pi(a);return u.compareTo(d)})(t.bytesValue,e.bytesValue);case 7:return(function(o,a){let u=o.split("/"),d=a.split("/");for(let p=0;p<u.length&&p<d.length;p++){let y=$e(u[p],d[p]);if(y!==0)return y}return $e(u.length,d.length)})(t.referenceValue,e.referenceValue);case 8:return(function(o,a){let u=$e(st(o.latitude),st(a.latitude));return u!==0?u:$e(st(o.longitude),st(a.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return WE(t.arrayValue,e.arrayValue);case 10:return(function(o,a){let u=o.fields||{},d=a.fields||{},p=u[tc]?.arrayValue,y=d[tc]?.arrayValue,_=$e(p?.values?.length||0,y?.values?.length||0);return _!==0?_:WE(p,y)})(t.mapValue,e.mapValue);case 11:return(function(o,a){if(o===Np.mapValue&&a===Np.mapValue)return 0;if(o===Np.mapValue)return 1;if(a===Np.mapValue)return-1;let u=o.fields||{},d=Object.keys(u),p=a.fields||{},y=Object.keys(p);d.sort(),y.sort();for(let _=0;_<d.length&&_<y.length;++_){let N=Yv(d[_],y[_]);if(N!==0)return N;let A=nc(u[d[_]],p[y[_]]);if(A!==0)return A}return $e(d.length,y.length)})(t.mapValue,e.mapValue);default:throw ye(23264,{he:n})}}function HE(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return $e(t,e);let n=mi(t),s=mi(e),i=$e(n.seconds,s.seconds);return i!==0?i:$e(n.nanos,s.nanos)}function WE(t,e){let n=t.values||[],s=e.values||[];for(let i=0;i<n.length&&i<s.length;++i){let o=nc(n[i],s[i]);if(o)return o}return $e(n.length,s.length)}function rc(t){return Zv(t)}function Zv(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){let s=mi(n);return`time(${s.seconds},${s.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return pi(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return ve.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let s="[",i=!0;for(let o of n.values||[])i?i=!1:s+=",",s+=Zv(o);return s+"]"})(t.arrayValue):"mapValue"in t?(function(n){let s=Object.keys(n.fields||{}).sort(),i="{",o=!0;for(let a of s)o?o=!1:i+=",",i+=`${a}:${Zv(n.fields[a])}`;return i+"}"})(t.mapValue):ye(61005,{value:t})}function Ep(t){switch(yo(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=hf(t);return e?16+Ep(e):16;case 5:return 2*t.stringValue.length;case 6:return pi(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((i,o)=>i+Ep(o)),0)})(t.arrayValue);case 10:case 11:return(function(s){let i=0;return So(s.fields,((o,a)=>{i+=o.length+Ep(a)})),i})(t.mapValue);default:throw ye(13486,{value:t})}}function kd(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Rv(t){return!!t&&"integerValue"in t}function _y(t){return!!t&&"arrayValue"in t}function KE(t){return!!t&&"nullValue"in t}function QE(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Sp(t){return!!t&&"mapValue"in t}function JS(t){return(t?.mapValue?.fields||{})[wy]?.stringValue===Ny}function ud(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){let e={mapValue:{fields:{}}};return So(t.mapValue.fields,((n,s)=>e.mapValue.fields[n]=ud(s))),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ud(t.arrayValue.values[n]);return e}return{...t}}function XS(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===YS}var _L={mapValue:{fields:{[wy]:{stringValue:Ny},[tc]:{arrayValue:{}}}}};var Pn=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!Sp(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ud(n)}setAll(e){let n=Dn.emptyPath(),s={},i=[];e.forEach(((a,u)=>{if(!n.isImmediateParentOf(u)){let d=this.getFieldsMap(n);this.applyChanges(d,s,i),s={},i=[],n=u.popLast()}a?s[u.lastSegment()]=ud(a):i.push(u.lastSegment())}));let o=this.getFieldsMap(n);this.applyChanges(o,s,i)}delete(e){let n=this.field(e.popLast());Sp(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Ns(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let i=n.mapValue.fields[e.get(s)];Sp(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,s){So(n,((i,o)=>e[i]=o));for(let i of s)delete e[i]}clone(){return new t(ud(this.value))}};function ZS(t){let e=[];return So(t.fields,((n,s)=>{let i=new Dn([n]);if(Sp(s)){let o=ZS(s.mapValue).fields;if(o.length===0)e.push(i);else for(let a of o)e.push(i.child(a))}else e.push(i)})),new fr(e)}var zr=class t{constructor(e,n,s,i,o,a,u){this.key=e,this.documentType=n,this.version=s,this.readTime=i,this.createTime=o,this.data=a,this.documentState=u}static newInvalidDocument(e){return new t(e,0,Se.min(),Se.min(),Se.min(),Pn.empty(),0)}static newFoundDocument(e,n,s,i){return new t(e,1,n,Se.min(),s,i,0)}static newNoDocument(e,n){return new t(e,2,n,Se.min(),Se.min(),Pn.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,Se.min(),Se.min(),Pn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Se.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Pn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Pn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Se.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var fi=class{constructor(e,n){this.position=e,this.inclusive=n}};function YE(t,e,n){let s=0;for(let i=0;i<t.position.length;i++){let o=e[i],a=t.position[i];if(o.field.isKeyField()?s=ve.comparator(ve.fromName(a.referenceValue),n.key):s=nc(a,n.data.field(o.field)),o.dir==="desc"&&(s*=-1),s!==0)break}return s}function JE(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Ns(t.position[n],e.position[n]))return!1;return!0}var wo=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function c3(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var Fp=class{},vt=class t extends Fp{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new tx(e,n,s):n==="array-contains"?new sx(e,s):n==="in"?new ix(e,s):n==="not-in"?new ox(e,s):n==="array-contains-any"?new ax(e,s):new t(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new nx(e,s):new rx(e,s)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(nc(n,this.value)):n!==null&&yo(this.value)===yo(n)&&this.matchesComparison(nc(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ye(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},gr=class t extends Fp{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new t(e,n)}matches(e){return RS(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}};function RS(t){return t.op==="and"}function eT(t){return u3(t)&&RS(t)}function u3(t){for(let e of t.filters)if(e instanceof gr)return!1;return!0}function ex(t){if(t instanceof vt)return t.field.canonicalString()+t.op.toString()+rc(t.value);if(eT(t))return t.filters.map((e=>ex(e))).join(",");{let e=t.filters.map((n=>ex(n))).join(",");return`${t.op}(${e})`}}function tT(t,e){return t instanceof vt?(function(s,i){return i instanceof vt&&s.op===i.op&&s.field.isEqual(i.field)&&Ns(s.value,i.value)})(t,e):t instanceof gr?(function(s,i){return i instanceof gr&&s.op===i.op&&s.filters.length===i.filters.length?s.filters.reduce(((o,a,u)=>o&&tT(a,i.filters[u])),!0):!1})(t,e):void ye(19439)}function nT(t){return t instanceof vt?(function(n){return`${n.field.canonicalString()} ${n.op} ${rc(n.value)}`})(t):t instanceof gr?(function(n){return n.op.toString()+" {"+n.getFilters().map(nT).join(" ,")+"}"})(t):"Filter"}var tx=class extends vt{constructor(e,n,s){super(e,n,s),this.key=ve.fromName(s.referenceValue)}matches(e){let n=ve.comparator(e.key,this.key);return this.matchesComparison(n)}},nx=class extends vt{constructor(e,n){super(e,"in",n),this.keys=rT("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}},rx=class extends vt{constructor(e,n){super(e,"not-in",n),this.keys=rT("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}};function rT(t,e){return(e.arrayValue?.values||[]).map((n=>ve.fromName(n.referenceValue)))}var sx=class extends vt{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return _y(n)&&bd(n.arrayValue,this.value)}},ix=class extends vt{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&bd(this.value.arrayValue,n)}},ox=class extends vt{constructor(e,n){super(e,"not-in",n)}matches(e){if(bd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!bd(this.value.arrayValue,n)}},ax=class extends vt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!_y(n)||!n.arrayValue.values)&&n.arrayValue.values.some((s=>bd(this.value.arrayValue,s)))}};var lx=class{constructor(e,n=null,s=[],i=[],o=null,a=null,u=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=i,this.limit=o,this.startAt=a,this.endAt=u,this.Te=null}};function XE(t,e=null,n=[],s=[],i=null,o=null,a=null){return new lx(t,e,n,s,i,o,a)}function Iy(t){let e=Ie(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((s=>ex(s))).join(","),n+="|ob:",n+=e.orderBy.map((s=>(function(o){return o.field.canonicalString()+o.dir})(s))).join(","),df(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((s=>rc(s))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((s=>rc(s))).join(",")),e.Te=n}return e.Te}function Ey(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!c3(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!tT(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!JE(t.startAt,e.startAt)&&JE(t.endAt,e.endAt)}function cx(t){return ve.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}var gi=class{constructor(e,n=null,s=[],i=[],o=null,a="F",u=null,d=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=i,this.limit=o,this.limitType=a,this.startAt=u,this.endAt=d,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}};function d3(t,e,n,s,i,o,a,u){return new gi(t,e,n,s,i,o,a,u)}function Cd(t){return new gi(t)}function ZE(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function h3(t){return ve.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function mf(t){return t.collectionGroup!==null}function xa(t){let e=Ie(t);if(e.Ie===null){e.Ie=[];let n=new Set;for(let o of e.explicitOrderBy)e.Ie.push(o),n.add(o.field.canonicalString());let s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let u=new Ht(Dn.comparator);return a.filters.forEach((d=>{d.getFlattenedFilters().forEach((p=>{p.isInequality()&&(u=u.add(p.field))}))})),u})(e).forEach((o=>{n.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new wo(o,s))})),n.has(Dn.keyField().canonicalString())||e.Ie.push(new wo(Dn.keyField(),s))}return e.Ie}function vs(t){let e=Ie(t);return e.Ee||(e.Ee=m3(e,xa(t))),e.Ee}function m3(t,e){if(t.limitType==="F")return XE(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((i=>{let o=i.dir==="desc"?"asc":"desc";return new wo(i.field,o)}));let n=t.endAt?new fi(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new fi(t.startAt.position,t.startAt.inclusive):null;return XE(t.path,t.collectionGroup,e,t.filters,t.limit,n,s)}}function pf(t,e){let n=t.filters.concat([e]);return new gi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function sT(t,e){let n=t.explicitOrderBy.concat([e]);return new gi(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}function vd(t,e,n){return new gi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function iT(t,e){return new gi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}function ff(t,e){return Ey(vs(t),vs(e))&&t.limitType===e.limitType}function oT(t){return`${Iy(vs(t))}|lt:${t.limitType}`}function Ql(t){return`Query(target=${(function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map((i=>nT(i))).join(", ")}]`),df(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map((i=>(function(a){return`${a.field.canonicalString()} (${a.dir})`})(i))).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map((i=>rc(i))).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map((i=>rc(i))).join(",")),`Target(${s})`})(vs(t))}; limitType=${t.limitType})`}function gf(t,e){return e.isFoundDocument()&&(function(s,i){let o=i.key.path;return s.collectionGroup!==null?i.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(o):ve.isDocumentKey(s.path)?s.path.isEqual(o):s.path.isImmediateParentOf(o)})(t,e)&&(function(s,i){for(let o of xa(s))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0})(t,e)&&(function(s,i){for(let o of s.filters)if(!o.matches(i))return!1;return!0})(t,e)&&(function(s,i){return!(s.startAt&&!(function(a,u,d){let p=YE(a,u,d);return a.inclusive?p<=0:p<0})(s.startAt,xa(s),i)||s.endAt&&!(function(a,u,d){let p=YE(a,u,d);return a.inclusive?p>=0:p>0})(s.endAt,xa(s),i))})(t,e)}function p3(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function aT(t){return(e,n)=>{let s=!1;for(let i of xa(t)){let o=f3(i,e,n);if(o!==0)return o;s=s||i.field.isKeyField()}return 0}}function f3(t,e,n){let s=t.field.isKeyField()?ve.comparator(e.key,n.key):(function(o,a,u){let d=a.data.field(o),p=u.data.field(o);return d!==null&&p!==null?nc(d,p):ye(42886)})(t.field,e,n);switch(t.dir){case"asc":return s;case"desc":return-1*s;default:return ye(19790,{direction:t.dir})}}var bi=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(let[i,o]of s)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){let s=this.mapKeyFn(e),i=this.inner[s];if(i===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return s.length===1?delete this.inner[n]:s.splice(i,1),this.innerSize--,!0;return!1}forEach(e){So(this.inner,((n,s)=>{for(let[i,o]of s)e(i,o)}))}isEmpty(){return qS(this.inner)}size(){return this.innerSize}};var g3=new ft(ve.comparator);function vi(){return g3}var lT=new ft(ve.comparator);function cd(...t){let e=lT;for(let n of t)e=e.insert(n.key,n);return e}function cT(t){let e=lT;return t.forEach(((n,s)=>e=e.insert(n,s.overlayedDocument))),e}function ba(){return dd()}function uT(){return dd()}function dd(){return new bi((t=>t.toString()),((t,e)=>t.isEqual(e)))}var b3=new ft(ve.comparator),v3=new Ht(ve.comparator);function Ve(...t){let e=v3;for(let n of t)e=e.add(n);return e}var x3=new Ht($e);function y3(){return x3}function Sy(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:pd(e)?"-0":e}}function dT(t){return{integerValue:""+t}}function hT(t,e){return Y4(e)?dT(e):Sy(t,e)}var sc=class{constructor(){this._=void 0}};function w3(t,e,n){return t instanceof ic?(function(i,o){let a={fields:{[HS]:{stringValue:GS},[KS]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&Td(o)&&(o=hf(o)),o&&(a.fields[WS]=o),{mapValue:a}})(n,e):t instanceof _a?pT(t,e):t instanceof Ia?fT(t,e):(function(i,o){let a=mT(i,o),u=RE(a)+RE(i.Ae);return Rv(a)&&Rv(i.Ae)?dT(u):Sy(i.serializer,u)})(t,e)}function N3(t,e,n){return t instanceof _a?pT(t,e):t instanceof Ia?fT(t,e):n}function mT(t,e){return t instanceof Ea?(function(s){return Rv(s)||(function(o){return!!o&&"doubleValue"in o})(s)})(e)?e:{integerValue:0}:null}var ic=class extends sc{},_a=class extends sc{constructor(e){super(),this.elements=e}};function pT(t,e){let n=gT(e);for(let s of t.elements)n.some((i=>Ns(i,s)))||n.push(s);return{arrayValue:{values:n}}}var Ia=class extends sc{constructor(e){super(),this.elements=e}};function fT(t,e){let n=gT(e);for(let s of t.elements)n=n.filter((i=>!Ns(i,s)));return{arrayValue:{values:n}}}var Ea=class extends sc{constructor(e,n){super(),this.serializer=e,this.Ae=n}};function RE(t){return st(t.integerValue||t.doubleValue)}function gT(t){return _y(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var ux=class{constructor(e,n){this.field=e,this.transform=n}};function _3(t,e){return t.field.isEqual(e.field)&&(function(s,i){return s instanceof _a&&i instanceof _a||s instanceof Ia&&i instanceof Ia?Rl(s.elements,i.elements,Ns):s instanceof Ea&&i instanceof Ea?Ns(s.Ae,i.Ae):s instanceof ic&&i instanceof ic})(t.transform,e.transform)}var dx=class{constructor(e,n){this.version=e,this.transformResults=n}},On=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Tp(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var oc=class{};function bT(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Ta(t.key,On.none()):new Sa(t.key,t.data,On.none());{let n=t.data,s=Pn.empty(),i=new Ht(Dn.comparator);for(let o of e.fields)if(!i.has(o)){let a=n.field(o);a===null&&o.length>1&&(o=o.popLast(),a=n.field(o)),a===null?s.delete(o):s.set(o,a),i=i.add(o)}return new _s(t.key,s,new fr(i.toArray()),On.none())}}function I3(t,e,n){t instanceof Sa?(function(i,o,a){let u=i.value.clone(),d=tS(i.fieldTransforms,o,a.transformResults);u.setAll(d),o.convertToFoundDocument(a.version,u).setHasCommittedMutations()})(t,e,n):t instanceof _s?(function(i,o,a){if(!Tp(i.precondition,o))return void o.convertToUnknownDocument(a.version);let u=tS(i.fieldTransforms,o,a.transformResults),d=o.data;d.setAll(vT(i)),d.setAll(u),o.convertToFoundDocument(a.version,d).setHasCommittedMutations()})(t,e,n):(function(i,o,a){o.convertToNoDocument(a.version).setHasCommittedMutations()})(0,e,n)}function hd(t,e,n,s){return t instanceof Sa?(function(o,a,u,d){if(!Tp(o.precondition,a))return u;let p=o.value.clone(),y=nS(o.fieldTransforms,d,a);return p.setAll(y),a.convertToFoundDocument(a.version,p).setHasLocalMutations(),null})(t,e,n,s):t instanceof _s?(function(o,a,u,d){if(!Tp(o.precondition,a))return u;let p=nS(o.fieldTransforms,d,a),y=a.data;return y.setAll(vT(o)),y.setAll(p),a.convertToFoundDocument(a.version,y).setHasLocalMutations(),u===null?null:u.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map((_=>_.field)))})(t,e,n,s):(function(o,a,u){return Tp(o.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):u})(t,e,n)}function E3(t,e){let n=null;for(let s of t.fieldTransforms){let i=e.data.field(s.field),o=mT(s.transform,i||null);o!=null&&(n===null&&(n=Pn.empty()),n.set(s.field,o))}return n||null}function eS(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(s,i){return s===void 0&&i===void 0||!(!s||!i)&&Rl(s,i,((o,a)=>_3(o,a)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var Sa=class extends oc{constructor(e,n,s,i=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},_s=class extends oc{constructor(e,n,s,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function vT(t){let e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){let s=t.data.field(n);e.set(n,s)}})),e}function tS(t,e,n){let s=new Map;ze(t.length===n.length,32656,{Ve:n.length,de:t.length});for(let i=0;i<n.length;i++){let o=t[i],a=o.transform,u=e.data.field(o.field);s.set(o.field,N3(a,u,n[i]))}return s}function nS(t,e,n){let s=new Map;for(let i of t){let o=i.transform,a=n.data.field(i.field);s.set(i.field,w3(o,a,e))}return s}var Ta=class extends oc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},hx=class extends oc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var mx=class{constructor(e,n,s,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=i}applyToRemoteDocument(e,n){let s=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&I3(o,e,s[i])}}applyToLocalView(e,n){for(let s of this.baseMutations)s.key.isEqual(e.key)&&(n=hd(s,e,n,this.localWriteTime));for(let s of this.mutations)s.key.isEqual(e.key)&&(n=hd(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let s=uT();return this.mutations.forEach((i=>{let o=e.get(i.key),a=o.overlayedDocument,u=this.applyToLocalView(a,o.mutatedFields);u=n.has(i.key)?null:u;let d=bT(a,u);d!==null&&s.set(i.key,d),a.isValidDocument()||a.convertToNoDocument(Se.min())})),s}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Ve())}isEqual(e){return this.batchId===e.batchId&&Rl(this.mutations,e.mutations,((n,s)=>eS(n,s)))&&Rl(this.baseMutations,e.baseMutations,((n,s)=>eS(n,s)))}},px=class t{constructor(e,n,s,i){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=i}static from(e,n,s){ze(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let i=(function(){return b3})(),o=e.mutations;for(let a=0;a<o.length;a++)i=i.insert(o[a].key,s[a].version);return new t(e,n,s,i)}};var fx=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var gx=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var kt,Ue;function S3(t){switch(t){case Q.OK:return ye(64938);case Q.CANCELLED:case Q.UNKNOWN:case Q.DEADLINE_EXCEEDED:case Q.RESOURCE_EXHAUSTED:case Q.INTERNAL:case Q.UNAVAILABLE:case Q.UNAUTHENTICATED:return!1;case Q.INVALID_ARGUMENT:case Q.NOT_FOUND:case Q.ALREADY_EXISTS:case Q.PERMISSION_DENIED:case Q.FAILED_PRECONDITION:case Q.ABORTED:case Q.OUT_OF_RANGE:case Q.UNIMPLEMENTED:case Q.DATA_LOSS:return!0;default:return ye(15467,{code:t})}}function xT(t){if(t===void 0)return di("GRPC error has no .code"),Q.UNKNOWN;switch(t){case kt.OK:return Q.OK;case kt.CANCELLED:return Q.CANCELLED;case kt.UNKNOWN:return Q.UNKNOWN;case kt.DEADLINE_EXCEEDED:return Q.DEADLINE_EXCEEDED;case kt.RESOURCE_EXHAUSTED:return Q.RESOURCE_EXHAUSTED;case kt.INTERNAL:return Q.INTERNAL;case kt.UNAVAILABLE:return Q.UNAVAILABLE;case kt.UNAUTHENTICATED:return Q.UNAUTHENTICATED;case kt.INVALID_ARGUMENT:return Q.INVALID_ARGUMENT;case kt.NOT_FOUND:return Q.NOT_FOUND;case kt.ALREADY_EXISTS:return Q.ALREADY_EXISTS;case kt.PERMISSION_DENIED:return Q.PERMISSION_DENIED;case kt.FAILED_PRECONDITION:return Q.FAILED_PRECONDITION;case kt.ABORTED:return Q.ABORTED;case kt.OUT_OF_RANGE:return Q.OUT_OF_RANGE;case kt.UNIMPLEMENTED:return Q.UNIMPLEMENTED;case kt.DATA_LOSS:return Q.DATA_LOSS;default:return ye(39323,{code:t})}}(Ue=kt||(kt={}))[Ue.OK=0]="OK",Ue[Ue.CANCELLED=1]="CANCELLED",Ue[Ue.UNKNOWN=2]="UNKNOWN",Ue[Ue.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ue[Ue.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ue[Ue.NOT_FOUND=5]="NOT_FOUND",Ue[Ue.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ue[Ue.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ue[Ue.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ue[Ue.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ue[Ue.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ue[Ue.ABORTED=10]="ABORTED",Ue[Ue.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ue[Ue.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ue[Ue.INTERNAL=13]="INTERNAL",Ue[Ue.UNAVAILABLE=14]="UNAVAILABLE",Ue[Ue.DATA_LOSS=15]="DATA_LOSS";var T3=null;function k3(){return new TextEncoder}var C3=new ai([4294967295,4294967295],0);function rS(t){let e=k3().encode(t),n=new Vv;return n.update(e),new Uint8Array(n.digest())}function sS(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new ai([n,s],0),new ai([i,o],0)]}var bx=class t{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new va(`Invalid padding: ${n}`);if(s<0)throw new va(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new va(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new va(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=ai.fromNumber(this.ge)}ye(e,n,s){let i=e.add(n.multiply(ai.fromNumber(s)));return i.compare(C3)===1&&(i=new ai([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;let n=rS(e),[s,i]=sS(n);for(let o=0;o<this.hashCount;o++){let a=this.ye(s,i,o);if(!this.we(a))return!1}return!0}static create(e,n,s){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),a=new t(o,i,n);return s.forEach((u=>a.insert(u))),a}insert(e){if(this.ge===0)return;let n=rS(e),[s,i]=sS(n);for(let o=0;o<this.hashCount;o++){let a=this.ye(s,i,o);this.be(a)}}be(e){let n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}},va=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Up=class t{constructor(e,n,s,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,s){let i=new Map;return i.set(e,xd.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new t(Se.min(),i,new ft($e),vi(),Ve())}},xd=class t{constructor(e,n,s,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new t(s,n,Ve(),Ve(),Ve())}};var Zl=class{constructor(e,n,s,i){this.Se=e,this.removedTargetIds=n,this.key=s,this.De=i}},jp=class{constructor(e,n){this.targetId=e,this.Ce=n}},zp=class{constructor(e,n,s=en.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=i}},Bp=class{constructor(){this.ve=0,this.Fe=iS(),this.Me=en.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ve(),n=Ve(),s=Ve();return this.Fe.forEach(((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:s=s.add(i);break;default:ye(38017,{changeType:o})}})),new xd(this.Me,this.xe,e,n,s)}Ke(){this.Oe=!1,this.Fe=iS()}qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,ze(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}},vx=class{constructor(e){this.Ge=e,this.ze=new Map,this.je=vi(),this.He=_p(),this.Je=_p(),this.Ze=new ft($e)}Xe(e){for(let n of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(n,e.De):this.et(n,e.key,e.De);for(let n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{let s=this.nt(n);switch(e.state){case 0:this.rt(n)&&s.Le(e.resumeToken);break;case 1:s.We(),s.Ne||s.Ke(),s.Le(e.resumeToken);break;case 2:s.We(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.Qe(),s.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(e.resumeToken));break;default:ye(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((s,i)=>{this.rt(i)&&n(i)}))}st(e){let n=e.targetId,s=e.Ce.count,i=this.ot(n);if(i){let o=i.target;if(cx(o))if(s===0){let a=new ve(o.path);this.et(n,a,zr.newNoDocument(a,Se.min()))}else ze(s===1,20013,{expectedCount:s});else{let a=this._t(n);if(a!==s){let u=this.ut(e),d=u?this.ct(u,e,a):1;if(d!==0){this.it(n);let p=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,p)}T3?.lt((function(y,_,N,A,z){let B={localCacheCount:y,existenceFilterCount:_.count,databaseId:N.database,projectId:N.projectId},g=_.unchangedNames;return g&&(B.bloomFilter={applied:z===0,hashCount:g?.hashCount??0,bitmapLength:g?.bits?.bitmap?.length??0,padding:g?.bits?.padding??0,mightContain:L=>A?.mightContain(L)??!1}),B})(a,e.Ce,this.Ge.ht(),u,d))}}}}ut(e){let n=e.Ce.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:s="",padding:i=0},hashCount:o=0}=n,a,u;try{a=pi(s).toUint8Array()}catch(d){if(d instanceof Mp)return hi("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{u=new bx(a,i,o)}catch(d){return hi(d instanceof va?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return u.ge===0?null:u}ct(e,n,s){return n.Ce.count===s-this.Pt(e,n.targetId)?0:2}Pt(e,n){let s=this.Ge.getRemoteKeysForTarget(n),i=0;return s.forEach((o=>{let a=this.Ge.ht(),u=`projects/${a.projectId}/databases/${a.database}/documents/${o.path.canonicalString()}`;e.mightContain(u)||(this.et(n,o,null),i++)})),i}Tt(e){let n=new Map;this.ze.forEach(((o,a)=>{let u=this.ot(a);if(u){if(o.current&&cx(u.target)){let d=new ve(u.target.path);this.It(d).has(a)||this.Et(a,d)||this.et(a,d,zr.newNoDocument(d,e))}o.Be&&(n.set(a,o.ke()),o.Ke())}}));let s=Ve();this.Je.forEach(((o,a)=>{let u=!0;a.forEachWhile((d=>{let p=this.ot(d);return!p||p.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)})),u&&(s=s.add(o))})),this.je.forEach(((o,a)=>a.setReadTime(e)));let i=new Up(e,n,this.Ze,this.je,s);return this.je=vi(),this.He=_p(),this.Je=_p(),this.Ze=new ft($e),i}Ye(e,n){if(!this.rt(e))return;let s=this.Et(e,n.key)?2:0;this.nt(e).qe(n.key,s),this.je=this.je.insert(n.key,n),this.He=this.He.insert(n.key,this.It(n.key).add(e)),this.Je=this.Je.insert(n.key,this.Rt(n.key).add(e))}et(e,n,s){if(!this.rt(e))return;let i=this.nt(e);this.Et(e,n)?i.qe(n,1):i.Ue(n),this.Je=this.Je.insert(n,this.Rt(n).delete(e)),this.Je=this.Je.insert(n,this.Rt(n).add(e)),s&&(this.je=this.je.insert(n,s))}removeTarget(e){this.ze.delete(e)}_t(e){let n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let n=this.ze.get(e);return n||(n=new Bp,this.ze.set(e,n)),n}Rt(e){let n=this.Je.get(e);return n||(n=new Ht($e),this.Je=this.Je.insert(e,n)),n}It(e){let n=this.He.get(e);return n||(n=new Ht($e),this.He=this.He.insert(e,n)),n}rt(e){let n=this.ot(e)!==null;return n||ce("WatchChangeAggregator","Detected inactive target",e),n}ot(e){let n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Bp),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}};function _p(){return new ft(ve.comparator)}function iS(){return new ft(ve.comparator)}var A3={asc:"ASCENDING",desc:"DESCENDING"},P3={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},D3={and:"AND",or:"OR"},xx=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function yx(t,e){return t.useProto3Json||df(e)?e:{value:e}}function qp(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function yT(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function O3(t,e){return qp(t,e.toTimestamp())}function xs(t){return ze(!!t,49232),Se.fromTimestamp((function(n){let s=mi(n);return new yt(s.seconds,s.nanos)})(t))}function Ty(t,e){return wx(t,e).canonicalString()}function wx(t,e){let n=(function(i){return new Ze(["projects",i.projectId,"databases",i.database])})(t).child("documents");return e===void 0?n:n.child(e)}function wT(t){let e=Ze.fromString(t);return ze(ST(e),10190,{key:e.toString()}),e}function Nx(t,e){return Ty(t.databaseId,e.path)}function Bv(t,e){let n=wT(e);if(n.get(1)!==t.databaseId.projectId)throw new se(Q.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new se(Q.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ve(_T(n))}function NT(t,e){return Ty(t.databaseId,e)}function L3(t){let e=wT(t);return e.length===4?Ze.emptyPath():_T(e)}function _x(t){return new Ze(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function _T(t){return ze(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function oS(t,e,n){return{name:Nx(t,e),fields:n.value.mapValue.fields}}function V3(t,e){let n;if("targetChange"in e){e.targetChange;let s=(function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:ye(39313,{state:p})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=(function(p,y){return p.useProto3Json?(ze(y===void 0||typeof y=="string",58123),en.fromBase64String(y||"")):(ze(y===void 0||y instanceof Buffer||y instanceof Uint8Array,16193),en.fromUint8Array(y||new Uint8Array))})(t,e.targetChange.resumeToken),a=e.targetChange.cause,u=a&&(function(p){let y=p.code===void 0?Q.UNKNOWN:xT(p.code);return new se(y,p.message||"")})(a);n=new zp(s,i,o,u||null)}else if("documentChange"in e){e.documentChange;let s=e.documentChange;s.document,s.document.name,s.document.updateTime;let i=Bv(t,s.document.name),o=xs(s.document.updateTime),a=s.document.createTime?xs(s.document.createTime):Se.min(),u=new Pn({mapValue:{fields:s.document.fields}}),d=zr.newFoundDocument(i,o,a,u),p=s.targetIds||[],y=s.removedTargetIds||[];n=new Zl(p,y,d.key,d)}else if("documentDelete"in e){e.documentDelete;let s=e.documentDelete;s.document;let i=Bv(t,s.document),o=s.readTime?xs(s.readTime):Se.min(),a=zr.newNoDocument(i,o),u=s.removedTargetIds||[];n=new Zl([],u,a.key,a)}else if("documentRemove"in e){e.documentRemove;let s=e.documentRemove;s.document;let i=Bv(t,s.document),o=s.removedTargetIds||[];n=new Zl([],o,i,null)}else{if(!("filter"in e))return ye(11601,{Vt:e});{e.filter;let s=e.filter;s.targetId;let{count:i=0,unchangedNames:o}=s,a=new gx(i,o),u=s.targetId;n=new jp(u,a)}}return n}function M3(t,e){let n;if(e instanceof Sa)n={update:oS(t,e.key,e.value)};else if(e instanceof Ta)n={delete:Nx(t,e.key)};else if(e instanceof _s)n={update:oS(t,e.key,e.data),updateMask:H3(e.fieldMask)};else{if(!(e instanceof hx))return ye(16599,{dt:e.type});n={verify:Nx(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((s=>(function(o,a){let u=a.transform;if(u instanceof ic)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof _a)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof Ia)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof Ea)return{fieldPath:a.field.canonicalString(),increment:u.Ae};throw ye(20930,{transform:a.transform})})(0,s)))),e.precondition.isNone||(n.currentDocument=(function(i,o){return o.updateTime!==void 0?{updateTime:O3(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:ye(27497)})(t,e.precondition)),n}function $3(t,e){return t&&t.length>0?(ze(e!==void 0,14353),t.map((n=>(function(i,o){let a=i.updateTime?xs(i.updateTime):xs(o);return a.isEqual(Se.min())&&(a=xs(o)),new dx(a,i.transformResults||[])})(n,e)))):[]}function F3(t,e){return{documents:[NT(t,e.path)]}}function U3(t,e){let n={structuredQuery:{}},s=e.path,i;e.collectionGroup!==null?(i=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=NT(t,i);let o=(function(p){if(p.length!==0)return ET(gr.create(p,"and"))})(e.filters);o&&(n.structuredQuery.where=o);let a=(function(p){if(p.length!==0)return p.map((y=>(function(N){return{field:Yl(N.field),direction:B3(N.dir)}})(y)))})(e.orderBy);a&&(n.structuredQuery.orderBy=a);let u=yx(t,e.limit);return u!==null&&(n.structuredQuery.limit=u),e.startAt&&(n.structuredQuery.startAt=(function(p){return{before:p.inclusive,values:p.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(p){return{before:!p.inclusive,values:p.position}})(e.endAt)),{ft:n,parent:i}}function j3(t){let e=L3(t.parent),n=t.structuredQuery,s=n.from?n.from.length:0,i=null;if(s>0){ze(s===1,65062);let y=n.from[0];y.allDescendants?i=y.collectionId:e=e.child(y.collectionId)}let o=[];n.where&&(o=(function(_){let N=IT(_);return N instanceof gr&&eT(N)?N.getFilters():[N]})(n.where));let a=[];n.orderBy&&(a=(function(_){return _.map((N=>(function(z){return new wo(Jl(z.field),(function(g){switch(g){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(z.direction))})(N)))})(n.orderBy));let u=null;n.limit&&(u=(function(_){let N;return N=typeof _=="object"?_.value:_,df(N)?null:N})(n.limit));let d=null;n.startAt&&(d=(function(_){let N=!!_.before,A=_.values||[];return new fi(A,N)})(n.startAt));let p=null;return n.endAt&&(p=(function(_){let N=!_.before,A=_.values||[];return new fi(A,N)})(n.endAt)),d3(e,i,a,o,u,"F",d,p)}function z3(t,e){let n=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ye(28987,{purpose:i})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function IT(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":let s=Jl(n.unaryFilter.field);return vt.create(s,"==",{doubleValue:NaN});case"IS_NULL":let i=Jl(n.unaryFilter.field);return vt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=Jl(n.unaryFilter.field);return vt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let a=Jl(n.unaryFilter.field);return vt.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ye(61313);default:return ye(60726)}})(t):t.fieldFilter!==void 0?(function(n){return vt.create(Jl(n.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ye(58110);default:return ye(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return gr.create(n.compositeFilter.filters.map((s=>IT(s))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ye(1026)}})(n.compositeFilter.op))})(t):ye(30097,{filter:t})}function B3(t){return A3[t]}function q3(t){return P3[t]}function G3(t){return D3[t]}function Yl(t){return{fieldPath:t.canonicalString()}}function Jl(t){return Dn.fromServerFormat(t.fieldPath)}function ET(t){return t instanceof vt?(function(n){if(n.op==="=="){if(QE(n.value))return{unaryFilter:{field:Yl(n.field),op:"IS_NAN"}};if(KE(n.value))return{unaryFilter:{field:Yl(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(QE(n.value))return{unaryFilter:{field:Yl(n.field),op:"IS_NOT_NAN"}};if(KE(n.value))return{unaryFilter:{field:Yl(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Yl(n.field),op:q3(n.op),value:n.value}}})(t):t instanceof gr?(function(n){let s=n.getFilters().map((i=>ET(i)));return s.length===1?s[0]:{compositeFilter:{op:G3(n.op),filters:s}}})(t):ye(54877,{filter:t})}function H3(t){let e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function ST(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}function TT(t){return!!t&&typeof t._toProto=="function"&&t._protoValueType==="ProtoValue"}var yd=class t{constructor(e,n,s,i,o=Se.min(),a=Se.min(),u=en.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=u,this.expectedCount=d}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Ix=class{constructor(e){this.yt=e}};function kT(t){let e=j3({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?vd(e,e.limit,"L"):e}var Gp=class{constructor(){}Dt(e,n){this.Ct(e,n),n.vt()}Ct(e,n){if("nullValue"in e)this.Ft(n,5);else if("booleanValue"in e)this.Ft(n,10),n.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(n,15),n.Mt(st(e.integerValue));else if("doubleValue"in e){let s=st(e.doubleValue);isNaN(s)?this.Ft(n,13):(this.Ft(n,15),pd(s)?n.Mt(0):n.Mt(s))}else if("timestampValue"in e){let s=e.timestampValue;this.Ft(n,20),typeof s=="string"&&(s=mi(s)),n.xt(`${s.seconds||""}`),n.Mt(s.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,n),this.Nt(n);else if("bytesValue"in e)this.Ft(n,30),n.Bt(pi(e.bytesValue)),this.Nt(n);else if("referenceValue"in e)this.Lt(e.referenceValue,n);else if("geoPointValue"in e){let s=e.geoPointValue;this.Ft(n,45),n.Mt(s.latitude||0),n.Mt(s.longitude||0)}else"mapValue"in e?XS(e)?this.Ft(n,Number.MAX_SAFE_INTEGER):JS(e)?this.kt(e.mapValue,n):(this.Kt(e.mapValue,n),this.Nt(n)):"arrayValue"in e?(this.qt(e.arrayValue,n),this.Nt(n)):ye(19022,{Ut:e})}Ot(e,n){this.Ft(n,25),this.$t(e,n)}$t(e,n){n.xt(e)}Kt(e,n){let s=e.fields||{};this.Ft(n,55);for(let i of Object.keys(s))this.Ot(i,n),this.Ct(s[i],n)}kt(e,n){let s=e.fields||{};this.Ft(n,53);let i=tc,o=s[i].arrayValue?.values?.length||0;this.Ft(n,15),n.Mt(st(o)),this.Ot(i,n),this.Ct(s[i],n)}qt(e,n){let s=e.values||[];this.Ft(n,50);for(let i of s)this.Ct(i,n)}Lt(e,n){this.Ft(n,37),ve.fromName(e).path.forEach((s=>{this.Ft(n,60),this.$t(s,n)}))}Ft(e,n){e.Mt(n)}Nt(e){e.Mt(2)}};Gp.Wt=new Gp;var Ex=class{constructor(){this.Sn=new Sx}addToCollectionParentIndex(e,n){return this.Sn.add(n),R.resolve()}getCollectionParents(e,n){return R.resolve(this.Sn.getEntries(n))}addFieldIndex(e,n){return R.resolve()}deleteFieldIndex(e,n){return R.resolve()}deleteAllFieldIndexes(e){return R.resolve()}createTargetIndexes(e,n){return R.resolve()}getDocumentsMatchingTarget(e,n){return R.resolve(null)}getIndexType(e,n){return R.resolve(0)}getFieldIndexes(e,n){return R.resolve([])}getNextCollectionGroupToUpdate(e){return R.resolve(null)}getMinOffset(e,n){return R.resolve(Na.min())}getMinOffsetFromCollectionGroup(e,n){return R.resolve(Na.min())}updateCollectionGroup(e,n,s){return R.resolve()}updateIndexEntries(e,n){return R.resolve()}},Sx=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),s=e.popLast(),i=this.index[n]||new Ht(Ze.comparator),o=!i.has(s);return this.index[n]=i.add(s),o}has(e){let n=e.lastSegment(),s=e.popLast(),i=this.index[n];return i&&i.has(s)}getEntries(e){return(this.index[e]||new Ht(Ze.comparator)).toArray()}};var IL=new Uint8Array(0);var aS={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},CT=41943040,pr=class t{static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}};pr.DEFAULT_COLLECTION_PERCENTILE=10,pr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,pr.DEFAULT=new pr(CT,pr.DEFAULT_COLLECTION_PERCENTILE,pr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),pr.DISABLED=new pr(-1,0,0);var wd=class t{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new t(0)}static ar(){return new t(-1)}};var lS="LruGarbageCollector",W3=1048576;function cS([t,e],[n,s]){let i=$e(t,n);return i===0?$e(e,s):i}var Tx=class{constructor(e){this.Pr=e,this.buffer=new Ht(cS),this.Tr=0}Ir(){return++this.Tr}Er(e){let n=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(n);else{let s=this.buffer.last();cS(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}},kx=class{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){ce(lS,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){hc(n)?ce(lS,"Ignoring IndexedDB error during garbage collection: ",n):await dc(n)}await this.Ar(3e5)}))}},Cx=class{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.dr(e).next((s=>Math.floor(n/100*s)))}nthSequenceNumber(e,n){if(n===0)return R.resolve(ec.ce);let s=new Tx(n);return this.Vr.forEachTarget(e,(i=>s.Er(i.sequenceNumber))).next((()=>this.Vr.mr(e,(i=>s.Er(i))))).next((()=>s.maxValue))}removeTargets(e,n,s){return this.Vr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ce("LruGarbageCollector","Garbage collection skipped; disabled"),R.resolve(aS)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(ce("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),aS):this.gr(e,n)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,n){let s,i,o,a,u,d,p,y=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((_=>(_>this.params.maximumSequenceNumbersToCollect?(ce("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${_}`),i=this.params.maximumSequenceNumbersToCollect):i=_,a=Date.now(),this.nthSequenceNumber(e,i)))).next((_=>(s=_,u=Date.now(),this.removeTargets(e,s,n)))).next((_=>(o=_,d=Date.now(),this.removeOrphanedDocuments(e,s)))).next((_=>(p=Date.now(),Kl()<=Oe.DEBUG&&ce("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-y}ms
	Determined least recently used ${i} in `+(u-a)+`ms
	Removed ${o} targets in `+(d-u)+`ms
	Removed ${_} documents in `+(p-d)+`ms
Total Duration: ${p-y}ms`),R.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:_}))))}};function K3(t,e){return new Cx(t,e)}var Ax=class{constructor(){this.changes=new bi((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,zr.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let s=this.changes.get(n);return s!==void 0?R.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Px=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var Dx=class{constructor(e,n,s,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=i}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next((i=>(s=i,this.remoteDocumentCache.getEntry(e,n)))).next((i=>(s!==null&&hd(s.mutation,i,fr.empty(),yt.now()),i)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.getLocalViewOfDocuments(e,s,Ve()).next((()=>s))))}getLocalViewOfDocuments(e,n,s=Ve()){let i=ba();return this.populateOverlays(e,i,n).next((()=>this.computeViews(e,n,i,s).next((o=>{let a=cd();return o.forEach(((u,d)=>{a=a.insert(u,d.overlayedDocument)})),a}))))}getOverlayedDocuments(e,n){let s=ba();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,Ve())))}populateOverlays(e,n,s){let i=[];return s.forEach((o=>{n.has(o)||i.push(o)})),this.documentOverlayCache.getOverlays(e,i).next((o=>{o.forEach(((a,u)=>{n.set(a,u)}))}))}computeViews(e,n,s,i){let o=vi(),a=dd(),u=(function(){return dd()})();return n.forEach(((d,p)=>{let y=s.get(p.key);i.has(p.key)&&(y===void 0||y.mutation instanceof _s)?o=o.insert(p.key,p):y!==void 0?(a.set(p.key,y.mutation.getFieldMask()),hd(y.mutation,p,y.mutation.getFieldMask(),yt.now())):a.set(p.key,fr.empty())})),this.recalculateAndSaveOverlays(e,o).next((d=>(d.forEach(((p,y)=>a.set(p,y))),n.forEach(((p,y)=>u.set(p,new Px(y,a.get(p)??null)))),u)))}recalculateAndSaveOverlays(e,n){let s=dd(),i=new ft(((a,u)=>a-u)),o=Ve();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((a=>{for(let u of a)u.keys().forEach((d=>{let p=n.get(d);if(p===null)return;let y=s.get(d)||fr.empty();y=u.applyToLocalView(p,y),s.set(d,y);let _=(i.get(u.batchId)||Ve()).add(d);i=i.insert(u.batchId,_)}))})).next((()=>{let a=[],u=i.getReverseIterator();for(;u.hasNext();){let d=u.getNext(),p=d.key,y=d.value,_=uT();y.forEach((N=>{if(!o.has(N)){let A=bT(n.get(N),s.get(N));A!==null&&_.set(N,A),o=o.add(N)}})),a.push(this.documentOverlayCache.saveOverlays(e,p,_))}return R.waitFor(a)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,n,s,i){return h3(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):mf(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,i):this.getDocumentsMatchingCollectionQuery(e,n,s,i)}getNextDocuments(e,n,s,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,i).next((o=>{let a=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,i-o.size):R.resolve(ba()),u=md,d=o;return a.next((p=>R.forEach(p,((y,_)=>(u<_.largestBatchId&&(u=_.largestBatchId),o.get(y)?R.resolve():this.remoteDocumentCache.getEntry(e,y).next((N=>{d=d.insert(y,N)}))))).next((()=>this.populateOverlays(e,p,o))).next((()=>this.computeViews(e,d,p,Ve()))).next((y=>({batchId:u,changes:cT(y)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ve(n)).next((s=>{let i=cd();return s.isFoundDocument()&&(i=i.insert(s.key,s)),i}))}getDocumentsMatchingCollectionGroupQuery(e,n,s,i){let o=n.collectionGroup,a=cd();return this.indexManager.getCollectionParents(e,o).next((u=>R.forEach(u,(d=>{let p=(function(_,N){return new gi(N,null,_.explicitOrderBy.slice(),_.filters.slice(),_.limit,_.limitType,_.startAt,_.endAt)})(n,d.child(o));return this.getDocumentsMatchingCollectionQuery(e,p,s,i).next((y=>{y.forEach(((_,N)=>{a=a.insert(_,N)}))}))})).next((()=>a))))}getDocumentsMatchingCollectionQuery(e,n,s,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next((a=>(o=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,o,i)))).next((a=>{o.forEach(((d,p)=>{let y=p.getKey();a.get(y)===null&&(a=a.insert(y,zr.newInvalidDocument(y)))}));let u=cd();return a.forEach(((d,p)=>{let y=o.get(d);y!==void 0&&hd(y.mutation,p,fr.empty(),yt.now()),gf(n,p)&&(u=u.insert(d,p))})),u}))}};var Ox=class{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,n){return R.resolve(this.Nr.get(n))}saveBundleMetadata(e,n){return this.Nr.set(n.id,(function(i){return{id:i.id,version:i.version,createTime:xs(i.createTime)}})(n)),R.resolve()}getNamedQuery(e,n){return R.resolve(this.Br.get(n))}saveNamedQuery(e,n){return this.Br.set(n.name,(function(i){return{name:i.name,query:kT(i.bundledQuery),readTime:xs(i.readTime)}})(n)),R.resolve()}};var Lx=class{constructor(){this.overlays=new ft(ve.comparator),this.Lr=new Map}getOverlay(e,n){return R.resolve(this.overlays.get(n))}getOverlays(e,n){let s=ba();return R.forEach(n,(i=>this.getOverlay(e,i).next((o=>{o!==null&&s.set(i,o)})))).next((()=>s))}saveOverlays(e,n,s){return s.forEach(((i,o)=>{this.bt(e,n,o)})),R.resolve()}removeOverlaysForBatchId(e,n,s){let i=this.Lr.get(s);return i!==void 0&&(i.forEach((o=>this.overlays=this.overlays.remove(o))),this.Lr.delete(s)),R.resolve()}getOverlaysForCollection(e,n,s){let i=ba(),o=n.length+1,a=new ve(n.child("")),u=this.overlays.getIteratorFrom(a);for(;u.hasNext();){let d=u.getNext().value,p=d.getKey();if(!n.isPrefixOf(p.path))break;p.path.length===o&&d.largestBatchId>s&&i.set(d.getKey(),d)}return R.resolve(i)}getOverlaysForCollectionGroup(e,n,s,i){let o=new ft(((p,y)=>p-y)),a=this.overlays.getIterator();for(;a.hasNext();){let p=a.getNext().value;if(p.getKey().getCollectionGroup()===n&&p.largestBatchId>s){let y=o.get(p.largestBatchId);y===null&&(y=ba(),o=o.insert(p.largestBatchId,y)),y.set(p.getKey(),p)}}let u=ba(),d=o.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach(((p,y)=>u.set(p,y))),!(u.size()>=i)););return R.resolve(u)}bt(e,n,s){let i=this.overlays.get(s.key);if(i!==null){let a=this.Lr.get(i.largestBatchId).delete(s.key);this.Lr.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(s.key,new fx(n,s));let o=this.Lr.get(n);o===void 0&&(o=Ve(),this.Lr.set(n,o)),this.Lr.set(n,o.add(s.key))}};var Vx=class{constructor(){this.sessionToken=en.EMPTY_BYTE_STRING}getSessionToken(e){return R.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,R.resolve()}};var Nd=class{constructor(){this.kr=new Ht(Ct.Kr),this.qr=new Ht(Ct.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,n){let s=new Ct(e,n);this.kr=this.kr.add(s),this.qr=this.qr.add(s)}$r(e,n){e.forEach((s=>this.addReference(s,n)))}removeReference(e,n){this.Wr(new Ct(e,n))}Qr(e,n){e.forEach((s=>this.removeReference(s,n)))}Gr(e){let n=new ve(new Ze([])),s=new Ct(n,e),i=new Ct(n,e+1),o=[];return this.qr.forEachInRange([s,i],(a=>{this.Wr(a),o.push(a.key)})),o}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){let n=new ve(new Ze([])),s=new Ct(n,e),i=new Ct(n,e+1),o=Ve();return this.qr.forEachInRange([s,i],(a=>{o=o.add(a.key)})),o}containsKey(e){let n=new Ct(e,0),s=this.kr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}},Ct=class{constructor(e,n){this.key=e,this.Hr=n}static Kr(e,n){return ve.comparator(e.key,n.key)||$e(e.Hr,n.Hr)}static Ur(e,n){return $e(e.Hr,n.Hr)||ve.comparator(e.key,n.key)}};var Mx=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Yn=1,this.Jr=new Ht(Ct.Kr)}checkEmpty(e){return R.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,i){let o=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let a=new mx(o,n,s,i);this.mutationQueue.push(a);for(let u of i)this.Jr=this.Jr.add(new Ct(u.key,o)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return R.resolve(a)}lookupMutationBatch(e,n){return R.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){let s=n+1,i=this.Xr(s),o=i<0?0:i;return R.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return R.resolve(this.mutationQueue.length===0?yy:this.Yn-1)}getAllMutationBatches(e){return R.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let s=new Ct(n,0),i=new Ct(n,Number.POSITIVE_INFINITY),o=[];return this.Jr.forEachInRange([s,i],(a=>{let u=this.Zr(a.Hr);o.push(u)})),R.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new Ht($e);return n.forEach((i=>{let o=new Ct(i,0),a=new Ct(i,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([o,a],(u=>{s=s.add(u.Hr)}))})),R.resolve(this.Yr(s))}getAllMutationBatchesAffectingQuery(e,n){let s=n.path,i=s.length+1,o=s;ve.isDocumentKey(o)||(o=o.child(""));let a=new Ct(new ve(o),0),u=new Ht($e);return this.Jr.forEachWhile((d=>{let p=d.key.path;return!!s.isPrefixOf(p)&&(p.length===i&&(u=u.add(d.Hr)),!0)}),a),R.resolve(this.Yr(u))}Yr(e){let n=[];return e.forEach((s=>{let i=this.Zr(s);i!==null&&n.push(i)})),n}removeMutationBatch(e,n){ze(this.ei(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Jr;return R.forEach(n.mutations,(i=>{let o=new Ct(i.key,n.batchId);return s=s.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.Jr=s}))}nr(e){}containsKey(e,n){let s=new Ct(n,0),i=this.Jr.firstAfterOrEqual(s);return R.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,R.resolve()}ei(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){let n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var $x=class{constructor(e){this.ti=e,this.docs=(function(){return new ft(ve.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let s=n.key,i=this.docs.get(s),o=i?i.size:0,a=this.ti(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:a}),this.size+=a-o,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let s=this.docs.get(n);return R.resolve(s?s.document.mutableCopy():zr.newInvalidDocument(n))}getEntries(e,n){let s=vi();return n.forEach((i=>{let o=this.docs.get(i);s=s.insert(i,o?o.document.mutableCopy():zr.newInvalidDocument(i))})),R.resolve(s)}getDocumentsMatchingQuery(e,n,s,i){let o=vi(),a=n.path,u=new ve(a.child("__id-9223372036854775808__")),d=this.docs.getIteratorFrom(u);for(;d.hasNext();){let{key:p,value:{document:y}}=d.getNext();if(!a.isPrefixOf(p.path))break;p.path.length>a.length+1||W4(H4(y),s)<=0||(i.has(y.key)||gf(n,y))&&(o=o.insert(y.key,y.mutableCopy()))}return R.resolve(o)}getAllFromCollectionGroup(e,n,s,i){ye(9500)}ni(e,n){return R.forEach(this.docs,(s=>n(s)))}newChangeBuffer(e){return new Fx(this)}getSize(e){return R.resolve(this.size)}},Fx=class extends Ax{constructor(e){super(),this.Mr=e}applyChanges(e){let n=[];return this.changes.forEach(((s,i)=>{i.isValidDocument()?n.push(this.Mr.addEntry(e,i)):this.Mr.removeEntry(s)})),R.waitFor(n)}getFromCache(e,n){return this.Mr.getEntry(e,n)}getAllFromCache(e,n){return this.Mr.getEntries(e,n)}};var Ux=class{constructor(e){this.persistence=e,this.ri=new bi((n=>Iy(n)),Ey),this.lastRemoteSnapshotVersion=Se.min(),this.highestTargetId=0,this.ii=0,this.si=new Nd,this.targetCount=0,this.oi=wd._r()}forEachTarget(e,n){return this.ri.forEach(((s,i)=>n(i))),R.resolve()}getLastRemoteSnapshotVersion(e){return R.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return R.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),R.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.ii&&(this.ii=n),R.resolve()}lr(e){this.ri.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.oi=new wd(n),this.highestTargetId=n),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,n){return this.lr(n),this.targetCount+=1,R.resolve()}updateTargetData(e,n){return this.lr(n),R.resolve()}removeTargetData(e,n){return this.ri.delete(n.target),this.si.Gr(n.targetId),this.targetCount-=1,R.resolve()}removeTargets(e,n,s){let i=0,o=[];return this.ri.forEach(((a,u)=>{u.sequenceNumber<=n&&s.get(u.targetId)===null&&(this.ri.delete(a),o.push(this.removeMatchingKeysForTargetId(e,u.targetId)),i++)})),R.waitFor(o).next((()=>i))}getTargetCount(e){return R.resolve(this.targetCount)}getTargetData(e,n){let s=this.ri.get(n)||null;return R.resolve(s)}addMatchingKeys(e,n,s){return this.si.$r(n,s),R.resolve()}removeMatchingKeys(e,n,s){this.si.Qr(n,s);let i=this.persistence.referenceDelegate,o=[];return i&&n.forEach((a=>{o.push(i.markPotentiallyOrphaned(e,a))})),R.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.si.Gr(n),R.resolve()}getMatchingKeysForTargetId(e,n){let s=this.si.jr(n);return R.resolve(s)}containsKey(e,n){return R.resolve(this.si.containsKey(n))}};var Hp=class{constructor(e,n){this._i={},this.overlays={},this.ai=new ec(0),this.ui=!1,this.ui=!0,this.ci=new Vx,this.referenceDelegate=e(this),this.li=new Ux(this),this.indexManager=new Ex,this.remoteDocumentCache=(function(i){return new $x(i)})((s=>this.referenceDelegate.hi(s))),this.serializer=new Ix(n),this.Pi=new Ox(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Lx,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this._i[e.toKey()];return s||(s=new Mx(n,this.referenceDelegate),this._i[e.toKey()]=s),s}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,n,s){ce("MemoryPersistence","Starting transaction:",e);let i=new jx(this.ai.next());return this.referenceDelegate.Ti(),s(i).next((o=>this.referenceDelegate.Ii(i).next((()=>o)))).toPromise().then((o=>(i.raiseOnCommittedEvent(),o)))}Ei(e,n){return R.or(Object.values(this._i).map((s=>()=>s.containsKey(e,n))))}},jx=class extends Jv{constructor(e){super(),this.currentSequenceNumber=e}},zx=class t{constructor(e){this.persistence=e,this.Ri=new Nd,this.Ai=null}static Vi(e){return new t(e)}get di(){if(this.Ai)return this.Ai;throw ye(60996)}addReference(e,n,s){return this.Ri.addReference(s,n),this.di.delete(s.toString()),R.resolve()}removeReference(e,n,s){return this.Ri.removeReference(s,n),this.di.add(s.toString()),R.resolve()}markPotentiallyOrphaned(e,n){return this.di.add(n.toString()),R.resolve()}removeTarget(e,n){this.Ri.Gr(n.targetId).forEach((i=>this.di.add(i.toString())));let s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next((i=>{i.forEach((o=>this.di.add(o.toString())))})).next((()=>s.removeTargetData(e,n)))}Ti(){this.Ai=new Set}Ii(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return R.forEach(this.di,(s=>{let i=ve.fromPath(s);return this.mi(e,i).next((o=>{o||n.removeEntry(i,Se.min())}))})).next((()=>(this.Ai=null,n.apply(e))))}updateLimboDocument(e,n){return this.mi(e,n).next((s=>{s?this.di.delete(n.toString()):this.di.add(n.toString())}))}hi(e){return 0}mi(e,n){return R.or([()=>R.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}},Wp=class t{constructor(e,n){this.persistence=e,this.fi=new bi((s=>J4(s.path)),((s,i)=>s.isEqual(i))),this.garbageCollector=K3(this,n)}static Vi(e,n){return new t(e,n)}Ti(){}Ii(e){return R.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}dr(e){let n=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>n.next((i=>s+i))))}pr(e){let n=0;return this.mr(e,(s=>{n++})).next((()=>n))}mr(e,n){return R.forEach(this.fi,((s,i)=>this.wr(e,s,i).next((o=>o?R.resolve():n(i)))))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ni(e,(a=>this.wr(e,a,n).next((u=>{u||(s++,o.removeEntry(a,Se.min()))})))).next((()=>o.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,n){return this.fi.set(n,e.currentSequenceNumber),R.resolve()}removeTarget(e,n){let s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.fi.set(s,e.currentSequenceNumber),R.resolve()}removeReference(e,n,s){return this.fi.set(s,e.currentSequenceNumber),R.resolve()}updateLimboDocument(e,n){return this.fi.set(n,e.currentSequenceNumber),R.resolve()}hi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Ep(e.data.value)),n}wr(e,n,s){return R.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{let i=this.fi.get(n);return R.resolve(i!==void 0&&i>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var Bx=class t{constructor(e,n,s,i){this.targetId=e,this.fromCache=n,this.Ts=s,this.Is=i}static Es(e,n){let s=Ve(),i=Ve();for(let o of n.docChanges)switch(o.type){case 0:s=s.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new t(e,n.fromCache,s,i)}};var qx=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Gx=class{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return gI()?8:Q4(qt())>0?6:4})()}initialize(e,n){this.fs=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,s,i){let o={result:null};return this.gs(e,n).next((a=>{o.result=a})).next((()=>{if(!o.result)return this.ps(e,n,i,s).next((a=>{o.result=a}))})).next((()=>{if(o.result)return;let a=new qx;return this.ys(e,n,a).next((u=>{if(o.result=u,this.As)return this.ws(e,n,a,u.size)}))})).next((()=>o.result))}ws(e,n,s,i){return s.documentReadCount<this.Vs?(Kl()<=Oe.DEBUG&&ce("QueryEngine","SDK will not create cache indexes for query:",Ql(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),R.resolve()):(Kl()<=Oe.DEBUG&&ce("QueryEngine","Query:",Ql(n),"scans",s.documentReadCount,"local documents and returns",i,"documents as results."),s.documentReadCount>this.ds*i?(Kl()<=Oe.DEBUG&&ce("QueryEngine","The SDK decides to create cache indexes for query:",Ql(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,vs(n))):R.resolve())}gs(e,n){if(ZE(n))return R.resolve(null);let s=vs(n);return this.indexManager.getIndexType(e,s).next((i=>i===0?null:(n.limit!==null&&i===1&&(n=vd(n,null,"F"),s=vs(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next((o=>{let a=Ve(...o);return this.fs.getDocuments(e,a).next((u=>this.indexManager.getMinOffset(e,s).next((d=>{let p=this.bs(n,u);return this.Ss(n,p,a,d.readTime)?this.gs(e,vd(n,null,"F")):this.Ds(e,p,n,d)}))))})))))}ps(e,n,s,i){return ZE(n)||i.isEqual(Se.min())?R.resolve(null):this.fs.getDocuments(e,s).next((o=>{let a=this.bs(n,o);return this.Ss(n,a,s,i)?R.resolve(null):(Kl()<=Oe.DEBUG&&ce("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ql(n)),this.Ds(e,a,n,G4(i,md)).next((u=>u)))}))}bs(e,n){let s=new Ht(aT(e));return n.forEach(((i,o)=>{gf(e,o)&&(s=s.add(o))})),s}Ss(e,n,s,i){if(e.limit===null)return!1;if(s.size!==n.size)return!0;let o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}ys(e,n,s){return Kl()<=Oe.DEBUG&&ce("QueryEngine","Using full collection scan to execute query:",Ql(n)),this.fs.getDocumentsMatchingQuery(e,n,Na.min(),s)}Ds(e,n,s,i){return this.fs.getDocumentsMatchingQuery(e,s,i).next((o=>(n.forEach((a=>{o=o.insert(a.key,a)})),o)))}};var ky="LocalStore",Q3=3e8,Hx=class{constructor(e,n,s,i){this.persistence=e,this.Cs=n,this.serializer=i,this.vs=new ft($e),this.Fs=new bi((o=>Iy(o)),Ey),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(s)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Dx(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.vs)))}};function Y3(t,e,n,s){return new Hx(t,e,n,s)}async function AT(t,e){let n=Ie(t);return await n.persistence.runTransaction("Handle user change","readonly",(s=>{let i;return n.mutationQueue.getAllMutationBatches(s).next((o=>(i=o,n.Os(e),n.mutationQueue.getAllMutationBatches(s)))).next((o=>{let a=[],u=[],d=Ve();for(let p of i){a.push(p.batchId);for(let y of p.mutations)d=d.add(y.key)}for(let p of o){u.push(p.batchId);for(let y of p.mutations)d=d.add(y.key)}return n.localDocuments.getDocuments(s,d).next((p=>({Ns:p,removedBatchIds:a,addedBatchIds:u})))}))}))}function J3(t,e){let n=Ie(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{let i=e.batch.keys(),o=n.xs.newChangeBuffer({trackRemovals:!0});return(function(u,d,p,y){let _=p.batch,N=_.keys(),A=R.resolve();return N.forEach((z=>{A=A.next((()=>y.getEntry(d,z))).next((B=>{let g=p.docVersions.get(z);ze(g!==null,48541),B.version.compareTo(g)<0&&(_.applyToRemoteDocument(B,p),B.isValidDocument()&&(B.setReadTime(p.commitVersion),y.addEntry(B)))}))})),A.next((()=>u.mutationQueue.removeMutationBatch(d,_)))})(n,s,e,o).next((()=>o.apply(s))).next((()=>n.mutationQueue.performConsistencyCheck(s))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(s,i,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(u){let d=Ve();for(let p=0;p<u.mutationResults.length;++p)u.mutationResults[p].transformResults.length>0&&(d=d.add(u.batch.mutations[p].key));return d})(e)))).next((()=>n.localDocuments.getDocuments(s,i)))}))}function PT(t){let e=Ie(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.li.getLastRemoteSnapshotVersion(n)))}function X3(t,e){let n=Ie(t),s=e.snapshotVersion,i=n.vs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(o=>{let a=n.xs.newChangeBuffer({trackRemovals:!0});i=n.vs;let u=[];e.targetChanges.forEach(((y,_)=>{let N=i.get(_);if(!N)return;u.push(n.li.removeMatchingKeys(o,y.removedDocuments,_).next((()=>n.li.addMatchingKeys(o,y.addedDocuments,_))));let A=N.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(_)!==null?A=A.withResumeToken(en.EMPTY_BYTE_STRING,Se.min()).withLastLimboFreeSnapshotVersion(Se.min()):y.resumeToken.approximateByteSize()>0&&(A=A.withResumeToken(y.resumeToken,s)),i=i.insert(_,A),(function(B,g,L){return B.resumeToken.approximateByteSize()===0||g.snapshotVersion.toMicroseconds()-B.snapshotVersion.toMicroseconds()>=Q3?!0:L.addedDocuments.size+L.modifiedDocuments.size+L.removedDocuments.size>0})(N,A,y)&&u.push(n.li.updateTargetData(o,A))}));let d=vi(),p=Ve();if(e.documentUpdates.forEach((y=>{e.resolvedLimboDocuments.has(y)&&u.push(n.persistence.referenceDelegate.updateLimboDocument(o,y))})),u.push(Z3(o,a,e.documentUpdates).next((y=>{d=y.Bs,p=y.Ls}))),!s.isEqual(Se.min())){let y=n.li.getLastRemoteSnapshotVersion(o).next((_=>n.li.setTargetsMetadata(o,o.currentSequenceNumber,s)));u.push(y)}return R.waitFor(u).next((()=>a.apply(o))).next((()=>n.localDocuments.getLocalViewOfDocuments(o,d,p))).next((()=>d))})).then((o=>(n.vs=i,o)))}function Z3(t,e,n){let s=Ve(),i=Ve();return n.forEach((o=>s=s.add(o))),e.getEntries(t,s).next((o=>{let a=vi();return n.forEach(((u,d)=>{let p=o.get(u);d.isFoundDocument()!==p.isFoundDocument()&&(i=i.add(u)),d.isNoDocument()&&d.version.isEqual(Se.min())?(e.removeEntry(u,d.readTime),a=a.insert(u,d)):!p.isValidDocument()||d.version.compareTo(p.version)>0||d.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(d),a=a.insert(u,d)):ce(ky,"Ignoring outdated watch update for ",u,". Current version:",p.version," Watch version:",d.version)})),{Bs:a,Ls:i}}))}function R3(t,e){let n=Ie(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=yy),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function eD(t,e){let n=Ie(t);return n.persistence.runTransaction("Allocate target","readwrite",(s=>{let i;return n.li.getTargetData(s,e).next((o=>o?(i=o,R.resolve(i)):n.li.allocateTargetId(s).next((a=>(i=new yd(e,a,"TargetPurposeListen",s.currentSequenceNumber),n.li.addTargetData(s,i).next((()=>i)))))))})).then((s=>{let i=n.vs.get(s.targetId);return(i===null||s.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.vs=n.vs.insert(s.targetId,s),n.Fs.set(e,s.targetId)),s}))}async function Wx(t,e,n){let s=Ie(t),i=s.vs.get(e),o=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",o,(a=>s.persistence.referenceDelegate.removeTarget(a,i)))}catch(a){if(!hc(a))throw a;ce(ky,`Failed to update sequence numbers for target ${e}: ${a}`)}s.vs=s.vs.remove(e),s.Fs.delete(i.target)}function uS(t,e,n){let s=Ie(t),i=Se.min(),o=Ve();return s.persistence.runTransaction("Execute query","readwrite",(a=>(function(d,p,y){let _=Ie(d),N=_.Fs.get(y);return N!==void 0?R.resolve(_.vs.get(N)):_.li.getTargetData(p,y)})(s,a,vs(e)).next((u=>{if(u)return i=u.lastLimboFreeSnapshotVersion,s.li.getMatchingKeysForTargetId(a,u.targetId).next((d=>{o=d}))})).next((()=>s.Cs.getDocumentsMatchingQuery(a,e,n?i:Se.min(),n?o:Ve()))).next((u=>(tD(s,p3(e),u),{documents:u,ks:o})))))}function tD(t,e,n){let s=t.Ms.get(e)||Se.min();n.forEach(((i,o)=>{o.readTime.compareTo(s)>0&&(s=o.readTime)})),t.Ms.set(e,s)}var Kp=class{constructor(){this.activeTargetIds=y3()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var Kx=class{constructor(){this.vo=new Kp,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,n,s){this.Fo[e]=n}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new Kp,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var Qx=class{Mo(e){}shutdown(){}};var dS="ConnectivityMonitor",Qp=class{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){ce(dS,"Network connectivity changed: AVAILABLE");for(let e of this.Lo)e(0)}Bo(){ce(dS,"Network connectivity changed: UNAVAILABLE");for(let e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Ip=null;function Yx(){return Ip===null?Ip=(function(){return 268435456+Math.round(2147483648*Math.random())})():Ip++,"0x"+Ip.toString(16)}var qv="RestConnection",nD={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"},Jx=class{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.qo=n+"://"+e.host,this.Uo=`projects/${s}/databases/${i}`,this.$o=this.databaseId.database===$p?`project_id=${s}`:`project_id=${s}&database_id=${i}`}Wo(e,n,s,i,o){let a=Yx(),u=this.Qo(e,n.toUriEncodedString());ce(qv,`Sending RPC '${e}' ${a}:`,u,s);let d={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(d,i,o);let{host:p}=new URL(u),y=mo(p);return this.zo(e,u,d,s,y).then((_=>(ce(qv,`Received RPC '${e}' ${a}: `,_),_)),(_=>{throw hi(qv,`RPC '${e}' ${a} failed with error: `,_,"url: ",u,"request:",s),_}))}jo(e,n,s,i,o,a){return this.Wo(e,n,s,i,o)}Go(e,n,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+cc})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((i,o)=>e[o]=i)),s&&s.headers.forEach(((i,o)=>e[o]=i))}Qo(e,n){let s=nD[e],i=`${this.qo}/v1/${n}:${s}`;return this.databaseInfo.apiKey&&(i=`${i}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),i}terminate(){}};var Xx=class{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}};var mn="WebChannelConnection",ld=(t,e,n)=>{t.listen(e,(s=>{try{n(s)}catch(i){setTimeout((()=>{throw i}),0)}}))},Yp=class t extends Jx{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!t.c_){let e=Uv();ld(e,Fv.STAT_EVENT,(n=>{n.stat===wp.PROXY?ce(mn,"STAT_EVENT: detected buffering proxy"):n.stat===wp.NOPROXY&&ce(mn,"STAT_EVENT: detected no buffering proxy")})),t.c_=!0}}zo(e,n,s,i,o){let a=Yx();return new Promise(((u,d)=>{let p=new Mv;p.setWithCredentials(!0),p.listenOnce($v.COMPLETE,(()=>{try{switch(p.getLastErrorCode()){case ad.NO_ERROR:let _=p.getResponseJson();ce(mn,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(_)),u(_);break;case ad.TIMEOUT:ce(mn,`RPC '${e}' ${a} timed out`),d(new se(Q.DEADLINE_EXCEEDED,"Request time out"));break;case ad.HTTP_ERROR:let N=p.getStatus();if(ce(mn,`RPC '${e}' ${a} failed with status:`,N,"response text:",p.getResponseText()),N>0){let A=p.getResponseJson();Array.isArray(A)&&(A=A[0]);let z=A?.error;if(z&&z.status&&z.message){let B=(function(L){let w=L.toLowerCase().replace(/_/g,"-");return Object.values(Q).indexOf(w)>=0?w:Q.UNKNOWN})(z.status);d(new se(B,z.message))}else d(new se(Q.UNKNOWN,"Server responded with status "+p.getStatus()))}else d(new se(Q.UNAVAILABLE,"Connection failed."));break;default:ye(9055,{l_:e,streamId:a,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{ce(mn,`RPC '${e}' ${a} completed.`)}}));let y=JSON.stringify(i);ce(mn,`RPC '${e}' ${a} sending request:`,i),p.send(n,"POST",y,s,15)}))}T_(e,n,s){let i=Yx(),o=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=this.createWebChannelTransport(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Go(u.initMessageHeaders,n,s),u.encodeInitMessageHeaders=!0;let p=o.join("");ce(mn,`Creating RPC '${e}' stream ${i}: ${p}`,u);let y=a.createWebChannel(p,u);this.I_(y);let _=!1,N=!1,A=new Xx({Ho:z=>{N?ce(mn,`Not sending because RPC '${e}' stream ${i} is closed:`,z):(_||(ce(mn,`Opening RPC '${e}' stream ${i} transport.`),y.open(),_=!0),ce(mn,`RPC '${e}' stream ${i} sending:`,z),y.send(z))},Jo:()=>y.close()});return ld(y,Wl.EventType.OPEN,(()=>{N||(ce(mn,`RPC '${e}' stream ${i} transport opened.`),A.i_())})),ld(y,Wl.EventType.CLOSE,(()=>{N||(N=!0,ce(mn,`RPC '${e}' stream ${i} transport closed`),A.o_(),this.E_(y))})),ld(y,Wl.EventType.ERROR,(z=>{N||(N=!0,hi(mn,`RPC '${e}' stream ${i} transport errored. Name:`,z.name,"Message:",z.message),A.o_(new se(Q.UNAVAILABLE,"The operation could not be completed")))})),ld(y,Wl.EventType.MESSAGE,(z=>{if(!N){let B=z.data[0];ze(!!B,16349);let g=B,L=g?.error||g[0]?.error;if(L){ce(mn,`RPC '${e}' stream ${i} received error:`,L);let w=L.status,C=(function(oe){let T=kt[oe];if(T!==void 0)return xT(T)})(w),W=L.message;w==="NOT_FOUND"&&W.includes("database")&&W.includes("does not exist")&&W.includes(this.databaseId.database)&&hi(`Database '${this.databaseId.database}' not found. Please check your project configuration.`),C===void 0&&(C=Q.INTERNAL,W="Unknown error status: "+w+" with message "+L.message),N=!0,A.o_(new se(C,W)),y.close()}else ce(mn,`RPC '${e}' stream ${i} received:`,B),A.__(B)}})),t.u_(),setTimeout((()=>{A.s_()}),0),A}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((n=>n===e))}Go(e,n,s){super.Go(e,n,s),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return jv()}};function rD(t){return new Yp(t)}function Gv(){return typeof document<"u"?document:null}function Ad(t){return new xx(t,!0)}Yp.c_=!1;var Jp=class{constructor(e,n,s=1e3,i=1.5,o=6e4){this.Ci=e,this.timerId=n,this.R_=s,this.A_=i,this.V_=o,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();let n=Math.floor(this.d_+this.y_()),s=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-s);i>0&&ce("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.d_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,i,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}};var hS="PersistentStream",Xp=class{constructor(e,n,s,i,o,a,u,d){this.Ci=e,this.b_=s,this.S_=i,this.connection=o,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=u,this.listener=d,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Jp(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===Q.RESOURCE_EXHAUSTED?(di(n.toString()),di("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===Q.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(n)}W_(){}auth(){this.state=1;let e=this.Q_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,i])=>{this.D_===n&&this.G_(s,i)}),(s=>{e((()=>{let i=new se(Q.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(i)}))}))}G_(e,n){let s=this.Q_(this.D_);this.stream=this.j_(e,n),this.stream.Zo((()=>{s((()=>this.listener.Zo()))})),this.stream.Yo((()=>{s((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((i=>{s((()=>this.z_(i)))})),this.stream.onMessage((i=>{s((()=>++this.F_==1?this.H_(i):this.onNext(i)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ce(hS,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return n=>{this.Ci.enqueueAndForget((()=>this.D_===e?n():(ce(hS,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}},Zx=class extends Xp{constructor(e,n,s,i,o,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,i,a),this.serializer=o}j_(e,n){return this.connection.T_("Listen",e,n)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();let n=V3(this.serializer,e),s=(function(o){if(!("targetChange"in o))return Se.min();let a=o.targetChange;return a.targetIds&&a.targetIds.length?Se.min():a.readTime?xs(a.readTime):Se.min()})(e);return this.listener.J_(n,s)}Z_(e){let n={};n.database=_x(this.serializer),n.addTarget=(function(o,a){let u,d=a.target;if(u=cx(d)?{documents:F3(o,d)}:{query:U3(o,d).ft},u.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){u.resumeToken=yT(o,a.resumeToken);let p=yx(o,a.expectedCount);p!==null&&(u.expectedCount=p)}else if(a.snapshotVersion.compareTo(Se.min())>0){u.readTime=qp(o,a.snapshotVersion.toTimestamp());let p=yx(o,a.expectedCount);p!==null&&(u.expectedCount=p)}return u})(this.serializer,e);let s=z3(this.serializer,e);s&&(n.labels=s),this.K_(n)}X_(e){let n={};n.database=_x(this.serializer),n.removeTarget=e,this.K_(n)}},Rx=class extends Xp{constructor(e,n,s,i,o,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,i,a),this.serializer=o}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}H_(e){return ze(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ze(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ze(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();let n=$3(e.writeResults,e.commitTime),s=xs(e.commitTime);return this.listener.na(s,n)}ra(){let e={};e.database=_x(this.serializer),this.K_(e)}ea(e){let n={streamToken:this.lastStreamToken,writes:e.map((s=>M3(this.serializer,s)))};this.K_(n)}};var ey=class{},ty=class extends ey{constructor(e,n,s,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new se(Q.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,a])=>this.connection.Wo(e,wx(n,s),i,o,a))).catch((o=>{throw o.name==="FirebaseError"?(o.code===Q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new se(Q.UNKNOWN,o.toString())}))}jo(e,n,s,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,u])=>this.connection.jo(e,wx(n,s),i,a,u,o))).catch((a=>{throw a.name==="FirebaseError"?(a.code===Q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new se(Q.UNKNOWN,a.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}};function sD(t,e,n,s){return new ty(t,e,n,s)}var ny=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(di(n),this.aa=!1):ce("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}};var ka="RemoteStore",ry=class{constructor(e,n,s,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=o,this.Aa.Mo((a=>{s.enqueueAndForget((async()=>{Da(this)&&(ce(ka,"Restarting streams for network reachability change."),await(async function(d){let p=Ie(d);p.Ea.add(4),await Pd(p),p.Va.set("Unknown"),p.Ea.delete(4),await bf(p)})(this))}))})),this.Va=new ny(s,i)}};async function bf(t){if(Da(t))for(let e of t.Ra)await e(!0)}async function Pd(t){for(let e of t.Ra)await e(!1)}function DT(t,e){let n=Ie(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Dy(n)?Py(n):mc(n).O_()&&Ay(n,e))}function Cy(t,e){let n=Ie(t),s=mc(n);n.Ia.delete(e),s.O_()&&OT(n,e),n.Ia.size===0&&(s.O_()?s.L_():Da(n)&&n.Va.set("Unknown"))}function Ay(t,e){if(t.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Se.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}mc(t).Z_(e)}function OT(t,e){t.da.$e(e),mc(t).X_(e)}function Py(t){t.da=new vx({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),mc(t).start(),t.Va.ua()}function Dy(t){return Da(t)&&!mc(t).x_()&&t.Ia.size>0}function Da(t){return Ie(t).Ea.size===0}function LT(t){t.da=void 0}async function iD(t){t.Va.set("Online")}async function oD(t){t.Ia.forEach(((e,n)=>{Ay(t,e)}))}async function aD(t,e){LT(t),Dy(t)?(t.Va.ha(e),Py(t)):t.Va.set("Unknown")}async function lD(t,e,n){if(t.Va.set("Online"),e instanceof zp&&e.state===2&&e.cause)try{await(async function(i,o){let a=o.cause;for(let u of o.targetIds)i.Ia.has(u)&&(await i.remoteSyncer.rejectListen(u,a),i.Ia.delete(u),i.da.removeTarget(u))})(t,e)}catch(s){ce(ka,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Zp(t,s)}else if(e instanceof Zl?t.da.Xe(e):e instanceof jp?t.da.st(e):t.da.tt(e),!n.isEqual(Se.min()))try{let s=await PT(t.localStore);n.compareTo(s)>=0&&await(function(o,a){let u=o.da.Tt(a);return u.targetChanges.forEach(((d,p)=>{if(d.resumeToken.approximateByteSize()>0){let y=o.Ia.get(p);y&&o.Ia.set(p,y.withResumeToken(d.resumeToken,a))}})),u.targetMismatches.forEach(((d,p)=>{let y=o.Ia.get(d);if(!y)return;o.Ia.set(d,y.withResumeToken(en.EMPTY_BYTE_STRING,y.snapshotVersion)),OT(o,d);let _=new yd(y.target,d,p,y.sequenceNumber);Ay(o,_)})),o.remoteSyncer.applyRemoteEvent(u)})(t,n)}catch(s){ce(ka,"Failed to raise snapshot:",s),await Zp(t,s)}}async function Zp(t,e,n){if(!hc(e))throw e;t.Ea.add(1),await Pd(t),t.Va.set("Offline"),n||(n=()=>PT(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{ce(ka,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await bf(t)}))}function VT(t,e){return e().catch((n=>Zp(t,n,e)))}async function vf(t){let e=Ie(t),n=No(e),s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:yy;for(;cD(e);)try{let i=await R3(e.localStore,s);if(i===null){e.Ta.length===0&&n.L_();break}s=i.batchId,uD(e,i)}catch(i){await Zp(e,i)}MT(e)&&$T(e)}function cD(t){return Da(t)&&t.Ta.length<10}function uD(t,e){t.Ta.push(e);let n=No(t);n.O_()&&n.Y_&&n.ea(e.mutations)}function MT(t){return Da(t)&&!No(t).x_()&&t.Ta.length>0}function $T(t){No(t).start()}async function dD(t){No(t).ra()}async function hD(t){let e=No(t);for(let n of t.Ta)e.ea(n.mutations)}async function mD(t,e,n){let s=t.Ta.shift(),i=px.from(s,e,n);await VT(t,(()=>t.remoteSyncer.applySuccessfulWrite(i))),await vf(t)}async function pD(t,e){e&&No(t).Y_&&await(async function(s,i){if((function(a){return S3(a)&&a!==Q.ABORTED})(i.code)){let o=s.Ta.shift();No(s).B_(),await VT(s,(()=>s.remoteSyncer.rejectFailedWrite(o.batchId,i))),await vf(s)}})(t,e),MT(t)&&$T(t)}async function mS(t,e){let n=Ie(t);n.asyncQueue.verifyOperationInProgress(),ce(ka,"RemoteStore received new credentials");let s=Da(n);n.Ea.add(3),await Pd(n),s&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await bf(n)}async function fD(t,e){let n=Ie(t);e?(n.Ea.delete(2),await bf(n)):e||(n.Ea.add(2),await Pd(n),n.Va.set("Unknown"))}function mc(t){return t.ma||(t.ma=(function(n,s,i){let o=Ie(n);return o.sa(),new Zx(s,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(t.datastore,t.asyncQueue,{Zo:iD.bind(null,t),Yo:oD.bind(null,t),t_:aD.bind(null,t),J_:lD.bind(null,t)}),t.Ra.push((async e=>{e?(t.ma.B_(),Dy(t)?Py(t):t.Va.set("Unknown")):(await t.ma.stop(),LT(t))}))),t.ma}function No(t){return t.fa||(t.fa=(function(n,s,i){let o=Ie(n);return o.sa(),new Rx(s,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),Yo:dD.bind(null,t),t_:pD.bind(null,t),ta:hD.bind(null,t),na:mD.bind(null,t)}),t.Ra.push((async e=>{e?(t.fa.B_(),await vf(t)):(await t.fa.stop(),t.Ta.length>0&&(ce(ka,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))}))),t.fa}var sy=class t{constructor(e,n,s,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=i,this.removalCallback=o,this.deferred=new gs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((a=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,i,o){let a=Date.now()+s,u=new t(e,n,a,i,o);return u.start(s),u}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new se(Q.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Oy(t,e){if(di("AsyncQueue",`${e}: ${t}`),hc(t))return new se(Q.UNAVAILABLE,`${e}: ${t}`);throw t}var _d=class t{static emptySet(e){return new t(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||ve.comparator(n.key,s.key):(n,s)=>ve.comparator(n.key,s.key),this.keyedMap=cd(),this.sortedSet=new ft(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,s)=>(e(n),!1)))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=s.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let s=new t;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}};var Rp=class{constructor(){this.ga=new ft(ve.comparator)}track(e){let n=e.doc.key,s=this.ga.get(n);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(n,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(n):e.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):ye(63341,{Vt:e,pa:s}):this.ga=this.ga.insert(n,e)}ya(){let e=[];return this.ga.inorderTraversal(((n,s)=>{e.push(s)})),e}},Ca=class t{constructor(e,n,s,i,o,a,u,d,p){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=i,this.mutatedKeys=o,this.fromCache=a,this.syncStateChanged=u,this.excludesMetadataChanges=d,this.hasCachedResults=p}static fromInitialDocuments(e,n,s,i,o){let a=[];return n.forEach((u=>{a.push({type:0,doc:u})})),new t(e,n,_d.emptySet(n),a,s,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ff(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==s[i].type||!n[i].doc.isEqual(s[i].doc))return!1;return!0}};var iy=class{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}},oy=class{constructor(){this.queries=pS(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){let i=Ie(n),o=i.queries;i.queries=pS(),o.forEach(((a,u)=>{for(let d of u.ba)d.onError(s)}))})(this,new se(Q.ABORTED,"Firestore shutting down"))}};function pS(){return new bi((t=>oT(t)),ff)}async function FT(t,e){let n=Ie(t),s=3,i=e.query,o=n.queries.get(i);o?!o.Sa()&&e.Da()&&(s=2):(o=new iy,s=e.Da()?0:1);try{switch(s){case 0:o.wa=await n.onListen(i,!0);break;case 1:o.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(a){let u=Oy(a,`Initialization of query '${Ql(e.query)}' failed`);return void e.onError(u)}n.queries.set(i,o),o.ba.push(e),e.va(n.onlineState),o.wa&&e.Fa(o.wa)&&Ly(n)}async function UT(t,e){let n=Ie(t),s=e.query,i=3,o=n.queries.get(s);if(o){let a=o.ba.indexOf(e);a>=0&&(o.ba.splice(a,1),o.ba.length===0?i=e.Da()?0:1:!o.Sa()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function gD(t,e){let n=Ie(t),s=!1;for(let i of e){let o=i.query,a=n.queries.get(o);if(a){for(let u of a.ba)u.Fa(i)&&(s=!0);a.wa=i}}s&&Ly(n)}function bD(t,e,n){let s=Ie(t),i=s.queries.get(e);if(i)for(let o of i.ba)o.onError(n);s.queries.delete(e)}function Ly(t){t.Ca.forEach((e=>{e.next()}))}var ay,fS;(fS=ay||(ay={})).Ma="default",fS.Cache="cache";var ef=class{constructor(e,n,s){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){let s=[];for(let i of e.docChanges)i.type!==3&&s.push(i);e=new Ca(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;let s=n!=="Offline";return(!this.options.Ka||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;let n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Ca.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==ay.Cache}};var tf=class{constructor(e){this.key=e}},nf=class{constructor(e){this.key=e}},ly=class{constructor(e,n){this.query=e,this.Za=n,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Ve(),this.mutatedKeys=Ve(),this.eu=aT(e),this.tu=new _d(this.eu)}get nu(){return this.Za}ru(e,n){let s=n?n.iu:new Rp,i=n?n.tu:this.tu,o=n?n.mutatedKeys:this.mutatedKeys,a=i,u=!1,d=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,p=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((y,_)=>{let N=i.get(y),A=gf(this.query,_)?_:null,z=!!N&&this.mutatedKeys.has(N.key),B=!!A&&(A.hasLocalMutations||this.mutatedKeys.has(A.key)&&A.hasCommittedMutations),g=!1;N&&A?N.data.isEqual(A.data)?z!==B&&(s.track({type:3,doc:A}),g=!0):this.su(N,A)||(s.track({type:2,doc:A}),g=!0,(d&&this.eu(A,d)>0||p&&this.eu(A,p)<0)&&(u=!0)):!N&&A?(s.track({type:0,doc:A}),g=!0):N&&!A&&(s.track({type:1,doc:N}),g=!0,(d||p)&&(u=!0)),g&&(A?(a=a.add(A),o=B?o.add(y):o.delete(y)):(a=a.delete(y),o=o.delete(y)))})),this.query.limit!==null)for(;a.size>this.query.limit;){let y=this.query.limitType==="F"?a.last():a.first();a=a.delete(y.key),o=o.delete(y.key),s.track({type:1,doc:y})}return{tu:a,iu:s,Ss:u,mutatedKeys:o}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,i){let o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;let a=e.iu.ya();a.sort(((y,_)=>(function(A,z){let B=g=>{switch(g){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ye(20277,{Vt:g})}};return B(A)-B(z)})(y.type,_.type)||this.eu(y.doc,_.doc))),this.ou(s),i=i??!1;let u=n&&!i?this._u():[],d=this.Ya.size===0&&this.current&&!i?1:0,p=d!==this.Xa;return this.Xa=d,a.length!==0||p?{snapshot:new Ca(this.query,e.tu,o,a,e.mutatedKeys,d===0,p,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:u}:{au:u}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Rp,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Za=this.Za.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Za=this.Za.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];let e=this.Ya;this.Ya=Ve(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Ya=this.Ya.add(s.key))}));let n=[];return e.forEach((s=>{this.Ya.has(s)||n.push(new nf(s))})),this.Ya.forEach((s=>{e.has(s)||n.push(new tf(s))})),n}cu(e){this.Za=e.ks,this.Ya=Ve();let n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Ca.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}},Vy="SyncEngine",cy=class{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}},uy=class{constructor(e){this.key=e,this.hu=!1}},dy=class{constructor(e,n,s,i,o,a){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new bi((u=>oT(u)),ff),this.Iu=new Map,this.Eu=new Set,this.Ru=new ft(ve.comparator),this.Au=new Map,this.Vu=new Nd,this.du={},this.mu=new Map,this.fu=wd.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}};async function vD(t,e,n=!0){let s=HT(t),i,o=s.Tu.get(e);return o?(s.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.lu()):i=await jT(s,e,n,!0),i}async function xD(t,e){let n=HT(t);await jT(n,e,!0,!1)}async function jT(t,e,n,s){let i=await eD(t.localStore,vs(e)),o=i.targetId,a=t.sharedClientState.addLocalQueryTarget(o,n),u;return s&&(u=await yD(t,e,o,a==="current",i.resumeToken)),t.isPrimaryClient&&n&&DT(t.remoteStore,i),u}async function yD(t,e,n,s,i){t.pu=(_,N,A)=>(async function(B,g,L,w){let C=g.view.ru(L);C.Ss&&(C=await uS(B.localStore,g.query,!1).then((({documents:T})=>g.view.ru(T,C))));let W=w&&w.targetChanges.get(g.targetId),re=w&&w.targetMismatches.get(g.targetId)!=null,oe=g.view.applyChanges(C,B.isPrimaryClient,W,re);return bS(B,g.targetId,oe.au),oe.snapshot})(t,_,N,A);let o=await uS(t.localStore,e,!0),a=new ly(e,o.ks),u=a.ru(o.documents),d=xd.createSynthesizedTargetChangeForCurrentChange(n,s&&t.onlineState!=="Offline",i),p=a.applyChanges(u,t.isPrimaryClient,d);bS(t,n,p.au);let y=new cy(e,n,a);return t.Tu.set(e,y),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),p.snapshot}async function wD(t,e,n){let s=Ie(t),i=s.Tu.get(e),o=s.Iu.get(i.targetId);if(o.length>1)return s.Iu.set(i.targetId,o.filter((a=>!ff(a,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(i.targetId),s.sharedClientState.isActiveQueryTarget(i.targetId)||await Wx(s.localStore,i.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(i.targetId),n&&Cy(s.remoteStore,i.targetId),hy(s,i.targetId)})).catch(dc)):(hy(s,i.targetId),await Wx(s.localStore,i.targetId,!0))}async function ND(t,e){let n=Ie(t),s=n.Tu.get(e),i=n.Iu.get(s.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),Cy(n.remoteStore,s.targetId))}async function _D(t,e,n){let s=AD(t);try{let i=await(function(a,u){let d=Ie(a),p=yt.now(),y=u.reduce(((A,z)=>A.add(z.key)),Ve()),_,N;return d.persistence.runTransaction("Locally write mutations","readwrite",(A=>{let z=vi(),B=Ve();return d.xs.getEntries(A,y).next((g=>{z=g,z.forEach(((L,w)=>{w.isValidDocument()||(B=B.add(L))}))})).next((()=>d.localDocuments.getOverlayedDocuments(A,z))).next((g=>{_=g;let L=[];for(let w of u){let C=E3(w,_.get(w.key).overlayedDocument);C!=null&&L.push(new _s(w.key,C,ZS(C.value.mapValue),On.exists(!0)))}return d.mutationQueue.addMutationBatch(A,p,L,u)})).next((g=>{N=g;let L=g.applyToLocalDocumentSet(_,B);return d.documentOverlayCache.saveOverlays(A,g.batchId,L)}))})).then((()=>({batchId:N.batchId,changes:cT(_)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(i.batchId),(function(a,u,d){let p=a.du[a.currentUser.toKey()];p||(p=new ft($e)),p=p.insert(u,d),a.du[a.currentUser.toKey()]=p})(s,i.batchId,n),await Dd(s,i.changes),await vf(s.remoteStore)}catch(i){let o=Oy(i,"Failed to persist write");n.reject(o)}}async function zT(t,e){let n=Ie(t);try{let s=await X3(n.localStore,e);e.targetChanges.forEach(((i,o)=>{let a=n.Au.get(o);a&&(ze(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?a.hu=!0:i.modifiedDocuments.size>0?ze(a.hu,14607):i.removedDocuments.size>0&&(ze(a.hu,42227),a.hu=!1))})),await Dd(n,s,e)}catch(s){await dc(s)}}function gS(t,e,n){let s=Ie(t);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){let i=[];s.Tu.forEach(((o,a)=>{let u=a.view.va(e);u.snapshot&&i.push(u.snapshot)})),(function(a,u){let d=Ie(a);d.onlineState=u;let p=!1;d.queries.forEach(((y,_)=>{for(let N of _.ba)N.va(u)&&(p=!0)})),p&&Ly(d)})(s.eventManager,e),i.length&&s.Pu.J_(i),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function ID(t,e,n){let s=Ie(t);s.sharedClientState.updateQueryState(e,"rejected",n);let i=s.Au.get(e),o=i&&i.key;if(o){let a=new ft(ve.comparator);a=a.insert(o,zr.newNoDocument(o,Se.min()));let u=Ve().add(o),d=new Up(Se.min(),new Map,new ft($e),a,u);await zT(s,d),s.Ru=s.Ru.remove(o),s.Au.delete(e),My(s)}else await Wx(s.localStore,e,!1).then((()=>hy(s,e,n))).catch(dc)}async function ED(t,e){let n=Ie(t),s=e.batch.batchId;try{let i=await J3(n.localStore,e);qT(n,s,null),BT(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await Dd(n,i)}catch(i){await dc(i)}}async function SD(t,e,n){let s=Ie(t);try{let i=await(function(a,u){let d=Ie(a);return d.persistence.runTransaction("Reject batch","readwrite-primary",(p=>{let y;return d.mutationQueue.lookupMutationBatch(p,u).next((_=>(ze(_!==null,37113),y=_.keys(),d.mutationQueue.removeMutationBatch(p,_)))).next((()=>d.mutationQueue.performConsistencyCheck(p))).next((()=>d.documentOverlayCache.removeOverlaysForBatchId(p,y,u))).next((()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,y))).next((()=>d.localDocuments.getDocuments(p,y)))}))})(s.localStore,e);qT(s,e,n),BT(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await Dd(s,i)}catch(i){await dc(i)}}function BT(t,e){(t.mu.get(e)||[]).forEach((n=>{n.resolve()})),t.mu.delete(e)}function qT(t,e,n){let s=Ie(t),i=s.du[s.currentUser.toKey()];if(i){let o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),s.du[s.currentUser.toKey()]=i}}function hy(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let s of t.Iu.get(e))t.Tu.delete(s),n&&t.Pu.yu(s,n);t.Iu.delete(e),t.isPrimaryClient&&t.Vu.Gr(e).forEach((s=>{t.Vu.containsKey(s)||GT(t,s)}))}function GT(t,e){t.Eu.delete(e.path.canonicalString());let n=t.Ru.get(e);n!==null&&(Cy(t.remoteStore,n),t.Ru=t.Ru.remove(e),t.Au.delete(n),My(t))}function bS(t,e,n){for(let s of n)s instanceof tf?(t.Vu.addReference(s.key,e),TD(t,s)):s instanceof nf?(ce(Vy,"Document no longer in limbo: "+s.key),t.Vu.removeReference(s.key,e),t.Vu.containsKey(s.key)||GT(t,s.key)):ye(19791,{wu:s})}function TD(t,e){let n=e.key,s=n.path.canonicalString();t.Ru.get(n)||t.Eu.has(s)||(ce(Vy,"New document in limbo: "+n),t.Eu.add(s),My(t))}function My(t){for(;t.Eu.size>0&&t.Ru.size<t.maxConcurrentLimboResolutions;){let e=t.Eu.values().next().value;t.Eu.delete(e);let n=new ve(Ze.fromString(e)),s=t.fu.next();t.Au.set(s,new uy(n)),t.Ru=t.Ru.insert(n,s),DT(t.remoteStore,new yd(vs(Cd(n.path)),s,"TargetPurposeLimboResolution",ec.ce))}}async function Dd(t,e,n){let s=Ie(t),i=[],o=[],a=[];s.Tu.isEmpty()||(s.Tu.forEach(((u,d)=>{a.push(s.pu(d,e,n).then((p=>{if((p||n)&&s.isPrimaryClient){let y=p?!p.fromCache:n?.targetChanges.get(d.targetId)?.current;s.sharedClientState.updateQueryState(d.targetId,y?"current":"not-current")}if(p){i.push(p);let y=Bx.Es(d.targetId,p);o.push(y)}})))})),await Promise.all(a),s.Pu.J_(i),await(async function(d,p){let y=Ie(d);try{await y.persistence.runTransaction("notifyLocalViewChanges","readwrite",(_=>R.forEach(p,(N=>R.forEach(N.Ts,(A=>y.persistence.referenceDelegate.addReference(_,N.targetId,A))).next((()=>R.forEach(N.Is,(A=>y.persistence.referenceDelegate.removeReference(_,N.targetId,A)))))))))}catch(_){if(!hc(_))throw _;ce(ky,"Failed to update sequence numbers: "+_)}for(let _ of p){let N=_.targetId;if(!_.fromCache){let A=y.vs.get(N),z=A.snapshotVersion,B=A.withLastLimboFreeSnapshotVersion(z);y.vs=y.vs.insert(N,B)}}})(s.localStore,o))}async function kD(t,e){let n=Ie(t);if(!n.currentUser.isEqual(e)){ce(Vy,"User change. New user:",e.toKey());let s=await AT(n.localStore,e);n.currentUser=e,(function(o,a){o.mu.forEach((u=>{u.forEach((d=>{d.reject(new se(Q.CANCELLED,a))}))})),o.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Dd(n,s.Ns)}}function CD(t,e){let n=Ie(t),s=n.Au.get(e);if(s&&s.hu)return Ve().add(s.key);{let i=Ve(),o=n.Iu.get(e);if(!o)return i;for(let a of o){let u=n.Tu.get(a);i=i.unionWith(u.view.nu)}return i}}function HT(t){let e=Ie(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=zT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=CD.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=ID.bind(null,e),e.Pu.J_=gD.bind(null,e.eventManager),e.Pu.yu=bD.bind(null,e.eventManager),e}function AD(t){let e=Ie(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=ED.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=SD.bind(null,e),e}var Aa=class{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ad(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return Y3(this.persistence,new Gx,e.initialUser,this.serializer)}Cu(e){return new Hp(zx.Vi,this.serializer)}Du(e){return new Kx}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}};Aa.provider={build:()=>new Aa};var rf=class extends Aa{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){ze(this.persistence.referenceDelegate instanceof Wp,46915);let s=this.persistence.referenceDelegate.garbageCollector;return new kx(s,e.asyncQueue,n)}Cu(e){let n=this.cacheSizeBytes!==void 0?pr.withCacheSize(this.cacheSizeBytes):pr.DEFAULT;return new Hp((s=>Wp.Vi(s,n)),this.serializer)}};var ac=class{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>gS(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=kD.bind(null,this.syncEngine),await fD(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new oy})()}createDatastore(e){let n=Ad(e.databaseInfo.databaseId),s=rD(e.databaseInfo);return sD(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return(function(s,i,o,a,u){return new ry(s,i,o,a,u)})(this.localStore,this.datastore,e.asyncQueue,(n=>gS(this.syncEngine,n,0)),(function(){return Qp.v()?new Qp:new Qx})())}createSyncEngine(e,n){return(function(i,o,a,u,d,p,y){let _=new dy(i,o,a,u,d,p);return y&&(_.gu=!0),_})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){let s=Ie(n);ce(ka,"RemoteStore shutting down."),s.Ea.add(5),await Pd(s),s.Aa.shutdown(),s.Va.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}};ac.provider={build:()=>new ac};var sf=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):di("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}};var _o="FirestoreClient",my=class{constructor(e,n,s,i,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this._databaseInfo=i,this.user=Gt.UNAUTHENTICATED,this.clientId=wa.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(s,(async a=>{ce(_o,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a})),this.appCheckCredentials.start(s,(a=>(ce(_o,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new gs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let s=Oy(n,"Failed to shutdown persistence");e.reject(s)}})),e.promise}};async function Hv(t,e){t.asyncQueue.verifyOperationInProgress(),ce(_o,"Initializing OfflineComponentProvider");let n=t.configuration;await e.initialize(n);let s=n.initialUser;t.setCredentialChangeListener((async i=>{s.isEqual(i)||(await AT(e.localStore,i),s=i)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function vS(t,e){t.asyncQueue.verifyOperationInProgress();let n=await PD(t);ce(_o,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((s=>mS(e.remoteStore,s))),t.setAppCheckTokenChangeListener(((s,i)=>mS(e.remoteStore,i))),t._onlineComponents=e}async function PD(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ce(_o,"Using user provided OfflineComponentProvider");try{await Hv(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!(function(i){return i.name==="FirebaseError"?i.code===Q.FAILED_PRECONDITION||i.code===Q.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(n))throw n;hi("Error using user provided cache. Falling back to memory cache: "+n),await Hv(t,new Aa)}}else ce(_o,"Using default OfflineComponentProvider"),await Hv(t,new rf(void 0));return t._offlineComponents}async function WT(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ce(_o,"Using user provided OnlineComponentProvider"),await vS(t,t._uninitializedComponentsProvider._online)):(ce(_o,"Using default OnlineComponentProvider"),await vS(t,new ac))),t._onlineComponents}function DD(t){return WT(t).then((e=>e.syncEngine))}async function py(t){let e=await WT(t),n=e.eventManager;return n.onListen=vD.bind(null,e.syncEngine),n.onUnlisten=wD.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=xD.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=ND.bind(null,e.syncEngine),n}function KT(t,e,n,s){let i=new sf(s),o=new ef(e,i,n);return t.asyncQueue.enqueueAndForget((async()=>FT(await py(t),o))),()=>{i.Nu(),t.asyncQueue.enqueueAndForget((async()=>UT(await py(t),o)))}}function QT(t,e,n={}){let s=new gs;return t.asyncQueue.enqueueAndForget((async()=>(function(o,a,u,d,p){let y=new sf({next:N=>{y.Nu(),a.enqueueAndForget((()=>UT(o,_)));let A=N.docs.has(u);!A&&N.fromCache?p.reject(new se(Q.UNAVAILABLE,"Failed to get document because the client is offline.")):A&&N.fromCache&&d&&d.source==="server"?p.reject(new se(Q.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(N)},error:N=>p.reject(N)}),_=new ef(Cd(u.path),y,{includeMetadataChanges:!0,Ka:!0});return FT(o,_)})(await py(t),t.asyncQueue,e,n,s))),s.promise}function YT(t,e){let n=new gs;return t.asyncQueue.enqueueAndForget((async()=>_D(await DD(t),e,n))),n.promise}function JT(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var OD="ComponentProvider",xS=new Map;function LD(t,e,n,s,i){return new Xv(t,e,n,i.host,i.ssl,i.experimentalForceLongPolling,i.experimentalAutoDetectLongPolling,JT(i.experimentalLongPollingOptions),i.useFetchStreams,i.isUsingEmulator,s)}var XT="firestore.googleapis.com",yS=!0,of=class{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new se(Q.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=XT,this.ssl=yS}else this.host=e.host,this.ssl=e.ssl??yS;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=CT;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<W3)throw new se(Q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}SS("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=JT(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new se(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new se(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new se(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,i){return s.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},lc=class{constructor(e,n,s,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new of({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new se(Q.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new se(Q.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new of(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new Cp;switch(s.type){case"firstParty":return new Qv(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new se(Q.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){let s=xS.get(n);s&&(ce(OD,"Removing Datastore"),xS.delete(n),s.terminate())})(this),Promise.resolve()}};function ZT(t,e,n,s={}){t=wn(t,lc);let i=mo(e),o=t._getSettings(),a={...o,emulatorOptions:t._getEmulatorOptions()},u=`${e}:${n}`;i&&(Dm(`https://${u}`),Om("Firestore",!0)),o.host!==XT&&o.host!==u&&hi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let d={...o,host:u,ssl:i,emulatorOptions:s};if(!Mr(d,a)&&(t._setSettings(d),s.mockUserToken)){let p,y;if(typeof s.mockUserToken=="string")p=s.mockUserToken,y=Gt.MOCK_USER;else{p=uI(s.mockUserToken,t._app?.options.projectId);let _=s.mockUserToken.sub||s.mockUserToken.user_id;if(!_)throw new se(Q.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");y=new Gt(_)}t._authCredentials=new Wv(new kp(p,y))}}var Br=class t{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},wt=class t{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ci(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}toJSON(){return{type:t._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,s){if(uc(n,t._jsonSchema))return new t(e,s||null,new ve(Ze.fromString(n.referencePath)))}};wt._jsonSchemaVersion="firestore/documentReference/1.0",wt._jsonSchema={type:xt("string",wt._jsonSchemaVersion),referencePath:xt("string")};var ci=class t extends Br{constructor(e,n,s){super(e,n,Cd(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new wt(this.firestore,null,new ve(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function Ke(t,e,...n){if(t=nt(t),ES("collection","path",e),t instanceof lc){let s=Ze.fromString(e,...n);return jE(s),new ci(t,null,s)}{if(!(t instanceof wt||t instanceof ci))throw new se(Q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let s=t._path.child(Ze.fromString(e,...n));return jE(s),new ci(t.firestore,null,s)}}function fe(t,e,...n){if(t=nt(t),arguments.length===1&&(e=wa.newId()),ES("doc","path",e),t instanceof lc){let s=Ze.fromString(e,...n);return UE(s),new wt(t,null,new ve(s))}{if(!(t instanceof wt||t instanceof ci))throw new se(Q.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let s=t._path.child(Ze.fromString(e,...n));return UE(s),new wt(t.firestore,t instanceof ci?t.converter:null,new ve(s))}}var wS="AsyncQueue",af=class{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Jp(this,"async_queue_retry"),this._c=()=>{let s=Gv();s&&ce(wS,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;let n=Gv();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;let n=Gv();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));let n=new gs;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!hc(e))throw e;ce(wS,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){let n=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,di("INTERNAL UNHANDLED ERROR: ",NS(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=n,n}enqueueAfterDelay(e,n,s){this.uc(),this.oc.indexOf(e)>-1&&(n=0);let i=sy.createAndSchedule(this,e,n,s,(o=>this.hc(o)));return this.tc.push(i),i}uc(){this.nc&&ye(47125,{Pc:NS(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(let n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,s)=>n.targetTimeMs-s.targetTimeMs));for(let n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){let n=this.tc.indexOf(e);this.tc.splice(n,1)}};function NS(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}var Jn=class extends lc{constructor(e,n,s,i){super(e,n,s,i),this.type="firestore",this._queue=new af,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new af(e),this._firestoreClient=void 0,await e}}};function $y(t,e){let n=typeof t=="object"?t:$m(),s=typeof t=="string"?t:e||$p,i=Hu(n,"firestore").getImmediate({identifier:s});if(!i._initialized){let o=cI("firestore");o&&ZT(i,...o)}return i}function pc(t){if(t._terminated)throw new se(Q.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||VD(t),t._firestoreClient}function VD(t){let e=t._freezeSettings(),n=LD(t._databaseId,t._app?.options.appId||"",t._persistenceKey,t._app?.options.apiKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new my(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&(function(i){let o=i?._online.build();return{_offline:i?._offline.build(o),_online:o}})(t._componentsProvider))}var ys=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(en.fromBase64String(e))}catch(n){throw new se(Q.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(en.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:t._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(uc(e,t._jsonSchema))return t.fromBase64String(e.bytes)}};ys._jsonSchemaVersion="firestore/bytes/1.0",ys._jsonSchema={type:xt("string",ys._jsonSchemaVersion),bytes:xt("string")};var Io=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new se(Q.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Dn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Pa=class{constructor(e){this._methodName=e}};var ui=class t{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new se(Q.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new se(Q.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return $e(this._lat,e._lat)||$e(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:t._jsonSchemaVersion}}static fromJSON(e){if(uc(e,t._jsonSchema))return new t(e.latitude,e.longitude)}};ui._jsonSchemaVersion="firestore/geoPoint/1.0",ui._jsonSchema={type:xt("string",ui._jsonSchemaVersion),latitude:xt("number"),longitude:xt("number")};var ws=class t{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,i){if(s.length!==i.length)return!1;for(let o=0;o<s.length;++o)if(s[o]!==i[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:t._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(uc(e,t._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new t(e.vectorValues);throw new se(Q.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};ws._jsonSchemaVersion="firestore/vectorValue/1.0",ws._jsonSchema={type:xt("string",ws._jsonSchemaVersion),vectorValues:xt("object")};var MD=/^__.*__$/,fy=class{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new _s(e,this.data,this.fieldMask,n,this.fieldTransforms):new Sa(e,this.data,n,this.fieldTransforms)}},lf=class{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new _s(e,this.data,this.fieldMask,n,this.fieldTransforms)}};function RT(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ye(40011,{dataSource:t})}}var gy=class t{constructor(e,n,s,i,o,a){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=i,o===void 0&&this.validatePath(),this.fieldTransforms=o||[],this.fieldMask=a||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new t({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){let n=this.path?.child(e),s=this.contextWith({path:n,arrayElement:!1});return s.validatePathSegment(e),s}childContextForFieldPath(e){let n=this.path?.child(e),s=this.contextWith({path:n,arrayElement:!1});return s.validatePath(),s}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return uf(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(RT(this.dataSource)&&MD.test(e))throw this.createError('Document fields cannot begin and end with "__"')}},by=class{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||Ad(e)}createContext(e,n,s,i=!1){return new gy({dataSource:e,methodName:n,targetDoc:s,path:Dn.emptyPath(),arrayElement:!1,hasConverter:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Oa(t){let e=t._freezeSettings(),n=Ad(t._databaseId);return new by(t._databaseId,!!e.ignoreUndefinedProperties,n)}function xf(t,e,n,s,i,o={}){let a=t.createContext(o.merge||o.mergeFields?2:0,e,n,i);zy("Data must be an object, but it was:",a,s);let u=ek(s,a),d,p;if(o.merge)d=new fr(a.fieldMask),p=a.fieldTransforms;else if(o.mergeFields){let y=[];for(let _ of o.mergeFields){let N=Eo(e,_,n);if(!a.contains(N))throw new se(Q.INVALID_ARGUMENT,`Field '${N}' is specified in your field mask but missing from your input data.`);nk(y,N)||y.push(N)}d=new fr(y),p=a.fieldTransforms.filter((_=>d.covers(_.field)))}else d=null,p=a.fieldTransforms;return new fy(new Pn(u),d,p)}var cf=class t extends Pa{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof t}};var vy=class t extends Pa{constructor(e,n){super(e),this.Vc=n}_toFieldTransform(e){let n=new Ea(e.serializer,hT(e.serializer,this.Vc));return new ux(e.path,n)}isEqual(e){return e instanceof t&&this.Vc===e.Vc}};function Fy(t,e,n,s){let i=t.createContext(1,e,n);zy("Data must be an object, but it was:",i,s);let o=[],a=Pn.empty();So(s,((d,p)=>{let y=By(e,d,n);p=nt(p);let _=i.childContextForFieldPath(y);if(p instanceof cf)o.push(y);else{let N=Od(p,_);N!=null&&(o.push(y),a.set(y,N))}}));let u=new fr(o);return new lf(a,u,i.fieldTransforms)}function Uy(t,e,n,s,i,o){let a=t.createContext(1,e,n),u=[Eo(e,s,n)],d=[i];if(o.length%2!=0)throw new se(Q.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let N=0;N<o.length;N+=2)u.push(Eo(e,o[N])),d.push(o[N+1]);let p=[],y=Pn.empty();for(let N=u.length-1;N>=0;--N)if(!nk(p,u[N])){let A=u[N],z=d[N];z=nt(z);let B=a.childContextForFieldPath(A);if(z instanceof cf)p.push(A);else{let g=Od(z,B);g!=null&&(p.push(A),y.set(A,g))}}let _=new fr(p);return new lf(y,_,a.fieldTransforms)}function jy(t,e,n,s=!1){return Od(n,t.createContext(s?4:3,e))}function Od(t,e){if(tk(t=nt(t)))return zy("Unsupported field value:",e,t),ek(t,e);if(t instanceof Pa)return(function(s,i){if(!RT(i.dataSource))throw i.createError(`${s._methodName}() can only be used with update() and set()`);if(!i.path)throw i.createError(`${s._methodName}() is not currently supported inside arrays`);let o=s._toFieldTransform(i);o&&i.fieldTransforms.push(o)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(s,i){let o=[],a=0;for(let u of s){let d=Od(u,i.childContextForArray(a));d==null&&(d={nullValue:"NULL_VALUE"}),o.push(d),a++}return{arrayValue:{values:o}}})(t,e)}return(function(s,i){if((s=nt(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return hT(i.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){let o=yt.fromDate(s);return{timestampValue:qp(i.serializer,o)}}if(s instanceof yt){let o=new yt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:qp(i.serializer,o)}}if(s instanceof ui)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof ys)return{bytesValue:yT(i.serializer,s._byteString)};if(s instanceof wt){let o=i.databaseId,a=s.firestore._databaseId;if(!a.isEqual(o))throw i.createError(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Ty(s.firestore._databaseId||i.databaseId,s._key.path)}}if(s instanceof ws)return(function(a,u){let d=a instanceof ws?a.toArray():a;return{mapValue:{fields:{[wy]:{stringValue:Ny},[tc]:{arrayValue:{values:d.map((y=>{if(typeof y!="number")throw u.createError("VectorValues must only contain numeric values.");return Sy(u.serializer,y)}))}}}}}})(s,i);if(TT(s))return s._toProto(i.serializer);throw i.createError(`Unsupported field value: ${Sd(s)}`)})(t,e)}function ek(t,e){let n={};return qS(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):So(t,((s,i)=>{let o=Od(i,e.childContextForField(s));o!=null&&(n[s]=o)})),{mapValue:{fields:n}}}function tk(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof yt||t instanceof ui||t instanceof ys||t instanceof wt||t instanceof Pa||t instanceof ws||TT(t))}function zy(t,e,n){if(!tk(n)||!TS(n)){let s=Sd(n);throw s==="an object"?e.createError(t+" a custom object"):e.createError(t+" "+s)}}function Eo(t,e,n){if((e=nt(e))instanceof Io)return e._internalPath;if(typeof e=="string")return By(t,e);throw uf("Field path arguments must be of type string or ",t,!1,void 0,n)}var $D=new RegExp("[~\\*/\\[\\]]");function By(t,e,n){if(e.search($D)>=0)throw uf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Io(...e.split("."))._internalPath}catch{throw uf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function uf(t,e,n,s,i){let o=s&&!s.isEmpty(),a=i!==void 0,u=`Function ${e}() called with invalid data`;n&&(u+=" (via `toFirestore()`)"),u+=". ";let d="";return(o||a)&&(d+=" (found",o&&(d+=` in field ${s}`),a&&(d+=` in document ${i}`),d+=")"),new se(Q.INVALID_ARGUMENT,u+t+d)}function nk(t,e){return t.some((n=>n.isEqual(e)))}var Id=class{convertValue(e,n="none"){switch(yo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return st(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(pi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ye(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let s={};return So(e,((i,o)=>{s[i]=this.convertValue(o,n)})),s}convertVectorValue(e){let n=e.fields?.[tc].arrayValue?.values?.map((s=>st(s.doubleValue)));return new ws(n)}convertGeoPoint(e){return new ui(st(e.latitude),st(e.longitude))}convertArray(e,n){return(e.values||[]).map((s=>this.convertValue(s,n)))}convertServerTimestamp(e,n){switch(n){case"previous":let s=hf(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(fd(e));default:return null}}convertTimestamp(e){let n=mi(e);return new yt(n.seconds,n.nanos)}convertDocumentKey(e,n){let s=Ze.fromString(e);ze(ST(s),9688,{name:e});let i=new gd(s.get(1),s.get(3)),o=new ve(s.popFirst(5));return i.isEqual(n)||di(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}};var Ed=class extends Id{constructor(e){super(),this.firestore=e}convertBytes(e){return new ys(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new wt(this.firestore,null,n)}};function xi(t){return new vy("increment",t)}var rk="@firebase/firestore",sk="4.11.0";function ik(t){return(function(n,s){if(typeof n!="object"||n===null)return!1;let i=n;for(let o of s)if(o in i&&typeof i[o]=="function")return!0;return!1})(t,["next","error","complete"])}var Ld=class{constructor(e,n,s,i,o){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new wt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new Gy(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){return this._document?.data.clone().value.mapValue.fields??void 0}get(e){if(this._document){let n=this._document.data.field(Eo("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},Gy=class extends Ld{data(){return super.data()}};function zD(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new se(Q.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Vd=class{},bc=class extends Vd{};function wf(t,e,...n){let s=[];e instanceof Vd&&s.push(e),s=s.concat(n),(function(o){let a=o.filter((d=>d instanceof Hy)).length,u=o.filter((d=>d instanceof yf)).length;if(a>1||a>0&&u>0)throw new se(Q.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(let i of s)t=i._apply(t);return t}var yf=class t extends bc{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new t(e,n,s)}_apply(e){let n=this._parse(e);return uk(e._query,n),new Br(e.firestore,e.converter,pf(e._query,n))}_parse(e){let n=Oa(e.firestore);return(function(o,a,u,d,p,y,_){let N;if(p.isKeyField()){if(y==="array-contains"||y==="array-contains-any")throw new se(Q.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if(y==="in"||y==="not-in"){ak(_,y);let z=[];for(let B of _)z.push(ok(d,o,B));N={arrayValue:{values:z}}}else N=ok(d,o,_)}else y!=="in"&&y!=="not-in"&&y!=="array-contains-any"||ak(_,y),N=jy(u,a,_,y==="in"||y==="not-in");return vt.create(p,y,N)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}};function lk(t,e,n){let s=e,i=Eo("where",t);return yf._create(i,s,n)}var Hy=class t extends Vd{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new t(e,n)}_parse(e){let n=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return n.length===1?n[0]:gr.create(n,this._getOperator())}_apply(e){let n=this._parse(e);return n.getFilters().length===0?e:((function(i,o){let a=i,u=o.getFlattenedFilters();for(let d of u)uk(a,d),a=pf(a,d)})(e._query,n),new Br(e.firestore,e.converter,pf(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var Wy=class t extends bc{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new t(e,n)}_apply(e){let n=(function(i,o,a){if(i.startAt!==null)throw new se(Q.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new se(Q.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new wo(o,a)})(e._query,this._field,this._direction);return new Br(e.firestore,e.converter,sT(e._query,n))}};function Nf(t,e="asc"){let n=e,s=Eo("orderBy",t);return Wy._create(s,n)}var Ky=class t extends bc{constructor(e,n,s){super(),this.type=e,this._limit=n,this._limitType=s}static _create(e,n,s){return new t(e,n,s)}_apply(e){return new Br(e.firestore,e.converter,vd(e._query,this._limit,this._limitType))}};function _f(t){return kS("limit",t),Ky._create("limit",t,"F")}var Qy=class t extends bc{constructor(e,n,s){super(),this.type=e,this._docOrFields=n,this._inclusive=s}static _create(e,n,s){return new t(e,n,s)}_apply(e){let n=BD(e,this.type,this._docOrFields,this._inclusive);return new Br(e.firestore,e.converter,iT(e._query,n))}};function ck(...t){return Qy._create("startAfter",t,!1)}function BD(t,e,n,s){if(n[0]=nt(n[0]),n[0]instanceof Ld)return(function(o,a,u,d,p){if(!d)throw new se(Q.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${u}().`);let y=[];for(let _ of xa(o))if(_.field.isKeyField())y.push(kd(a,d.key));else{let N=d.data.field(_.field);if(Td(N))throw new se(Q.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+_.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(N===null){let A=_.field.canonicalString();throw new se(Q.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${A}' (used as the orderBy) does not exist.`)}y.push(N)}return new fi(y,p)})(t._query,t.firestore._databaseId,e,n[0]._document,s);{let i=Oa(t.firestore);return(function(a,u,d,p,y,_){let N=a.explicitOrderBy;if(y.length>N.length)throw new se(Q.INVALID_ARGUMENT,`Too many arguments provided to ${p}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let A=[];for(let z=0;z<y.length;z++){let B=y[z];if(N[z].field.isKeyField()){if(typeof B!="string")throw new se(Q.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${p}(), but got a ${typeof B}`);if(!mf(a)&&B.indexOf("/")!==-1)throw new se(Q.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${p}() must be a plain document ID, but '${B}' contains a slash.`);let g=a.path.child(Ze.fromString(B));if(!ve.isDocumentKey(g))throw new se(Q.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${p}() must result in a valid document path, but '${g}' is not because it contains an odd number of segments.`);let L=new ve(g);A.push(kd(u,L))}else{let g=jy(d,p,B);A.push(g)}}return new fi(A,_)})(t._query,t.firestore._databaseId,i,e,n,s)}}function ok(t,e,n){if(typeof(n=nt(n))=="string"){if(n==="")throw new se(Q.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!mf(e)&&n.indexOf("/")!==-1)throw new se(Q.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let s=e.path.child(Ze.fromString(n));if(!ve.isDocumentKey(s))throw new se(Q.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return kd(t,new ve(s))}if(n instanceof wt)return kd(t,n._key);throw new se(Q.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Sd(n)}.`)}function ak(t,e){if(!Array.isArray(t)||t.length===0)throw new se(Q.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function uk(t,e){let n=(function(i,o){for(let a of i)for(let u of a.getFlattenedFilters())if(o.indexOf(u.op)>=0)return u.op;return null})(t.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new se(Q.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new se(Q.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function Jy(t,e,n){let s;return s=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,s}var La=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Va=class t extends Ld{constructor(e,n,s,i,o,a){super(e,n,s,i,a),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new fc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let s=this._document.data.field(Eo("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new se(Q.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,n={};return n.type=t._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}};Va._jsonSchemaVersion="firestore/documentSnapshot/1.0",Va._jsonSchema={type:xt("string",Va._jsonSchemaVersion),bundleSource:xt("string","DocumentSnapshot"),bundleName:xt("string"),bundle:xt("string")};var fc=class extends Va{data(e={}){return super.data(e)}},gc=class t{constructor(e,n,s,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new La(i.hasPendingWrites,i.fromCache),this.query=s}get docs(){let e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((s=>{e.call(n,new fc(this._firestore,this._userDataWriter,s.key,s,new La(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new se(Q.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(i,o){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map((u=>{let d=new fc(i._firestore,i._userDataWriter,u.doc.key,u.doc,new La(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter);return u.doc,{type:"added",doc:d,oldIndex:-1,newIndex:a++}}))}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((u=>o||u.type!==3)).map((u=>{let d=new fc(i._firestore,i._userDataWriter,u.doc.key,u.doc,new La(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter),p=-1,y=-1;return u.type!==0&&(p=a.indexOf(u.doc.key),a=a.delete(u.doc.key)),u.type!==1&&(a=a.add(u.doc),y=a.indexOf(u.doc.key)),{type:qD(u.type),doc:d,oldIndex:p,newIndex:y}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new se(Q.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=t._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=wa.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let n=[],s=[],i=[];return this.docs.forEach((o=>{o._document!==null&&(n.push(o._document),s.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function qD(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ye(61501,{type:t})}}gc._jsonSchemaVersion="firestore/querySnapshot/1.0",gc._jsonSchema={type:xt("string",gc._jsonSchemaVersion),bundleSource:xt("string","QuerySnapshot"),bundleName:xt("string"),bundle:xt("string")};var Yy=class{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Oa(e)}set(e,n,s){this._verifyNotCommitted();let i=qy(e,this._firestore),o=Jy(i.converter,n,s),a=xf(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,s);return this._mutations.push(a.toMutation(i._key,On.none())),this}update(e,n,s,...i){this._verifyNotCommitted();let o=qy(e,this._firestore),a;return a=typeof(n=nt(n))=="string"||n instanceof Io?Uy(this._dataReader,"WriteBatch.update",o._key,n,s,i):Fy(this._dataReader,"WriteBatch.update",o._key,n),this._mutations.push(a.toMutation(o._key,On.exists(!0))),this}delete(e){this._verifyNotCommitted();let n=qy(e,this._firestore);return this._mutations=this._mutations.concat(new Ta(n._key,On.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new se(Q.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function qy(t,e){if((t=nt(t)).firestore!==e)throw new se(Q.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function yi(t){t=wn(t,wt);let e=wn(t.firestore,Jn),n=pc(e);return QT(n,t._key).then((s=>dk(e,t,s)))}function br(t,e,n){t=wn(t,wt);let s=wn(t.firestore,Jn),i=Jy(t.converter,e,n),o=Oa(s);return Md(s,[xf(o,"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,On.none())])}function Nt(t,e,n,...s){t=wn(t,wt);let i=wn(t.firestore,Jn),o=Oa(i),a;return a=typeof(e=nt(e))=="string"||e instanceof Io?Uy(o,"updateDoc",t._key,e,n,s):Fy(o,"updateDoc",t._key,e),Md(i,[a.toMutation(t._key,On.exists(!0))])}function qr(t){return Md(wn(t.firestore,Jn),[new Ta(t._key,On.none())])}function Gr(t,e){let n=wn(t.firestore,Jn),s=fe(t),i=Jy(t.converter,e),o=Oa(t.firestore);return Md(n,[xf(o,"addDoc",s._key,i,t.converter!==null,{}).toMutation(s._key,On.exists(!1))]).then((()=>s))}function pn(t,...e){t=nt(t);let n={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||ik(e[s])||(n=e[s++]);let i={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(ik(e[s])){let p=e[s];e[s]=p.next?.bind(p),e[s+1]=p.error?.bind(p),e[s+2]=p.complete?.bind(p)}let o,a,u;if(t instanceof wt)a=wn(t.firestore,Jn),u=Cd(t._key.path),o={next:p=>{e[s]&&e[s](dk(a,t,p))},error:e[s+1],complete:e[s+2]};else{let p=wn(t,Br);a=wn(p.firestore,Jn),u=p._query;let y=new Ed(a);o={next:_=>{e[s]&&e[s](new gc(a,y,p,_))},error:e[s+1],complete:e[s+2]},zD(t._query)}let d=pc(a);return KT(d,u,i,o)}function Md(t,e){let n=pc(t);return YT(n,e)}function dk(t,e,n){let s=n.docs.get(e._key),i=new Ed(t);return new Va(t,i,e._key,s,new La(n.hasPendingWrites,n.fromCache),e.converter)}function If(t){return t=wn(t,Jn),pc(t),new Yy(t,(e=>Md(t,e)))}(function(e,n=!0){_S(bo),go(new mr("firestore",((s,{instanceIdentifier:i,options:o})=>{let a=s.getProvider("app").getImmediate(),u=new Jn(new Ap(s.getProvider("auth-internal")),new Dp(a,s.getProvider("app-check-internal")),QS(a,i),a);return o={useFetchStreams:n,...o},u._setSettings(o),u}),"PUBLIC").setMultipleInstances(!0)),$r(rk,sk,e),$r(rk,sk,"esm2020")})();function hk(t,e=!0){return t==null?e:t!==!1}function mk(t){let e=t&&typeof t=="object"?t:{},n=Object.prototype.hasOwnProperty.call(e,"requireDNI")?e.requireDNI:e.requireDni,s=Object.prototype.hasOwnProperty.call(e,"requirePhone")?e.requirePhone:e.require_phone;return{requireDni:hk(n,!0),requirePhone:hk(s,!0)}}function Ef({dni:t,phone:e,requireDni:n=!0,requirePhone:s=!0}={}){let i=String(t||"").trim(),o=String(e||"").trim(),a=n!==!1,u=s!==!1;return a&&!i?{ok:!1,code:"dni_required",message:"Debes ingresar tu DNI (minimo 6 digitos)."}:i&&i.length<6?{ok:!1,code:"invalid_dni",message:"DNI invalido (minimo 6 digitos)."}:u&&!o?{ok:!1,code:"phone_required",message:"Debes ingresar tu telefono (minimo 8 digitos)."}:o&&o.length<8?{ok:!1,code:"invalid_phone",message:"Telefono invalido (minimo 8 digitos)."}:{ok:!0,code:null,message:null}}function Xy({requireDni:t=!0,requirePhone:e=!0}={}){let n=["Nombre"];return e!==!1&&n.push("Telefono"),t!==!1&&n.push("DNI"),n.length===1?n[0]:n.length===2?`${n[0]} y ${n[1]}`:`${n[0]}, ${n[1]} y ${n[2]}`}var GD="1.3.17";function gk(t,e,n){return Math.max(t,Math.min(e,n))}function HD(t,e,n){return(1-n)*t+n*e}function WD(t,e,n,s){return HD(t,e,1-Math.exp(-n*s))}function KD(t,e){return(t%e+e)%e}var QD=class{constructor(){be(this,"isRunning",!1);be(this,"value",0);be(this,"from",0);be(this,"to",0);be(this,"currentTime",0);be(this,"lerp");be(this,"duration");be(this,"easing");be(this,"onUpdate")}advance(t){if(!this.isRunning)return;let e=!1;if(this.duration&&this.easing){this.currentTime+=t;let n=gk(0,this.currentTime/this.duration,1);e=n>=1;let s=e?1:this.easing(n);this.value=this.from+(this.to-this.from)*s}else this.lerp?(this.value=WD(this.value,this.to,this.lerp*60,t),Math.round(this.value)===this.to&&(this.value=this.to,e=!0)):(this.value=this.to,e=!0);e&&this.stop(),this.onUpdate?.(this.value,e)}stop(){this.isRunning=!1}fromTo(t,e,{lerp:n,duration:s,easing:i,onStart:o,onUpdate:a}){this.from=this.value=t,this.to=e,this.lerp=n,this.duration=s,this.easing=i,this.currentTime=0,this.isRunning=!0,o?.(),this.onUpdate=a}};function YD(t,e){let n;return function(...s){let i=this;clearTimeout(n),n=setTimeout(()=>{n=void 0,t.apply(i,s)},e)}}var JD=class{constructor(t,e,{autoResize:n=!0,debounce:s=250}={}){be(this,"width",0);be(this,"height",0);be(this,"scrollHeight",0);be(this,"scrollWidth",0);be(this,"debouncedResize");be(this,"wrapperResizeObserver");be(this,"contentResizeObserver");be(this,"resize",()=>{this.onWrapperResize(),this.onContentResize()});be(this,"onWrapperResize",()=>{this.wrapper instanceof Window?(this.width=window.innerWidth,this.height=window.innerHeight):(this.width=this.wrapper.clientWidth,this.height=this.wrapper.clientHeight)});be(this,"onContentResize",()=>{this.wrapper instanceof Window?(this.scrollHeight=this.content.scrollHeight,this.scrollWidth=this.content.scrollWidth):(this.scrollHeight=this.wrapper.scrollHeight,this.scrollWidth=this.wrapper.scrollWidth)});this.wrapper=t,this.content=e,n&&(this.debouncedResize=YD(this.resize,s),this.wrapper instanceof Window?window.addEventListener("resize",this.debouncedResize,!1):(this.wrapperResizeObserver=new ResizeObserver(this.debouncedResize),this.wrapperResizeObserver.observe(this.wrapper)),this.contentResizeObserver=new ResizeObserver(this.debouncedResize),this.contentResizeObserver.observe(this.content)),this.resize()}destroy(){this.wrapperResizeObserver?.disconnect(),this.contentResizeObserver?.disconnect(),this.wrapper===window&&this.debouncedResize&&window.removeEventListener("resize",this.debouncedResize,!1)}get limit(){return{x:this.scrollWidth-this.width,y:this.scrollHeight-this.height}}},bk=class{constructor(){be(this,"events",{})}emit(t,...e){let n=this.events[t]||[];for(let s=0,i=n.length;s<i;s++)n[s]?.(...e)}on(t,e){return this.events[t]?.push(e)||(this.events[t]=[e]),()=>{this.events[t]=this.events[t]?.filter(n=>e!==n)}}off(t,e){this.events[t]=this.events[t]?.filter(n=>e!==n)}destroy(){this.events={}}},pk=100/6,To={passive:!1},XD=class{constructor(t,e={wheelMultiplier:1,touchMultiplier:1}){be(this,"touchStart",{x:0,y:0});be(this,"lastDelta",{x:0,y:0});be(this,"window",{width:0,height:0});be(this,"emitter",new bk);be(this,"onTouchStart",t=>{let{clientX:e,clientY:n}=t.targetTouches?t.targetTouches[0]:t;this.touchStart.x=e,this.touchStart.y=n,this.lastDelta={x:0,y:0},this.emitter.emit("scroll",{deltaX:0,deltaY:0,event:t})});be(this,"onTouchMove",t=>{let{clientX:e,clientY:n}=t.targetTouches?t.targetTouches[0]:t,s=-(e-this.touchStart.x)*this.options.touchMultiplier,i=-(n-this.touchStart.y)*this.options.touchMultiplier;this.touchStart.x=e,this.touchStart.y=n,this.lastDelta={x:s,y:i},this.emitter.emit("scroll",{deltaX:s,deltaY:i,event:t})});be(this,"onTouchEnd",t=>{this.emitter.emit("scroll",{deltaX:this.lastDelta.x,deltaY:this.lastDelta.y,event:t})});be(this,"onWheel",t=>{let{deltaX:e,deltaY:n,deltaMode:s}=t,i=s===1?pk:s===2?this.window.width:1,o=s===1?pk:s===2?this.window.height:1;e*=i,n*=o,e*=this.options.wheelMultiplier,n*=this.options.wheelMultiplier,this.emitter.emit("scroll",{deltaX:e,deltaY:n,event:t})});be(this,"onWindowResize",()=>{this.window={width:window.innerWidth,height:window.innerHeight}});this.element=t,this.options=e,window.addEventListener("resize",this.onWindowResize,!1),this.onWindowResize(),this.element.addEventListener("wheel",this.onWheel,To),this.element.addEventListener("touchstart",this.onTouchStart,To),this.element.addEventListener("touchmove",this.onTouchMove,To),this.element.addEventListener("touchend",this.onTouchEnd,To)}on(t,e){return this.emitter.on(t,e)}destroy(){this.emitter.destroy(),window.removeEventListener("resize",this.onWindowResize,!1),this.element.removeEventListener("wheel",this.onWheel,To),this.element.removeEventListener("touchstart",this.onTouchStart,To),this.element.removeEventListener("touchmove",this.onTouchMove,To),this.element.removeEventListener("touchend",this.onTouchEnd,To)}},fk=t=>Math.min(1,1.001-Math.pow(2,-10*t)),vk=class{constructor({wrapper:t=window,content:e=document.documentElement,eventsTarget:n=t,smoothWheel:s=!0,syncTouch:i=!1,syncTouchLerp:o=.075,touchInertiaExponent:a=1.7,duration:u,easing:d,lerp:p=.1,infinite:y=!1,orientation:_="vertical",gestureOrientation:N=_==="horizontal"?"both":"vertical",touchMultiplier:A=1,wheelMultiplier:z=1,autoResize:B=!0,prevent:g,virtualScroll:L,overscroll:w=!0,autoRaf:C=!1,anchors:W=!1,autoToggle:re=!1,allowNestedScroll:oe=!1,__experimental__naiveDimensions:T=!1,naiveDimensions:S=T,stopInertiaOnNavigate:k=!1}={}){be(this,"_isScrolling",!1);be(this,"_isStopped",!1);be(this,"_isLocked",!1);be(this,"_preventNextNativeScrollEvent",!1);be(this,"_resetVelocityTimeout",null);be(this,"_rafId",null);be(this,"isTouching");be(this,"time",0);be(this,"userData",{});be(this,"lastVelocity",0);be(this,"velocity",0);be(this,"direction",0);be(this,"options");be(this,"targetScroll");be(this,"animatedScroll");be(this,"animate",new QD);be(this,"emitter",new bk);be(this,"dimensions");be(this,"virtualScroll");be(this,"onScrollEnd",t=>{t instanceof CustomEvent||(this.isScrolling==="smooth"||this.isScrolling===!1)&&t.stopPropagation()});be(this,"dispatchScrollendEvent",()=>{this.options.wrapper.dispatchEvent(new CustomEvent("scrollend",{bubbles:this.options.wrapper===window,detail:{lenisScrollEnd:!0}}))});be(this,"onTransitionEnd",t=>{t.propertyName.includes("overflow")&&this.checkOverflow()});be(this,"onClick",t=>{let n=t.composedPath().filter(s=>s instanceof HTMLAnchorElement&&s.getAttribute("href"));if(this.options.anchors){let s=n.find(i=>i.getAttribute("href")?.includes("#"));if(s){let i=s.getAttribute("href");if(i){let o=typeof this.options.anchors=="object"&&this.options.anchors?this.options.anchors:void 0,a=`#${i.split("#")[1]}`;this.scrollTo(a,o)}}}this.options.stopInertiaOnNavigate&&n.find(i=>i.host===window.location.host)&&this.reset()});be(this,"onPointerDown",t=>{t.button===1&&this.reset()});be(this,"onVirtualScroll",t=>{if(typeof this.options.virtualScroll=="function"&&this.options.virtualScroll(t)===!1)return;let{deltaX:e,deltaY:n,event:s}=t;if(this.emitter.emit("virtual-scroll",{deltaX:e,deltaY:n,event:s}),s.ctrlKey||s.lenisStopPropagation)return;let i=s.type.includes("touch"),o=s.type.includes("wheel");this.isTouching=s.type==="touchstart"||s.type==="touchmove";let a=e===0&&n===0;if(this.options.syncTouch&&i&&s.type==="touchstart"&&a&&!this.isStopped&&!this.isLocked){this.reset();return}let d=this.options.gestureOrientation==="vertical"&&n===0||this.options.gestureOrientation==="horizontal"&&e===0;if(a||d)return;let p=s.composedPath();p=p.slice(0,p.indexOf(this.rootElement));let y=this.options.prevent;if(p.find(g=>g instanceof HTMLElement&&(typeof y=="function"&&y?.(g)||g.hasAttribute?.("data-lenis-prevent")||i&&g.hasAttribute?.("data-lenis-prevent-touch")||o&&g.hasAttribute?.("data-lenis-prevent-wheel")||this.options.allowNestedScroll&&this.checkNestedScroll(g,{deltaX:e,deltaY:n}))))return;if(this.isStopped||this.isLocked){s.cancelable&&s.preventDefault();return}if(!(this.options.syncTouch&&i||this.options.smoothWheel&&o)){this.isScrolling="native",this.animate.stop(),s.lenisStopPropagation=!0;return}let N=n;this.options.gestureOrientation==="both"?N=Math.abs(n)>Math.abs(e)?n:e:this.options.gestureOrientation==="horizontal"&&(N=e),(!this.options.overscroll||this.options.infinite||this.options.wrapper!==window&&this.limit>0&&(this.animatedScroll>0&&this.animatedScroll<this.limit||this.animatedScroll===0&&n>0||this.animatedScroll===this.limit&&n<0))&&(s.lenisStopPropagation=!0),s.cancelable&&s.preventDefault();let A=i&&this.options.syncTouch,B=i&&s.type==="touchend";B&&(N=Math.sign(this.velocity)*Math.pow(Math.abs(this.velocity),this.options.touchInertiaExponent)),this.scrollTo(this.targetScroll+N,{programmatic:!1,...A?{lerp:B?this.options.syncTouchLerp:1}:{lerp:this.options.lerp,duration:this.options.duration,easing:this.options.easing}})});be(this,"onNativeScroll",()=>{if(this._resetVelocityTimeout!==null&&(clearTimeout(this._resetVelocityTimeout),this._resetVelocityTimeout=null),this._preventNextNativeScrollEvent){this._preventNextNativeScrollEvent=!1;return}if(this.isScrolling===!1||this.isScrolling==="native"){let t=this.animatedScroll;this.animatedScroll=this.targetScroll=this.actualScroll,this.lastVelocity=this.velocity,this.velocity=this.animatedScroll-t,this.direction=Math.sign(this.animatedScroll-t),this.isStopped||(this.isScrolling="native"),this.emit(),this.velocity!==0&&(this._resetVelocityTimeout=setTimeout(()=>{this.lastVelocity=this.velocity,this.velocity=0,this.isScrolling=!1,this.emit()},400))}});be(this,"raf",t=>{let e=t-(this.time||t);this.time=t,this.animate.advance(e*.001),this.options.autoRaf&&(this._rafId=requestAnimationFrame(this.raf))});window.lenisVersion=GD,(!t||t===document.documentElement)&&(t=window),typeof u=="number"&&typeof d!="function"?d=fk:typeof d=="function"&&typeof u!="number"&&(u=1),this.options={wrapper:t,content:e,eventsTarget:n,smoothWheel:s,syncTouch:i,syncTouchLerp:o,touchInertiaExponent:a,duration:u,easing:d,lerp:p,infinite:y,gestureOrientation:N,orientation:_,touchMultiplier:A,wheelMultiplier:z,autoResize:B,prevent:g,virtualScroll:L,overscroll:w,autoRaf:C,anchors:W,autoToggle:re,allowNestedScroll:oe,naiveDimensions:S,stopInertiaOnNavigate:k},this.dimensions=new JD(t,e,{autoResize:B}),this.updateClassName(),this.targetScroll=this.animatedScroll=this.actualScroll,this.options.wrapper.addEventListener("scroll",this.onNativeScroll,!1),this.options.wrapper.addEventListener("scrollend",this.onScrollEnd,{capture:!0}),(this.options.anchors||this.options.stopInertiaOnNavigate)&&this.options.wrapper.addEventListener("click",this.onClick,!1),this.options.wrapper.addEventListener("pointerdown",this.onPointerDown,!1),this.virtualScroll=new XD(n,{touchMultiplier:A,wheelMultiplier:z}),this.virtualScroll.on("scroll",this.onVirtualScroll),this.options.autoToggle&&(this.checkOverflow(),this.rootElement.addEventListener("transitionend",this.onTransitionEnd,{passive:!0})),this.options.autoRaf&&(this._rafId=requestAnimationFrame(this.raf))}destroy(){this.emitter.destroy(),this.options.wrapper.removeEventListener("scroll",this.onNativeScroll,!1),this.options.wrapper.removeEventListener("scrollend",this.onScrollEnd,{capture:!0}),this.options.wrapper.removeEventListener("pointerdown",this.onPointerDown,!1),(this.options.anchors||this.options.stopInertiaOnNavigate)&&this.options.wrapper.removeEventListener("click",this.onClick,!1),this.virtualScroll.destroy(),this.dimensions.destroy(),this.cleanUpClassName(),this._rafId&&cancelAnimationFrame(this._rafId)}on(t,e){return this.emitter.on(t,e)}off(t,e){return this.emitter.off(t,e)}get overflow(){let t=this.isHorizontal?"overflow-x":"overflow-y";return getComputedStyle(this.rootElement)[t]}checkOverflow(){["hidden","clip"].includes(this.overflow)?this.internalStop():this.internalStart()}setScroll(t){this.isHorizontal?this.options.wrapper.scrollTo({left:t,behavior:"instant"}):this.options.wrapper.scrollTo({top:t,behavior:"instant"})}resize(){this.dimensions.resize(),this.animatedScroll=this.targetScroll=this.actualScroll,this.emit()}emit(){this.emitter.emit("scroll",this)}reset(){this.isLocked=!1,this.isScrolling=!1,this.animatedScroll=this.targetScroll=this.actualScroll,this.lastVelocity=this.velocity=0,this.animate.stop()}start(){if(this.isStopped){if(this.options.autoToggle){this.rootElement.style.removeProperty("overflow");return}this.internalStart()}}internalStart(){this.isStopped&&(this.reset(),this.isStopped=!1,this.emit())}stop(){if(!this.isStopped){if(this.options.autoToggle){this.rootElement.style.setProperty("overflow","clip");return}this.internalStop()}}internalStop(){this.isStopped||(this.reset(),this.isStopped=!0,this.emit())}scrollTo(t,{offset:e=0,immediate:n=!1,lock:s=!1,programmatic:i=!0,lerp:o=i?this.options.lerp:void 0,duration:a=i?this.options.duration:void 0,easing:u=i?this.options.easing:void 0,onStart:d,onComplete:p,force:y=!1,userData:_}={}){if(!((this.isStopped||this.isLocked)&&!y)){if(typeof t=="string"&&["top","left","start","#"].includes(t))t=0;else if(typeof t=="string"&&["bottom","right","end"].includes(t))t=this.limit;else{let N;if(typeof t=="string"?(N=document.querySelector(t),N||(t==="#top"?t=0:console.warn("Lenis: Target not found",t))):t instanceof HTMLElement&&t?.nodeType&&(N=t),N){if(this.options.wrapper!==window){let z=this.rootElement.getBoundingClientRect();e-=this.isHorizontal?z.left:z.top}let A=N.getBoundingClientRect();t=(this.isHorizontal?A.left:A.top)+this.animatedScroll}}if(typeof t=="number"){if(t+=e,t=Math.round(t),this.options.infinite){if(i){this.targetScroll=this.animatedScroll=this.scroll;let N=t-this.animatedScroll;N>this.limit/2?t=t-this.limit:N<-this.limit/2&&(t=t+this.limit)}}else t=gk(0,t,this.limit);if(t===this.targetScroll){d?.(this),p?.(this);return}if(this.userData=_??{},n){this.animatedScroll=this.targetScroll=t,this.setScroll(this.scroll),this.reset(),this.preventNextNativeScrollEvent(),this.emit(),p?.(this),this.userData={},requestAnimationFrame(()=>{this.dispatchScrollendEvent()});return}i||(this.targetScroll=t),typeof a=="number"&&typeof u!="function"?u=fk:typeof u=="function"&&typeof a!="number"&&(a=1),this.animate.fromTo(this.animatedScroll,t,{duration:a,easing:u,lerp:o,onStart:()=>{s&&(this.isLocked=!0),this.isScrolling="smooth",d?.(this)},onUpdate:(N,A)=>{this.isScrolling="smooth",this.lastVelocity=this.velocity,this.velocity=N-this.animatedScroll,this.direction=Math.sign(this.velocity),this.animatedScroll=N,this.setScroll(this.scroll),i&&(this.targetScroll=N),A||this.emit(),A&&(this.reset(),this.emit(),p?.(this),this.userData={},requestAnimationFrame(()=>{this.dispatchScrollendEvent()}),this.preventNextNativeScrollEvent())}})}}}preventNextNativeScrollEvent(){this._preventNextNativeScrollEvent=!0,requestAnimationFrame(()=>{this._preventNextNativeScrollEvent=!1})}checkNestedScroll(t,{deltaX:e,deltaY:n}){let s=Date.now(),i=t._lenis??(t._lenis={}),o,a,u,d,p,y,_,N,A=this.options.gestureOrientation;if(s-(i.time??0)>2e3){i.time=Date.now();let re=window.getComputedStyle(t);i.computedStyle=re;let oe=re.overflowX,T=re.overflowY;if(o=["auto","overlay","scroll"].includes(oe),a=["auto","overlay","scroll"].includes(T),i.hasOverflowX=o,i.hasOverflowY=a,!o&&!a||A==="vertical"&&!a||A==="horizontal"&&!o)return!1;p=t.scrollWidth,y=t.scrollHeight,_=t.clientWidth,N=t.clientHeight,u=p>_,d=y>N,i.isScrollableX=u,i.isScrollableY=d,i.scrollWidth=p,i.scrollHeight=y,i.clientWidth=_,i.clientHeight=N}else u=i.isScrollableX,d=i.isScrollableY,o=i.hasOverflowX,a=i.hasOverflowY,p=i.scrollWidth,y=i.scrollHeight,_=i.clientWidth,N=i.clientHeight;if(!o&&!a||!u&&!d||A==="vertical"&&(!a||!d)||A==="horizontal"&&(!o||!u))return!1;let z;if(A==="horizontal")z="x";else if(A==="vertical")z="y";else{let re=e!==0,oe=n!==0;re&&o&&u&&(z="x"),oe&&a&&d&&(z="y")}if(!z)return!1;let B,g,L,w,C;if(z==="x")B=t.scrollLeft,g=p-_,L=e,w=o,C=u;else if(z==="y")B=t.scrollTop,g=y-N,L=n,w=a,C=d;else return!1;return(L>0?B<g:B>0)&&w&&C}get rootElement(){return this.options.wrapper===window?document.documentElement:this.options.wrapper}get limit(){return this.options.naiveDimensions?this.isHorizontal?this.rootElement.scrollWidth-this.rootElement.clientWidth:this.rootElement.scrollHeight-this.rootElement.clientHeight:this.dimensions.limit[this.isHorizontal?"x":"y"]}get isHorizontal(){return this.options.orientation==="horizontal"}get actualScroll(){let t=this.options.wrapper;return this.isHorizontal?t.scrollX??t.scrollLeft:t.scrollY??t.scrollTop}get scroll(){return this.options.infinite?KD(this.animatedScroll,this.limit):this.animatedScroll}get progress(){return this.limit===0?1:this.scroll/this.limit}get isScrolling(){return this._isScrolling}set isScrolling(t){this._isScrolling!==t&&(this._isScrolling=t,this.updateClassName())}get isStopped(){return this._isStopped}set isStopped(t){this._isStopped!==t&&(this._isStopped=t,this.updateClassName())}get isLocked(){return this._isLocked}set isLocked(t){this._isLocked!==t&&(this._isLocked=t,this.updateClassName())}get isSmooth(){return this.isScrolling==="smooth"}get className(){let t="lenis";return this.options.autoToggle&&(t+=" lenis-autoToggle"),this.isStopped&&(t+=" lenis-stopped"),this.isLocked&&(t+=" lenis-locked"),this.isScrolling&&(t+=" lenis-scrolling"),this.isScrolling==="smooth"&&(t+=" lenis-smooth"),t}updateClassName(){this.cleanUpClassName(),this.rootElement.className=`${this.rootElement.className} ${this.className}`.trim()}cleanUpClassName(){this.rootElement.className=this.rootElement.className.replace(/lenis(-\w+)?/g,"").trim()}};var ZD=(0,r.lazy)(()=>import("./SustIABot-KLESF4YV.js")),RD={apiKey:"AIzaSyAfllte-D_I3h3TwBaiSL4KVfWrCSVh9ro",authDomain:"sustore-63266.firebaseapp.com",projectId:"sustore-63266",storageBucket:"sustore-63266.firebasestorage.app",messagingSenderId:"684651914850",appId:"1:684651914850:web:f3df09e5caf6e50e9e533b",measurementId:"G-X3K7XGYPRD"},Ik=tv(RD),Ge=Lv(Ik),ae=$y(Ik),ko=({className:t=""})=>r.default.createElement("svg",{viewBox:"0 0 448 512",className:t,fill:"currentColor","aria-hidden":"true",focusable:"false"},r.default.createElement("path",{d:"M380.9 97.1C339 55.1 283.2 32 223.9 32c-122.4 0-221.7 99.3-221.7 221.7 0 39.1 10.2 77.3 29.6 111L0 480l117.7-30.9c32.4 17.7 69 27 106.1 27h.1c122.3 0 221.7-99.3 221.7-221.7 0-59.3-23.1-115-64.7-157.3zM223.9 438.7h-.1c-33.1 0-65.7-8.9-94-25.7l-6.7-4-69.8 18.3 18.6-68-4.3-7c-18.5-29.4-28.2-63.4-28.2-98.2 0-101.7 82.8-184.5 184.6-184.5 49.3 0 95.6 19.2 130.4 54.1 34.8 34.9 54 81.2 54 130.4-.1 101.8-82.9 184.6-184.5 184.6zm101.1-138.2c-5.5-2.8-32.8-16.1-37.9-17.9-5.1-1.9-8.8-2.8-12.5 2.8-3.7 5.6-14.3 17.9-17.5 21.6-3.2 3.7-6.5 4.2-12 1.4-32.6-16.3-54-29.1-75.5-66-5.7-9.8 5.7-9.1 16.3-30.3 1.8-3.7.9-6.9-.5-9.7-1.4-2.8-12.5-30.1-17.1-41.2-4.5-10.8-9.1-9.3-12.5-9.5-3.2-.2-6.9-.2-10.6-.2-3.7 0-9.7 1.4-14.8 6.9-5.1 5.6-19.4 19-19.4 46.3 0 27.3 19.9 53.7 22.6 57.4 2.8 3.7 39.1 59.7 94.8 83.7 35.2 15.2 49 16.5 66.6 14 10.7-1.6 32.8-13.4 37.4-26.3 4.6-12.9 4.6-23.9 3.2-26.3-1.3-2.4-5-3.7-10.5-6.5z"})),Zy="sustore-63266-prod",eO="https://sustore.vercel.app",xk="3.0.0",tO=/^[a-z0-9._-]{3,32}$/,Ry="sustore_pending_payment_confirmation_v1";function Ek(t){if(!t||typeof t!="object")return null;let e=String(t.mpPaymentId||"").trim();if(!e)return null;let n=String(t.uid||"").trim(),s=String(t.createdAt||"").trim()||new Date().toISOString(),i=t.confirmationPayload&&typeof t.confirmationPayload=="object"?t.confirmationPayload:null;return{mpPaymentId:e,uid:n,createdAt:s,confirmationPayload:i}}function yk(){try{let t=localStorage.getItem(Ry);return t?Ek(JSON.parse(t)):null}catch{return null}}var wk=new Map;function nO(t){return String(t||"").trim()||"__default__"}async function rO(t=""){let e=nO(t),n=wk.get(e);if(n)return n;let s=(async()=>{try{let i={},o=String(t||"").trim();o&&(i["x-store-id"]=o);let a=await fetch("/api/checkout?action=public_config",{method:"GET",headers:i});if(!a.ok)return null;let u=await a.json().catch(()=>({}));return String(u?.mpPublicKey||"").trim()||null}catch{return null}})();return wk.set(e,s),s}var sO=()=>{if(typeof window>"u"||typeof document>"u"||window.__smoothScrollLenis||typeof window.matchMedia=="function"&&window.matchMedia("(prefers-reduced-motion: reduce)").matches)return;let e=!1;try{e="ontouchstart"in window&&navigator.maxTouchPoints>0&&!window.matchMedia("(pointer: fine)").matches}catch{}if(e)return;let n=new vk({lerp:.09,duration:1.4,smoothWheel:!0,wheelMultiplier:.8,touchMultiplier:1,infinite:!1});window.__smoothScrollLenis=n;function s(i){n.raf(i),requestAnimationFrame(s)}requestAnimationFrame(s)};try{sO()}catch{}var iO=["bGF1dGFyb2NvcmF6emE2M0BnbWFpbC5jb20="],Qe=(()=>{try{return atob(iO[0])}catch{return""}})(),Sk={sessionToken:null,loginAttempts:{},maxAttempts:5,lockoutTime:3e5,integrityChecks:{},_generateSalt(){let t="tienda_secure_2024",e=Math.floor(Date.now()/864e5);return t+"_"+e},async hashPassword(t){let e=new TextEncoder,n=this._generateSalt(),s=e.encode(t+n),i=await crypto.subtle.digest("SHA-256",s);return Array.from(new Uint8Array(i)).map(a=>a.toString(16).padStart(2,"0")).join("")},async verifyPassword(t,e){return await this.hashPassword(t)===e},canAttemptLogin(t){let e=this._hashKey(t.toLowerCase()),n=Date.now(),s=this.loginAttempts[e];return s&&s.lockedUntil>n?{allowed:!1,remainingTime:Math.ceil((s.lockedUntil-n)/1e3)}:(s&&s.lockedUntil&&s.lockedUntil<n&&delete this.loginAttempts[e],{allowed:!0})},_hashKey(t){let e=0;for(let n=0;n<t.length;n++){let s=t.charCodeAt(n);e=(e<<5)-e+s,e=e&e}return"k_"+Math.abs(e).toString(36)},recordFailedAttempt(t){let e=this._hashKey(t.toLowerCase());this.loginAttempts[e]||(this.loginAttempts[e]={count:0,firstAttempt:Date.now()}),this.loginAttempts[e].count++,this.loginAttempts[e].count>=this.maxAttempts&&(this.loginAttempts[e].lockedUntil=Date.now()+this.lockoutTime,console.warn("[Security] Account locked - too many failed attempts"))},clearAttempts(t){let e=this._hashKey(t.toLowerCase());delete this.loginAttempts[e]},generateSessionToken(t){let e={uid:t,iat:Date.now(),exp:Date.now()+864e5,nonce:crypto.getRandomValues(new Uint32Array(1))[0].toString(36)},n=btoa(JSON.stringify(e)),s=this._signToken(n),i=n+"."+s;return this.sessionToken=i,sessionStorage.setItem("_st",i),i},_signToken(t){let e=0,s=t+"tienda_secret_key_2024";for(let i=0;i<s.length;i++)e=(e<<5)-e+s.charCodeAt(i),e=e&e;return Math.abs(e).toString(36)},verifySession(){let t=sessionStorage.getItem("_st");if(!t||t!==this.sessionToken)return!1;try{let[e]=t.split("."),n=JSON.parse(atob(e));return n.exp&&n.exp<Date.now()?(this.invalidateSession(),!1):!0}catch{return!1}},invalidateSession(){this.sessionToken=null,sessionStorage.removeItem("_st"),localStorage.removeItem("sustore_user_data")},detectManipulation(){let t=localStorage.getItem("sustore_user_data");if(t)try{let e=JSON.parse(t);if(!e.id||e.id.length<10||!e.email||!e.email.includes("@"))return console.warn("[Security] Invalid session data detected"),localStorage.removeItem("sustore_user_data"),!0;if(e.role==="admin"&&!this._validateAdminClaim(e))return console.warn("[Security] Admin role manipulation detected"),e.role="user",localStorage.setItem("sustore_user_data",JSON.stringify(e)),!0}catch{return localStorage.removeItem("sustore_user_data"),!0}return!1},_validateAdminClaim(t){return t.email===Qe?!0:t._adminVerified===!0},sanitizeInput(t){return typeof t!="string"?t:t.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;").replace(/javascript:/gi,"").replace(/on\w+=/gi,"")},isValidEmail(t){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)&&t.length<=254},isStrongPassword(t){return t.length>=8&&/[A-Z]/.test(t)&&/[a-z]/.test(t)&&/[0-9]/.test(t)},async secureCompare(t,e){if(typeof t!="string"||typeof e!="string")return!1;let n=new TextEncoder,s=n.encode(t),i=n.encode(e);if(s.length!==i.length)return!1;let o=0;for(let a=0;a<s.length;a++)o|=s[a]^i[a];return o===0},protectConsole(){if(window.location.hostname!=="localhost"&&!window.location.hostname.includes("127.0.0.1")){let t=()=>{};["log","debug","info","table","dir"].forEach(e=>{console[e]=t})}},detectDevTools(){setInterval(()=>{let n=window.outerWidth-window.innerWidth>160,s=window.outerHeight-window.innerHeight>160},5e3)},init(){this.detectManipulation(),this.protectConsole(),this.detectDevTools(),Object.defineProperty(window,"SUPER_ADMIN_EMAIL",{get:()=>{},configurable:!1})}};Sk.init();var Is={storeName:"Tienda Online",primaryColor:"#f97316",currency:"$",ticket:{brandName:"",whatsappLink:"",siteUrl:""},admins:Qe,team:[{email:Qe,role:"admin",name:"Administrador"}],sellerEmail:"",instagramUser:"",instagramLink:"",whatsappLink:"",showWhatsapp:!1,showFloatingWhatsapp:!1,showCartWhatsappCheckout:!1,showInstagram:!1,requirePhone:!0,requireDNI:!0,paymentTransfer:{enabled:!1,holderName:"",alias:"",cbu:""},paymentCash:!1,paymentMercadoPago:{enabled:!1},logoUrl:"",heroUrl:"",showHomeBannerCarousel:!0,homeBannerAutoplayMs:5e3,markupPercentage:0,announcementMessage:"",categories:["General"],aboutUsText:"Bienvenido a nuestra tienda. Ofrecemos productos de calidad con envo a todo el pas.",seoTitle:"",seoDescription:"Tu tienda online de confianza. Calidad y vanguardia en cada producto. Envos a todo el pas.",seoKeywords:"tienda online, productos, comprar, envos",seoAuthor:"",seoUrl:"",seoImage:"",loadingTitle:"",loadingText:"Cargando sistema..."};var oO=({settingsLoaded:t,banners:e,fallbackUrl:n,autoplayMs:s,darkMode:i,onBannerClick:o,onActiveIndexChange:a})=>{let u=(0,r.useMemo)(()=>Array.isArray(e)?e.filter(C=>C&&C.enabled!==!1&&typeof C.imageUrl=="string"&&C.imageUrl.trim().length>0):[],[e]),[d,p]=(0,r.useState)(0),[y,_]=(0,r.useState)(!1);(0,r.useEffect)(()=>{d>=u.length&&p(0)},[d,u.length]),(0,r.useEffect)(()=>{a?.(d)},[d,a]);let N=Number(s),A=t&&!y&&u.length>1&&Number.isFinite(N)&&N>=1500;(0,r.useEffect)(()=>{if(!A)return;let C=setInterval(()=>{p(W=>(W+1)%u.length)},N);return()=>clearInterval(C)},[A,u.length,N]),(0,r.useEffect)(()=>{if(u.length<=1)return;let C=u[(d+1)%u.length];if(!C?.imageUrl)return;let W=new Image;W.src=C.imageUrl},[u,d]);let z=1,B=`absolute inset-0 w-full h-full object-cover transition-transform duration-1000 group-hover:scale-105 ${i?"":"saturate-110 contrast-110"}`,g=()=>{p(C=>{let W=C-1;return W<0?u.length-1:W})},L=()=>{p(C=>(C+1)%u.length)};if(!t)return r.default.createElement("div",{className:"absolute inset-0 bg-gradient-to-br from-slate-800 to-slate-900 animate-pulse"});if(u.length===0)return n?r.default.createElement("img",{src:n,alt:"Banner",style:{opacity:z},className:`absolute inset-0 w-full h-full object-cover transition-transform duration-1000 group-hover:scale-105 ${i?"":"saturate-110 contrast-110"}`}):r.default.createElement("div",{className:`absolute inset-0 opacity-60 ${i?"bg-gradient-to-br from-orange-900/40 via-[#0a0a0a] to-slate-900/40":"bg-gradient-to-br from-orange-200/60 via-white to-slate-200/60"}`},r.default.createElement("div",{className:`absolute inset-0 bg-[url('/noise.svg')] ${i?"opacity-20":"opacity-10"}`}));let w=C=>{let W=C?.targetType||(C?.promoId?"promo":C?.productId?"product":"none"),re=C?.targetId||C?.promoId||C?.productId||"";return W!=="none"&&!!re};return r.default.createElement("div",{className:"absolute inset-0 overflow-hidden z-[2]",onMouseEnter:()=>_(!0),onMouseLeave:()=>_(!1)},r.default.createElement("div",{className:"h-full w-full flex transition-transform duration-700 ease-in-out",style:{transform:`translate3d(-${d*100}%, 0, 0)`,willChange:"transform"}},u.map((C,W)=>{let re=w(C);return r.default.createElement("div",{key:C.id||`${W}-${C.targetId||C.productId||C.promoId||"slide"}`,className:`w-full h-full flex-shrink-0 relative ${re?"cursor-pointer":""}`,onClick:()=>re&&o?.(C)},r.default.createElement("img",{src:C.imageUrl,alt:"Banner",style:{opacity:z},className:B}))})),u.length>1&&r.default.createElement(r.default.Fragment,null,r.default.createElement("button",{type:"button",className:`absolute left-2 sm:left-3 top-1/3 sm:top-1/2 -translate-y-1/2 z-20 !w-8 !h-8 sm:!w-10 sm:!h-10 !min-w-0 !min-h-0 rounded-full transition-all duration-200 flex items-center justify-center pointer-events-auto sm:opacity-0 sm:group-hover:opacity-100 ${i?"bg-black/40 sm:bg-black/50 hover:bg-black/70 text-white/70 hover:text-white":"bg-white/40 sm:bg-white/50 hover:bg-white/70 text-slate-700 hover:text-slate-900"}`,onClick:C=>{C.stopPropagation(),g()},"aria-label":"Banner anterior"},r.default.createElement(Fs,{className:"w-4 h-4 sm:w-5 sm:h-5"})),r.default.createElement("button",{type:"button",className:`absolute right-2 sm:right-3 top-1/3 sm:top-1/2 -translate-y-1/2 z-20 !w-8 !h-8 sm:!w-10 sm:!h-10 !min-w-0 !min-h-0 rounded-full transition-all duration-200 flex items-center justify-center pointer-events-auto sm:opacity-0 sm:group-hover:opacity-100 ${i?"bg-black/40 sm:bg-black/50 hover:bg-black/70 text-white/70 hover:text-white":"bg-white/40 sm:bg-white/50 hover:bg-white/70 text-slate-700 hover:text-slate-900"}`,onClick:C=>{C.stopPropagation(),L()},"aria-label":"Banner siguiente"},r.default.createElement(Qc,{className:"w-4 h-4 sm:w-5 sm:h-5"}))))},aO=({message:t,type:e,onClose:n})=>{let s="fixed top-24 right-4 z-[9999] flex items-center gap-4 p-5 rounded-2xl border-l-4 backdrop-blur-xl animate-fade-up shadow-2xl transition-all duration-300",i="p-2 rounded-full",o=zs;return e==="success"?(s+=" border-green-500 text-green-400 bg-black/90 shadow-[0_0_20px_rgba(34,197,94,0.3)]",i+=" bg-green-500/20",o=Me):e==="error"?(s+=" border-red-500 text-red-400 bg-black/90 shadow-[0_0_20px_rgba(239,68,68,0.3)]",i+=" bg-red-500/20",o=Bi):e==="warning"?(s+=" border-yellow-500 text-yellow-400 bg-black/90 shadow-[0_0_20px_rgba(234,179,8,0.3)]",i+=" bg-yellow-500/20",o=Gi):(s+=" border-orange-500 text-orange-400 bg-black/90 shadow-[0_0_20px_rgba(249,115,22,0.3)]",i+=" bg-orange-500/20",o=zs),(0,r.useEffect)(()=>{let a=setTimeout(n,4e3);return()=>clearTimeout(a)},[n]),r.default.createElement("div",{className:s},r.default.createElement("div",{className:i},r.default.createElement(o,{className:"w-5 h-5"})),r.default.createElement("div",null,r.default.createElement("p",{className:"font-bold text-sm tracking-wide"},t)),r.default.createElement("button",{onClick:n,className:"ml-2 text-white/50 hover:text-white transition"},r.default.createElement(lt,{className:"w-4 h-4"})))},lO=({isOpen:t,title:e,message:n,onConfirm:s,onCancel:i,confirmText:o="Confirmar",cancelText:a="Cancelar",isDangerous:u=!1,darkMode:d=!0})=>t?r.default.createElement("div",{className:"fixed inset-0 z-[10000] flex items-center justify-center bg-black/90 backdrop-blur-md animate-fade-up p-4"},r.default.createElement("div",{className:`p-8 rounded-[2rem] max-w-sm w-full border transition-all duration-300 ${d?"bg-[#0a0a0a] border-slate-800 shadow-2xl":"bg-white border-slate-200 shadow-xl"} ${u&&d?"border-red-500/50 shadow-[0_0_30px_rgba(220,38,38,0.2)]":u?"border-red-200 shadow-red-100":""}`},r.default.createElement("div",{className:`w-16 h-16 rounded-full flex items-center justify-center mb-6 mx-auto transition-colors duration-300 ${u?"bg-red-500/20 text-red-500":d?"bg-orange-900/20 text-orange-500":"bg-orange-50 text-orange-600"}`},u?r.default.createElement(Gi,{className:"w-8 h-8"}):r.default.createElement(zs,{className:"w-8 h-8"})),r.default.createElement("h3",{className:`text-xl font-black text-center mb-2 transition-colors duration-300 ${d?"text-white":"text-slate-900"}`},e),r.default.createElement("p",{className:`text-center mb-8 text-sm leading-relaxed transition-colors duration-300 ${d?"text-slate-400":"text-slate-500"}`},n),r.default.createElement("div",{className:"flex gap-3"},r.default.createElement("button",{onClick:i,className:`flex-1 py-3 rounded-xl font-bold transition ${d?"bg-slate-800 hover:bg-slate-700 text-slate-300":"bg-slate-100 hover:bg-slate-200 text-slate-600"}`},a),r.default.createElement("button",{onClick:s,className:`flex-1 py-3 text-white rounded-xl font-bold transition shadow-lg ${u?"bg-red-600 hover:bg-red-500 shadow-red-600/30":"bg-orange-600 hover:bg-orange-500 shadow-orange-600/30"}`},o)))):null,ew=class extends r.default.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,n){this.setState({error:e,errorInfo:n}),console.error("Uncaught error:",e,n)}render(){return this.state.hasError?r.default.createElement("div",{className:"min-h-screen bg-black text-red-500 p-10 font-mono"},r.default.createElement("h1",{className:"text-4xl font-bold mb-4"},"CRITICAL SYSTEM FAILURE"),r.default.createElement("div",{className:"border border-red-900 bg-red-900/10 p-6 rounded-xl overflow-auto"},r.default.createElement("h2",{className:"text-xl font-bold mb-2"},this.state.error?.toString()),r.default.createElement("pre",{className:"text-xs text-red-400/70 whitespace-pre-wrap"},this.state.errorInfo?.componentStack)),r.default.createElement("button",{onClick:()=>window.location.reload(),className:"mt-8 px-6 py-3 bg-red-600 text-white rounded-lg hover:bg-red-500 font-bold"},"REINICIAR SISTEMA")):this.props.children}},cO=({product:t,onAdd:e,darkMode:n})=>{let[s,i]=(0,r.useState)(1),[o,a]=(0,r.useState)(!1),u=y=>{y.stopPropagation(),e(t,s),a(!0),setTimeout(()=>a(!1),2e3),i(1)},d=s>=t.stock,p=s<=1;return r.default.createElement("div",{className:"quick-add-container flex items-stretch gap-1.5 sm:gap-2 w-full max-w-full min-w-0",onClick:y=>y.stopPropagation()},r.default.createElement("div",{className:`quick-add-qty flex min-w-0 items-center justify-between rounded-xl ${n?"bg-zinc-900/90":"bg-slate-100"} p-0.5 border ${n?"border-zinc-700/80":"border-slate-200"} shadow-inner`},r.default.createElement("button",{onClick:y=>{y.stopPropagation(),i(Math.max(1,s-1))},disabled:p,className:`quick-add-qty-btn w-7 h-7 sm:w-8 sm:h-8 shrink-0 flex items-center justify-center rounded-lg transition ${p?"opacity-30 cursor-not-allowed":n?"hover:bg-zinc-700 text-white":"hover:bg-slate-200 text-slate-700"}`},r.default.createElement(lh,{className:"w-3 h-3"})),r.default.createElement("span",{className:`quick-add-qty-value min-w-[1.6rem] sm:min-w-[1.8rem] px-1 text-center text-[0.78rem] sm:text-xs font-bold font-mono ${n?"text-white":"text-slate-900"}`},s),r.default.createElement("button",{onClick:y=>{y.stopPropagation(),i(Math.min(t.stock,s+1))},disabled:d,className:`quick-add-qty-btn w-7 h-7 sm:w-8 sm:h-8 shrink-0 flex items-center justify-center rounded-lg transition ${d?"opacity-30 cursor-not-allowed":n?"hover:bg-zinc-700 text-white":"hover:bg-slate-200 text-slate-700"}`},r.default.createElement(En,{className:"w-3 h-3"}))),r.default.createElement("button",{onClick:u,"aria-label":o?"Producto agregado":"Agregar al carrito",className:`quick-add-action flex-1 min-w-0 h-9 sm:h-10 px-2.5 sm:px-3 rounded-xl transition-all duration-300 shadow-md flex items-center justify-center gap-1.5 active:scale-95 text-[10px] sm:text-xs font-black uppercase tracking-[0.08em] border btn-press ripple ${o?"bg-green-500 text-white shadow-green-500/30":n?"bg-orange-500 text-white hover:bg-orange-400 border-orange-300/40 shadow-orange-500/30":"bg-orange-500 text-white hover:bg-orange-600 border-orange-400/50 shadow-orange-500/20"}`},o?r.default.createElement(r.default.Fragment,null,r.default.createElement(Me,{className:"quick-add-icon w-3.5 h-3.5 sm:w-4 sm:h-4"}),r.default.createElement("strong",{className:"quick-add-label font-black"},"Agregado")):r.default.createElement(r.default.Fragment,null,r.default.createElement(En,{className:"quick-add-icon w-3.5 h-3.5 sm:w-4 sm:h-4"}),r.default.createElement("strong",{className:"quick-add-label font-black"},"Agregar"))))},uO=r.default.memo(({p:t,settings:e,currentUser:n,toggleFavorite:s,setSelectedProduct:i,manageCart:o,calculateItemPrice:a,darkMode:u})=>{let d=u?"bg-[#090d12]":"bg-white",p=u?"border-slate-800/80":"border-slate-200/90",y=u?"hover:border-slate-600":"hover:border-slate-300",_=u?"shadow-[0_12px_30px_rgba(0,0,0,0.35)] hover:shadow-[0_16px_45px_rgba(0,0,0,0.45)]":"shadow-[0_12px_28px_rgba(15,23,42,0.08)] hover:shadow-[0_16px_42px_rgba(15,23,42,0.12)]",N=u?"bg-gradient-to-b from-slate-900 to-[#090d12]":"bg-gradient-to-b from-slate-50 to-white",A=u?"text-white":"text-slate-900",z=u?"text-slate-400":"text-slate-600",B=u?"bg-[#090d12]":"bg-white",g=u?"border-slate-800/70":"border-slate-200",L=Number(t.basePrice)||0,w=Math.min(100,Math.max(0,Number(t.discount)||0)),C=w>0&&L>0,W=a(L,w),re=Math.max(0,L-W),oe=t.image?"inline-flex w-auto max-w-full mx-auto":"flex w-full";return r.default.createElement("div",{className:`${d} premium-product-card store-product-card rounded-2xl sm:rounded-[1.75rem] border ${p} overflow-hidden group ${y} ${_} transition duration-500 relative flex flex-col card-hover animate-fade-in content-visibility-auto contain-content`},r.default.createElement("div",{className:`h-40 sm:h-48 lg:h-52 ${N} premium-product-image store-product-image-shell m-2 sm:m-3 p-2 sm:p-3 ${oe} items-center justify-center relative overflow-hidden cursor-zoom-in transition-all duration-500`,onClick:()=>i(t)},t.image?r.default.createElement("div",{className:`product-image-adaptive-frame w-auto h-full max-w-full flex items-center justify-center overflow-hidden rounded-xl sm:rounded-2xl border p-1 ${u?"border-orange-500/35 bg-black/30":"border-slate-200 bg-white/95"} shadow-md`},r.default.createElement("img",{src:t.image,loading:"lazy",decoding:"async",onError:T=>{T.target.style.display="none",T.target.parentElement.nextSibling.style.display="flex"},className:`w-auto h-auto max-w-full max-h-full object-contain object-center block rounded-lg sm:rounded-xl shadow-lg z-10 transition-transform duration-700 group-hover:scale-110 ${t.stock<=0?"grayscale opacity-50":""}`})):null,r.default.createElement("button",{onClick:T=>{T.stopPropagation(),i(t)},className:`product-card-icon-btn product-card-zoom-btn absolute bottom-2 right-2 sm:bottom-4 sm:right-4 z-30 ${u?"bg-black/60 border-white/20":"bg-white/90 border-slate-200"} backdrop-blur-md p-2 sm:p-3 rounded-full ${u?"text-white":"text-slate-700"} border md:hidden`},r.default.createElement(i0,{className:"w-4 h-4 sm:w-5 sm:h-5"})),r.default.createElement("div",{className:"hidden w-full h-full flex items-center justify-center z-0 absolute inset-0",style:{display:t.image?"none":"flex"}},r.default.createElement("div",{className:`flex flex-col items-center justify-center ${u?"text-slate-700":"text-slate-400"}`},r.default.createElement(js,{className:"w-12 h-12 sm:w-16 sm:h-16 mb-2 opacity-50"}),r.default.createElement("span",{className:"text-[10px] sm:text-xs font-bold uppercase tracking-widest opacity-50"},"Sin Imagen"))),t.stock<=0&&r.default.createElement("div",{className:`absolute inset-0 z-30 flex items-center justify-center ${u?"bg-[#050505]/55":"bg-white/70"} backdrop-blur-[1px]`},r.default.createElement("span",{className:`px-4 py-2 rounded-full text-[10px] sm:text-xs font-black uppercase tracking-[0.24em] border ${u?"bg-slate-900/90 text-slate-100 border-slate-600":"bg-white/95 text-slate-700 border-slate-300"}`},"AGOTADO")),t.isFeatured&&t.stock>0&&r.default.createElement("div",{className:"absolute top-0 left-0 bg-gradient-to-r from-yellow-500 to-orange-500 text-black text-[9px] sm:text-[10px] font-black px-2 sm:px-4 py-1 sm:py-1.5 rounded-br-xl sm:rounded-br-2xl uppercase tracking-wider z-20 shadow-lg flex items-center gap-1 animate-pulse"},r.default.createElement(Ho,{className:"w-2.5 h-2.5 sm:w-3 sm:h-3 fill-current"})," Destacado"),C&&t.stock>0&&r.default.createElement("div",{className:`product-offer-badge absolute z-20 ${t.isFeatured?"top-8 sm:top-10 left-2 sm:left-4":"top-2 sm:top-4 left-2 sm:left-4"}`},r.default.createElement("div",{className:"product-offer-badge-inner relative overflow-hidden rounded-lg sm:rounded-xl border border-rose-200/20 bg-[linear-gradient(118deg,#881337_0%,#9f1239_52%,#7f1d1d_100%)] px-2.5 sm:px-3 py-1.5 sm:py-2 shadow-[0_8px_20px_rgba(136,19,55,0.24)] transition-all duration-300 group-hover:-translate-y-0.5 group-hover:shadow-[0_12px_24px_rgba(136,19,55,0.32)]"},r.default.createElement("div",{className:"pointer-events-none absolute inset-0 bg-[linear-gradient(180deg,rgba(255,255,255,0.14),transparent_55%)]"}),r.default.createElement("div",{className:"relative flex items-center gap-1.5"},r.default.createElement("span",{className:"inline-flex h-4.5 w-4.5 sm:h-5 sm:w-5 items-center justify-center rounded-full bg-white/12 ring-1 ring-white/25"},r.default.createElement(Jc,{className:"h-2.5 w-2.5 sm:h-3 sm:w-3 text-white/95"})),r.default.createElement("div",{className:"flex flex-col leading-none"},r.default.createElement("span",{className:"text-[7px] sm:text-[8px] font-semibold tracking-[0.2em] text-rose-100/90"},"OFERTA"),r.default.createElement("span",{className:"mt-0.5 text-[10px] sm:text-[11px] font-black tracking-tight text-white"},"-",w,"% ",r.default.createElement("span",{className:"font-medium tracking-[0.12em] text-rose-100/90"},"OFF")))))),r.default.createElement("button",{onClick:T=>{T.stopPropagation(),s(t)},className:`product-card-icon-btn product-card-favorite-btn absolute top-2 right-2 sm:top-4 sm:right-4 p-2 sm:p-3 rounded-full z-20 transition shadow-lg backdrop-blur-sm border ${n?.favorites?.includes(t.id)?"bg-red-500 text-white border-red-500 shadow-red-500/30":u?"bg-white/10 text-slate-300 border-white/10 hover:bg-white hover:text-red-500":"bg-slate-100 text-slate-500 border-slate-200 hover:bg-red-50 hover:text-red-500 hover:border-red-200"}`},r.default.createElement(Yc,{className:`w-4 h-4 sm:w-5 sm:h-5 ${n?.favorites?.includes(t.id)?"fill-current":""}`}))),r.default.createElement("div",{className:`product-card-info p-4 sm:p-4 flex-1 flex flex-col relative z-10 ${B}`},r.default.createElement("div",{className:"flex justify-between items-start gap-2 mb-2 sm:mb-3 min-h-[1.75rem] sm:min-h-[2rem]"},r.default.createElement("p",{className:`product-card-category-chip text-[10px] sm:text-xs text-orange-500 font-black uppercase tracking-widest ${u?"border-orange-900/30 bg-orange-900/10":"border-orange-200 bg-orange-50"} border px-1.5 sm:px-2 py-0.5 sm:py-1 rounded`},Array.isArray(t.categories)&&t.categories.length>0?t.categories[0]:t.category||"Sin categora"),e?.showStockCount!==!1&&t.stock>0&&t.stock<=(e?.lowStockThreshold||5)?r.default.createElement("span",{className:"product-card-stock-alert text-[9px] sm:text-[10px] text-red-500 font-bold flex items-center gap-1"},r.default.createElement(Bi,{className:"w-2.5 h-2.5 sm:w-3 sm:h-3"})," ltimos ",t.stock):null),r.default.createElement("h3",{className:`product-card-title ${A} font-bold text-base sm:text-[1.05rem] leading-tight mb-2 sm:mb-3 group-hover:text-orange-600 transition line-clamp-2 min-h-[2.2rem] sm:min-h-[2.4rem]`},t.name),r.default.createElement("div",{className:`product-card-footer mt-auto pt-2.5 sm:pt-3 border-t ${g} flex flex-col items-stretch gap-2 sm:gap-3`},r.default.createElement("div",{className:"product-card-price flex w-full flex-col"},C&&r.default.createElement("span",{className:`product-card-base-price text-[10px] sm:text-xs ${z} line-through font-medium mb-0.5 sm:mb-1`},"Antes: $",L.toLocaleString()),r.default.createElement("span",{className:`product-card-final-price text-[1.5rem] sm:text-[1.75rem] font-black ${A} tracking-tight flex items-center gap-1`},"$",W.toLocaleString()),C&&re>0&&r.default.createElement("span",{className:`product-card-savings-badge mt-1 inline-flex items-center rounded-full border px-2 py-0.5 text-[10px] font-bold ${u?"bg-emerald-500/10 border-emerald-500/30 text-emerald-300":"bg-emerald-50 border-emerald-200 text-emerald-700"}`},"Ahorrs $",re.toLocaleString())),t.stock>0&&r.default.createElement("div",{className:"product-card-action flex w-full items-center gap-2",onClick:T=>T.stopPropagation()},r.default.createElement(cO,{product:t,onAdd:(T,S)=>o(T,S),darkMode:u})))))},(t,e)=>t.p.id===e.p.id&&t.p.stock===e.p.stock&&t.p.basePrice===e.p.basePrice&&t.p.discount===e.p.discount&&t.p.isFeatured===e.p.isFeatured&&t.p.name===e.p.name&&t.p.image===e.p.image&&(t.p.images?.length||0)===(e.p.images?.length||0)&&t.currentUser?.favorites?.includes(t.p.id)===e.currentUser?.favorites?.includes(e.p.id)&&t.darkMode===e.darkMode&&t.settings===e.settings);var dO=({isOpen:t,onClose:e,categories:n,onAdd:s,onRemove:i,darkMode:o=!0})=>{let[a,u]=r.default.useState("");return t?r.default.createElement("div",{className:"fixed inset-0 z-[10010] flex items-center justify-center bg-black/90 backdrop-blur-md animate-fade-in p-4",onClick:e},r.default.createElement("div",{className:`p-8 rounded-[2rem] max-w-md w-full relative border transition-all duration-300 ${o?"bg-[#0a0a0a] border-slate-800":"bg-white border-slate-200 shadow-xl"}`,onClick:p=>p.stopPropagation()},r.default.createElement("button",{onClick:e,className:`absolute top-4 right-4 transition ${o?"text-slate-500 hover:text-white":"text-slate-400 hover:text-slate-900"}`},r.default.createElement(lt,{className:"w-6 h-6"})),r.default.createElement("h3",{className:`text-2xl font-bold mb-6 flex items-center gap-2 transition-colors duration-300 ${o?"text-white":"text-slate-900"}`},r.default.createElement(ll,{className:"w-6 h-6 text-orange-400"})," Gestionar Categoras"),r.default.createElement("form",{onSubmit:p=>{p.preventDefault(),a.trim()&&(s(a.trim()),u(""))},className:"flex gap-2 mb-6"},r.default.createElement("input",{className:`flex-1 p-3 rounded-xl border transition-all duration-300 ${o?"bg-slate-900 border-slate-700 text-white focus:border-orange-500 outline-none":"bg-slate-50 border-slate-200 text-slate-900 focus:border-orange-500 outline-none"}`,id:"new-category-input",name:"new_category",autoComplete:"off",placeholder:"Nueva categora...",value:a,onChange:p=>u(p.target.value),autoFocus:!0}),r.default.createElement("button",{type:"submit",className:"bg-orange-600 hover:bg-orange-500 text-white p-3 rounded-xl font-bold transition shadow-lg shadow-orange-600/20"},r.default.createElement(En,{className:"w-5 h-5"}))),r.default.createElement("div",{className:"space-y-2 max-h-[300px] overflow-y-auto pr-2 custom-scrollbar"},n.map((p,y)=>r.default.createElement("div",{key:y,className:`flex items-center justify-between p-3 rounded-xl border group transition-all duration-300 ${o?"bg-slate-900/50 border-slate-800 hover:border-slate-700":"bg-slate-50 border-slate-100 hover:border-slate-200"}`},r.default.createElement("span",{className:`font-medium transition-colors duration-300 ${o?"text-slate-300":"text-slate-700"}`},p),r.default.createElement("button",{onClick:()=>i(p),className:`transition opacity-0 group-hover:opacity-100 ${o?"text-slate-600 hover:text-red-500":"text-slate-400 hover:text-red-600"}`},r.default.createElement(mt,{className:"w-4 h-4"})))),n.length===0&&r.default.createElement("p",{className:`text-center italic py-4 transition-colors duration-300 ${o?"text-slate-600":"text-slate-400"}`},"No hay categoras definidas")))):null},hO={dashboard:{title:"Inicio (Panel de Control)",color:"orange",description:"Vista rapida del estado de tu tienda: ventas, rentabilidad y alertas clave.",sections:[{title:"Que ves",icon:"eye",bullets:["Ingresos y beneficio del periodo.","KPIs: usuarios, pedidos, ticket promedio y stock bajo.","Movimientos recientes con fecha y monto."]},{title:"Que haces",icon:"zap",bullets:["Registrar venta manual para pedidos fuera de la web.","Abrir detalle de metricas tocando las tarjetas.","Comparar meses para ver subidas o caidas."]},{title:"Consejo",icon:"tip",bullets:["Revisalo al abrir y al cerrar el dia."]}]},orders:{title:"Pedidos",color:"green",description:"Gestiona los pedidos del dia, su estado y su historial.",sections:[{title:"Que ves",icon:"eye",bullets:["Lista con ID, cliente, estado, fecha y total.","Vista previa de productos por pedido.","Detalle completo con datos del cliente y pago."]},{title:"Que haces",icon:"zap",bullets:["Abrir detalle del pedido.","Marcar pedido como realizado.","Eliminar pedidos de prueba o duplicados."]},{title:"Consejo",icon:"tip",bullets:["Deja las notificaciones activas en horario de atencion."]}]},products:{title:"Productos",color:"blue",description:"Administra el catalogo, stock y visibilidad de tus productos.",sections:[{title:"Que ves",icon:"eye",bullets:["Cantidad de productos usada vs limite del plan.","Lista con imagen, precio, stock y estado.","Alertas cuando hay productos desactivados."]},{title:"Que haces",icon:"zap",bullets:["Crear, editar o eliminar productos.","Activar o desactivar visibilidad en tienda.","Gestionar categorias e imagenes del producto."]},{title:"Limites",icon:"lock",bullets:["Emprendedor: hasta 30. Negocio: hasta 50. Premium: sin limite.","Si superas el limite, los excedentes se desactivan."]}]},promos:{title:"Promos",color:"purple",description:"Crea combos con precio especial para aumentar ventas.",sections:[{title:"Que ves",icon:"eye",bullets:["Promos activas con precio final y productos.","Costo real del combo vs precio de venta.","Formulario para crear o editar promos."]},{title:"Que haces",icon:"zap",bullets:["Crear promo con nombre, precio e imagen.","Agregar productos y cantidades al combo.","Editar o eliminar promos existentes."]},{title:"Limites",icon:"lock",bullets:["Emprendedor: 1 promo activa. Negocio y Premium: ilimitadas."]}]},carousel:{title:"Carrusel de Banners",color:"cyan",description:"Controla los banners rotativos del home y su destino al hacer clic.",sections:[{title:"Que ves",icon:"eye",bullets:["Estado del carrusel (activo o apagado).","Velocidad de rotacion en segundos.","Slides con orden, estado y destino."]},{title:"Que haces",icon:"zap",bullets:["Crear y ordenar slides.","Vincular cada slide a un producto o promo.","Activar, desactivar o eliminar slides."]},{title:"Requisitos",icon:"lock",bullets:["Disponible desde Plan Negocio."]}]},coupons:{title:"Cupones de Descuento",color:"pink",description:"Crea cupones por porcentaje o monto fijo con reglas simples.",sections:[{title:"Que ves",icon:"eye",bullets:["Lista con codigo, descuento, estado y usos.","Formulario de creacion con campos clave.","Estado de cupon vencido o agotado."]},{title:"Que haces",icon:"zap",bullets:["Crear cupon con codigo, tipo y valor.","Definir minimo, limite de usos y vencimiento.","Copiar o eliminar cupones."]},{title:"Requisitos",icon:"lock",bullets:["Disponible desde Plan Negocio."]}]},suppliers:{title:"Proveedores",color:"emerald",description:"Guarda y ordena tus proveedores con sus datos clave.",sections:[{title:"Que ves",icon:"eye",bullets:["Lista con contacto, telefono, direccion y CUIT.","Productos asociados a cada proveedor.","Formulario para alta y edicion."]},{title:"Que haces",icon:"zap",bullets:["Crear y editar proveedores.","Asociar productos para reposicion rapida.","Eliminar proveedores inactivos."]},{title:"Consejo",icon:"tip",bullets:["Manten los contactos actualizados para comprar mas rapido."]}]},purchases:{title:"Compras / Stock",color:"amber",description:"Registra reposiciones y deja el stock actualizado automaticamente.",sections:[{title:"Que ves",icon:"eye",bullets:["Formulario con producto, proveedor, cantidad y costo.","Historial de compras por fecha.","Stock actual antes de guardar."]},{title:"Que haces",icon:"zap",bullets:["Registrar una reposicion de stock.","Editar o eliminar compras cargadas.","Consultar historial para control interno."]},{title:"Consejo",icon:"tip",bullets:["Carga la compra cuando llega para evitar vender sin stock."]}]},finance:{title:"Finanzas y Capital",color:"green",description:"Controla inversiones, gastos y reparto estimado de ganancias.",sections:[{title:"Que ves",icon:"eye",bullets:["Formularios para inversiones y gastos.","Historial con fecha, categoria y monto.","Reparto estimado por socio."]},{title:"Que haces",icon:"zap",bullets:["Registrar aportes y egresos.","Corregir registros mal cargados.","Consultar reparto segun capital aportado."]},{title:"Consejo",icon:"tip",bullets:["Carga todos los gastos fijos para ver un beneficio real."]}]},users:{title:"Gestin de Usuarios",color:"pink",description:"Gestiona cuentas, roles y actividad de los usuarios.",sections:[{title:"Que ves",icon:"eye",bullets:["Tabla con nombre, email, rol y fecha de alta.","Actividad del usuario y carrito en vivo.","Filtros rapidos por tipo de rol."]},{title:"Que haces",icon:"zap",bullets:["Buscar usuarios por nombre o email.","Editar perfil y permisos.","Gestionar seguridad y acceso."]},{title:"Requisitos",icon:"lock",bullets:["Actividad avanzada disponible desde Plan Negocio."]}]},settings:{title:"Configuracin",color:"slate",description:"Panel tecnico para ajustes globales de la tienda.",sections:[{title:"Que podes ajustar",icon:"eye",bullets:["Datos de tienda, apariencia y redes.","Pagos, envios y ticket.","SEO, avanzado y equipo."]},{title:"Importante",icon:"lock",bullets:["Seccion recomendada para administrador tecnico.","Si tenes dudas, consulta antes de guardar cambios."]}]}};function Hr({guideKey:t}){let[e,n]=(0,r.useState)(!1),s=hO[t];if(!s)return null;let i={orange:{border:"border-orange-500/30",bg:"bg-orange-500/10",text:"text-orange-400",dot:"bg-orange-500",glow:"shadow-orange-500/20"},green:{border:"border-green-500/30",bg:"bg-green-500/10",text:"text-green-400",dot:"bg-green-500",glow:"shadow-green-500/20"},blue:{border:"border-blue-500/30",bg:"bg-blue-500/10",text:"text-blue-400",dot:"bg-blue-500",glow:"shadow-blue-500/20"},purple:{border:"border-purple-500/30",bg:"bg-purple-500/10",text:"text-purple-400",dot:"bg-purple-500",glow:"shadow-purple-500/20"},cyan:{border:"border-cyan-500/30",bg:"bg-cyan-500/10",text:"text-cyan-400",dot:"bg-cyan-500",glow:"shadow-cyan-500/20"},pink:{border:"border-pink-500/30",bg:"bg-pink-500/10",text:"text-pink-400",dot:"bg-pink-500",glow:"shadow-pink-500/20"},emerald:{border:"border-emerald-500/30",bg:"bg-emerald-500/10",text:"text-emerald-400",dot:"bg-emerald-500",glow:"shadow-emerald-500/20"},amber:{border:"border-amber-500/30",bg:"bg-amber-500/10",text:"text-amber-400",dot:"bg-amber-500",glow:"shadow-amber-500/20"},slate:{border:"border-slate-500/30",bg:"bg-slate-500/10",text:"text-slate-400",dot:"bg-slate-500",glow:"shadow-slate-500/20"}},o=i[s.color]||i.orange,a={eye:{Icon:rh,color:"text-blue-400",bg:"bg-blue-500/10"},zap:{Icon:ir,color:"text-yellow-400",bg:"bg-yellow-500/10"},tip:{Icon:Lw,color:"text-green-400",bg:"bg-green-500/10"},lock:{Icon:Tr,color:"text-red-400",bg:"bg-red-500/10"}};return r.default.createElement(r.default.Fragment,null,r.default.createElement("button",{onClick:()=>n(!0),className:`px-4 py-2.5 rounded-xl ${o.bg} hover:brightness-125 ${o.text} border ${o.border} transition-all duration-200 flex items-center gap-2 font-bold text-xs md:text-sm tracking-wide hover:shadow-lg ${o.glow} group`,type:"button"},r.default.createElement(Sw,{className:"w-4 h-4 group-hover:rotate-12 transition-transform"}),"Cmo usar"),e&&(0,_k.createPortal)(r.default.createElement("div",{className:"fixed inset-0 z-[20050] bg-black/90 backdrop-blur-md flex items-center justify-center p-4 overflow-y-auto animate-fade-in",onClick:()=>n(!1),role:"dialog","aria-modal":"true"},r.default.createElement("div",{className:`w-full max-w-3xl max-h-[90vh] flex flex-col bg-[#0a0a0a] border ${o.border} rounded-[2rem] shadow-2xl overflow-hidden animate-fade-up my-auto flex-shrink-0`,onClick:u=>u.stopPropagation()},r.default.createElement("div",{className:"relative p-6 md:p-8 border-b border-slate-800/50 overflow-hidden flex-shrink-0"},r.default.createElement("div",{className:`absolute inset-0 ${o.bg} opacity-30`}),r.default.createElement("div",{className:"absolute top-0 right-0 w-40 h-40 rounded-full blur-3xl opacity-10",style:{background:"radial-gradient(circle, var(--tw-gradient-stops))"}}),r.default.createElement("div",{className:"relative flex items-start justify-between gap-4"},r.default.createElement("div",{className:"flex-1"},r.default.createElement("div",{className:"flex items-center gap-2 mb-2"},r.default.createElement("span",{className:`w-2 h-2 rounded-full ${o.dot} animate-pulse`}),r.default.createElement("p",{className:`text-xs font-black uppercase tracking-wide ${o.text}`},"Gua rpida")),r.default.createElement("h2",{className:"text-2xl md:text-3xl font-black text-white mt-1 leading-tight"},s.title),r.default.createElement("p",{className:"text-slate-300 text-base mt-3 leading-relaxed"},s.description)),r.default.createElement("button",{onClick:()=>n(!1),className:"p-2.5 rounded-xl bg-slate-900/80 hover:bg-slate-800 text-slate-400 hover:text-white border border-slate-700 transition-all hover:scale-105 flex-shrink-0",type:"button","aria-label":"Cerrar"},r.default.createElement(lt,{className:"w-5 h-5"})))),r.default.createElement("div",{className:"p-5 md:p-6 flex-1 min-h-0 overflow-y-auto custom-scrollbar space-y-4"},(s.sections||[]).map((u,d)=>{let p=a[u.icon]||a.eye;return r.default.createElement("div",{key:d,className:"bg-slate-900/40 border border-slate-800/60 rounded-2xl p-5 hover:border-slate-700 transition-colors"},r.default.createElement("div",{className:"flex items-center gap-3 mb-4"},r.default.createElement("div",{className:`w-8 h-8 rounded-lg ${p.bg} flex items-center justify-center flex-shrink-0`},r.default.createElement(p.Icon,{className:`w-4 h-4 ${p.color}`})),r.default.createElement("h3",{className:"text-white font-black text-base"},u.title)),r.default.createElement("ul",{className:"space-y-2.5 ml-1"},(u.bullets||[]).map((y,_)=>{let N=y.split(":"),A=N.length>1&&N[0].length<40;return r.default.createElement("li",{key:_,className:"flex gap-3 text-sm md:text-[15px] leading-relaxed"},r.default.createElement("span",{className:`w-1.5 h-1.5 rounded-full ${o.dot} mt-[7px] flex-shrink-0 opacity-60`}),r.default.createElement("span",{className:"text-slate-300"},A?r.default.createElement(r.default.Fragment,null,r.default.createElement("span",{className:"text-white font-bold"},N[0],":"),N.slice(1).join(":")):y))})))})),r.default.createElement("div",{className:"p-5 md:p-6 border-t border-slate-800/50 flex items-center justify-between gap-4 flex-shrink-0"},r.default.createElement("p",{className:"text-xs text-slate-600 font-mono uppercase tracking-wider hidden sm:block"},"Panel Admin v3.0"),r.default.createElement("button",{onClick:()=>n(!1),className:"px-6 py-3 rounded-xl bg-gradient-to-r from-orange-600 to-orange-500 hover:from-orange-500 hover:to-orange-400 text-white font-black transition-all shadow-lg shadow-orange-600/20 hover:shadow-orange-500/30 hover:scale-[1.02] active:scale-[0.98]",type:"button"},"Entendido")))),document.body))}function mO(){let[t,e]=(0,r.useState)("store"),[n,s]=(0,r.useState)("dashboard"),[i,o]=(0,r.useState)([]),[a,u]=(0,r.useState)([]),[d,p]=(0,r.useState)([]),[y,_]=(0,r.useState)({isOpen:!1,title:"",message:"",onConfirm:null}),[N,A]=(0,r.useState)(!1),[z,B]=(0,r.useState)(!1),[g,L]=(0,r.useState)(()=>{try{let l=localStorage.getItem("sustore_dark_mode");return l!==null?JSON.parse(l):!1}catch{return!1}}),[w,C]=(0,r.useState)(null),[W,re]=(0,r.useState)({status:"resolving",hostname:"",normalizedHostname:"",storeId:null,error:null}),[oe,T]=(0,r.useState)(""),[S,k]=(0,r.useState)(!1),[M,$]=(0,r.useState)(!1),[q,D]=(0,r.useState)(!1),[At,vr]=(0,r.useState)(!1),[Y,tn]=(0,r.useState)(()=>{try{let l=localStorage.getItem("sustore_user_data");if(!l)return null;let m=JSON.parse(l);return!m||!m.id||!m.email||!m.name?(localStorage.removeItem("sustore_user_data"),null):m}catch{return localStorage.removeItem("sustore_user_data"),null}}),[Ee,Ma]=(0,r.useState)(null),[$d,Wt]=(0,r.useState)(!0),[Wr,wi]=(0,r.useState)(!1),[$a,Fa]=(0,r.useState)([]),[Nn,vc]=(0,r.useState)(()=>{try{return localStorage.getItem("sustore_admin_order_alarm_muted")==="1"}catch{return!1}}),Kr=(0,r.useRef)(null),Co=(0,r.useRef)(null),Ua=(0,r.useRef)(!1),Fd=(0,r.useRef)(!1),xc=(0,r.useRef)(null),[Ud,yc]=(0,r.useState)(!1),[he,Sf]=(0,r.useState)([]),[_n,ja]=(0,r.useState)([]),[Ao,Pt]=(0,r.useState)([]),[Kt,za]=(0,r.useState)(0),[Be,Es]=(0,r.useState)(()=>{try{let l=JSON.parse(localStorage.getItem("sustore_cart"));return Array.isArray(l)?l:[]}catch{return[]}}),xr=(0,r.useRef)(!1),Ss=(0,r.useRef)(null),[wc,Nc]=(0,r.useState)([]),[gt,_c]=(0,r.useState)([]),[Ba,qa]=(0,r.useState)(null),[Qr,Ts]=(0,r.useState)([]),[yr,Ga]=(0,r.useState)([]),[wr,Ic]=(0,r.useState)([]),[h,K]=(0,r.useState)(Is),[_t,Ha]=(0,r.useState)(!1),[Dt,Ec]=(0,r.useState)(""),[It,Xn]=(0,r.useState)(""),Po=(0,r.useRef)(null),[jd,Yr]=(0,r.useState)(!1),[Tf,kf]=(0,r.useState)(0),[Wa,zd]=(0,r.useState)(0),Bd=l=>{Yr(!0),kf(l.pageX-Po.current.offsetLeft),zd(Po.current.scrollLeft)},Sc=()=>{Yr(!1)},Do=()=>{Yr(!1)},Cf=l=>{if(!jd)return;l.preventDefault();let v=(l.pageX-Po.current.offsetLeft-Tf)*2;Po.current.scrollLeft=Wa-v},[De,Ln]=(0,r.useState)({email:"",password:"",name:"",username:"",dni:"",phone:""}),[nn,ks]=(0,r.useState)(!0),Qt=(0,r.useMemo)(()=>mk(h),[h?.requireDNI,h?.requireDni,h?.requirePhone,h?.require_phone]);(0,r.useEffect)(()=>{t==="register"?ks(!1):t==="login"&&ks(!0)},[t]);let[Zn,Ka]=(0,r.useState)({description:"",amount:"",category:"General",date:new Date().toISOString().split("T")[0]}),[Ot,Ni]=(0,r.useState)({investor:"",amount:"",date:new Date().toISOString().split("T")[0],notes:""}),[it,_i]=(0,r.useState)({productId:"",supplierId:"",quantity:1,cost:0,isNewProduct:!1}),[Re,Vn]=(0,r.useState)({imageUrl:"",targetType:"none",targetId:"",enabled:!0,order:0}),[Mn,Qa]=(0,r.useState)(null),[Lt,Nr]=(0,r.useState)({name:"",contact:"",phone:"",ig:"",address:"",cuit:"",associatedProducts:[]}),[Ya,Ja]=(0,r.useState)(null),[Tc,Ii]=(0,r.useState)(!1),[rn,Ei]=(0,r.useState)([]),[kc,Si]=(0,r.useState)(!1),[Te,Yt]=(0,r.useState)(null),Vt=(l,m,v)=>{_({isOpen:!0,title:l,message:m,onConfirm:async()=>{await v(),_(x=>({...x,isOpen:!1}))},onCancel:()=>_(x=>({...x,isOpen:!1}))})},Oo=(l,m)=>{let v=new Blob([JSON.stringify(m,null,2)],{type:"application/json;charset=utf-8"}),x=URL.createObjectURL(v),E=document.createElement("a");E.href=x,E.download=l,document.body.appendChild(E),E.click(),E.remove(),setTimeout(()=>URL.revokeObjectURL(x),1e3)},Cc=async()=>{if(!w)throw new Error("Tienda no configurada");if(!Ge.currentUser||Ge.currentUser.isAnonymous)throw new Error("Sesin invlida");$(!0);try{let l=await Ge.currentUser.getIdToken(),m=await fetch("/api/admin/export-store",{method:"POST",headers:{"Content-Type":"application/json","x-store-id":w,Authorization:`Bearer ${l}`},body:JSON.stringify({})}),v=await m.json().catch(()=>({}));if(!m.ok)throw new Error(v.error||"No se pudo exportar");let x=new Date().toISOString().replace(/[:.]/g,"-");Oo(`backup-${w}-${x}.json`,v),F("Backup exportado.","success")}catch(l){F(l?.message||"No se pudo exportar","error")}finally{$(!1)}},We=async l=>{if(!w)throw new Error("Tienda no configurada");if(!Ge.currentUser||Ge.currentUser.isAnonymous)throw new Error("Sesin invlida");D(!0);try{let m=await l.text(),v=JSON.parse(m),x=await Ge.currentUser.getIdToken(),E=await fetch("/api/admin/import-store",{method:"POST",headers:{"Content-Type":"application/json","x-store-id":w,Authorization:`Bearer ${x}`},body:JSON.stringify({backup:v})}),V=await E.json().catch(()=>({}));if(!E.ok)throw new Error(V.error||"No se pudo importar");F(`Backup importado (${V.written||0} docs).`,"success")}catch(m){F(m?.message||"No se pudo importar","error")}finally{D(!1)}},Xa=async()=>{if(!w)throw new Error("Tienda no configurada");if(!Ge.currentUser||Ge.currentUser.isAnonymous)throw new Error("Sesin invlida");if(!At){vr(!0);try{let l=await Ge.currentUser.getIdToken(),m=await fetch("/api/admin?action=sanitize-text",{method:"POST",headers:{"Content-Type":"application/json","x-store-id":w,Authorization:`Bearer ${l}`},body:JSON.stringify({})}),v=await m.json().catch(()=>({}));if(!m.ok)throw new Error(v.error||"No se pudieron reparar los textos");let x=Number(v.updatedDocs)||0,E=Number(v.updatedStrings)||0;x>0?F(`Textos reparados: ${x} docs y ${E} campos.`,"success"):F("No se detectaron textos rotos para reparar.","info")}catch(l){F(l?.message||"No se pudieron reparar los textos.","error")}finally{vr(!1)}}},Cs=l=>{switch(l){case"premium":return 1/0;case"business":return 50;default:return 30}},Lo=l=>l==="business"||l==="premium",Ac=async l=>{let m=h?.subscriptionPlan||"entrepreneur",v=Cs(m),x=Cs(l);if(x>=v){K({...h,subscriptionPlan:l}),F(`Plan actualizado a ${l==="premium"?"Premium":l==="business"?"Negocio":"Emprendedor"}!`,"success");return}let E=he.filter(U=>U.isActive!==!1),V=[],P=[];if(E.length>x){let U=[...E].sort((O,G)=>{let J=gt.filter(Z=>Z.items?.some(ee=>ee.productId===O.id)).length;return gt.filter(Z=>Z.items?.some(ee=>ee.productId===G.id)).length-J});for(let O=x;O<U.length;O++)V.push(U[O])}if(!Lo(l)){let U=yr.filter(O=>O.isActive!==!1);P.push(...U)}if(V.length>0||P.length>0){let U=`
                ${V.length>0?` ${V.length} producto(s) sern desactivados (se conservan los ${x} ms vendidos)
`:""}
                ${P.length>0?` ${P.length} cupn(es) sern desactivados (el plan ${l==="entrepreneur"?"Emprendedor":""} no incluye cupones)
`:""}
                
                Los productos y cupones NO se eliminarn, solo se desactivarn. Podrs reactivarlos manualmente si mejoras tu plan.
            `;Vt(" Cambio de Plan - Atencin",U,async()=>{try{for(let O of V)await Nt(fe(ae,"artifacts",w,"public","data","products",O.id),{isActive:!1,deactivatedByPlan:!0,deactivatedAt:new Date().toISOString()});for(let O of P)await Nt(fe(ae,"artifacts",w,"public","data","coupons",O.id),{isActive:!1,deactivatedByPlan:!0,deactivatedAt:new Date().toISOString()});K({...h,subscriptionPlan:l}),er({showWarning:!0,deactivatedProducts:V.map(O=>O.id),deactivatedCoupons:P.map(O=>O.id),previousPlan:m,newPlan:l}),F(`Plan cambiado. ${V.length} producto(s) y ${P.length} cupn(es) fueron desactivados.`,"warning")}catch(O){console.error("Error al cambiar de plan:",O),F("Error al cambiar de plan","error")}})}else K({...h,subscriptionPlan:l}),F(`Plan actualizado a ${l==="premium"?"Premium":l==="business"?"Negocio":"Emprendedor"}`,"success")},qd=async l=>{let m=h?.subscriptionPlan||"entrepreneur",v=Cs(m);if(he.filter(E=>E.isActive!==!1).length>=v){F(`Has alcanzado el lmite de ${v} productos de tu plan. Mejora tu plan o desactiva otro producto primero.`,"warning");return}try{await Nt(fe(ae,"artifacts",w,"public","data","products",l),{isActive:!0,deactivatedByPlan:!1,reactivatedAt:new Date().toISOString()}),F("Producto reactivado correctamente","success")}catch(E){console.error("Error al reactivar producto:",E),F("Error al reactivar producto","error")}},Af=async l=>{try{await Nt(fe(ae,"artifacts",w,"public","data","products",l),{isActive:!1,deactivatedManually:!0,deactivatedAt:new Date().toISOString()}),F("Producto desactivado correctamente","success")}catch(m){console.error("Error al desactivar producto:",m),F("Error al desactivar producto","error")}},[pe,$n]=(0,r.useState)({address:"",city:"",province:"",zipCode:"",paymentChoice:"",shippingMethod:"Pickup"}),[fn,Jr]=(0,r.useState)(null),[As,Vo]=(0,r.useState)(!1);(0,r.useEffect)(()=>{if(pe.shippingMethod==="Delivery"&&pe.paymentChoice==="Efectivo"){F("Pago en efectivo solo disponible con Retiro en Local.","info");let l=h?.paymentTransfer?.enabled,m=h?.paymentMercadoPago?.enabled;$n(v=>({...v,paymentChoice:l?"Transferencia":m?"Tarjeta":""}))}},[pe.shippingMethod,h]);let[ge,jt]=(0,r.useState)({name:"",basePrice:"",stock:"",categories:[],image:"",images:[],description:"",discount:0,purchasePrice:""}),[Mo,Za]=(0,r.useState)(null),[Ti,Ra]=(0,r.useState)(!1),[In,Pf]=(0,r.useState)("store"),[Fe,Fn]=(0,r.useState)({name:"",price:"",image:"",description:"",items:[]}),[Pc,Dc]=(0,r.useState)(""),[ki,Ci]=(0,r.useState)(""),[Ps,Oc]=(0,r.useState)(1),[Xr,Ye]=(0,r.useState)(!1),[Gd,Lc]=(0,r.useState)(null),[ke,Un]=(0,r.useState)({code:"",type:"percentage",value:0,minPurchase:0,maxDiscount:0,expirationDate:"",targetType:"global",targetUser:"",usageLimit:"",perUserLimit:1,isActive:!0}),[_r,Zr]=(0,r.useState)(null),[Ds,Vc]=(0,r.useState)(""),[el,Os]=(0,r.useState)(""),[Df,Hd]=(0,r.useState)({email:"",role:"employee",name:""}),[tl,Mc]=(0,r.useState)(null),[Rr,tw]=(0,r.useState)(20),[$o,Ai]=(0,r.useState)(null),[Ls,$c]=(0,r.useState)([]),[Fo,nl]=(0,r.useState)(!0),[Fc,Ir]=(0,r.useState)(!1),[Pi,Uc]=(0,r.useState)(null),[Di,Of]=(0,r.useState)(!1),[we,Rn]=(0,r.useState)({productId:"",quantity:1,price:0,customerName:"Cliente Offline",paymentMethod:"Efectivo",notes:"Venta presencial"}),[rl,Uo]=(0,r.useState)(null),[Jt,jc]=(0,r.useState)(null),[zc,Vs]=(0,r.useState)(null),[c,f]=(0,r.useState)(""),[b,I]=(0,r.useState)(""),[j,H]=(0,r.useState)("all"),[ie,_e]=(0,r.useState)(!1),[Et,He]=(0,r.useState)(null),[Mt,er]=(0,r.useState)({showWarning:!1,deactivatedProducts:[],deactivatedCoupons:[],previousPlan:null,newPlan:null}),[Ms,Er]=(0,r.useState)(null),[tr,sn]=(0,r.useState)(!1),[gn,ht]=(0,r.useState)(null),[jn,nw]=(0,r.useState)(()=>yk()),[Wd,Lf]=(0,r.useState)(()=>{let l=yk();return String(l?.mpPaymentId||"").trim()}),jo=(0,r.useRef)(null),rw=(0,r.useRef)(0),$s=(0,r.useRef)(!1),bn=(0,r.useRef)(!1),kk=(0,r.useRef)(null),[Ck,Bc]=(0,r.useState)(!1),[sl,sw]=(0,r.useState)([]),[Kd,iw]=(0,r.useState)(""),Ak=l=>{Rn({productId:l.id,quantity:1,price:Number(l.basePrice)||0,customerName:"Cliente Offline",paymentMethod:"Efectivo",notes:"Venta presencial"}),Ir(!0)},Pk=async()=>{if(we.productId){if(we.quantity<=0){F("La cantidad debe ser mayor a 0","error");return}wi(!0);try{let l=fe(ae,"artifacts",w,"public","data","products",we.productId),m=await yi(l);if(!m.exists())throw new Error("Producto no encontrado");let v=Number(m.data().stock)||0;if(v<we.quantity){F(`Stock insuficiente. Solo quedan ${v} unidades.`,"error"),wi(!1);return}let x=we.quantity*we.price,E=new Date().toISOString(),V={orderId:`man-${Date.now().toString().slice(-6)}`,date:E,status:"Realizado",source:"manual_sale",userId:"manual_admin",customerId:"manual_admin",customer:{name:we.customerName||"Cliente Mostrador",email:"-",phone:"-",dni:"-"},items:[{productId:we.productId,title:he.find(P=>P.id===we.productId)?.name||"Producto",quantity:Number(we.quantity),unit_price:Number(we.price),image:he.find(P=>P.id===we.productId)?.image||""}],subtotal:x,discount:0,total:x,shippingAddress:"Entrega Presencial (Offline)",paymentMethod:we.paymentMethod,notes:we.notes,lastUpdate:E};await Gr(Ke(ae,"artifacts",w,"public","data","orders"),V),await Nt(l,{stock:xi(-we.quantity)}),Nn||Yd(),F("Venta registrada exitosamente","success"),Ir(!1)}catch(l){console.error("Error en venta manual:",l),F("Error al registrar venta: "+l.message,"error")}finally{wi(!1)}}},bO=(0,r.useRef)(null),F=(l,m="info")=>{let v=Date.now();Fa(x=>[...x.filter(V=>Date.now()-V.id<3e3),{id:v,message:l,type:m}])},Dk=l=>Fa(m=>m.filter(v=>v.id!==l)),Ok=l=>{let m=l?.targetType||(l?.promoId?"promo":l?.productId?"product":"none"),v=l?.targetId||l?.promoId||l?.productId||"";if(!(!v||m==="none")){if(m==="product"){let x=he.find(E=>String(E.id).trim()===String(v).trim());if(x){Yt(x);return}F("Este banner apunta a un producto que ya no existe.","warning"),document.getElementById("catalog")?.scrollIntoView({behavior:"smooth"});return}if(m==="promo"){let x=_n.find(V=>String(V.id).trim()===String(v).trim());if(!x){F("Este banner apunta a una promo que ya no existe.","warning"),document.getElementById("catalog")?.scrollIntoView({behavior:"smooth"});return}let E=1/0;(x.items||[]).forEach(V=>{let P=he.find(G=>G.id===V.productId),U=P&&Number(P.stock)||0,O=Math.floor(U/(Number(V.quantity)||1));O<E&&(E=O)}),Number.isFinite(E)||(E=0),Yt({...x,isPromo:!0,stock:E})}}},qc=l=>{if(!l)return"user";let m=l.trim().toLowerCase();if(m===Qe.toLowerCase())return"admin";if(Y&&Y.email&&Y.email.trim().toLowerCase()===m&&Y.role&&Y.role!=="user")return Y.role;if(!h||!_t)return"loading";let x=(h?.team||[]).find(E=>E.email&&E.email.trim().toLowerCase()===m);if(x)return x.role;if(Qr&&Qr.length>0){let E=Qr.find(V=>V.email&&V.email.trim().toLowerCase()===m);if(E&&E.role)return E.role}return"user"},Gc=l=>qc(l)==="admin",Lk=l=>qc(l)==="editor",Vk=l=>qc(l)==="loading",Vf=l=>{let m=qc(l);return m==="loading"?!1:m==="admin"||m==="editor"||m==="employee"},ot=Gc(Ee?.email||Y?.email),Mk=!!(Ee?.email&&Qe&&Ee.email.trim().toLowerCase()===Qe.trim().toLowerCase()),Oi=(0,r.useMemo)(()=>{if(!ot)return null;if(typeof Ba=="string"&&Ba)return Ba;let l=gt?.[0]?.date;return typeof l=="string"?l:null},[ot,Ba,gt]),ow=typeof h?.ordersLastSeenIso=="string"?h.ordersLastSeenIso:null,Mf=!!(Oi&&(!ow||Oi>ow)),$k=(0,r.useCallback)(()=>{vc(l=>{let m=!l;try{localStorage.setItem("sustore_admin_order_alarm_muted",m?"1":"0")}catch{}return m})},[]),Li=(0,r.useCallback)(()=>{Ua.current=!1,Co.current&&(clearInterval(Co.current),Co.current=null)},[]),Qd=(0,r.useCallback)(async l=>{if(!ot||!w)return;let m=typeof l=="string"&&l?l:new Date().toISOString();if(xc.current!==m){xc.current=m;try{await Nt(fe(ae,"artifacts",w,"public","data","settings","config"),{ordersLastSeenIso:m})}catch{}}},[ot,w]),Yd=(0,r.useCallback)(async()=>{if(!ot||Nn||Ua.current)return;let l=window.AudioContext||window.webkitAudioContext;if(!l)return;let m=Kr.current;if(!m||m.state==="closed")try{m=new l,Kr.current=m}catch{return}try{m.state==="suspended"&&await m.resume()}catch{return}let v=E=>{let V=m.createOscillator(),P=m.createGain();V.type="sine",V.frequency.setValueAtTime(1046.5,E),V.frequency.exponentialRampToValueAtTime(880,E+.2),P.gain.setValueAtTime(0,E),P.gain.linearRampToValueAtTime(1,E+.05),P.gain.linearRampToValueAtTime(0,E+.25),V.connect(P),P.connect(m.destination),V.start(E),V.stop(E+.3)},x=()=>{let E=m.currentTime;v(E),v(E+.35)};Ua.current=!0,x(),Co.current=setInterval(x,2e3)},[ot,Nn]);(0,r.useEffect)(()=>{let l=typeof window<"u"&&window.location&&window.location.hostname?String(window.location.hostname).trim().toLowerCase():"",m=l.startsWith("www.")?l.slice(4):l,v=String(Zy||"").trim();if(!v){re({status:"unconfigured",hostname:l,normalizedHostname:m,storeId:null,error:"missing-store-id"}),C(null);return}re({status:"resolved",hostname:l,normalizedHostname:m,storeId:v,error:null}),C(v)},[]);let Fk=(0,r.useCallback)(()=>{let m=(x=>String(x||"").trim().toLowerCase().replace(/[^a-z0-9-]/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,""))(W.normalizedHostname||W.hostname||"store"),v=typeof crypto<"u"&&typeof crypto.randomUUID=="function"?crypto.randomUUID().split("-")[0]:Math.random().toString(36).slice(2,8);return`${m}-${v}`.slice(0,80)},[W.hostname,W.normalizedHostname]),aw=(0,r.useCallback)(async l=>{let m=new Date().toISOString();await br(fe(ae,"artifacts",l,"public","data","settings","config"),{...Is,createdAt:m,updatedAt:m},{merge:!0}),await br(fe(ae,"artifacts",l,"public","config"),{version:xk,updatedAt:m},{merge:!0})},[]),$f=(0,r.useCallback)(async l=>{let m=W.normalizedHostname;if(!m)throw new Error("Dominio invlido");let v=String(l||"").trim();if(!v)throw new Error("StoreId invlido");let x=new Date().toISOString();await br(fe(ae,"storesIndex",m),{storeId:v,hostname:m,updatedAt:x,updatedBy:Ee?.email||null,createdAt:x},{merge:!0}),await aw(v),C(v),re(E=>({...E,status:"resolved",storeId:v,error:null}))},[aw,W.normalizedHostname,Ee?.email]),lw=(0,r.useCallback)(l=>{let m=l?.product&&typeof l.product=="object"?l.product:{},v=String(l?.productId||m?.id||"").trim(),x=Number(l?.quantity),E=Number.isFinite(x)&&x>0?x:1,V=String(l?.name||l?.title||m?.name||"").trim(),P=l?.price??l?.unit_price??m?.basePrice,U=Number(P),O=Number.isFinite(U)?U:0,G=String(l?.image||m?.image||"").trim(),J=l?.isPromo===!0||m?.isPromo===!0,Z=(Array.isArray(l?.promoItems)?l.promoItems:Array.isArray(l?.items)?l.items:Array.isArray(m?.items)?m.items:[]).map(ee=>({productId:String(ee?.productId||"").trim(),quantity:Number(ee?.quantity)||0})).filter(ee=>ee.productId&&ee.quantity>0);return{productId:v,quantity:E,name:V,price:O,image:G,isPromo:J,promoItems:J?Z:[],items:J?Z:[]}},[]),Vi=(0,r.useCallback)(l=>Array.isArray(l)?l.map(lw).filter(m=>m.productId&&m.quantity>0):[],[lw]);(0,r.useEffect)(()=>{g?(document.documentElement.classList.add("dark-mode"),document.body.classList.add("dark-mode")):(document.documentElement.classList.remove("dark-mode"),document.body.classList.remove("dark-mode")),localStorage.setItem("sustore_dark_mode",JSON.stringify(g))},[g]),(0,r.useEffect)(()=>{if(localStorage.setItem("sustore_cart",JSON.stringify(Be)),w&&Y&&Y.id){if(!xr.current)return;let m=setTimeout(async()=>{try{await br(fe(ae,"artifacts",w,"public","data","carts",Y.id),{userId:Y.id,userName:Y.name||"Usuario",items:Vi(Be),lastUpdated:new Date().toISOString()},{merge:!0})}catch(v){console.error("Error syncing cart",v)}},800);return()=>clearTimeout(m)}},[Be,Y,w]),(0,r.useEffect)(()=>{xr.current=!1,Ss.current=null},[w,Y?.id]),(0,r.useEffect)(()=>{if(!Y?.id||!w||xr.current)return;let l=!1;return(async()=>{try{let v=await yi(fe(ae,"artifacts",w,"public","data","carts",Y.id));if(!v.exists()){xr.current=!0;return}let x=v.data()||{},E=Array.isArray(x.items)?x.items:[];if(E.length===0){xr.current=!0;return}let V=Vi(E).map(P=>({product:{id:P.productId,name:typeof P.name=="string"?P.name:"",basePrice:Number(P.price)||0,image:typeof P.image=="string"?P.image:"",category:"",isPromo:P.isPromo===!0,items:Array.isArray(P.promoItems)?P.promoItems:Array.isArray(P.items)?P.items:[]},quantity:Number(P.quantity)||1}));if(V.length===0){xr.current=!0;return}l||(Es(P=>P.length===0?V:P),xr.current=!0)}catch{xr.current=!0}})(),()=>{l=!0}},[w,Y?.id,Vi]),(0,r.useEffect)(()=>{if(!ot){Li();return}typeof h?.ordersLastSeenIso!="string"&&_t&&Oi&&Qd(Oi)},[ot,_t,h?.ordersLastSeenIso,gt.length,Oi,Qd,Li]),(0,r.useEffect)(()=>{if(!ot||Fd.current)return;let l=window.AudioContext||window.webkitAudioContext;if(!l)return;let m=async()=>{try{Kr.current||(Kr.current=new l),Kr.current?.state==="suspended"&&await Kr.current.resume(),yc(!0)}catch{}Fd.current=!0};return window.addEventListener("pointerdown",m,{once:!0,capture:!0}),()=>window.removeEventListener("pointerdown",m,!0)},[ot]),(0,r.useEffect)(()=>{if(!ot){Li();return}if(Nn){Li();return}Mf&&!(t==="admin"&&n==="orders")?Yd():Li()},[ot,Nn,Mf,t,n,Yd,Li,Ud]),(0,r.useEffect)(()=>{ot&&(t!=="admin"||n!=="orders"||Oi&&(Qd(Oi),Li()))},[ot,t,n,Oi,Qd,Li]),(0,r.useEffect)(()=>{he.length>0&&Be.length>0&&Es(l=>{let m=!1,v=l.map(x=>{let E=he.find(V=>V.id===x.product.id);return E&&(E.basePrice!==(x.product?.basePrice??0)||E.name!==(x.product?.name??"")||E.image!==(x.product?.image??""))?(m=!0,{...x,product:{...E,basePrice:Number(E.basePrice)||0}}):x});return m?v:l})},[he]),(0,r.useEffect)(()=>{if(!w)return;let l=fe(ae,"artifacts",w,"public","config"),m=pn(l,v=>{if(v.exists()){let x=v.data();x.version&&x.version!==xk&&(console.log(`Nueva versin detectada: ${x.version}. Actualizando...`),window.location.reload())}},v=>{console.error("Error fetching config version:",v)});return()=>m()},[w]),(0,r.useEffect)(()=>{Y&&Y.id&&Y.email&&Y.name?(localStorage.setItem("sustore_user_data",JSON.stringify(Y)),$n(l=>({...l,address:Y.address||l.address,city:Y.city||l.city,province:Y.province||l.province,zipCode:Y.zipCode||l.zipCode}))):Y||localStorage.removeItem("sustore_user_data")},[Y]),(0,r.useEffect)(()=>{try{jn?.mpPaymentId?localStorage.setItem(Ry,JSON.stringify(jn)):localStorage.removeItem(Ry)}catch{}},[jn]),(0,r.useEffect)(()=>{let l=!1,m=!1,v=async()=>{if(!m){m=!0;try{typeof __initial_auth_token<"u"&&__initial_auth_token?await gp(Ge,__initial_auth_token):await Av(Ge)}catch(x){console.error("Error en bootstrap Auth:",x)}finally{m=!1}}};return vp(Ge,async x=>{if(Ma(x),!x){tn(null),m||await v(),l||(l=!0),setTimeout(()=>Wt(!1),300);return}l||(l=!0),x.isAnonymous&&tn(null),setTimeout(()=>Wt(!1),300)})},[]),(0,r.useEffect)(()=>{if(!w||!Ee||Ee.isAnonymous)return;let l=!1;return(async()=>{try{let v=fe(ae,"artifacts",w,"public","data","users",Ee.uid),x=await yi(v);if(l)return;if(x.exists()){let E={id:x.id,...x.data()},V=String(E.emailLower||E.email||Ee.email||"").trim().toLowerCase(),P=String(Qe||"").trim().toLowerCase();P&&V===P&&(E.role="admin"),E.role==="admin"&&(E._adminVerified=!0),tn(E)}else{let E=Ee.email||"",V=E.toLowerCase(),P=String(Qe||"").trim().toLowerCase(),U={name:Ee.displayName||E.split("@")[0]||"Usuario",email:E,emailLower:V,role:P&&V===P?"admin":"user",createdAt:new Date().toISOString()};try{await br(v,U,{merge:!0})}catch(O){console.warn("[Auth] Could not auto-create profile in Firestore:",O?.code||O?.message||O)}l||tn({id:Ee.uid,...U})}}catch{l||tn(null)}})(),()=>{l=!0}},[w,Ee?.uid,Ee?.isAnonymous]),(0,r.useEffect)(()=>{if(h){let l=h.primaryColor||"#f97316",m=h.secondaryColor||"#8b5cf6",v=h.accentColor||"#22c55e",x=document.getElementById("dynamic-theme-styles");x||(x=document.createElement("style"),x.id="dynamic-theme-styles",document.head.appendChild(x)),x.textContent=`
                :root {
                    --color-primary: ${l};
                    --color-secondary: ${m};
                    --color-accent: ${v};
                }
                
                /* Primary color overrides */
                .text-orange-400, .text-orange-500 { color: ${l} !important; }
                .bg-orange-400, .bg-orange-500 { background-color: ${l} !important; }
                .bg-orange-900\\/10, .bg-orange-900\\/20 { background-color: ${l}1a !important; }
                .border-orange-500, .border-orange-500\\/20, .border-orange-500\\/30, .border-orange-500\\/50 { border-color: ${l} !important; }
                .hover\\:text-orange-400:hover { color: ${l} !important; }
                .hover\\:bg-orange-400:hover, .hover\\:bg-orange-500:hover { background-color: ${l} !important; }
                .hover\\:border-orange-500:hover, .hover\\:border-orange-500\\/30:hover, .hover\\:border-orange-500\\/50:hover { border-color: ${l} !important; }
                .focus-within\\:border-orange-500\\/50:focus-within { border-color: ${l}80 !important; }
                .from-orange-400 { --tw-gradient-from: ${l} !important; }
                .to-orange-500 { --tw-gradient-to: ${l} !important; }
                .shadow-orange-500\\/30, .shadow-orange-600\\/30 { --tw-shadow-color: ${l}4d !important; }
                .ring-orange-500 { --tw-ring-color: ${l} !important; }
                .selection\\:bg-orange-500\\/30 ::selection { background-color: ${l}4d !important; }
                .selection\\:text-orange-200 ::selection { color: ${l} !important; }
                
                /* Secondary color overrides */
                .text-purple-400, .text-purple-500 { color: ${m} !important; }
                .bg-purple-400, .bg-purple-500 { background-color: ${m} !important; }
                .bg-purple-900\\/10, .bg-purple-900\\/20 { background-color: ${m}1a !important; }
                .border-purple-500, .border-purple-500\\/20 { border-color: ${m} !important; }
                .hover\\:text-purple-400:hover { color: ${m} !important; }
                .from-purple-500, .from-purple-600 { --tw-gradient-from: ${m} !important; }
                
                /* Accent color overrides */
                .text-green-400, .text-green-500 { color: ${v} !important; }
                .bg-green-400, .bg-green-500, .bg-green-600 { background-color: ${v} !important; }
                .bg-green-900\\/10 { background-color: ${v}1a !important; }
                .border-green-500, .border-green-500\\/20, .border-green-500\\/30 { border-color: ${v} !important; }
                .hover\\:text-green-400:hover { color: ${v} !important; }
                .hover\\:bg-green-400:hover, .hover\\:bg-green-500:hover { background-color: ${v} !important; }
                .shadow-green-500\\/30, .shadow-green-600\\/30 { --tw-shadow-color: ${v}4d !important; }
                
                /* Neon text effect with primary color */
                .neon-text {
                    text-shadow: 0 0 10px ${l}40, 0 0 20px ${l}20, 0 0 30px ${l}10 !important;
                }
            `}},[h?.primaryColor,h?.secondaryColor,h?.accentColor]),(0,r.useEffect)(()=>{let l=document.getElementById("light-mode-styles");if(l||(l=document.createElement("style"),l.id="light-mode-styles",document.head.appendChild(l)),t==="admin"){l.textContent="";return}g?l.textContent="":l.textContent=`
                /* Light Mode Overrides */
                body, .bg-\\[\\#050505\\], .bg-\\[\\#0a0a0a\\], .bg-\\[\\#080808\\], .bg-\\[\\#111\\], .bg-black {
                    background-color: #f8fafc !important;
                }
                .bg-\\[\\#1a1a1a\\], .bg-zinc-800 { background-color: #ffffff !important; }
                .hover\\:bg-zinc-700:hover { background-color: #e2e8f0 !important; }
                .bg-grid {
                    background-image: linear-gradient(rgba(0,0,0,0.03) 1px, transparent 1px),
                                      linear-gradient(90deg, rgba(0,0,0,0.03) 1px, transparent 1px) !important;
                }
                .text-white { color: #0f172a !important; }
                .text-white\\/50, .text-white\\/60, .text-white\\/70, .text-white\\/80 { color: #475569 !important; }
                .hover\\:text-white:hover { color: #0f172a !important; }
                .text-slate-200 { color: #334155 !important; }
                .text-slate-300, .text-slate-400, .text-slate-500, .text-slate-600 { color: #64748b !important; }
                .bg-slate-900, .bg-slate-900\\/50, .bg-slate-800 { background-color: #ffffff !important; }
                .bg-slate-900\\/30 { background-color: rgba(255,255,255,0.8) !important; }
                .border-slate-700, .border-slate-700\\/50, .border-slate-800, .border-slate-800\\/50, .border-slate-900 { 
                    border-color: #e2e8f0 !important; 
                }
                .border-white\\/5, .border-white\\/10, .border-white\\/20 { border-color: #e2e8f0 !important; }
                .fill-white { fill: #0f172a !important; }
                .stroke-white { stroke: #0f172a !important; }
                .glass {
                    background: rgba(255, 255, 255, 0.95) !important;
                    border-color: #e2e8f0 !important;
                }
                .input-cyber {
                    background-color: #f1f5f9 !important;
                    border-color: #e2e8f0 !important;
                    color: #0f172a !important;
                }
                .input-cyber::placeholder { color: #94a3b8 !important; }
                .input-cyber:focus { border-color: var(--color-primary, #f97316) !important; }
                
                /* Cards and containers */
                .rounded-\\[2rem\\], .rounded-\\[2\\.5rem\\], .rounded-\\[1\\.5rem\\] {
                    box-shadow: 0 4px 20px rgba(0,0,0,0.05) !important;
                }
                
                /* Footer */
                footer.bg-\\[\\#050505\\] { background-color: #0f172a !important; }
                footer.bg-\\[\\#050505\\] .bg-slate-900, 
                footer.bg-\\[\\#050505\\] .bg-slate-900\\/50,
                footer.bg-\\[\\#050505\\] .bg-slate-800 { background-color: rgba(255,255,255,0.06) !important; }
                footer.bg-\\[\\#050505\\] .border-slate-800 { border-color: rgba(255,255,255,0.10) !important; }
                footer .text-white { color: #ffffff !important; }
                footer .text-slate-500, footer .text-slate-400, footer .text-slate-600 { color: #94a3b8 !important; }
                
                /* Admin panel stays dark */
                [class*="admin"] .bg-\\[\\#050505\\] { background-color: #050505 !important; }
            `},[g,t]),(0,r.useEffect)(()=>{if(!Ee||!w)return;let l=[],m=!1;return l.push(pn(Ke(ae,"artifacts",w,"public","data","products"),v=>{let x=v.docs.map(E=>{let V=E.data();return{id:E.id,...V,stock:Number(V.stock)||0}});Sf(x),Be.length===0&&Wt(!1)},v=>{console.error("Error fetching products:",v),v?.code==="permission-denied"||String(v?.message||"").includes("permission")?(F("Error de permisos. Reiniciando sesin...","warning"),setTimeout(()=>{Ge.signOut().then(()=>window.location.reload())},2e3)):F("Error al cargar productos: "+(v?.message||"error"),"error")})),l.push(pn(fe(ae,"artifacts",w,"public","data","settings","config"),v=>{if(v.exists()){let x=v.data(),E=x.team||Is.team,V=x.teamRoles&&typeof x.teamRoles=="object"?x.teamRoles:Object.fromEntries((E||[]).filter(U=>U?.email&&U?.role).map(U=>[U.email.trim().toLowerCase(),U.role])),P={...Is,...x,team:E,teamRoles:V,categories:x.categories||Is.categories};K(P),Ha(!0),Vc(x.aboutUsText||Is.aboutUsText)}else K(Is),Ha(!0),Vc(Is.aboutUsText)},v=>{console.error("Error fetching settings:",v),K(Is),Ha(!0)})),l.push(pn(Ke(ae,"artifacts",w,"public","data","promos"),v=>{ja(v.docs.map(x=>({id:x.id,...x.data()})))},v=>{console.error("Error fetching promos:",v),ja([])})),l.push(pn(Ke(ae,"artifacts",w,"public","data","homeBanners"),v=>{let x=v.docs.map(E=>({id:E.id,...E.data()}));x.sort((E,V)=>{let P=Number.isFinite(Number(E.order))?Number(E.order):0,U=Number.isFinite(Number(V.order))?Number(V.order):0;if(P!==U)return P-U;let O=typeof E.createdAt=="string"?E.createdAt:"",G=typeof V.createdAt=="string"?V.createdAt:"";return O.localeCompare(G)}),Pt(x)},v=>{console.error("Error fetching homeBanners:",v),Pt([])})),l.push(pn(Ke(ae,"artifacts",w,"public","data","coupons"),v=>{Ga(v.docs.map(x=>({id:x.id,...x.data()})))},v=>{console.error("Error fetching coupons:",v),Ga([])})),l.push(pn(Ke(ae,"artifacts",w,"public","data","priceRules"),v=>{sw(v.docs.map(x=>({id:x.id,...x.data()})))},v=>{console.error("Error fetching priceRules:",v),sw([])})),()=>{m=!0,l.forEach(v=>v())}},[Ee,w]),(0,r.useEffect)(()=>{if(!w||!sl.length||!he.length)return;let l=Date.now();sl.forEach(async m=>{if(!m.active)return;let v=m.lastApplied?new Date(m.lastApplied).getTime():0,x=m.intervalUnit==="months"?m.intervalValue*30.44*24*60*60*1e3:m.intervalValue*24*60*60*1e3;if(!(l-v<x))try{let E=If(ae);(m.productIds||[]).forEach(V=>{let P=he.find(G=>G.id===V);if(!P)return;let U=Number(P.basePrice)||0,O=m.increaseType==="percent"?Math.round(U*(1+m.increaseAmount/100)):U+m.increaseAmount;E.update(fe(ae,"artifacts",w,"public","data","products",V),{basePrice:O})}),E.update(fe(ae,"artifacts",w,"public","data","priceRules",m.id),{lastApplied:new Date().toISOString()}),await E.commit()}catch(E){console.error("Error aplicando regla de precios:",E)}})},[w,sl,he]),(0,r.useEffect)(()=>{if(!w||!Ee||Ee.isAnonymous||!ot){qa(null);return}let l=wf(Ke(ae,"artifacts",w,"public","data","orders"),Nf("date","desc"),_f(1));return pn(l,m=>{let v=m.docs[0]?.data()?.date;qa(typeof v=="string"?v:null)},()=>{qa(null)})},[w,Ee?.uid,Ee?.isAnonymous,ot]),(0,r.useEffect)(()=>{if(!Ee||!w)return;let l=Ee&&!Ee.isAnonymous,m=t==="admin";if(!l){_c([]);return}let v=Ke(ae,"artifacts",w,"public","data","orders"),x;if(ot&&m){let E=[Nf("date","desc"),_f(Rr)];$o&&E.push(ck($o)),x=wf(v,...E)}else x=wf(v,lk("customerId","==",Ee.uid),Nf("date","desc"),_f(50));return pn(x,E=>{let V=E.docs.map(P=>({id:P.id,...P.data()}));if(nl(ot&&m?E.docs.length===Rr:!1),!ot){let P=U=>{if(!U)return 0;if(typeof U?.toMillis=="function")return U.toMillis();let O=Date.parse(String(U));return Number.isFinite(O)?O:0};V.sort((U,O)=>P(O.date)-P(U.date))}_c(V)},E=>{console.error("Orders Snapshot Error:",E),_c([])})},[Ee,ot,w,t,Rr,$o]);let Uk=()=>{if(!Fo||gt.length===0)return;let l=gt[gt.length-1].id;yi(fe(ae,"artifacts",w,"public","data","orders",l)).then(m=>{m.exists()&&($c(v=>[...v,$o]),Ai(m))})},jk=()=>{if(Ls.length===0)return;let l=Ls[Ls.length-1];Ai(l),$c(m=>m.slice(0,-1))};(0,r.useEffect)(()=>{if(!w)return;if(!(ot&&t==="admin")){Ts([]),Ic([]),o([]),p([]),u([]),Nc([]);return}let v=[],x=P=>U=>{console.error(`[Admin] Error cargando ${P}:`,U?.code||U?.message||U)},E=async()=>{try{let P=await Ge.currentUser?.getIdToken();if(!P){console.warn("[Admin] list-users: no auth token available");return}let U=await fetch("/api/admin?action=list-users",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${P}`,"x-store-id":w||""},body:JSON.stringify({})});if(U.ok){let O=await U.json();Array.isArray(O.users)&&Ts(O.users)}else console.error("[Admin] list-users API responded",U.status,await U.text().catch(()=>""))}catch(P){console.error("[Admin] API list-users failed:",P)}};E();let V=setInterval(E,3e4);try{v.push(pn(Ke(ae,"artifacts",w,"public","data","users"),P=>{let U=P.docs.map(O=>({id:O.id,...O.data()}));U.length>0&&Ts(U)},P=>{console.warn("[Admin] Users snapshot not available (using API polling):",P?.code||P?.message||"")}))}catch(P){console.warn("[Admin] Could not set up users snapshot:",P)}return v.push(pn(Ke(ae,"artifacts",w,"public","data","suppliers"),P=>{Ic(P.docs.map(U=>({id:U.id,...U.data()})))},x("suppliers"))),v.push(pn(Ke(ae,"artifacts",w,"public","data","expenses"),P=>{o(P.docs.map(U=>({id:U.id,...U.data()})))},x("expenses"))),v.push(pn(Ke(ae,"artifacts",w,"public","data","purchases"),P=>{p(P.docs.map(U=>({id:U.id,...U.data()})))},x("purchases"))),v.push(pn(Ke(ae,"artifacts",w,"public","data","investments"),P=>{u(P.docs.map(U=>({id:U.id,...U.data()})))},x("investments"))),v.push(pn(Ke(ae,"artifacts",w,"public","data","carts"),P=>{let U=P.docs.map(O=>({id:O.id,...O.data()})).filter(O=>O.items&&O.items.length>0);Nc(U)},x("carts"))),()=>{clearInterval(V),v.forEach(P=>P())}},[ot,w,t]);let Ff=(0,r.useMemo)(()=>{let l=new Map;for(let m of he)l.set(String(m.id).trim(),m);return l},[he]),cw=(0,r.useMemo)(()=>{let l=new Map;for(let m of _n)l.set(String(m.id).trim(),m);return l},[_n]);(0,r.useEffect)(()=>{if(!w||he.length===0||!Y||Be.length===0)return;let l=O=>Array.isArray(O)?O.map(G=>({productId:String(G?.productId||"").trim(),quantity:Number(G?.quantity)||0})).filter(G=>G.productId&&G.quantity>0):[],m=O=>l(O).map(G=>`${G.productId}:${G.quantity}`).join("|"),v=(O,G)=>{let J=Number(O),te=Number.isFinite(J)&&J>0?Math.floor(J):1;return!Number.isFinite(G)||G<=0?te:Math.max(1,Math.min(te,Math.floor(G)))},x=!1,E=[],V=[],P=[];for(let O of Be){let G=String(O.product?.id||"").trim(),J=O.product?.name||"Producto";if(O.product?.isPromo===!0||O.isPromo===!0){let xe=cw.get(G),Ne=xe||(O.product?.isPromo===!0?O.product:null);if(!Ne){x=!0,E.push(`${J} (Promo eliminada)`);continue}if(xe&&xe.isActive===!1){x=!0,E.push(`${J} (Promo no disponible)`);continue}let Pe=l(Array.isArray(O.product?.items)&&O.product.items.length>0?O.product.items:Ne.items);if(Pe.length===0){x=!0,E.push(`${J} (Promo invalida)`);continue}let Le=1/0,$t=!1;for(let Ui of Pe){let X=Ff.get(Ui.productId);if(!X||X.isActive===!1){$t=!0;break}let ue=Number(X.stock)||0,at=Math.floor(ue/Ui.quantity);at<Le&&(Le=at)}if($t){x=!0,E.push(`${J} (Componentes no validos)`);continue}if(!(Le>0)){x=!0,E.push(`${J} (Sin stock)`);continue}let zn=xe?.name||Ne?.name||J,nr=v(O.quantity,Le);nr!==Number(O.quantity||0)&&(x=!0,V.push(`${zn} (x${nr})`));let Ce={...Ne,...xe||{},id:G,isPromo:!0,items:Pe,stock:Le,basePrice:Number(xe?.price??xe?.basePrice??Ne?.price??Ne?.basePrice)||0};((O.product?.name||"")!==(Ce.name||"")||Number(O.product?.basePrice||0)!==Number(Ce.basePrice||0)||(O.product?.image||"")!==(Ce.image||"")||m(O.product?.items)!==m(Ce.items))&&(x=!0),P.push({...O,product:Ce,quantity:nr});continue}let Z=Ff.get(G);if(!Z){x=!0,E.push(`${J} (Producto eliminado)`);continue}if(Z.isActive===!1){x=!0,E.push(`${J} (No disponible actualmente)`);continue}if(!(Number(Z.stock)>0)){x=!0,E.push(`${J} (Sin stock)`);continue}let ee=v(O.quantity,Number(Z.stock)||0);ee!==Number(O.quantity||0)&&(x=!0,V.push(`${Z.name||J} (x${ee})`)),((O.product?.basePrice??0)!==Z.basePrice||(O.product?.discount??0)!==Z.discount||(O.product?.name||"")!==(Z.name||"")||(O.product?.image||"")!==(Z.image||""))&&(x=!0),P.push({...O,product:Z,quantity:ee})}if(!x||(Es(P),!xr.current))return;let U=JSON.stringify(P.map(O=>({id:String(O.product?.id||""),q:Number(O.quantity)||0,p:Number(O.product?.basePrice)||0,d:Number(O.product?.discount)||0,promo:O.product?.isPromo===!0,pi:m(O.product?.items)})));Ss.current!==U&&(Ss.current=U,br(fe(ae,"artifacts",w,"public","data","carts",Y.id),{userId:Y.id,items:Vi(P)},{merge:!0}).catch(O=>{console.error("Error syncing cart to Firestore:",O)}),E.length>0&&F(`Tu carrito se actualizo: ${E.join(", ")}`,"info"),V.length>0&&F(`Ajustamos cantidades por stock: ${V.join(", ")}`,"warning"))},[Ff,cw,he.length,Y?.id,Be,w,Vi]);let Uf=(0,r.useRef)(null);(0,r.useEffect)(()=>{if(!w||!_t||!h)return;let l=JSON.stringify(h);if(Uf.current===l)return;let m=setTimeout(async()=>{try{if(Y?.role!=="admin"){Uf.current=l;return}let Z=fe(ae,"artifacts",w,"public","data","settings","config"),ee=h?.team||Is.team,le=h?.teamRoles&&typeof h.teamRoles=="object"?h.teamRoles:Object.fromEntries((ee||[]).filter(Ne=>Ne?.email&&Ne?.role).map(Ne=>[Ne.email.trim().toLowerCase(),Ne.role])),xe={...h,teamRoles:le};await br(Z,xe,{merge:!0}),Uf.current=JSON.stringify(xe),console.log("[AutoSave] Settings saved successfully.")}catch(Z){console.error("[AutoSave] Error saving settings:",Z)}},2e3),v=(Z,ee)=>{let le=document.querySelector(Z);le&&ee&&le.setAttribute("content",ee)},x=(Z,ee)=>{let le=document.getElementById(Z);le&&ee&&le.setAttribute("content",ee)},E=(Z,ee)=>{let le=document.getElementById(Z);le&&ee&&le.setAttribute("href",ee)},V=h.seoTitle||(h.storeName?`${h.storeName} - Tienda Online`:"Tienda Online");document.title=V;let P=h.seoDescription||`${h.storeName||"Tienda"} - Tu tienda online de confianza.`;x("meta-description",P);let U=h.seoKeywords||`${h.storeName||"tienda"}, productos, comprar, envos`;x("meta-keywords",U);let O=h.seoAuthor||h.storeName||"Tienda Online";x("meta-author",O),x("meta-apple-title",h.storeName||"Tienda"),h.primaryColor&&x("meta-theme-color",h.primaryColor);let G=String(h.seoUrl||eO||(typeof window<"u"?window.location.origin:"")).trim().replace(/\/+$/,"");G&&(E("link-canonical",G),x("og-url",G),x("twitter-url",G));let J=h.seoImage||h.logoUrl||h.heroUrl||"";x("og-title",V),x("og-description",P),x("og-site-name",h.storeName||"Tienda Online"),J&&x("og-image",J),x("twitter-title",V),x("twitter-description",P),J&&x("twitter-image",J);let te=document.getElementById("dynamic-favicon")||document.querySelector("link[rel*='icon']");if(te)if(h.logoUrl){let Z=new Image;Z.crossOrigin="Anonymous",Z.onload=()=>{try{let ee=document.createElement("canvas");ee.width=64,ee.height=64;let le=ee.getContext("2d");le.beginPath(),le.arc(32,32,32,0,Math.PI*2),le.closePath(),le.clip(),le.drawImage(Z,0,0,64,64),te.href=ee.toDataURL("image/png")}catch{te.href=h.logoUrl}},Z.onerror=()=>{te.href=h.logoUrl},Z.src=h.logoUrl}else te.href="/icon-192.png";return console.log("[SEO & AutoSave] Updated and Autosaved."),()=>clearTimeout(m)},[h,_t,Y?.role]);let zk=async l=>{Wt(!0);try{let m=String(De.email||"").trim().toLowerCase()===String(Qe||"").trim().toLowerCase(),v=String(window.location.hostname||"").trim().toLowerCase(),x=v==="localhost"||v==="127.0.0.1"||v==="::1";if(!w&&!m)throw new Error("Tienda no configurada para este dominio.");let E=w?["artifacts",w,"public","data","users"]:null,V=async O=>{if(!E)return null;let G=await yi(fe(ae,...E,O));return G.exists()?{id:G.id,...G.data()}:null},P=async(O,G=null)=>{if(!w)return;let J=G&&typeof G=="object"?G:{name:De.name,username:De.username.trim().toLowerCase(),dni:De.dni,phone:De.phone},te=await O.getIdToken(),Z=await fetch("/api/auth/setup-profile",{method:"POST",headers:{"Content-Type":"application/json","x-store-id":w||"",Authorization:`Bearer ${te}`},body:JSON.stringify(J)}),ee=await Z.json().catch(()=>({}));if(!Z.ok){let le=new Error(ee.error||"Error al crear el perfil");throw ee?.code&&(le.code=ee.code),le}},U=async O=>{if(!w)return;let G=await O.getIdToken();await fetch("/api/auth/claim-legacy-profile",{method:"POST",headers:{"Content-Type":"application/json","x-store-id":w||"",Authorization:`Bearer ${G}`},body:JSON.stringify({})})};if(l){let O=De.name.trim(),G=De.email.trim().toLowerCase(),J=De.username.trim().toLowerCase(),te=De.dni.trim(),Z=De.phone.trim(),{requireDni:ee,requirePhone:le}=Qt;if(!O||O.length<3)throw new Error("El nombre es muy corto.");if(!tO.test(J))throw new Error("El usuario debe tener 3-32 caracteres y solo puede incluir letras, numeros, punto, guion o guion bajo.");if(!G||!G.includes("@"))throw new Error("Email invlido.");if(!De.password||De.password.length<6)throw new Error("La contrasea debe tener al menos 6 caracteres.");let xe=Ef({dni:te,phone:Z,requireDni:ee,requirePhone:le});if(!xe.ok)throw new Error(xe.message);let Ne=await Pv(Ge,G,De.password),Pe={id:Ne.user.uid,name:O,email:G,emailLower:G,role:String(G).trim().toLowerCase()===String(Qe||"").trim().toLowerCase()?"admin":"user"};if(!E){tn(Pe),e("store"),Ln({email:"",password:"",name:"",username:"",dni:"",phone:""}),F("Cuenta creada exitosamente! Bienvenido.","success");return}try{await P(Ne.user,{name:O,username:J,dni:te,phone:Z});let Le=await V(Ne.user.uid);if(!Le)throw new Error("No se pudo completar tu perfil. Intenta nuevamente.");let $t=String(Le?.emailLower||Le?.email||"").trim().toLowerCase(),zn=String(Qe||"").trim().toLowerCase(),nr=zn&&$t===zn?{...Le,role:"admin"}:Le;tn(nr),e("store"),Ln({email:"",password:"",name:"",username:"",dni:"",phone:""}),F("Cuenta creada exitosamente! Bienvenido.","success")}catch(Le){console.error("Error setup profile (register):",Le);try{await Ge.signOut()}catch{}try{await Ne.user.delete()}catch{}throw Le}return}else{let O=De.email.trim();if(!O)throw new Error("Ingresa tu email.");if(!De.password)throw new Error("Ingresa tu contrasena.");if(!O.includes("@"))throw new Error("Usa tu email para iniciar sesion.");let G=O.toLowerCase(),J=String(De.password||""),te=null;try{te=(await bp(Ge,G,J)).user}catch(Z){let ee=Z?.code||"";if(ee==="auth/user-not-found"||new Set(["auth/invalid-credential","auth/invalid-login-credentials"]).has(ee)){let xe=await fetch("/api/auth/legacy-login",{method:"POST",headers:{"Content-Type":"application/json","x-store-id":w||""},body:JSON.stringify({identifier:G,password:J})}),Ne=await xe.text().catch(()=>""),Pe={};try{Pe=Ne?JSON.parse(Ne):{}}catch{Pe={}}if(!xe.ok||!Pe?.token){if(xe.status===401)throw/<html/i.test(Ne)||/login\s*\s*vercel/i.test(Ne)||/vercel/i.test(Ne)?new Error("Tu despliegue est respondiendo 401 (Vercel protegido). Desactiv Deployment Protection / Vercel Authentication o hac el sitio pblico."):new Error("Credenciales incorrectas.");if(Pe?.code==="firebase_admin_not_configured")throw new Error(Pe.error||"Backend no configurado (Firebase Admin)");if(xe.status===429)throw new Error(Pe.error||"Demasiados intentos. Intenta nuevamente en unos minutos.");if(m){if(!x)throw new Error("El Super Admin no se inicializa desde Vercel. Crealo en Firebase Auth (Authentication > Users) o inicializalo en localhost.");let Le=await fetch("/api/auth/bootstrap-super-admin",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:G,password:J})});if(Le.ok)te=(await bp(Ge,G,J)).user;else{let $t=await Le.json().catch(()=>({}));throw new Error($t?.error||"No se pudo inicializar el Super Admin")}}if(!te)throw new Error(Pe.error||"No se pudo recuperar tu cuenta legacy")}!te&&Pe?.token&&(te=(await gp(Ge,Pe.token)).user)}else throw ee==="auth/wrong-password"?new Error("La contrasea es incorrecta."):ee==="auth/too-many-requests"?new Error("Demasiados intentos fallidos. Intenta ms tarde o restablece tu contrasea."):ee==="auth/network-request-failed"?new Error("No se pudo conectar con el servidor. Verifica tu conexin e intenta nuevamente."):Z}if(!te)throw new Error("Error al iniciar sesin");if(!E){let Z=String(te.email||G).toLowerCase(),ee=String(Qe||"").trim().toLowerCase();tn({id:te.uid,name:te.displayName||"Usuario",email:te.email||G,emailLower:(te.email||G).toLowerCase(),role:ee&&Z===ee?"admin":"user"}),F("Sesin iniciada. Vincul el dominio para cargar la tienda.","success"),e("store"),Ln({email:"",password:"",name:"",username:"",dni:"",phone:""});return}tn({id:te.uid,name:te.displayName||"Usuario",email:te.email||G,emailLower:(te.email||G).toLowerCase(),role:String(te.email||G).trim().toLowerCase()===String(Qe||"").trim().toLowerCase()?"admin":"user"}),e("store"),Ln({email:"",password:"",name:"",username:"",dni:"",phone:""}),Wt(!1),F("Hola de nuevo!","success"),(async()=>{try{let Z=await V(te.uid);if(Z||(await U(te),Z=await V(te.uid)),!Z){let Ne={name:te.displayName||"Usuario",email:te.email||G,emailLower:(te.email||G).toLowerCase(),role:String(te.email||G).trim().toLowerCase()===String(Qe||"").trim().toLowerCase()?"admin":"user",createdAt:new Date().toISOString()};await br(fe(ae,...E,te.uid),Ne,{merge:!0}),Z=await V(te.uid)}if(await Nt(fe(ae,...E,te.uid),{lastLogin:new Date().toISOString()}).catch(()=>{}),!Z)return;let ee=String(Z?.emailLower||Z?.email||"").trim().toLowerCase(),le=String(Qe||"").trim().toLowerCase(),xe=le&&ee===le?{...Z,role:"admin"}:Z;tn(xe)}catch(Z){console.error("Error load profile (background):",Z)}})();return}}catch(m){console.error("Error de autenticacin:",m);let v=String(m?.code||"");v==="auth/network-request-failed"?F("No se pudo conectar con el servidor. Verifica tu conexin e intenta nuevamente.","error"):v==="auth/email-already-in-use"?F("Ese email ya est registrado. Inicia sesin o recupera la contrasea.","warning"):v==="auth/invalid-email"?F("Email invlido. Revisa el formato e intenta nuevamente.","warning"):F(m.message||"Error de autenticacin","error")}finally{Wt(!1)}},Bk=async()=>{tn(null),e("store");try{await Ge.signOut()}catch(l){console.error("Error al cerrar sesin:",l)}},qk=async()=>{let l=String(De.email||"").trim().toLowerCase();if(!l||!l.includes("@")){F("Ingresa tu email (vlido) en el campo de arriba para recuperar la contrasea.","warning");return}Wt(!0);try{let m=await fetch("/api/auth/reset-password",{method:"POST",headers:{"Content-Type":"application/json","x-store-id":w||""},body:JSON.stringify({email:l})}),v=await m.json().catch(()=>({}));if(!m.ok)throw new Error(v.error||"Error al enviar el email");F(`Listo! Enviamos el link de recuperacin a ${l}. Revis tu email.`,"success")}catch(m){console.error("Error reset pass:",m),F(m?.message||"Error al enviar el email de recuperacin.","error")}finally{Wt(!1)}},uw=async l=>{if(!Y){F("Debes iniciar sesin para guardar favoritos.","info");return}let m=Y.favorites||[],v=m.includes(l.id),x=[];v?(x=m.filter(E=>E!==l.id),F("Eliminado de tus favoritos.","info")):(x=[...m,l.id],F("Guardado en favoritos!","success")),tn(E=>({...E,favorites:x}));try{let E=fe(ae,"artifacts",w,"public","data","users",Y.id);await Nt(E,{favorites:x})}catch(E){console.error("Error guardando favorito:",E)}},Mi=(l,m)=>{Es(v=>{let x=v.findIndex(U=>U.product.id===l.id),V=(x>=0?v[x].quantity:0)+m,P=0;if(l.isPromo){let U=1/0;l.items.forEach(O=>{let G=he.find(Z=>Z.id===O.productId),J=G&&Number(G.stock)||0,te=Math.floor(J/O.quantity);te<U&&(U=te)}),P=U}else P=Number(l.stock);if(V>P)return F(`Lo sentimos, el stock mximo disponible es ${P}.`,"warning"),v;if(V<=0)return x>=0?(F("Producto eliminado del carrito.","info"),v.filter(U=>U.product.id!==l.id)):v;if(x>=0){let U=[...v];return U[x]={...U[x],quantity:V},U}else return F("Producto agregado al carrito!","success"),[...v,{product:l,quantity:V}]})},Jd=l=>{let m=Number(l);return Number.isFinite(m)?Math.min(100,Math.max(0,m)):0},$i=(l,m)=>{let v=Number(l)||0,x=Jd(m);if(x<=0)return v;let E=v*(1-x/100);return Math.ceil(E)},Gk=(l,m)=>{let v=Number(l)||0;return v<=0?0:Math.max(0,v-$i(v,m))},Sr=(0,r.useMemo)(()=>Be.reduce((l,m)=>{let v=$i(m.product?.basePrice??0,m.product?.discount??0);return l+v*(m.quantity||0)},0),[Be]),dw=(l,m)=>{if(!m||m.expirationDate&&new Date(m.expirationDate)<new Date)return 0;let v=0;return m.type==="fixed"?(v=m.value,v>l&&(v=l)):m.type==="percentage"&&(v=l*(m.value/100),m.maxDiscount&&m.maxDiscount>0&&v>m.maxDiscount&&(v=m.maxDiscount)),Math.ceil(v)},Hk=(l,m)=>{let v=(l||"").trim();if(!v)return null;try{let x=new URL(v);return x.searchParams.set("text",m),x.toString()}catch{let x=v.replace(/[^\d]/g,"");return x?`https://wa.me/${x}?text=${encodeURIComponent(m)}`:null}},Wk=l=>{if(!l||l.targetType==="specific_email"&&Y?.email&&l.targetUser&&l.targetUser.toLowerCase()!==Y.email.toLowerCase()||l.expirationDate&&new Date(l.expirationDate)<new Date)return!1;let m=Array.isArray(l.usedBy)?l.usedBy:[];return!(l.usageLimit&&m.length>=l.usageLimit||Y?.id&&m.includes(Y.id)||Sr<(l.minPurchase||0)||!Y?.dni)},Kk=()=>{let l=h?.currency||"$",m=h?.storeName||"la tienda",v=[];if(v.push(`Hola, quiero terminar mi compra por WhatsApp en ${m}.`),Y?.name){let G=[Y.name];Y.email&&G.push(Y.email),Y.phone&&G.push(Y.phone),v.push(`Cliente: ${G.join(" - ")}`)}else Y?.email&&v.push(`Cliente: ${Y.email}`);v.push(""),v.push("Mi carrito:"),Be.forEach(G=>{let J=G.product?.name||"Producto",te=Number(G.quantity)||0,Z=$i(G.product?.basePrice??0,G.product?.discount??0),ee=Math.ceil(Z*te);v.push(`- ${te} x ${J}  ${l}${Z.toLocaleString()} c/u  ${l}${ee.toLocaleString()}`)});let x=Wk(fn)?fn:null,E=x?dw(Sr,x):0,V=Math.max(0,Number(Sr)||0),P=Math.max(0,Number(zo)||0),U=Math.max(0,V-E+P);v.push(""),v.push(`Subtotal: ${l}${V.toLocaleString()}`),x&&E>0&&(v.push(`Cupn: ${x.code}`),v.push(`Descuento: -${l}${E.toLocaleString()}`));let O=pe.shippingMethod==="Delivery"?"Envo a domicilio":"Retiro en local";return v.push(`${O}: ${P>0?`${l}${P.toLocaleString()}`:"Gratis"}`),v.push(`Total estimado: ${l}${U.toLocaleString()}`),v.join(`
`)},Xd=fn?dw(Sr,fn):0,zo=(0,r.useMemo)(()=>{if(pe.shippingMethod!=="Delivery")return 0;let l=h?.shippingDelivery;return!l?.enabled||l.freeAbove>0&&Sr>=l.freeAbove?0:Number(l.fee)||0},[pe.shippingMethod,Sr,h?.shippingDelivery]),Bo=Math.max(0,Sr-Xd+zo),Zd=Number(ge.basePrice)||0,il=Jd(ge.discount),Qk=$i(Zd,il),vO=Gk(Zd,il),Yk=async l=>{if(l.targetType==="specific_email"&&Y?.email&&l.targetUser&&l.targetUser.toLowerCase()!==Y.email.toLowerCase())return F("Este cupn no est disponible para tu cuenta.","error");if(l.expirationDate&&new Date(l.expirationDate)<new Date)return F("Este cupn ha vencido.","error");let m=Array.isArray(l.usedBy)?l.usedBy:[];if(l.usageLimit&&m.length>=l.usageLimit)return F("Este cupn ha agotado sus usos totales.","error");if(Y?.id&&m.includes(Y.id))return F("Ya usaste este cupn anteriormente.","error");if(Sr<(l.minPurchase||0))return F(`El monto mnimo para este cupn es $${l.minPurchase}.`,"warning");if(!Y?.dni)return F("Debes actualizar tu DNI en el perfil para usar cupones.","warning");Jr(l),Vo(!1);let v="Cupn aplicado correctamente!";l.type==="percentage"&&l.maxDiscount>0&&(v+=` (Tope de reintegro: $${l.maxDiscount})`),F(v,"success")},hw=(0,r.useCallback)(async()=>{let l=Ge.currentUser;if(l&&!l.isAnonymous)return l;let m=await new Promise(v=>{let x=null,E=setTimeout(()=>{x&&x(),v(Ge.currentUser)},1200);x=vp(Ge,V=>{clearTimeout(E),x(),v(V)})});return m&&!m.isAnonymous?m:null},[]),Jk=async()=>{if(!Wr)try{let l=await hw();if(!l)return e("login"),F("Por favor inicia sesin para finalizar la compra.","info");let m=Y;if(!m&&w)try{let U=await yi(fe(ae,"artifacts",w,"public","data","users",l.uid));if(U.exists()){let O={id:U.id,...U.data()};O.role==="admin"&&(O._adminVerified=!0),tn(O),m=O}}catch{}if(!m)return e("login"),F("Por favor inicia sesin para finalizar la compra.","info");let v=Ef({dni:m.dni,phone:m.phone,requireDni:Qt.requireDni,requirePhone:Qt.requirePhone});if(!String(m.name||"").trim()||!v.ok){e("profile");let U=Xy(Qt);return F(`Por favor completa tus datos personales (${U}) en tu perfil antes de comprar.`,"warning")}if(pe.shippingMethod==="Delivery"&&(!pe.address||!pe.city||!pe.province||!pe.zipCode))return F("Por favor completa TODOS los datos de envo.","warning");if(!pe.paymentChoice)return F("Selecciona un mtodo de pago.","warning");if(pe.paymentChoice==="Tarjeta")throw new Error("Para pagar con tarjeta us el formulario de Mercado Pago.");wi(!0),F("Procesando tu pedido, por favor espera...","info");let E=await l.getIdToken(!0),V=await fetch("/api/orders/confirm",{method:"POST",headers:{"Content-Type":"application/json","x-store-id":w||"",Authorization:`Bearer ${E}`},body:JSON.stringify({paymentMethod:pe.paymentChoice,shippingMethod:pe.shippingMethod,shipping:{address:pe.address,city:pe.city,province:pe.province,zipCode:pe.zipCode,fee:zo},couponCode:fn?.code||null,cart:Be.map(U=>({productId:U.product?.id,quantity:U.quantity,isPromo:U.product?.isPromo===!0,promoItems:Array.isArray(U.product?.items)?U.product.items.map(O=>({productId:String(O?.productId||"").trim(),quantity:Number(O?.quantity)||0})).filter(O=>O.productId&&O.quantity>0):[]}))})}),P=await V.json().catch(()=>({}));if(V.status===401)throw e("login"),new Error("Tu sesin venci. Inici sesin nuevamente para finalizar la compra.");if(!V.ok)throw new Error(P.error||"Error al procesar el pedido");Es([]),Jr(null),e("profile"),F("Pedido realizado con xito! Te enviamos un email con el detalle.","success")}catch(l){console.error("Error al procesar pedido:",l),F(l.message||"Ocurri un error al procesar el pedido.","error")}finally{wi(!1)}},mw=(l,m="")=>{let v=String(l||"").trim(),x={cc_rejected_other_reason:"El emisor rechaz la operacin. Prob con otra tarjeta o medio de pago, o contact a tu banco.",cc_rejected_high_risk:"El pago fue rechazado por controles de seguridad de Mercado Pago. Te recomendamos probar con otra tarjeta o medio de pago.",cc_rejected_insufficient_amount:"Tu tarjeta no tiene fondos suficientes.",cc_rejected_bad_filled_other:"Revis los datos de tu tarjeta.",cc_rejected_bad_filled_date:"La fecha de vencimiento es incorrecta.",cc_rejected_bad_filled_security_code:"El cdigo de seguridad es incorrecto.",cc_rejected_call_for_authorize:"Debs autorizar el pago llamando a tu banco.",cc_rejected_card_disabled:"Tu tarjeta est inactiva. Llam a tu banco para activarla.",cc_rejected_max_attempts:"Llegaste al lmite de intentos permitidos. Us otra tarjeta.",cc_rejected_duplicated_payment:"Ya hiciste un pago similar recientemente. Esper unos minutos."},E=String(m||"").trim(),V=x[v];return V?{message:V,code:v}:E?{message:E,code:v||""}:v?{message:"El pago fue rechazado. Prob con otra tarjeta o medio de pago.",code:v}:{message:"No se pudo procesar el pago. Intent nuevamente.",code:""}},pw=(0,r.useCallback)((l=Be)=>(Array.isArray(l)?l:[]).map(v=>({productId:v.product?.id,quantity:v.quantity,isPromo:v.product?.isPromo===!0,promoItems:Array.isArray(v.product?.items)?v.product.items.map(x=>({productId:String(x?.productId||"").trim(),quantity:Number(x?.quantity)||0})).filter(x=>x.productId&&x.quantity>0):[]})).filter(v=>String(v.productId||"").trim()&&Number(v.quantity)>0),[Be]),jf=(0,r.useCallback)((l,m={})=>{let v=m?.checkoutData&&typeof m.checkoutData=="object"?m.checkoutData:pe,x=Number.isFinite(Number(m?.shippingFee))?Number(m.shippingFee):Number(zo)||0,E=m?.couponCode!==void 0?m.couponCode:fn?.code||null,V=Array.isArray(m?.cart)?m.cart:Be;return{paymentMethod:"Tarjeta",mpPaymentId:String(l||"").trim(),shippingMethod:String(v?.shippingMethod||"").trim(),shipping:{address:String(v?.address||""),city:String(v?.city||""),province:String(v?.province||""),zipCode:String(v?.zipCode||""),fee:x},couponCode:E?String(E).trim():null,cart:pw(V)}},[fn?.code,pw,Be,pe,zo]),fw=(0,r.useCallback)(l=>{let m=Ek(l);nw(m),Lf(String(m?.mpPaymentId||"").trim())},[]),Hc=(0,r.useCallback)(()=>{nw(null),Lf("")},[]),es=(0,r.useCallback)(async({keepInitializing:l=!1}={})=>{let m=jo.current;if(jo.current=null,m&&typeof m.unmount=="function")try{await m.unmount()}catch{}Er(null),l||(bn.current=!1)},[]),zf=async({force:l=!1}={})=>{if(l&&($s.current=!1),!l&&$s.current||jo.current&&!l)return;if(bn.current){if(Date.now()-(rw.current||0)<25e3)return;bn.current=!1,await es()}if(sn(!1),ht(null),console.log(" Mercado Pago: Iniciando Brick. Total a cobrar:",Bo),!window.MercadoPago)try{await(async()=>{window.MercadoPago||await new Promise((O,G)=>{let J=document.createElement("script");J.src="https://sdk.mercadopago.com/js/v2",J.async=!0,J.onload=O,J.onerror=G,document.head.appendChild(J)})})()}catch{ht({message:"No se pudo cargar el sistema de pagos. Intent nuevamente."});return}let m=Number(parseFloat(Bo).toFixed(2));if(isNaN(m)||m<=0){console.error(" Error: Monto invlido para pago:",Bo);return}if(!document.getElementById("cardPaymentBrick_container"))return;bn.current=!0,rw.current=Date.now();let x=setTimeout(()=>{bn.current&&(console.warn(" Mercado Pago: La inicializacin est tardando demasiado. Liberando bloqueo..."),bn.current=!1,$s.current=!0,ht({message:'El formulario de tarjeta tard demasiado en cargar. Toc "Reintentar Pago".'}))},2e4);await es({keepInitializing:!0}),ht(null);let E=await rO(w||"");if(!E){bn.current=!1,clearTimeout(x),ht({message:"Mercado Pago no est configurado. Verific la clave pblica en el servidor."});return}let P=new window.MercadoPago(E,{locale:"es-AR"}).bricks(),U=O=>{if(!O)return"";if(typeof O=="string")return O;if(typeof O.message=="string"&&O.message.trim())return O.message;if(Array.isArray(O.cause)){let G=O.cause.find(J=>J&&typeof J.message=="string"&&J.message.trim());if(G&&G.message)return String(G.message)}return""};try{let O=await P.create("cardPayment","cardPaymentBrick_container",{initialization:{amount:m},customization:{visual:{style:{theme:"default",customVariables:{formBackgroundColor:g?"#0f172a":"#ffffff",baseColor:"#f97316",borderRadiusMedium:"12px",borderRadiusLarge:"16px",textPrimaryColor:g?"#f8fafc":"#0f172a",textSecondaryColor:g?"#cbd5e1":"#334155",inputBackgroundColor:g?"#1e293b":"#f8fafc"}}},paymentMethods:{maxInstallments:12}},callbacks:{onReady:()=>{console.log(" Mercado Pago: Card Payment Brick cargado."),bn.current=!1,$s.current=!1,clearTimeout(x)},onSubmit:async G=>{console.log(" Mercado Pago: Procesando pago...");let J="";if(sn(!0),ht(null),Hc(),!G?.token){sn(!1),ht({message:"Error en los datos de la tarjeta. Por favor intent nuevamente."}),F("Error al procesar los datos de la tarjeta.","error");return}try{let te=await fetch("/api/checkout",{method:"POST",headers:{"Content-Type":"application/json","x-store-id":w||""},body:JSON.stringify({action:"process_payment",paymentData:{token:G.token,transaction_amount:m,description:`Compra en ${h?.storeName||"Tienda Online"}`,installments:G?.installments||1,payment_method_id:G?.payment_method_id||"",issuer_id:G?.issuer_id||""},payer:{email:Y?.email||"sin-email@tienda.com",identificationType:G?.payer?.identification?.type||"DNI",identificationNumber:G?.payer?.identification?.number||"00000000"}})}),Z=await te.json().catch(()=>({}));if(console.log(" Respuesta:",Z),!te.ok){let ee=String(Z?.status_detail||Z?.code||"").trim(),le=String(Z?.error||Z?.message||"").trim()||`Error procesando pago (${te.status})`,xe=mw(ee,le);sn(!1),ht({message:xe.message,code:xe.code||ee||""}),F("El pago no se pudo completar. Revis los detalles.","error");return}if(Z.status==="approved"){if(J=String(Z?.id||"").trim(),!J){sn(!1),ht({message:"Pago aprobado sin identificador. Contact soporte."}),F("Error al validar el pago aprobado.","error");return}let ee={mpPaymentId:J,uid:String(Ee?.uid||Y?.id||"").trim(),createdAt:new Date().toISOString(),confirmationPayload:jf(J)};fw(ee),await Bf(J,{confirmationPayload:ee.confirmationPayload}),F("Compra realizada!","success"),sn(!1),Hc(),bn.current=!1,await es()}else if(Z.status==="in_process"||Z.status==="pending")sn(!1),bn.current=!1,Hc(),ht({message:"El pago qued pendiente. An no se confirm el pedido. Si no se acredita en unos minutos, contact soporte.",code:String(Z.status||"").trim()}),F("Pago pendiente: todava no se confirm el pedido.","warning");else{let ee=mw(Z.status_detail,Z.error||Z.status||"Pago rechazado");console.error(" Motivo del rechazo:",ee.code||ee.message),await es(),bn.current=!1,sn(!1),Hc(),ht({message:ee.message,code:ee.code||""}),F("El pago no se pudo completar. Revis los detalles.","error")}}catch(te){console.error(" Error procesando pago:",te),sn(!1);let Z=String(te?.message||"").trim(),ee=/failed to fetch|networkerror|load failed|fetch/i.test(Z),le=J||Wd;if(le){J&&fw({mpPaymentId:le,uid:String(Ee?.uid||Y?.id||"").trim(),createdAt:new Date().toISOString(),confirmationPayload:jf(le)}),ht({message:`${Z&&!ee?Z:"No se pudo confirmar el pedido despus del pago."} Pods reintentar la confirmacin sin volver a pagar.`,code:String(te?.code||"").trim(),canRetryConfirmation:!0}),F("Pago recibido. Reintent confirmar el pedido.","warning");return}if(Z&&!ee){ht({message:Z}),F("No se pudo procesar el pago. Revis los detalles.","error");return}ht({message:"Error de conexin con el servidor. Revis tu internet e intent de nuevo."}),F("Error de conexin.","error")}},onError:G=>{console.error(" Mercado Pago Error:",G),bn.current=!1,$s.current=!0,clearTimeout(x);let J=U(G).toLowerCase();if(!J.includes("melidata")){if(J.includes("content security policy")||J.includes("csp")){ht({message:"El navegador bloque recursos de Mercado Pago por CSP. Recarg y verific la configuracin de seguridad del dominio."}),es();return}ht({message:"Error en el formulario. Verific tus claves de produccin."}),es()}}}});jo.current=O,Er(O)}catch(O){console.error("Error creating brick:",O),bn.current=!1,$s.current=!0,clearTimeout(x),F("Error al cargar el formulario de pago.","error"),await es()}},Bf=async(l,m={})=>{let v=await hw();if(!v)throw new Error("Sesin invlida. Reinici e intent de nuevo.");let x=jn?.confirmationPayload&&typeof jn.confirmationPayload=="object"?jn.confirmationPayload:null,E=m?.confirmationPayload&&typeof m.confirmationPayload=="object"?m.confirmationPayload:null,P={...jf(l),...x||{},...E||{}},U=String(l||P?.mpPaymentId||jn?.mpPaymentId||"").trim();if(!U)throw new Error("No se encontr un identificador de pago para confirmar.");let O={paymentMethod:"Tarjeta",mpPaymentId:U,shippingMethod:String(P?.shippingMethod||"").trim()||"Pickup",shipping:{address:String(P?.shipping?.address||""),city:String(P?.shipping?.city||""),province:String(P?.shipping?.province||""),zipCode:String(P?.shipping?.zipCode||""),fee:Number(P?.shipping?.fee)||0},couponCode:P?.couponCode?String(P.couponCode).trim():null,cart:Array.isArray(P?.cart)?P.cart:[]},G=await v.getIdToken(!0),J=await fetch("/api/orders/confirm",{method:"POST",headers:{"Content-Type":"application/json","x-store-id":w||"",Authorization:`Bearer ${G}`},body:JSON.stringify(O)}),te=J.clone(),Z=await J.json().catch(async()=>{let ee=await te.text().catch(()=>""),le=String(ee||"").trim();return le?{error:le.slice(0,400)}:{}});if(J.status===401)throw new Error("Tu sesin venci. Inici sesin nuevamente e intent otra vez.");if(!J.ok){let ee=String(Z?.compensation||"").trim(),le=Z.error||"Error guardando el pedido";ee==="refund_initiated"?le=`${le}. Se inici un reintegro automtico del pago.`:ee==="refund_failed"&&(le=`${le}. El reintegro automtico fall; contact soporte de inmediato.`);let xe=new Error(le);throw xe.code=Z?.code||"",xe}Es([]),Jr(null),Hc(),await es(),m?.redirectOnSuccess!==!1&&e("profile")},Xk=async()=>{let l=String(Wd||jn?.mpPaymentId||"").trim();if(!l){ht(null),zf({force:!0});return}sn(!0);try{await Bf(l,{confirmationPayload:jn?.confirmationPayload||null}),ht(null),F("Pedido confirmado correctamente.","success")}catch(m){let v=String(m?.message||"").trim()||"No se pudo confirmar el pedido.";ht({message:`${v} Pods volver a reintentar esta confirmacin.`,code:String(m?.code||"").trim(),canRetryConfirmation:!0}),F("Todava no se pudo confirmar el pedido.","error")}finally{sn(!1)}},qf=(0,r.useRef)("");(0,r.useEffect)(()=>{let l=jn,m=String(l?.mpPaymentId||"").trim();if(!m){qf.current="";return}if(!Ee||Ee.isAnonymous)return;let v=String(l?.uid||"").trim();v&&v!==String(Ee.uid||"").trim()||qf.current!==m&&(qf.current=m,(async()=>{try{await Bf(m,{confirmationPayload:l?.confirmationPayload||null,redirectOnSuccess:!1}),ht(null),F("Recuperamos y confirmamos tu pedido pendiente.","success")}catch(x){let E=String(x?.message||"").trim()||"No se pudo confirmar el pedido pendiente.";ht({message:`${E} Pods reintentar la confirmacin sin volver a pagar.`,code:String(x?.code||"").trim(),canRetryConfirmation:!0})}})())},[jn,Ee?.uid,Ee?.isAnonymous]),(0,r.useEffect)(()=>{let l=t==="checkout",m=pe.paymentChoice==="Tarjeta";if(l&&m&&Bo>0&&Y&&Be.length>0){let v=Ef({dni:Y.dni,phone:Y.phone,requireDni:Qt.requireDni,requirePhone:Qt.requirePhone});if(!String(Y.name||"").trim()||!v.ok){let V=Xy(Qt);F(`Por favor complet tus datos personales (${V}) antes de pagar con tarjeta.`,"warning"),e("profile");return}if(jo.current||bn.current||$s.current)return;let E=setTimeout(()=>{document.getElementById("cardPaymentBrick_container")&&!jo.current&&!bn.current&&!$s.current&&zf()},300);return()=>clearTimeout(E)}else(jo.current||Ms)&&(!l||!m)&&(console.log("Sweep: Limpiando Brick por cambio de vista o mtodo."),$s.current=!1,es(),jn?.mpPaymentId||Lf(""))},[pe.paymentChoice,Bo,Y?.id,Y?.name,Y?.phone,Y?.dni,Be.length,t,jn?.mpPaymentId,es,Qt.requireDni,Qt.requirePhone]);let Zk=async()=>{if(!ge.name)return F("El nombre del producto es obligatorio.","warning");let l=30,m=50;if(!Mo){let P=h?.subscriptionPlan||"entrepreneur",U=P==="entrepreneur",O=P==="business";if(U&&he.length>=l)return F(`Has alcanzado el lmite de ${l} productos del Plan Emprendedor. Mejora tu plan para seguir creciendo!`,"error");if(O&&he.length>=m)return F(`Has alcanzado el lmite de ${m} productos del Plan Negocio. Psate a Premium para productos ilimitados!`,"error")}if(!ge.basePrice||Number(ge.basePrice)<=0)return F("El precio debe ser mayor a 0.","warning");let v=Array.isArray(ge.categories)?ge.categories:ge.category?[ge.category]:[];if(v.length===0)return F("Selecciona al menos una categora.","warning");let x=Array.isArray(ge.images)?ge.images.filter(Boolean):[],E=x.length>0?x[0]:ge.image||"https://via.placeholder.com/150",V={...ge,categories:v,basePrice:Number(ge.basePrice)||0,purchasePrice:Number(ge.purchasePrice||0),stock:Number(ge.stock)||0,discount:Jd(ge.discount),image:E,images:x.length>0?x:ge.image?[ge.image]:[],lastUpdated:new Date().toISOString()};"category"in V&&delete V.category;try{Mo?(await Nt(fe(ae,"artifacts",w,"public","data","products",Mo),V),F("Producto actualizado correctamente.","success")):(await Gr(Ke(ae,"artifacts",w,"public","data","products"),{...V,createdAt:new Date().toISOString()}),F("Producto creado correctamente.","success")),jt({name:"",basePrice:"",purchasePrice:"",stock:"",categories:[],image:"",images:[],description:"",discount:0}),Za(null),Ra(!1)}catch(P){console.error(P),F("Error al guardar el producto.","error")}},gw={image:{maxWidth:800,maxHeight:800,quality:.8,minQuality:.7,qualityStep:.04,outputType:"image/jpeg",maxBytes:450*1024},imageUrl:{maxWidth:2400,maxHeight:2400,quality:.9,minQuality:.78,qualityStep:.03,outputType:"image/jpeg",maxBytes:900*1024},heroUrl:{maxWidth:2400,maxHeight:2400,quality:.9,minQuality:.78,qualityStep:.03,outputType:"image/jpeg",maxBytes:900*1024},seoImage:{maxWidth:1200,maxHeight:1200,quality:.86,minQuality:.72,qualityStep:.04,outputType:"image/jpeg",maxBytes:500*1024},logoUrl:{maxWidth:900,maxHeight:900,quality:.92,minQuality:.84,qualityStep:.04,outputType:"image/png",maxBytes:500*1024},botImage:{maxWidth:300,maxHeight:300,quality:.85,minQuality:.75,qualityStep:.05,outputType:"image/jpeg",maxBytes:180*1024}},Rd=(l="")=>{let m=String(l).split(",")[1]||"";return Math.ceil(m.length*3/4)},Rk=(l,m)=>{let v=gw[l]||gw.image,x=typeof m=="number"&&Number.isFinite(m)&&m>0,E=!x&&m&&typeof m=="object"?m:{},V=x?m:Number(E.maxWidth??v.maxWidth??800),P=Number(E.maxHeight??v.maxHeight??V),U=Number(E.quality??v.quality??.8),O=Number(E.minQuality??v.minQuality??.7),G=Number(E.qualityStep??v.qualityStep??.04),J=String(E.outputType??v.outputType??"image/jpeg"),te=Number(E.maxBytes??v.maxBytes??850*1024);return{maxWidth:Number.isFinite(V)&&V>0?V:800,maxHeight:Number.isFinite(P)&&P>0?P:800,quality:Number.isFinite(U)?Math.min(1,Math.max(.1,U)):.8,minQuality:Number.isFinite(O)?Math.min(1,Math.max(.1,O)):.7,qualityStep:Number.isFinite(G)?Math.min(.3,Math.max(.01,G)):.04,outputType:J,maxBytes:Number.isFinite(te)&&te>0?te:850*1024}},qo=(l,m,v="image",x)=>{let E=l.target.files?.[0];if(!E)return;if(!E.type.startsWith("image/"))return F("Por favor selecciona una imagen vlida.","warning");let V=Rk(v,x),P=new FileReader;P.onload=U=>{let O=new Image;O.onload=()=>{let G=document.createElement("canvas"),J=O.width,te=O.height,Z=Math.min(V.maxWidth/J,V.maxHeight/te,1);J=Math.max(1,Math.round(J*Z)),te=Math.max(1,Math.round(te*Z)),G.width=J,G.height=te;let ee=G.getContext("2d");if(!ee){F("No se pudo procesar la imagen.","error");return}ee.imageSmoothingEnabled=!0,ee.imageSmoothingQuality="high",ee.drawImage(O,0,0,J,te);let le=V.quality,xe=Math.min(V.quality,V.minQuality),Ne=V.outputType!=="image/png"&&Number.isFinite(V.maxBytes),Pe=G.toDataURL(V.outputType,le),Le=Rd(Pe);for(;Ne&&Le>V.maxBytes&&le>xe;)le=Math.max(xe,le-V.qualityStep),Pe=G.toDataURL(V.outputType,le),Le=Rd(Pe);m($t=>({...$t,[v]:Pe})),F("Imagen optimizada y cargada.","success")},O.src=U.target.result},P.readAsDataURL(E)},Wc=5,e2=l=>new Promise((m,v)=>{if(!l||!l.type.startsWith("image/")){v(new Error("Archivo no vlido"));return}let x={maxWidth:700,maxHeight:700,quality:.75,minQuality:.55,qualityStep:.05,outputType:"image/jpeg",maxBytes:120*1024},E=new FileReader;E.onload=V=>{let P=new Image;P.onload=()=>{let U=document.createElement("canvas"),O=P.width,G=P.height,J=Math.min(x.maxWidth/O,x.maxHeight/G,1);O=Math.max(1,Math.round(O*J)),G=Math.max(1,Math.round(G*J)),U.width=O,U.height=G;let te=U.getContext("2d");if(!te){v(new Error("No canvas context"));return}te.imageSmoothingEnabled=!0,te.imageSmoothingQuality="high",te.drawImage(P,0,0,O,G);let Z=x.quality,ee=U.toDataURL(x.outputType,Z),le=Rd(ee);for(;le>x.maxBytes&&Z>x.minQuality;)Z=Math.max(x.minQuality,Z-x.qualityStep),ee=U.toDataURL(x.outputType,Z),le=Rd(ee);m(ee)},P.onerror=()=>v(new Error("Error al cargar imagen")),P.src=V.target.result},E.onerror=()=>v(new Error("Error al leer archivo")),E.readAsDataURL(l)}),t2=async l=>{let m=Array.from(l.target.files||[]);if(!m.length)return;let v=Array.isArray(ge.images)?ge.images:[],x=Wc-v.length;if(x<=0){F(`Mximo ${Wc} imgenes por producto.`,"warning"),l.target.value="";return}let E=m.slice(0,x);m.length>x&&F(`Solo se agregarn ${x} de ${m.length} imgenes (mximo ${Wc}).`,"warning");try{let V=await Promise.all(E.map(U=>e2(U))),P=[...v,...V];jt(U=>({...U,images:P,image:P[0]||U.image})),F(`${V.length} imagen${V.length>1?"es":""} cargada${V.length>1?"s":""}.`,"success")}catch(V){console.error(V),F("Error al procesar alguna imagen.","error")}l.target.value=""},n2=l=>{jt(m=>{let v=[...m.images||[]];return v.splice(l,1),{...m,images:v,image:v[0]||""}})},bw=(l,m)=>{m<0||m>=(ge.images||[]).length||jt(v=>{let x=[...v.images||[]],[E]=x.splice(l,1);return x.splice(m,0,E),{...v,images:x,image:x[0]||""}})},Gf=()=>{Qa(null),Vn({imageUrl:"",targetType:"none",targetId:"",enabled:!0,order:0})},r2=l=>{if(!l)return;Qa(l.id);let m=l.targetType||(l.promoId?"promo":l.productId?"product":"none"),v=l.targetId||l.promoId||l.productId||"";Vn({imageUrl:l.imageUrl||"",targetType:m,targetId:v,enabled:l.enabled!==!1,order:Number.isFinite(Number(l.order))?Number(l.order):0})},s2=async()=>{if(!Re?.imageUrl)return F("Sub una imagen para el banner.","warning");let l=Re?.targetType||"none",m=Re?.targetId||"";if(l!=="none"&&!m)return F("Seleccion el destino del banner.","warning");let v=Number.isFinite(Number(Re.order))?Number(Re.order):0,x={imageUrl:Re.imageUrl,enabled:Re.enabled!==!1,order:v,targetType:l,targetId:l==="none"?"":String(m),productId:l==="product"?String(m):"",promoId:l==="promo"?String(m):""};try{Mn?(await Nt(fe(ae,"artifacts",w,"public","data","homeBanners",Mn),x),F("Banner actualizado.","success")):(await Gr(Ke(ae,"artifacts",w,"public","data","homeBanners"),{...x,createdAt:new Date().toISOString()}),F("Banner creado.","success")),Gf()}catch(E){console.error(E),F("Error guardando banner: "+(E?.message||"error"),"error")}},i2=l=>{l?.id&&Vt("Eliminar Banner","Eliminar este banner del carrusel?",async()=>{try{await qr(fe(ae,"artifacts",w,"public","data","homeBanners",l.id)),F("Banner eliminado.","success"),Mn===l.id&&Gf()}catch(m){console.error(m),F("Error eliminando banner: "+(m?.message||"error"),"error")}})},o2=l=>{Vt("Eliminar Producto",`Ests seguro de eliminar el producto "${l.name}"?`,async()=>{try{await qr(fe(ae,"artifacts",w,"public","data","products",l.id)),F("Producto eliminado correctamente.","success")}catch(m){console.error(m),F("Error al eliminar el producto.","error")}})},a2=l=>{Vt("Finalizar Pedido","Marcar este pedido como REALIZADO/ENTREGADO?",async()=>{try{await Nt(fe(ae,"artifacts",w,"public","data","orders",l),{status:"Realizado",lastUpdate:new Date().toISOString()}),F("Pedido finalizado correctamente.","success")}catch(m){console.error(m),F("Error al finalizar pedido.","error")}})},l2=l=>{Vt("Eliminar Pedido","Eliminar este pedido permanentemente? El stock de los productos ser devuelto al inventario.",async()=>{try{let m=fe(ae,"artifacts",w,"public","data","orders",l),v=await yi(m);if(!v.exists())throw new Error("El pedido no existe o ya fue eliminado.");let x=v.data();if(x.items&&Array.isArray(x.items)){for(let E of x.items)if(E.productId&&E.quantity>0){let V=fe(ae,"artifacts",w,"public","data","products",E.productId);try{await Nt(V,{stock:xi(E.quantity)})}catch{console.warn(`Producto ${E.productId} no encontrado, no se restaur stock.`)}}}await qr(m),F("Pedido eliminado y stock restaurado exitosamente.","success")}catch(m){console.error(m),F("Error al eliminar pedido: "+m.message,"error")}})},c2=async()=>{if(!ke.code||ke.code.length<3)return F("El cdigo del cupn debe tener al menos 3 caracteres.","warning");if(!ke.value||Number(ke.value)<=0)return F("El valor del descuento debe ser mayor a 0.","warning");if(ke.type==="percentage"&&Number(ke.value)>100)return F("El porcentaje no puede ser mayor a 100%.","warning");if(ke.targetType==="specific_email"&&(!ke.targetUser||!ke.targetUser.includes("@")))return F("Si el cupn es para un usuario especfico, ingresa un email vlido.","warning");try{let l={...ke,code:ke.code.toUpperCase().trim(),value:Number(ke.value),minPurchase:Number(ke.minPurchase||0),maxDiscount:Number(ke.maxDiscount||0),usageLimit:Number(ke.usageLimit||0),perUserLimit:Number(ke.perUserLimit||1),targetUser:ke.targetType==="global"?"":(ke.targetUser||"").trim().toLowerCase(),createdAt:new Date().toISOString(),usedBy:[]};await Gr(Ke(ae,"artifacts",w,"public","data","coupons"),l),Un({code:"",type:"percentage",value:0,minPurchase:0,maxDiscount:0,expirationDate:"",targetType:"global",targetUser:"",usageLimit:"",perUserLimit:1}),F("Cupn de descuento creado exitosamente.","success")}catch(l){console.error(l),F("Error al crear el cupn.","error")}},u2=async()=>{if(!Lt.name)return F("El nombre de la empresa es obligatorio.","warning");if(!Lt.phone&&!Lt.ig)return F("Debes ingresar al menos un mtodo de contacto (Telfono o Instagram).","warning");let l={...Lt,associatedProducts:Lt.associatedProducts||[],lastUpdated:new Date().toISOString()};try{Ya?(await Nt(fe(ae,"artifacts",w,"public","data","suppliers",Ya),l),F("Proveedor actualizado correctamente.","success")):(await Gr(Ke(ae,"artifacts",w,"public","data","suppliers"),{...l,createdAt:new Date().toISOString()}),F("Proveedor registrado correctamente.","success")),Nr({name:"",contact:"",phone:"",ig:"",address:"",cuit:"",associatedProducts:[]}),Ja(null),Ii(!1)}catch(m){console.error(m),F("Error al guardar proveedor.","error")}},d2=l=>{Vt("Eliminar Compra",`Eliminar registro de compra? Se descontarn ${l.quantity} unidades del stock del producto.`,async()=>{try{await Nt(fe(ae,"artifacts",w,"public","data","products",l.productId),{stock:xi(-l.quantity)}),await qr(fe(ae,"artifacts",w,"public","data","purchases",l.id)),F("Compra eliminada y stock revertido.","success")}catch(m){console.error(m),F("Error al eliminar compra.","error")}})},h2=async(l,m,v)=>{let x=(v.quantity||0)-(m.quantity||0);try{x!==0&&await Nt(fe(ae,"artifacts",w,"public","data","products",m.productId),{stock:xi(x)}),await Nt(fe(ae,"artifacts",w,"public","data","purchases",l),{quantity:v.quantity,cost:v.cost,supplierId:v.supplierId}),Zr(null),F("Compra actualizada y stock ajustado.","success")}catch(E){console.error(E),F("Error al actualizar la compra.","error")}},m2=async()=>{if(!el.trim())return F("Ingresa un nombre para la categora.","warning");try{let l=[...h.categories||[],el.trim()];await br(fe(ae,"artifacts",w,"public","data","settings","config"),{categories:l},{merge:!0}),Os(""),Si(!1),F(`Categora "${el}" creada.`,"success")}catch(l){console.error(l),F("Error al crear categora.","error")}},xO=(l,m,v)=>{if(!l||!v||m<=0)return F("Completa todos los campos.","warning");let x=he.find(U=>U.id===l);if(!x)return F("Producto no encontrado.","error");let E=x.purchasePrice||x.basePrice||0,V=E*m,P=rn.findIndex(U=>U.productId===l);if(P>=0){let U=[...rn];U[P].quantity+=m,U[P].cost=(x.purchasePrice||x.basePrice||0)*U[P].quantity,Ei(U),F(`Cantidad actualizada: ${x.name}`,"success")}else Ei([...rn,{productId:l,productName:x.name,productImage:x.image,quantity:m,unitPrice:E,cost:V,supplierId:v}]),F(`Agregado al pedido: ${x.name}`,"success");_i({productId:"",supplierId:v,quantity:1,cost:0,isNewProduct:!1})},p2=l=>{let m=rn.filter((v,x)=>x!==l);Ei(m),F("Producto eliminado del pedido.","info")},f2=(l,m)=>{let v=[...rn];v[l].quantity=m,v[l].cost=v[l].unitPrice*m,Ei(v)},g2=async()=>{if(rn.length===0)return F("El carrito de compras est vaco.","warning");try{let l=If(ae),m=`BATCH - ${Date.now()}`,v=new Date().toISOString();for(let x of rn){let E=fe(Ke(ae,"artifacts",w,"public","data","purchases"));l.set(E,{productId:x.productId,supplierId:x.supplierId,quantity:x.quantity,cost:x.cost,batchId:m,date:v});let V=fe(ae,"artifacts",w,"public","data","products",x.productId);l.update(V,{stock:xi(x.quantity)})}await l.commit(),Ei([]),F(`Pedido finalizado: ${rn.length} productos registrados.`,"success")}catch(l){console.error("Error in batch purchase:",l),F("Error al finalizar el pedido: "+l.message,"error")}},Ae=(0,r.useMemo)(()=>{let l={},m=X=>{l[X]||(l[X]={cart:0,fav:0,sales:0,total:0})};wc.forEach(X=>{X.items&&X.items.forEach(ue=>{m(ue.productId),l[ue.productId].cart+=1,l[ue.productId].total+=1})}),Qr.forEach(X=>{X.favorites&&X.favorites.forEach(ue=>{m(ue),l[ue].fav+=1,l[ue].total+=1})});let v=gt.filter(X=>X.status==="Realizado"),x=v.reduce((X,ue)=>X+(ue.total||0),0),E=i?.reduce((X,ue)=>X+(ue.amount||0),0)||0,V=d?.reduce((X,ue)=>X+(ue.cost||0),0)||0,P=x-E-V,U={},O={};v.forEach(X=>{X.items&&Array.isArray(X.items)&&X.items.forEach(ue=>{let at=ue.productId,ji=Number(ue.quantity)||0;U[at]=(U[at]||0)+ji,O[at]||(O[at]={name:ue.title||ue.name||"Producto Desconocido",image:ue.image}),m(at),l[at].sales+=ji,l[at].total+=ji*5})});let G=Object.entries(l).map(([X,ue])=>{let at=he.find(Hf=>Hf.id===X),ji=O[X]||{};return at?{id:X,name:at.name,image:at.image,stock:at.stock,stats:ue}:null}).filter(Boolean).sort((X,ue)=>ue.stats.total-X.stats.total).slice(0,5),J=null,te=-1;Object.entries(U).forEach(([X,ue])=>{ue>te&&(te=ue,J=X)});let Z=null;if(J){let X=he.find(at=>at.id===J),ue=O[J];(X||ue)&&(Z={id:J,name:X?X.name:ue.name,image:X?X.image:ue.image,sales:te,stock:X?X.stock:0})}let ee=null,le=1/0;he.forEach(X=>{let ue=U[X.id]||0;ue<le&&(le=ue,ee=X.id)});let xe=ee?he.find(X=>X.id===ee):null,Ne={daily:{},monthly:{},yearly:{}},Pe={};v.forEach(X=>{let ue=new Date(X.date),at=ue.toISOString().split("T")[0],ji=ue.toISOString().slice(0,7),Hf=ue.getFullYear().toString(),Wf=(ts,rr,ww)=>{ts[rr]||(ts[rr]={date:rr,revenue:0,orders:0}),ts[rr].revenue+=ww,ts[rr].orders+=1};Wf(Ne.daily,at,X.total),Wf(Ne.monthly,ji,X.total),Wf(Ne.yearly,Hf,X.total),X.items&&X.items.forEach(ts=>{let rr=he.find(zi=>zi.id===ts.productId||zi.id===ts.id);(rr?Array.isArray(rr.categories)&&rr.categories.length>0?rr.categories:rr.category?[rr.category]:["Otros"]:["Otros"]).forEach(zi=>{Pe[zi]||(Pe[zi]={name:zi,revenue:0,items:0,percentage:0}),Pe[zi].revenue+=ts.unit_price*ts.quantity,Pe[zi].items+=ts.quantity})})});let Le={daily:Object.values(Ne.daily).sort((X,ue)=>X.date.localeCompare(ue.date)),monthly:Object.values(Ne.monthly).sort((X,ue)=>X.date.localeCompare(ue.date)),yearly:Object.values(Ne.yearly).sort((X,ue)=>X.date.localeCompare(ue.date))},$t=Object.values(Pe).reduce((X,ue)=>X+ue.items,0),zn=Object.values(Pe).map(X=>({...X,percentage:$t>0?Math.round(X.items/$t*100):0})).sort((X,ue)=>ue.items-X.items),nr=h?.lowStockThreshold||5,Ce=he.filter(X=>!X.promoItems&&Number(X.stock)<=nr),Fi=[...gt].sort((X,ue)=>new Date(ue.date)-new Date(X.date)).slice(0,10),Ui=[...v.map(X=>({id:X.id||X.orderId,type:"income",category:"Venta",date:X.date,amount:X.total,description:`Orden #${X.orderId}`,status:X.status})),...i.map(X=>({id:X.id,type:"expense",category:X.category||"Gasto",date:X.date,amount:X.amount,description:X.description,status:"Pagado"})),...(d||[]).map(X=>({id:X.id,type:"expense",category:"Compra Stock",date:X.date,amount:X.cost,description:`Prov: ${X.supplier||"General"}`,status:"Completado"})),...(a||[]).map(X=>({id:X.id,type:"income",category:"Inversin",date:X.date,amount:X.amount,description:`Inv: ${X.investor}`,status:"Recibido"}))].sort((X,ue)=>new Date(ue.date)-new Date(X.date)).slice(0,100);return{revenue:x,expensesTotal:E,purchasesTotal:V,netIncome:P,trendingProducts:G,starProduct:Z,leastSoldProduct:xe,salesCount:U,analytics:Le,salesByCategory:zn,lowStockProducts:Ce,recentActivity:Fi,transactions:Ui,totalOrders:gt.length,totalUsers:Qr.length}},[gt,i,d,he,wc,Qr,h]),b2=({order:l,onClose:m})=>l?r.default.createElement("div",{className:"fixed inset-0 z-[160] flex items-center justify-center bg-black/95 backdrop-blur-md p-4 animate-fade-up",onClick:m},r.default.createElement("div",{className:`rounded-[2rem] w-full max-w-2xl overflow-hidden flex flex-col max-h-[90vh] shadow-2xl border relative transition-colors duration-300 ${g?"glass border-slate-800":"bg-white border-slate-200"}`,onClick:v=>v.stopPropagation()},r.default.createElement("div",{className:`p-8 border-b flex justify-between items-center transition-colors duration-300 ${g?"border-slate-800 bg-slate-900/50":"border-slate-100 bg-slate-50/50"}`},r.default.createElement("div",null,r.default.createElement("h3",{className:`text-2xl font-black flex items-center gap-2 transition-colors duration-300 ${g?"text-white neon-text":"text-slate-900"}`},"DETALLE DE PEDIDO ",r.default.createElement("span",{className:"text-orange-500"},"#",l.orderId)),r.default.createElement("div",{className:"flex items-center gap-4 mt-2"},r.default.createElement("span",{className:`text-xs flex items-center gap-1 font-bold tracking-wider transition-colors duration-300 ${g?"text-slate-400":"text-slate-500"}`},r.default.createElement(ol,{className:"w-3 h-3"})," ",new Date(l.date).toLocaleString()),r.default.createElement("span",{className:`text-[10px] px-2 py-0.5 rounded border uppercase font-black tracking-widest transition-colors duration-300 ${l.status==="Realizado"?g?"bg-green-900/30 text-green-400 border-green-500/30":"bg-green-100 text-green-600 border-green-200":g?"bg-yellow-900/30 text-yellow-400 border-yellow-500/30":"bg-yellow-100 text-yellow-600 border-yellow-200"}`},l.status))),r.default.createElement("button",{onClick:m,className:`p-3 rounded-full transition shadow-lg border ${g?"bg-slate-800 hover:bg-slate-700 border-slate-700 text-slate-400 hover:text-white":"bg-slate-100 hover:bg-slate-200 border-slate-200 text-slate-500 hover:text-slate-900"}`},r.default.createElement(lt,{className:"w-5 h-5"}))),r.default.createElement("div",{className:`p-8 overflow-y-auto space-y-8 custom-scrollbar transition-colors duration-300 ${g?"bg-[#050505]":"bg-white"}`},r.default.createElement("div",{className:`flex justify-between items-center p-6 rounded-2xl border shadow-inner transition-colors duration-300 ${g?"bg-slate-900 border-slate-800":"bg-slate-50 border-slate-200"}`},r.default.createElement("div",{className:"flex items-center gap-4"},r.default.createElement("div",{className:`p-4 rounded-full shadow-lg transition-all duration-300 ${l.status==="Realizado"?g?"bg-green-500/20 text-green-400 shadow-[0_0_15px_rgba(34,197,94,0.2)]":"bg-green-100 text-green-600":g?"bg-yellow-500/20 text-yellow-400 shadow-[0_0_15px_rgba(234,179,8,0.2)]":"bg-yellow-100 text-yellow-600"}`},l.status==="Realizado"?r.default.createElement(Me,{className:"w-8 h-8"}):r.default.createElement(ol,{className:"w-8 h-8"})),r.default.createElement("div",null,r.default.createElement("p",{className:`text-xs uppercase font-bold tracking-widest mb-1 transition-colors duration-300 ${g?"text-slate-500":"text-slate-400"}`},"Estado Actual"),r.default.createElement("p",{className:`text-xl font-black transition-colors duration-300 ${l.status==="Realizado"?g?"text-green-400":"text-green-600":g?"text-yellow-400":"text-yellow-600"}`},l.status==="Realizado"?"Entregado / Finalizado":"Pendiente de Pago/Envo")))),r.default.createElement("div",{className:"grid md:grid-cols-2 gap-6"},r.default.createElement("div",{className:`p-6 rounded-2xl border transition duration-300 ${g?"bg-slate-900/30 border-slate-800 hover:border-slate-700":"bg-slate-50 border-slate-200 hover:border-slate-300"}`},r.default.createElement("h4",{className:`text-xs font-black uppercase tracking-widest mb-4 flex items-center gap-2 border-b pb-2 transition-colors duration-300 ${g?"text-slate-500 border-slate-800":"text-slate-400 border-slate-100"}`},r.default.createElement(is,{className:"w-4 h-4"})," Datos del Cliente"),r.default.createElement("div",{className:"space-y-3"},r.default.createElement("p",{className:`font-bold text-lg transition-colors duration-300 ${g?"text-white":"text-slate-900"}`},l.customer?.name||"Cliente"),r.default.createElement("div",{className:"space-y-1"},r.default.createElement("p",{className:`text-sm flex justify-between border-b border-dashed pb-1 transition-colors duration-300 ${g?"text-slate-400 border-slate-800/50":"text-slate-600 border-slate-100"}`},r.default.createElement("span",null,"Email:")," ",r.default.createElement("span",{className:`font-medium transition-colors duration-300 ${g?"text-white":"text-slate-900"}`},l.customer?.email||"-")),r.default.createElement("p",{className:`text-sm flex justify-between border-b border-dashed pb-1 transition-colors duration-300 ${g?"text-slate-400 border-slate-800/50":"text-slate-600 border-slate-100"}`},r.default.createElement("span",null,"Telfono:")," ",r.default.createElement("span",{className:`font-medium transition-colors duration-300 ${g?"text-white":"text-slate-900"}`},l.customer?.phone||"-")),r.default.createElement("p",{className:`text-sm flex justify-between transition-colors duration-300 ${g?"text-slate-400":"text-slate-600"}`},r.default.createElement("span",null,"DNI:")," ",r.default.createElement("span",{className:`font-medium transition-colors duration-300 ${g?"text-white":"text-slate-900"}`},l.customer?.dni||"-"))))),r.default.createElement("div",{className:`p-6 rounded-2xl border transition duration-300 ${g?"bg-slate-900/30 border-slate-800 hover:border-slate-700":"bg-slate-50 border-slate-200 hover:border-slate-300"}`},r.default.createElement("h4",{className:`text-xs font-black uppercase tracking-widest mb-4 flex items-center gap-2 border-b pb-2 transition-colors duration-300 ${g?"text-slate-500 border-slate-800":"text-slate-400 border-slate-100"}`},r.default.createElement(ss,{className:"w-4 h-4"})," Datos de Entrega"),r.default.createElement("div",{className:"space-y-3"},r.default.createElement("p",{className:`font-medium text-sm leading-relaxed min-h-[3rem] transition-colors duration-300 ${g?"text-white":"text-slate-800"}`},l.shippingAddress||"Retiro en sucursal"),r.default.createElement("div",{className:`pt-2 mt-2 border-t transition-colors duration-300 ${g?"border-slate-800/50":"border-slate-100"}`},r.default.createElement("p",{className:`text-xs uppercase font-bold mb-1 transition-colors duration-300 ${g?"text-slate-400":"text-slate-500"}`},"Mtodo de Pago"),r.default.createElement("div",{className:"flex items-center gap-2"},r.default.createElement(Us,{className:"w-4 h-4 text-orange-500"}),r.default.createElement("p",{className:"text-orange-500 font-black text-sm uppercase"},l.paymentMethod)))))),r.default.createElement("div",null,r.default.createElement("h4",{className:`text-xs font-black uppercase tracking-widest mb-4 flex items-center gap-2 border-b pb-2 transition-colors duration-300 ${g?"text-slate-500 border-slate-800":"text-slate-400 border-slate-100"}`},r.default.createElement(sr,{className:"w-4 h-4"})," Productos (",l.items.length,")"),r.default.createElement("div",{className:"space-y-3"},l.items.map((v,x)=>r.default.createElement("div",{key:x,className:`flex justify-between items-center p-4 rounded-xl border transition group duration-300 ${g?"bg-slate-900/40 border-slate-800 hover:border-orange-900/30":"bg-white border-slate-100 hover:border-orange-200 shadow-sm"}`},r.default.createElement("div",{className:"flex items-center gap-4"},r.default.createElement("div",{className:`w-12 h-12 flex items-center justify-center rounded-lg p-1 shadow-md group-hover:scale-105 transition border product-preview-frame ${g?"bg-slate-800 border-slate-700":"bg-white border-slate-100"}`},v.image?r.default.createElement("img",{src:v.image,alt:v.title||"Producto",className:"w-full h-full object-contain"}):r.default.createElement(sr,{className:"text-slate-400"})),r.default.createElement("div",null,r.default.createElement("p",{className:`font-bold text-sm transition-colors duration-300 ${g?"text-white":"text-slate-900"}`},v.title),r.default.createElement("p",{className:"text-xs flex items-center gap-2 transition-colors duration-300 text-slate-500"},r.default.createElement("span",{className:`px-1.5 rounded text-[10px] font-bold transition-colors duration-300 ${g?"bg-slate-800 text-slate-300":"bg-slate-100 text-slate-600"}`},"x",v.quantity),r.default.createElement("span",null,"$",(Number(v.unit_price)||0).toLocaleString()," c/u")))),r.default.createElement("span",{className:`font-mono font-bold text-lg tracking-tight transition-colors duration-300 ${g?"text-white":"text-slate-900"}`},"$",((Number(v.unit_price)||0)*(Number(v.quantity)||0)).toLocaleString()))))),r.default.createElement("div",{className:`p-6 rounded-2xl border space-y-3 shadow-lg transition-colors duration-300 ${g?"bg-slate-900 border-slate-800":"bg-slate-50 border-slate-200"}`},r.default.createElement("div",{className:`flex justify-between text-sm font-medium transition-colors duration-300 ${g?"text-slate-400":"text-slate-500"}`},r.default.createElement("span",null,"Subtotal Productos"),r.default.createElement("span",null,"$",(Number(l.subtotal||l.total)||0).toLocaleString())),l.discount>0&&r.default.createElement("div",{className:`flex justify-between text-sm font-bold p-2 rounded-lg border border-dashed transition-colors duration-300 ${g?"text-green-400 bg-green-900/10 border-green-900/30":"text-green-600 bg-green-50 border-green-200"}`},r.default.createElement("span",{className:"flex items-center gap-2"},r.default.createElement(Gs,{className:"w-3 h-3"})," Descuento (",l.discountCode||"Cupn",")"),r.default.createElement("span",null,"-$",(Number(l.discount)||0).toLocaleString())),r.default.createElement("div",{className:`flex justify-between items-center mt-4 pt-4 border-t border-dashed transition-colors duration-300 ${g?"border-slate-800":"border-slate-100"}`},r.default.createElement("span",{className:`font-bold text-lg transition-colors duration-300 ${g?"text-white":"text-slate-900"}`},"Total Abonado"),r.default.createElement("span",{className:`text-3xl font-black tracking-tighter transition-colors duration-300 ${g?"text-orange-500 neon-text":"text-orange-600"}`},"$",(Number(l.total)||0).toLocaleString())))))):null,v2=()=>{if(!As)return null;let l=yr.filter(m=>{let v=!m.expirationDate||new Date(m.expirationDate)>new Date,x=(Y?.email||"").toLowerCase(),E=(m.targetUser||"").toLowerCase(),P=m.targetType==="specific_email"?!!Y&&!!E&&E===x:!m.targetUser,U=m.targetType==="global"||!m.targetType&&!m.targetUser,O=Array.isArray(m.usedBy)?m.usedBy.length:0,G=!m.usageLimit||O<m.usageLimit,J=!Y||!Array.isArray(m.usedBy)||!m.usedBy.includes(Y.id);return v&&(P||U)&&G&&J});return r.default.createElement("div",{className:"fixed inset-0 z-[150] flex items-center justify-center bg-black/90 backdrop-blur-md p-4 animate-fade-up",onClick:()=>Vo(!1)},r.default.createElement("div",{className:`rounded-[2rem] w-full max-w-lg overflow-hidden relative shadow-2xl border transition-colors duration-300 ${g?"border-purple-500/20 bg-[#050505]":"border-slate-200 bg-white"}`,onClick:m=>m.stopPropagation()},r.default.createElement("button",{onClick:()=>Vo(!1),className:`absolute top-6 right-6 p-2 rounded-full transition z-10 ${g?"bg-slate-900 text-slate-400 hover:text-white hover:bg-slate-800":"bg-slate-100 text-slate-500 hover:text-slate-900 hover:bg-slate-200"}`},r.default.createElement(lt,{className:"w-5 h-5"})),r.default.createElement("div",{className:`p-8 border-b transition-colors duration-300 ${g?"bg-gradient-to-br from-slate-900 via-[#0a0a0a] to-[#050505] border-slate-800":"bg-gradient-to-br from-slate-50 to-white border-slate-100"}`},r.default.createElement("h3",{className:`text-2xl font-black mb-2 flex items-center gap-3 ${g?"text-white":"text-slate-900"}`},r.default.createElement("div",{className:`p-2 rounded-lg border transition-colors duration-300 ${g?"bg-purple-900/20 border-purple-500/30":"bg-purple-50 border-purple-200"}`},r.default.createElement(Aw,{className:`w-6 h-6 ${g?"text-purple-400":"text-purple-600"}`})),"Mis Beneficios"),r.default.createElement("p",{className:`transition-colors duration-300 ${g?"text-slate-400":"text-slate-500"} text-sm`},"Selecciona un cupn para aplicar el descuento a tu compra.")),r.default.createElement("div",{className:`p-8 space-y-4 max-h-[50vh] overflow-y-auto custom-scrollbar transition-colors duration-300 ${g?"bg-[#050505]":"bg-white"}`},l.length===0?r.default.createElement("div",{className:`text-center py-12 border-2 border-dashed rounded-2xl transition-colors duration-300 ${g?"border-slate-800":"border-slate-200"}`},r.default.createElement(Gs,{className:`w-16 h-16 mx-auto mb-4 transition-colors duration-300 ${g?"text-slate-700":"text-slate-300"}`}),r.default.createElement("p",{className:`font-bold text-lg transition-colors duration-300 ${g?"text-slate-400":"text-slate-500"}`},"No tienes cupones disponibles."),r.default.createElement("p",{className:`transition-colors duration-300 ${g?"text-slate-600":"text-slate-400"} text-sm mt-2`},"Mantente atento a nuestras redes sociales.")):l.map(m=>{let v=Sr>=(m.minPurchase||0);return r.default.createElement("div",{key:m.id,onClick:()=>v&&Yk(m),className:`relative overflow-hidden rounded-2xl border transition-all duration-300 group ${v?g?"bg-[#0a0a0a] border-slate-700 hover:border-purple-500 cursor-pointer hover:shadow-[0_0_20px_rgba(168,85,247,0.15)] hover:scale-[1.01]":"bg-white border-slate-200 hover:border-purple-500 cursor-pointer hover:shadow-xl hover:scale-[1.01]":g?"bg-slate-900/50 border-slate-800 opacity-50 cursor-not-allowed":"bg-slate-50 border-slate-100 opacity-50 cursor-not-allowed"}`},r.default.createElement("div",{className:`absolute top-0 left-0 w-1.5 h-full transition-colors duration-300 ${v?"bg-purple-500":g?"bg-slate-700":"bg-slate-300"}`}),r.default.createElement("div",{className:"p-5 pl-7 flex justify-between items-center gap-4"},r.default.createElement("div",{className:"flex items-center gap-4 flex-1 min-w-0"},r.default.createElement("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center font-black text-lg flex-shrink-0 border ${v?g?"bg-purple-500/10 border-purple-500/30 text-purple-400":"bg-purple-50 border-purple-200 text-purple-600":g?"bg-slate-800 border-slate-700 text-slate-500":"bg-slate-100 border-slate-200 text-slate-400"}`},m.type==="fixed"?"$":"%"),r.default.createElement("div",{className:"min-w-0"},r.default.createElement("div",{className:"flex items-center gap-2 mb-1"},r.default.createElement("span",{className:`font-black text-base tracking-widest font-mono truncate ${g?"text-white":"text-slate-900"}`},m.code)),r.default.createElement("p",{className:`font-bold text-sm ${g?"text-purple-400":"text-purple-600"}`},m.type==="fixed"?`$${m.value} OFF`:`${m.value}% OFF`,m.maxDiscount>0&&m.type==="percentage"&&r.default.createElement("span",{className:`text-xs ml-1 font-normal ${g?"text-slate-500":"text-slate-400"}`},"(tope $",m.maxDiscount,")")),r.default.createElement("div",{className:"flex flex-wrap items-center gap-x-3 gap-y-1 mt-1.5"},m.minPurchase>0&&r.default.createElement("span",{className:`text-[10px] font-bold flex items-center gap-1 ${v?g?"text-green-400":"text-green-600":"text-red-400"}`},v?r.default.createElement(Me,{className:"w-3 h-3"}):r.default.createElement(Bi,{className:"w-3 h-3"}),"Min: $",m.minPurchase),m.expirationDate&&r.default.createElement("span",{className:`text-[10px] font-bold flex items-center gap-1 ${g?"text-slate-500":"text-slate-400"}`},r.default.createElement(ol,{className:"w-3 h-3"})," ",new Date(m.expirationDate).toLocaleDateString())))),v&&r.default.createElement("div",{className:"w-10 h-10 rounded-xl flex items-center justify-center shadow-lg transform group-hover:scale-110 transition flex-shrink-0 bg-purple-600 text-white"},r.default.createElement(En,{className:"w-5 h-5"}))))}))))},x2=()=>{if(!Te)return null;let[l,m]=(0,r.useState)(1),[v,x]=(0,r.useState)(!1),[E,V]=(0,r.useState)(0),P=(0,r.useMemo)(()=>Array.isArray(Te.images)&&Te.images.filter(Boolean).length>0?Te.images.filter(Boolean):Te.image?[Te.image]:[],[Te]),U=P.length>1,O=Math.min(E,P.length-1),G=Te.isPromo||!!Te.items,J=Number(Te.stock),te=Be.find(X=>X.product.id===Te.id),Z=te?te.quantity:0,ee=Math.max(0,J-Z),le=J>0,xe=ee===0&&le,Ne=Number(Te.basePrice)||0,Pe=Math.min(100,Math.max(0,Number(Te.discount)||0)),Le=!G&&Pe>0&&Ne>0,$t=G?Number(Te.price||Te.basePrice):$i(Ne,Pe),zn=Le?Math.max(0,Ne-$t):0,nr=zn*l,Ce=X=>{if(X.stopPropagation(),!le)return;let ue=G?{id:Te.id,name:Te.name,basePrice:Te.price||Te.basePrice,image:Te.image,isPromo:!0,items:Te.items,stock:Te.stock}:Te;Mi(ue,l),x(!0),setTimeout(()=>x(!1),2e3)},Fi=X=>{X.stopPropagation(),V(ue=>ue<=0?P.length-1:ue-1)},Ui=X=>{X.stopPropagation(),V(ue=>ue>=P.length-1?0:ue+1)};return r.default.createElement("div",{className:"fixed inset-0 z-[20000] flex items-end sm:items-center justify-center bg-black/90 backdrop-blur-xl animate-fade-in p-0 sm:p-4",onClick:()=>Yt(null)},r.default.createElement("div",{className:`border rounded-t-3xl sm:rounded-[2.5rem] max-w-4xl w-full overflow-hidden flex flex-col md:flex-row shadow-2xl animate-scale-up relative max-h-[95dvh] sm:max-h-[90vh] md:max-h-none md:h-auto overflow-y-auto md:overflow-hidden ${g?"bg-[#0a0a0a] border-slate-800":"bg-white border-slate-200"}`,onClick:X=>X.stopPropagation()},r.default.createElement("div",{className:`md:w-1/2 flex flex-col flex-shrink-0 ${g?"bg-gradient-to-b from-slate-900 to-[#0a0a0a]":"bg-gradient-to-b from-slate-100 to-white"}`},r.default.createElement("div",{className:"relative h-56 sm:h-72 md:h-[520px] p-4 sm:p-8 md:p-12 flex items-center justify-center overflow-hidden group"},r.default.createElement("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_center,_var(--tw-gradient-stops))] from-white/5 to-transparent opacity-50 group-hover:opacity-100 transition duration-500"}),P.length>0?r.default.createElement("img",{src:P[O],alt:`${Te.name||"Producto"} - Imagen ${O+1}`,className:`w-auto h-auto max-w-full max-h-full object-contain z-10 transition-transform duration-700 hover:scale-110 ${g?"drop-shadow-[0_0_50px_rgba(255,255,255,0.15)]":"drop-shadow-[0_0_50px_rgba(0,0,0,0.1)]"}`}):r.default.createElement("div",{className:"flex items-center justify-center w-full h-full"},r.default.createElement(js,{className:`w-16 h-16 ${g?"text-slate-700":"text-slate-300"}`})),U&&r.default.createElement(r.default.Fragment,null,r.default.createElement("button",{onClick:Fi,className:`absolute left-2 sm:left-4 top-1/2 -translate-y-1/2 z-20 w-10 h-10 sm:w-11 sm:h-11 rounded-full flex items-center justify-center transition-all shadow-lg border ${g?"bg-black/70 hover:bg-black/90 text-white border-white/10":"bg-white/80 hover:bg-white text-slate-800 border-slate-200"}`},r.default.createElement(th,{className:"w-5 h-5"})),r.default.createElement("button",{onClick:Ui,className:`absolute right-2 sm:right-4 top-1/2 -translate-y-1/2 z-20 w-10 h-10 sm:w-11 sm:h-11 rounded-full flex items-center justify-center transition-all shadow-lg border ${g?"bg-black/70 hover:bg-black/90 text-white border-white/10":"bg-white/80 hover:bg-white text-slate-800 border-slate-200"}`},r.default.createElement(nh,{className:"w-5 h-5"})),r.default.createElement("div",{className:`absolute bottom-3 left-1/2 -translate-x-1/2 z-20 px-3 py-1 rounded-full text-[11px] font-bold backdrop-blur-md ${g?"bg-black/60 text-white/80 border border-white/10":"bg-white/70 text-slate-700 border border-slate-200"}`},O+1," / ",P.length)),!le&&r.default.createElement("div",{className:"absolute inset-0 z-20 flex items-center justify-center bg-black/40 backdrop-blur-[2px]"},r.default.createElement("div",{className:"border-4 border-red-500 p-4 -rotate-12 bg-black shadow-2xl"},r.default.createElement("span",{className:"text-red-500 font-black text-2xl tracking-widest uppercase"},"AGOTADO")))),U&&r.default.createElement("div",{className:"flex gap-2 px-4 sm:px-6 md:px-8 pb-4 overflow-x-auto"},P.map((X,ue)=>r.default.createElement("button",{key:ue,onClick:at=>{at.stopPropagation(),V(ue)},className:`w-14 h-14 sm:w-16 sm:h-16 rounded-xl overflow-hidden flex-shrink-0 border-2 transition-all duration-300 ${ue===O?g?"border-orange-500 shadow-[0_0_12px_rgba(249,115,22,0.4)]":"border-orange-500 shadow-md":g?"border-slate-700 hover:border-slate-500 opacity-60 hover:opacity-100":"border-slate-200 hover:border-slate-400 opacity-60 hover:opacity-100"}`},r.default.createElement("img",{src:X,alt:`Miniatura ${ue+1}`,className:"w-full h-full object-cover"}))))),r.default.createElement("div",{className:`md:w-1/2 p-5 sm:p-8 md:p-12 flex flex-col ${g?"bg-[#080808]":"bg-white"}`},r.default.createElement("div",{className:"mb-4 sm:mb-8"},r.default.createElement("span",{className:`inline-block px-3 py-1 text-[10px] font-black uppercase tracking-[0.2em] rounded mb-3 sm:mb-4 border ${g?"bg-orange-500/10 text-orange-400 border-orange-500/20":"bg-orange-50 text-orange-600 border-orange-200"}`},G?"COMBOS & PROMOCIONES":Array.isArray(Te.categories)&&Te.categories.length>0?Te.categories[0]:Te.category||"Sin categora"),r.default.createElement("h2",{className:`text-2xl sm:text-3xl md:text-4xl font-black leading-[1.1] mb-3 sm:mb-6 ${g?"text-white neon-text-small":"text-slate-900"}`},Te.name),Le&&r.default.createElement("div",{className:`mb-3 inline-flex flex-wrap items-center gap-2 rounded-xl border px-3 py-2 ${g?"border-rose-400/30 bg-gradient-to-r from-rose-500/25 to-orange-500/20":"border-rose-200 bg-gradient-to-r from-rose-50 to-orange-50"}`},r.default.createElement("span",{className:`text-[10px] font-black uppercase tracking-[0.2em] ${g?"text-rose-200":"text-rose-700"}`},"Oferta activa"),r.default.createElement("span",{className:"rounded-full bg-rose-500 px-2 py-0.5 text-[11px] font-black text-white"},"-",Pe,"% OFF"),r.default.createElement("span",{className:`text-[11px] font-bold ${g?"text-emerald-300":"text-emerald-700"}`},"Ahorrs $",zn.toLocaleString()," por unidad")),r.default.createElement("p",{className:`text-xs sm:text-sm md:text-base leading-relaxed line-clamp-3 sm:line-clamp-4 ${g?"text-slate-400":"text-slate-600"}`},Te.description||"")),G&&Te.items&&r.default.createElement("div",{className:`mb-8 space-y-3 p-6 rounded-2xl border shadow-inner ${g?"bg-purple-500/5 border-purple-500/20":"bg-purple-50 border-purple-200"}`},r.default.createElement("p",{className:`text-[10px] uppercase font-black tracking-[0.2em] flex items-center gap-2 ${g?"text-purple-400":"text-purple-600"}`},r.default.createElement(qs,{className:"w-3 h-3"})," Este pack incluye:"),r.default.createElement("div",{className:"space-y-2"},Te.items.map((X,ue)=>{let at=he.find(ji=>ji.id===X.productId);return r.default.createElement("div",{key:ue,className:`flex items-center gap-3 text-sm group/item ${g?"text-slate-300":"text-slate-700"}`},r.default.createElement("div",{className:`w-6 h-6 rounded-lg flex items-center justify-center text-[10px] font-black group-hover/item:text-white transition ${g?"bg-purple-500/20 text-purple-400 group-hover/item:bg-purple-500":"bg-purple-100 text-purple-600 group-hover/item:bg-purple-600"}`},X.quantity,"x"),r.default.createElement("span",{className:`font-bold transition ${g?"group-hover:text-white":"group-hover:text-slate-900"}`},at?.name||"Producto del pack"))}))),r.default.createElement("div",{className:`mt-auto pt-4 sm:pt-8 border-t flex flex-col gap-4 sm:gap-6 ${g?"border-white/5":"border-slate-100"}`},r.default.createElement("div",{className:"flex items-end justify-between gap-3"},r.default.createElement("div",{className:"flex flex-col"},r.default.createElement("span",{className:`text-[10px] sm:text-xs font-bold uppercase tracking-wider mb-1 ${g?"text-slate-500":"text-slate-400"}`},"Inversin Total"),r.default.createElement("div",{className:"flex flex-wrap items-end gap-2 sm:gap-3"},Le&&r.default.createElement("span",{className:`text-xs sm:text-sm line-through font-bold ${g?"text-slate-600":"text-slate-400"}`},"Antes: $",(Ne*l).toLocaleString()),r.default.createElement("span",{className:`text-2xl sm:text-4xl font-black tracking-tighter ${g?"text-white":"text-slate-900"}`},"$",($t*l).toLocaleString())),Le&&nr>0&&r.default.createElement("span",{className:`mt-2 inline-flex w-fit items-center rounded-full border px-2.5 py-1 text-[11px] font-bold ${g?"border-emerald-500/30 bg-emerald-500/10 text-emerald-300":"border-emerald-200 bg-emerald-50 text-emerald-700"}`},"Ahorrs $",nr.toLocaleString()," en total")),Le&&r.default.createElement("div",{className:"shrink-0 rounded-xl border border-red-300/40 bg-gradient-to-r from-rose-600 to-orange-500 px-3 py-2 text-right shadow-[0_10px_24px_rgba(239,68,68,0.25)]"},r.default.createElement("p",{className:"text-[9px] font-black uppercase tracking-[0.18em] text-rose-100"},"Descuento"),r.default.createElement("p",{className:"text-xs font-black text-white"},"-",Pe,"% OFF"))),r.default.createElement("div",{className:"flex gap-2 sm:gap-3"},r.default.createElement("div",{className:`flex items-center gap-1.5 sm:gap-3 rounded-xl sm:rounded-2xl p-1.5 sm:p-2 border ${g?"bg-slate-900 border-slate-800":"bg-slate-100 border-slate-200"}`},r.default.createElement("button",{onClick:X=>{X.stopPropagation(),m(Math.max(1,l-1))},disabled:l<=1,className:`w-10 h-10 sm:w-12 sm:h-12 flex items-center justify-center rounded-lg sm:rounded-xl transition disabled:opacity-30 disabled:cursor-not-allowed ${g?"hover:bg-slate-800 text-slate-400 hover:text-white":"hover:bg-white text-slate-500 hover:text-slate-900"}`},r.default.createElement(lh,{className:"w-4 h-4 sm:w-5 sm:h-5"})),r.default.createElement("span",{className:`text-lg sm:text-xl font-bold w-6 sm:w-8 text-center font-mono ${g?"text-white":"text-slate-900"}`},l),r.default.createElement("button",{onClick:X=>{X.stopPropagation(),m(Math.min(ee,l+1))},disabled:l>=ee,className:`w-10 h-10 sm:w-12 sm:h-12 flex items-center justify-center rounded-lg sm:rounded-xl transition disabled:opacity-30 disabled:cursor-not-allowed ${g?"hover:bg-slate-800 text-slate-400 hover:text-white":"hover:bg-white text-slate-500 hover:text-slate-900"}`},r.default.createElement(En,{className:"w-4 h-4 sm:w-5 sm:h-5"}))),r.default.createElement("button",{onClick:Ce,disabled:!le||xe,className:`flex-1 py-3.5 sm:py-5 rounded-xl sm:rounded-2xl font-black text-sm sm:text-base transition flex items-center justify-center gap-2 sm:gap-3 shadow-2xl btn-press ripple ${v?"bg-green-500 text-white":le&&!xe?g?"bg-white text-black hover:bg-orange-400 hover:text-white hover:scale-[1.02] active:scale-[0.98]":"bg-slate-900 text-white hover:bg-orange-600 hover:scale-[1.02] active:scale-[0.98]":g?"bg-slate-900 text-slate-600 border border-slate-800 cursor-not-allowed":"bg-slate-200 text-slate-400 border border-slate-300 cursor-not-allowed"}`},v?r.default.createElement(r.default.Fragment,null,r.default.createElement(Me,{className:"w-5 h-5 sm:w-6 sm:h-6"})," LISTO"):xe?r.default.createElement(r.default.Fragment,null,r.default.createElement(Bi,{className:"w-5 h-5 sm:w-6 sm:h-6"})," MAX EN CARRITO"):le?r.default.createElement(r.default.Fragment,null,r.default.createElement(Go,{className:"w-5 h-5 sm:w-6 sm:h-6"})," AGREGAR"):r.default.createElement(r.default.Fragment,null,r.default.createElement(Bi,{className:"w-5 h-5 sm:w-6 sm:h-6"})," AGOTADO")))),r.default.createElement("button",{onClick:()=>Yt(null),className:`absolute top-4 right-4 md:top-6 md:right-6 p-4 rounded-full transition-all border z-[30] shadow-2xl backdrop-blur-md ${g?"bg-black/60 md:bg-white/5 hover:bg-white/10 text-white md:text-slate-400 hover:text-white border-white/20 md:border-white/5":"bg-white/60 md:bg-slate-900/5 hover:bg-slate-900/10 text-slate-900 md:text-slate-500 hover:text-slate-900 border-slate-200 md:border-slate-900/5"}`,title:"Cerrar detalle"},r.default.createElement(lt,{className:"w-6 h-6 md:w-5 md:h-5"})))))},y2=()=>{if(!Fc)return null;let l=he.find(x=>x.id===we.productId),m=x=>{let E=x.target.value,V=he.find(P=>P.id===E);Rn({...we,productId:E,price:V?Number(V.basePrice):0})};return r.default.createElement("div",{className:"fixed inset-0 z-[160] flex items-center justify-center bg-black/90 backdrop-blur-md p-4 animate-fade-up",onClick:()=>Ir(!1)},r.default.createElement("div",{className:`rounded-[2rem] w-full max-w-lg border shadow-2xl relative overflow-hidden transition-colors duration-300 ${g?"bg-[#0a0a0a] border-slate-800":"bg-white border-slate-200"}`,onClick:x=>x.stopPropagation()},r.default.createElement("button",{onClick:()=>Ir(!1),className:`absolute top-6 right-6 p-2 rounded-full transition z-10 ${g?"bg-slate-900 text-slate-400 hover:text-white":"bg-slate-100 text-slate-400 hover:text-slate-900"}`},r.default.createElement(lt,{className:"w-5 h-5"})),r.default.createElement("div",{className:`p-8 border-b transition-colors duration-300 ${g?"border-slate-800":"border-slate-100"}`},r.default.createElement("h3",{className:`text-2xl font-black flex items-center gap-3 transition-colors duration-300 ${g?"text-white":"text-slate-900"}`},r.default.createElement(Wo,{className:"w-6 h-6 text-green-400"})," Registrar Venta Manual"),r.default.createElement("p",{className:`text-sm mt-1 transition-colors duration-300 ${g?"text-slate-500":"text-slate-400"}`},"Para ventas fuera de la plataforma web.")),r.default.createElement("form",{onSubmit:async x=>{if(x.preventDefault(),!l)return F("Selecciona un producto.","warning");if(we.quantity<=0)return F("Cantidad invlida.","warning");try{let E=Number(l.stock)||0;if(we.quantity>E)return F(`Stock insuficiente (Disponible: ${E}).`,"error");let V=`man-${Date.now().toString().slice(-6)}`,P=we.quantity*we.price,U=new Date().toISOString(),O={orderId:V,userId:"manual_admin",customerId:"manual_admin",customer:{name:we.customerName||"Cliente Mostrador",email:"offline@store.com",phone:"-",dni:"-"},items:[{productId:l.id,title:l.name,quantity:Number(we.quantity),unit_price:Number(we.price),image:l.image}],subtotal:P,discount:0,total:P,status:"Realizado",date:U,shippingAddress:"Entrega Presencial (Offline)",paymentMethod:we.paymentMethod,source:"manual_sale",notes:we.notes,lastUpdate:U},G=If(ae),J=fe(Ke(ae,"artifacts",w,"public","data","orders"));G.set(J,O),G.update(fe(ae,"artifacts",w,"public","data","products",l.id),{stock:xi(-Number(we.quantity))}),await G.commit(),Nn||Yd(),F("Venta registrada correctamente.","success"),Ir(!1)}catch(E){console.error(E),F("Error al registrar venta manual.","error")}},className:"p-8 space-y-4"},r.default.createElement("div",null,r.default.createElement("label",{className:`text-xs font-bold uppercase tracking-widest block mb-1 transition-colors duration-300 ${g?"text-slate-500":"text-slate-400"}`},"Producto"),r.default.createElement("select",{className:`w-full rounded-xl p-3 focus:border-green-500 outline-none transition-all duration-300 ${g?"bg-slate-900 border border-slate-700 text-white":"bg-slate-50 border border-slate-200 text-slate-900"}`,value:we.productId,onChange:m},r.default.createElement("option",{value:""},"-- Seleccionar Producto --"),he.map(x=>r.default.createElement("option",{key:x.id,value:x.id},x.name," (Stock: ",x.stock,")")))),r.default.createElement("div",{className:"grid grid-cols-2 gap-4"},r.default.createElement("div",null,r.default.createElement("label",{className:`text-xs font-bold uppercase tracking-widest block mb-1 transition-colors duration-300 ${g?"text-slate-500":"text-slate-400"}`},"Cantidad"),r.default.createElement("input",{type:"number",min:"1",className:`w-full rounded-xl p-3 focus:border-green-500 outline-none transition-all duration-300 ${g?"bg-slate-900 border border-slate-700 text-white":"bg-slate-50 border border-slate-200 text-slate-900"}`,value:we.quantity,onChange:x=>Rn({...we,quantity:Number(x.target.value)})})),r.default.createElement("div",null,r.default.createElement("label",{className:`text-xs font-bold uppercase tracking-widest block mb-1 transition-colors duration-300 ${g?"text-slate-500":"text-slate-400"}`},"Precio Unit. ($)"),r.default.createElement("input",{type:"number",min:"0",className:`w-full rounded-xl p-3 focus:border-green-500 outline-none transition-all duration-300 ${g?"bg-slate-900 border border-slate-700 text-white":"bg-slate-50 border border-slate-200 text-slate-900"}`,value:we.price,onChange:x=>Rn({...we,price:Number(x.target.value)})}))),r.default.createElement("div",null,r.default.createElement("label",{className:`text-xs font-bold uppercase tracking-widest block mb-1 transition-colors duration-300 ${g?"text-slate-500":"text-slate-400"}`},"Cliente / Notas"),r.default.createElement("input",{className:`w-full rounded-xl p-3 focus:border-green-500 outline-none transition-all duration-300 ${g?"bg-slate-900 border border-slate-700 text-white":"bg-slate-50 border border-slate-200 text-slate-900"}`,value:we.customerName,onChange:x=>Rn({...we,customerName:x.target.value})})),r.default.createElement("div",null,r.default.createElement("label",{className:`text-xs font-bold uppercase tracking-widest block mb-1 transition-colors duration-300 ${g?"text-slate-500":"text-slate-400"}`},"Mtodo de Pago"),r.default.createElement("select",{className:`w-full rounded-xl p-3 focus:border-green-500 outline-none transition-all duration-300 ${g?"bg-slate-900 border border-slate-700 text-white":"bg-slate-50 border border-slate-200 text-slate-900"}`,value:we.paymentMethod,onChange:x=>Rn({...we,paymentMethod:x.target.value})},r.default.createElement("option",{value:"Efectivo"},"Efectivo"),r.default.createElement("option",{value:"Transferencia"},"Transferencia"),r.default.createElement("option",{value:"Tarjeta"},"Tarjeta (POS)"))),r.default.createElement("button",{type:"submit",className:"w-full bg-green-600 hover:bg-green-500 text-white font-bold py-4 rounded-xl shadow-lg shadow-green-900/20 transition transform hover:-translate-y-1 mt-4"},"REGISTRAR VENTA"))))},w2=()=>{let[l,m]=(0,r.useState)("monthly");if(!Pi)return null;let v=Ae.analytics[l]||[],x=Pi.type==="revenue"?"Ingresos Brutos":"Beneficio Neto",E=Pi.type==="revenue"?"text-green-400":"text-orange-400",V=[...v].sort((O,G)=>G.revenue-O.revenue),P=V[0],U=V[V.length-1];return r.default.createElement("div",{className:"fixed inset-0 z-[160] flex items-center justify-center bg-black/95 backdrop-blur-md p-4 animate-fade-up",onClick:()=>Uc(null)},r.default.createElement("div",{className:`rounded-[2.5rem] w-full max-w-4xl max-h-[90vh] flex flex-col border shadow-2xl relative overflow-hidden transition-colors duration-300 ${g?"bg-[#050505] border-slate-800":"bg-white border-slate-200"}`,onClick:O=>O.stopPropagation()},r.default.createElement("div",{className:`p-8 border-b flex justify-between items-center ${g?"border-slate-800 bg-slate-900/20":"border-slate-100 bg-slate-50/50"}`},r.default.createElement("div",null,r.default.createElement("h3",{className:`text-3xl font-black ${E} flex items-center gap-3`},r.default.createElement(Iw,{className:"w-8 h-8"})," ",x," - Analtica"),r.default.createElement("p",{className:"text-slate-500 text-sm mt-1"},"Desglose detallado de tu rendimiento.")),r.default.createElement("button",{onClick:()=>Uc(null),className:`p-3 rounded-full transition border ${g?"bg-slate-900 text-slate-400 hover:text-white border-slate-700":"bg-slate-100 text-slate-500 hover:text-slate-900 border-slate-200"}`},r.default.createElement(lt,{className:"w-5 h-5"}))),r.default.createElement("div",{className:`p-6 flex gap-4 border-b justify-center ${g?"bg-slate-900/10 border-slate-800/50":"bg-slate-50/50 border-slate-100"}`},["daily","monthly","yearly"].map(O=>r.default.createElement("button",{key:O,onClick:()=>m(O),className:`px-6 py-2 rounded-full text-xs font-black uppercase tracking-widest transition ${l===O?g?"bg-slate-100 text-black":"bg-slate-900 text-white":g?"bg-slate-900 text-slate-500 hover:text-white border border-slate-800":"bg-white text-slate-400 hover:text-slate-600 border border-slate-200"}`},O==="daily"?"Diario":O==="monthly"?"Mensual":"Anual"))),r.default.createElement("div",{className:`grid grid-cols-2 gap-4 p-6 ${g?"bg-slate-900/5":"bg-slate-50/30"}`},r.default.createElement("div",{className:`border p-4 rounded-2xl flex items-center gap-4 ${g?"bg-green-900/10 border-green-500/20":"bg-green-50 border-green-100"}`},r.default.createElement("div",{className:`p-3 rounded-xl ${g?"bg-green-500/20 text-green-400":"bg-green-100 text-green-600"}`},r.default.createElement(Ko,{className:"w-6 h-6"})),r.default.createElement("div",null,r.default.createElement("p",{className:"text-xs font-bold text-slate-500 uppercase tracking-widest"},"Mejor Periodo"),r.default.createElement("p",{className:`${g?"text-green-400":"text-green-600"} font-black text-lg`},P?`$${P.revenue.toLocaleString()}`:"-"),r.default.createElement("p",{className:"text-[10px] text-slate-500 font-mono"},P?.date||"-"))),r.default.createElement("div",{className:`border p-4 rounded-2xl flex items-center gap-4 ${g?"bg-red-900/10 border-red-500/20":"bg-red-50 border-red-100"}`},r.default.createElement("div",{className:`p-3 rounded-xl ${g?"bg-red-500/20 text-red-400":"bg-red-100 text-red-600"}`},r.default.createElement(ch,{className:"w-6 h-6"})),r.default.createElement("div",null,r.default.createElement("p",{className:"text-xs font-bold text-slate-500 uppercase tracking-widest"},"Peor Periodo"),r.default.createElement("p",{className:`${g?"text-red-400":"text-red-600"} font-black text-lg`},U?`$${U.revenue.toLocaleString()}`:"-"),r.default.createElement("p",{className:"text-[10px] text-slate-500 font-mono"},U?.date||"-")))),r.default.createElement("div",{className:"flex-1 p-6 relative flex items-end justify-between gap-2 overflow-x-auto custom-scrollbar"},v.length===0?r.default.createElement("div",{className:`w-full text-center my-auto transition-colors duration-300 ${g?"text-slate-500":"text-slate-400"}`},"No hay datos para mostrar el grfico."):(()=>{let O=Math.max(...v.map(G=>G.revenue),1);return v.slice().map((G,J)=>{let te=G.revenue/O*100;return r.default.createElement("div",{key:J,className:`flex flex-col items-center justify-end h-full gap-2 group min-w-[60px] cursor-pointer rounded-xl p-1 transition-all ${g?"hover:bg-slate-900/30":"hover:bg-slate-100"}`},r.default.createElement("div",{className:`opacity-0 group-hover:opacity-100 absolute bottom-full mb-2 border px-3 py-2 rounded-xl pointer-events-none transition z-50 shadow-xl max-w-[min(240px,70vw)] whitespace-normal break-words ${g?"bg-slate-900 border-slate-700":"bg-white border-slate-200"}`},r.default.createElement("p",{className:`font-bold ${g?"text-white":"text-slate-900"}`},G.date),r.default.createElement("p",{className:`font-black ${E}`},"$",G.revenue.toLocaleString()),r.default.createElement("p",{className:`text-[10px] ${g?"text-slate-500":"text-slate-400"}`},G.orders," Pedidos")),r.default.createElement("div",{className:`w-4 bg-gradient-to-t rounded-t-full relative transition-all duration-500 group-hover:w-6 group-hover:brightness-125 ${Pi.type==="revenue"?g?"from-green-900/50 to-green-500":"from-green-200 to-green-600":g?"from-orange-900/50 to-orange-500":"from-orange-200 to-orange-600"}`,style:{height:`${Math.max(te,5)}%`}},r.default.createElement("div",{className:`absolute top-0 left-0 right-0 h-4 rounded-full blur-md opacity-20 ${Pi.type==="revenue"?"bg-green-400":"bg-orange-400"}`})),r.default.createElement("p",{className:`text-[10px] font-bold -rotate-45 group-hover:rotate-0 transition origin-center mt-2 truncate w-full text-center ${g?"text-slate-600 group-hover:text-white":"text-slate-400 group-hover:text-slate-900"}`},l==="monthly"||l==="daily"?G.date.slice(5):G.date))})})())))},N2=({cartItems:l,isLoading:m})=>{let v=(0,r.useMemo)(()=>Vi(l),[l,Vi]);return m?r.default.createElement("div",{className:"py-20 flex flex-col items-center gap-4 opacity-50"},r.default.createElement(ns,{className:"w-8 h-8 animate-spin text-orange-400"}),r.default.createElement("p",{className:`text-xs font-black tracking-widest transition-colors duration-300 ${g?"text-slate-500":"text-slate-400"}`},"SINCRONIZANDO DATOS...")):v.length===0?r.default.createElement("div",{className:"py-20 text-center flex flex-col items-center gap-6"},r.default.createElement("div",{className:`p-6 rounded-full border transition-colors duration-300 ${g?"bg-white/5 border-white/5":"bg-slate-100 border-slate-200"}`},r.default.createElement(Go,{className:`w-12 h-12 transition-colors duration-300 ${g?"text-slate-700":"text-slate-300"}`})),r.default.createElement("p",{className:`text-sm font-black uppercase tracking-widest italic transition-colors duration-300 ${g?"text-slate-500":"text-slate-400"}`},"No hay productos activos")):r.default.createElement(r.default.Fragment,null,r.default.createElement("div",{className:"flex justify-between items-center px-2"},r.default.createElement("p",{className:`text-[10px] font-black uppercase tracking-widest transition-colors duration-300 ${g?"text-slate-500":"text-slate-400"}`},"Contenido del Carrito"),r.default.createElement("p",{className:"text-xs font-bold text-orange-400 bg-orange-400/10 px-3 py-1 rounded-full"},v.length," ITEMS")),r.default.createElement("div",{className:"space-y-3"},v.map((x,E)=>r.default.createElement("div",{key:E,className:`border p-4 rounded-2xl flex gap-4 transition group animate-fade-up transition-colors duration-300 ${g?"bg-white/[0.03] border-white/10 hover:bg-white/[0.05] hover:border-orange-500/20":"bg-slate-50 border-slate-100 hover:bg-slate-100 hover:border-orange-200"}`,style:{animationDelay:`${E*.05}s`}},r.default.createElement("div",{className:`w-16 h-16 rounded-xl overflow-hidden shadow-inner border flex-shrink-0 transition-colors duration-300 product-preview-frame ${g?"bg-[#0a0a0a] border-white/5":"bg-white border-slate-200"}`},x.image?r.default.createElement("img",{src:x.image,alt:x.name||"Producto",className:"w-full h-full object-contain group-hover:scale-110 transition-transform duration-500"}):r.default.createElement("div",{className:"w-full h-full flex items-center justify-center"},r.default.createElement(sr,{className:`w-7 h-7 ${g?"text-slate-600":"text-slate-400"}`}))),r.default.createElement("div",{className:"flex-1 flex flex-col justify-center"},r.default.createElement("p",{className:`font-bold text-sm leading-tight mb-1 transition-colors duration-300 ${g?"text-white":"text-slate-900"}`},x.name||"Producto"),r.default.createElement("div",{className:"flex justify-between items-center"},r.default.createElement("p",{className:"text-xs transition-colors duration-300 text-slate-500"},"Cant: ",r.default.createElement("span",{className:`font-mono font-bold transition-colors duration-300 ${g?"text-white":"text-slate-900"}`},x.quantity)),r.default.createElement("p",{className:"text-orange-400 font-black font-mono text-xs"},"$",Number(x.price).toLocaleString())))))),r.default.createElement("div",{className:`pt-6 border-t transition-colors duration-300 ${g?"border-white/5":"border-slate-100"}`},r.default.createElement("div",{className:`flex justify-between items-center p-6 rounded-2xl border transition-colors duration-300 ${g?"bg-orange-500/5 border-orange-500/20":"bg-orange-50 border-orange-100"}`},r.default.createElement("p",{className:`font-bold transition-colors duration-300 ${g?"text-slate-400":"text-slate-500"}`},"Valor Total"),r.default.createElement("p",{className:`text-2xl font-black font-mono transition-colors duration-300 ${g?"text-white":"text-slate-900"}`},"$",v.reduce((x,E)=>x+Number(E.price)*E.quantity,0).toLocaleString()))))},_2=({user:l,currentUser:m,initialData:v,onSubmit:x,onDelete:E,isSaving:V})=>{let[P,U]=(0,r.useState)(v),O=!!(Qe&&l.email&&l.email.trim().toLowerCase()===Qe.trim().toLowerCase());return(0,r.useEffect)(()=>{U(v)},[v]),r.default.createElement("form",{onSubmit:J=>{J.preventDefault(),x(P)},className:"space-y-8 animate-fade-in"},r.default.createElement("div",{className:"space-y-6"},r.default.createElement("p",{className:`text-[10px] font-black uppercase tracking-widest flex items-center gap-2 transition-colors duration-300 ${g?"text-slate-500":"text-slate-400"}`},r.default.createElement(is,{className:"w-3 h-3"})," Datos Identidad"),r.default.createElement("div",{className:"grid grid-cols-1 gap-6"},r.default.createElement("div",null,r.default.createElement("input",{className:`w-full p-4 text-sm transition-all duration-300 ${g?"input-cyber":"bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-orange-500/20 focus:border-orange-500 text-slate-900 placeholder:text-slate-400"}`,placeholder:"Nombre Completo",value:P.name,onChange:J=>U({...P,name:J.target.value}),required:!0})),r.default.createElement("div",null,r.default.createElement("input",{className:`w-full p-4 text-sm font-mono transition-all duration-300 ${g?"input-cyber":"bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-orange-500/20 focus:border-orange-500 text-slate-900 placeholder:text-slate-400"}`,placeholder:"Username / Alias",value:P.username,onChange:J=>U({...P,username:J.target.value})})),r.default.createElement("div",null,r.default.createElement("input",{className:`w-full p-4 text-sm font-mono transition-all duration-300 ${g?"input-cyber":"bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-orange-500/20 focus:border-orange-500 text-slate-900 placeholder:text-slate-400"} ${O?"opacity-50 cursor-not-allowed":""}`,placeholder:"Email de la cuenta (Principal)",value:P.email,onChange:J=>U({...P,email:J.target.value}),required:!0,disabled:O,title:O?"No se puede modificar el email del Super Admin":""})),r.default.createElement("div",{className:"grid grid-cols-2 gap-4"},r.default.createElement("input",{className:`w-full p-4 text-sm font-mono transition-all duration-300 ${g?"input-cyber":"bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-orange-500/20 focus:border-orange-500 text-slate-900 placeholder:text-slate-400"}`,placeholder:"DNI",value:P.dni,onChange:J=>U({...P,dni:J.target.value})}),r.default.createElement("input",{className:`w-full p-4 text-sm font-mono transition-all duration-300 ${g?"input-cyber":"bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-orange-500/20 focus:border-orange-500 text-slate-900 placeholder:text-slate-400"}`,placeholder:"Telfono",value:P.phone,onChange:J=>U({...P,phone:J.target.value})})))),r.default.createElement("div",{className:"space-y-6 pt-4"},r.default.createElement("p",{className:`text-[10px] font-black uppercase tracking-widest flex items-center gap-2 transition-colors duration-300 ${g?"text-slate-500":"text-slate-400"}`},r.default.createElement(Tr,{className:"w-3 h-3"})," Seguridad & Rol"),r.default.createElement("div",{className:"space-y-4"},r.default.createElement("div",{className:`flex p-1.5 rounded-2xl border transition-all duration-300 ${g?"bg-slate-900/50 border-white/5":"bg-slate-100 border-slate-200"} ${O?"opacity-50 pointer-events-none":""}`},["user","editor","admin"].map(J=>r.default.createElement("button",{key:J,type:"button",onClick:()=>U({...P,role:J}),className:`flex-1 py-3 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all ${P.role===J?g?"bg-indigo-600 text-white shadow-lg shadow-indigo-600/20":"bg-white text-indigo-600 shadow-sm":g?"text-slate-500 hover:text-slate-300":"text-slate-400 hover:text-slate-600"}`},J))),O&&r.default.createElement("p",{className:"text-[9px] text-orange-400 mt-1 ml-1"},"Rol de Super Admin inmutable."))),r.default.createElement("div",{className:"space-y-4 pt-6"},r.default.createElement("button",{type:"submit",disabled:V,className:"w-full py-5 bg-gradient-to-r from-indigo-600 to-orange-600 hover:from-indigo-500 hover:to-orange-500 text-white font-black rounded-2xl shadow-xl transition-all flex items-center justify-center gap-3 active:scale-95 disabled:opacity-50"},V?r.default.createElement(ns,{className:"w-6 h-6 animate-spin"}):r.default.createElement(rs,{className:"w-6 h-6"}),"SINCRONIZAR CAMBIOS"),!O&&r.default.createElement("button",{type:"button",onClick:E,className:"w-full py-4 border border-red-500/30 bg-red-500/5 text-red-500 rounded-2xl font-black text-[10px] uppercase tracking-widest hover:bg-red-500/10 transition flex items-center justify-center gap-2"},r.default.createElement(mt,{className:"w-4 h-4"})," Eliminar Cuenta Permanente")))},I2=()=>{let[l,m]=(0,r.useState)([]),[v,x]=(0,r.useState)(!1),[E,V]=(0,r.useState)(!1),P=rl||Jt||zc,U=rl?"cart":Jt?"password":"edit",O=rl||Jt||zc,[G,J]=(0,r.useState)({name:"",username:"",email:"",phone:"",dni:"",role:"user",newPassword:""});(0,r.useEffect)(()=>{P&&O&&(U==="cart"&&(async()=>{x(!0);try{let xe=await yi(fe(ae,"artifacts",w,"public","data","carts",O.id)),Ne=xe.exists()?xe.data().items||[]:[];m(Vi(Ne))}catch{m([])}x(!1)})(),J({name:O.name||"",username:O.username||"",email:O.email||"",phone:O.phone||"",dni:O.dni||"",role:O.role||"user",newPassword:""}))},[P,O,U]);let te=()=>{Uo(null),jc(null),Vs(null)},Z=async le=>{V(!0);try{if(!Ge.currentUser||Ge.currentUser.isAnonymous)throw new Error("Sesin invlida");let xe=await Ge.currentUser.getIdToken(),Ne=String(le.username||"").trim().toLowerCase(),Pe=await fetch("/api/admin/users",{method:"POST",headers:{"Content-Type":"application/json","x-store-id":w||"",Authorization:`Bearer ${xe}`},body:JSON.stringify({action:"update",uid:O.id,name:le.name,username:Ne,email:le.email,phone:le.phone,dni:le.dni,role:le.role,password:le.newPassword||void 0})}),Le=await Pe.json().catch(()=>({}));if(!Pe.ok)throw new Error(Le.error||"Error al actualizar perfil");if(Le.warning&&F(Le.warning,"warning"),Y&&Y.id===O.id){let $t=Le.profile||{};tn(zn=>({...zn,...$t}))}F("Perfil de usuario actualizado correctamente.","success"),te()}catch(xe){console.error(xe),F(xe.message||"Error al actualizar perfil.","error")}V(!1)},ee=async()=>{if(O.email===Y.email)return F("Autoproteccin activa: No puedes eliminar tu propia cuenta.","warning");Vt("ELIMINAR USUARIO",`Ests seguro de eliminar a ${O.name}? Esta accin es irreversible y borrar su acceso y datos.`,async()=>{V(!0);try{if(!Ge.currentUser||Ge.currentUser.isAnonymous)throw new Error("Sesin invlida");let le=await Ge.currentUser.getIdToken(),xe=await fetch("/api/admin/users",{method:"POST",headers:{"Content-Type":"application/json","x-store-id":w||"",Authorization:`Bearer ${le}`},body:JSON.stringify({action:"delete",uid:O.id})}),Ne=await xe.json().catch(()=>({}));if(!xe.ok)throw new Error(Ne.error||"Error eliminando usuario");F("Usuario eliminado definitivamente.","success"),te()}catch(le){console.error(le),F("Fallo al eliminar usuario.","error")}V(!1)})};return P?r.default.createElement("div",{className:"fixed inset-0 z-[1000] flex justify-end animate-fade-in pointer-events-none"},r.default.createElement("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm pointer-events-auto",onClick:te}),r.default.createElement("div",{className:`w-full max-w-xl border-l shadow-[-20px_0_50px_rgba(0,0,0,0.5)] flex flex-col h-full pointer-events-auto relative overflow-hidden animate-slide-left transition-colors duration-300 ${g?"bg-[#0a0a0a] border-white/10":"bg-white border-slate-200"}`},r.default.createElement("div",{className:"absolute top-0 left-0 w-full h-1.5 bg-gradient-to-r from-purple-600 via-orange-500 to-pink-600"}),r.default.createElement("div",{className:`p-8 border-b flex justify-between items-center transition-colors duration-300 ${g?"border-white/5 bg-white/[0.02]":"border-slate-100 bg-slate-50/50"}`},r.default.createElement("div",null,r.default.createElement("h2",{className:`text-xl font-black tracking-widest uppercase transition-colors duration-300 ${g?"text-white":"text-slate-900"}`},U==="cart"?"Auditora de Carrito":"Configurar Cuenta"),r.default.createElement("p",{className:`text-[10px] font-bold mt-1 tracking-widest flex items-center gap-2 transition-colors duration-300 ${g?"text-slate-500":"text-slate-400"}`},r.default.createElement("span",{className:"w-1.5 h-1.5 rounded-full bg-orange-400 animate-pulse"}),"ID: ",O.id.slice(-8).toUpperCase(),"  ",O.email)),r.default.createElement("button",{onClick:te,className:`p-3 rounded-2xl transition-all border group ${g?"bg-white/5 hover:bg-white/10 border-white/5":"bg-slate-100 hover:bg-slate-200 border-slate-200"}`},r.default.createElement(lt,{className:`w-5 h-5 transition-colors duration-300 ${g?"text-slate-400 group-hover:text-white":"text-slate-500 group-hover:text-slate-900"}`}))),r.default.createElement("div",{className:"flex-1 overflow-y-auto p-8 custom-scrollbar space-y-8"},U==="cart"&&r.default.createElement(N2,{cartItems:l,isLoading:v}),(U==="edit"||U==="password")&&r.default.createElement(_2,{user:O,currentUser:Y,initialData:G,onSubmit:Z,onDelete:ee,isSaving:E})))):null};if($d&&t==="store"){let l=h?.primaryColor||"#f97316";return r.default.createElement("div",{className:"min-h-screen flex flex-col items-center justify-center bg-[#050505] text-white px-4"},r.default.createElement("div",{className:"relative"},r.default.createElement("div",{className:"w-20 h-20 sm:w-24 sm:h-24 rounded-full border-4 border-slate-800 animate-spin",style:{borderTopColor:l}}),r.default.createElement("div",{className:"absolute inset-0 flex items-center justify-center"},r.default.createElement(ir,{className:"w-6 h-6 sm:w-8 sm:h-8 animate-pulse",style:{color:l}}))),r.default.createElement("h1",{className:"text-xl sm:text-2xl md:text-3xl font-black tracking-[0.1em] sm:tracking-[0.2em] md:tracking-[0.3em] mt-6 sm:mt-8 animate-pulse text-center max-w-[90vw]",style:{color:l,textShadow:`0 0 20px ${l}40`}},h?.loadingTitle||h?.storeName||""),r.default.createElement("p",{className:"text-slate-500 text-xs sm:text-sm mt-3 sm:mt-4 font-mono uppercase tracking-wider sm:tracking-widest text-center"},h?.loadingText||"Cargando sistema..."))}if(h?.maintenanceMode&&!Gc(Y?.email))return r.default.createElement("div",{className:"min-h-screen flex flex-col items-center justify-center bg-[#050505] text-white p-4 sm:p-6 text-center"},r.default.createElement("div",{className:"w-16 h-16 sm:w-20 sm:h-20 md:w-24 md:h-24 bg-red-900/20 text-red-500 rounded-full flex items-center justify-center mb-6 sm:mb-8 border border-red-900/50 animate-pulse"},r.default.createElement(Gi,{className:"w-8 h-8 sm:w-10 sm:h-10 md:w-12 md:h-12"})),r.default.createElement("h1",{className:"text-xl sm:text-2xl md:text-4xl font-black mb-3 sm:mb-4 tracking-tight uppercase"},"Sistema en Mantenimiento"),r.default.createElement("p",{className:"text-slate-400 max-w-sm sm:max-w-md mx-auto leading-relaxed text-sm sm:text-base"},"Estamos realizando mejoras para brindarte una experiencia premium. Te mandamos un saludo y esperamos que vuelvas prontamente!"),r.default.createElement("div",{className:"mt-8 sm:mt-12 pt-8 sm:pt-12 border-t border-slate-900 w-full max-w-xs"},r.default.createElement("p",{className:"text-[10px] sm:text-xs text-slate-600 font-mono italic"},h?.storeName||""," - Modo Mantenimiento Activo")));let vw=he.filter(l=>{if(l.isActive===!1)return!1;let m=(l.name||"").toLowerCase().includes(Dt.toLowerCase());if(It==="Promos")return!1;if(It==="Ofertas")return m&&l.discount>0;let v=It===""?!0:Array.isArray(l.categories)?l.categories.includes(It):l.category?l.category.trim()===It:!1;return m&&v}).sort((l,m)=>{if(l.isFeatured&&!m.isFeatured)return-1;if(!l.isFeatured&&m.isFeatured)return 1;let v=Ae?.salesCount?.[l.id]||0;return(Ae?.salesCount?.[m.id]||0)-v}),E2=(()=>{try{return String(window.location.href||"").includes("sustia=1")?!0:new URLSearchParams(window.location.search).get("sustia")==="1"}catch{return!1}})(),eh=!!(h?.showFloatingWhatsapp&&h?.whatsappLink&&["business","premium"].includes(h?.subscriptionPlan)&&t!=="admin"),xw=!!(t!=="admin"&&(E2||h?.subscriptionPlan==="premium")),yw=eh&&xw?"dual":eh||xw?"single":"none",S2=yw==="dual"?"store-view-fab-safe store-view-fab-dual":yw==="single"?"store-view-fab-safe store-view-fab-single":"";return r.default.createElement("div",{className:`min-h-screen flex flex-col relative w-full font-sans selection:bg-orange-500/30 selection:text-orange-200 transition-colors duration-300 ${g?"bg-[#050505]":"bg-slate-50"}`},r.default.createElement("div",{className:"fixed inset-0 pointer-events-none z-0"},r.default.createElement("div",{className:"absolute top-[-10%] left-[-10%] w-[60%] h-[60%] bg-purple-900/5 rounded-full blur-[150px] animate-pulse-slow"}),r.default.createElement("div",{className:"absolute bottom-[-10%] right-[-10%] w-[60%] h-[60%] bg-orange-900/5 rounded-full blur-[150px] animate-pulse-slow"})),r.default.createElement("div",{className:"fixed top-24 right-4 z-[20001] space-y-3 pointer-events-none"},r.default.createElement("div",{className:"pointer-events-auto space-y-3"},$a.map(l=>r.default.createElement(aO,{key:l.id,message:l.message,type:l.type,onClose:()=>Dk(l.id)})))),W.status!=="resolved"&&r.default.createElement("div",{className:"fixed inset-0 z-[10000] bg-black/80 backdrop-blur-xl flex items-center justify-center p-4"},r.default.createElement("div",{className:"w-full max-w-xl rounded-3xl border border-white/10 bg-[#050505] p-8 shadow-2xl"},W.status==="resolving"?r.default.createElement("div",{className:"flex items-center gap-4"},r.default.createElement(ns,{className:"w-7 h-7 animate-spin text-orange-500"}),r.default.createElement("div",null,r.default.createElement("p",{className:"text-white font-black text-xl tracking-tight"},"Detectando tienda"),r.default.createElement("p",{className:"text-slate-500 text-sm font-mono"},W.normalizedHostname||W.hostname))):r.default.createElement("div",{className:"space-y-6"},r.default.createElement("div",{className:"space-y-2"},r.default.createElement("p",{className:"text-white font-black text-2xl tracking-tight"},"Tienda no configurada"),r.default.createElement("p",{className:"text-slate-500 text-sm font-mono"},"Dominio: ",W.normalizedHostname||W.hostname)),!Ee||Ee.isAnonymous?r.default.createElement("div",{className:"space-y-4"},r.default.createElement("p",{className:"text-slate-400 text-sm"},"Inici sesin para configurar este dominio."),r.default.createElement("button",{onClick:()=>e("login"),className:"w-full py-4 rounded-2xl bg-gradient-to-r from-orange-600 to-purple-600 text-white font-black uppercase tracking-widest text-xs hover:from-orange-500 hover:to-purple-500 transition"},"Iniciar sesin")):Mk?r.default.createElement("div",{className:"space-y-5"},r.default.createElement("div",{className:"space-y-3"},r.default.createElement("p",{className:"text-slate-300 text-sm"},"Eleg cmo quers vincular este dominio:"),r.default.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3"},r.default.createElement("button",{disabled:S,onClick:async()=>{k(!0);try{let l=Fk();await $f(l),F(`Dominio vinculado a ${l}`,"success")}catch(l){F(l?.message||"No se pudo crear la tienda","error")}k(!1)},className:"py-4 rounded-2xl bg-white/5 border border-white/10 text-white font-black text-[10px] uppercase tracking-widest hover:bg-white/10 transition disabled:opacity-50"},"Crear tienda nueva"),r.default.createElement("button",{disabled:S,onClick:async()=>{k(!0);try{await $f(Zy),F(`Dominio vinculado a ${Zy}`,"success")}catch(l){F(l?.message||"No se pudo vincular","error")}k(!1)},className:"py-4 rounded-2xl bg-orange-500/10 border border-orange-500/20 text-orange-400 font-black text-[10px] uppercase tracking-widest hover:bg-orange-500/20 transition disabled:opacity-50"},"Usar tienda default"))),r.default.createElement("div",{className:"space-y-3"},r.default.createElement("p",{className:"text-slate-500 text-xs font-mono"},"O peg un storeId existente:"),r.default.createElement("div",{className:"flex gap-2"},r.default.createElement("input",{value:oe,onChange:l=>T(l.target.value),className:"input-cyber flex-1 p-4 text-sm font-mono",placeholder:"storeId (ej: cliente-abc123)"}),r.default.createElement("button",{disabled:S||!oe.trim(),onClick:async()=>{k(!0);try{await $f(oe.trim()),F("Dominio vinculado","success")}catch(l){F(l?.message||"No se pudo vincular","error")}k(!1)},className:"px-5 rounded-2xl bg-indigo-600 text-white font-black text-[10px] uppercase tracking-widest hover:bg-indigo-500 transition disabled:opacity-50"},"Vincular")))):r.default.createElement("div",{className:"space-y-3"},r.default.createElement("p",{className:"text-slate-400 text-sm"},"Este dominio solo puede registrarlo el Super Admin."),r.default.createElement("p",{className:"text-slate-600 text-xs font-mono"},"Sesin: ",Ee?.email||Ee?.uid))))),r.default.createElement(b2,{order:tl,onClose:()=>Mc(null)}),r.default.createElement(v2,null),r.default.createElement(x2,null),t!=="admin"&&t!=="login"&&t!=="register"&&r.default.createElement("nav",{className:`store-nav fixed top-0 w-full h-14 sm:h-16 md:h-20 z-50 px-2.5 sm:px-4 md:px-8 lg:px-12 flex items-center justify-between backdrop-blur-xl transition-all duration-300 premium-nav ${g?"bg-[#05070b]/88 border-b border-slate-800/70":"bg-white/92 border-b border-slate-200/90 shadow-[0_8px_28px_rgba(15,23,42,0.08)]"}`},r.default.createElement("div",{className:"store-nav-left flex items-center gap-2 sm:gap-5 min-w-0 flex-1 lg:flex-none pr-2 sm:pr-5 lg:pr-0"},r.default.createElement("button",{onClick:()=>A(!0),title:"Abrir men",className:`store-nav-icon-btn inline-flex items-center justify-center w-11 h-11 sm:w-12 sm:h-12 p-0 rounded-lg sm:rounded-xl transition border group ${g?"bg-slate-900/50 text-slate-300 hover:text-white hover:bg-slate-800 border-slate-700/50":"bg-slate-100 text-slate-600 hover:text-slate-900 hover:bg-slate-200 border-slate-200"}`},r.default.createElement(o0,{className:"w-5 h-5 sm:w-6 sm:h-6 group-hover:scale-110 transition"})),r.default.createElement("div",{className:"store-nav-brand cursor-pointer group flex items-center gap-2 sm:gap-3 min-w-0",onClick:()=>e("store")},h?.logoUrl&&r.default.createElement("div",{"data-testid":"store-nav-logo",className:`store-nav-logo w-8 h-8 sm:w-10 sm:h-10 md:w-12 md:h-12 rounded-full overflow-hidden border-2 bg-white p-0.5 flex-shrink-0 shadow-lg group-hover:border-orange-500 group-hover:scale-110 group-hover:-rotate-6 transition-all duration-300 ${g?"border-slate-800":"border-slate-200"}`},r.default.createElement("img",{src:h.logoUrl,alt:"Logo",className:"store-nav-logo-image w-full h-full object-contain rounded-full"})),r.default.createElement("div",{className:"store-nav-brand-text flex flex-col min-w-0"},r.default.createElement("span",{className:`store-brand-title text-xl sm:text-2xl md:text-3xl font-black tracking-tight group-hover:text-orange-500 transition-all duration-300 leading-none block ${g?"text-white":"text-slate-900"}`},_t?h?.storeName||"":r.default.createElement("span",{className:`inline-block h-6 sm:h-8 w-20 sm:w-32 rounded animate-pulse ${g?"bg-slate-700/50":"bg-slate-200"}`})),r.default.createElement("div",{className:"h-0.5 sm:h-1 w-1/3 bg-orange-500 rounded-full group-hover:w-2/3 transition-all duration-500 mt-0.5 sm:mt-1 shadow-sm"})))),r.default.createElement("div",{className:`store-nav-search-shell hidden lg:flex items-center rounded-2xl px-6 py-3 w-[min(38vw,640px)] xl:w-[min(36vw,700px)] mx-4 xl:mx-8 transition group premium-nav-search ${g?"bg-slate-900/60 border border-slate-700/60 focus-within:border-orange-500/40":"bg-slate-100/90 border border-slate-200 focus-within:border-orange-400 focus-within:bg-white focus-within:shadow-md"}`},r.default.createElement(ul,{className:`w-5 h-5 mr-3 group-focus-within:text-orange-500 transition ${g?"text-slate-400":"text-slate-500"}`}),r.default.createElement("input",{className:`bg-transparent outline-none text-sm w-full font-medium ${g?"text-white placeholder-slate-500":"text-slate-900 placeholder-slate-400"}`,placeholder:"Qu ests buscando hoy?",value:Dt,onChange:l=>Ec(l.target.value)})),r.default.createElement("div",{className:"store-nav-actions flex items-center gap-1.5 sm:gap-3 shrink-0"},r.default.createElement("div",{className:"hidden md:flex items-center gap-2"},h?.showWhatsapp!==!1&&h?.whatsappLink&&r.default.createElement("button",{onClick:()=>window.open(h?.whatsappLink,"_blank"),className:`group flex items-center gap-2 px-4 py-2 rounded-xl border transition-all font-bold text-sm hover:scale-105 active:scale-95 btn-press ripple ${g?"bg-green-600 text-white border-green-500/70 hover:bg-green-500":"bg-green-50 text-green-700 border-green-200 hover:bg-green-500 hover:text-white hover:border-green-500"}`},r.default.createElement(ko,{className:"w-5 h-5 group-hover:animate-bounce"})," WhatsApp"),h?.showInstagram!==!1&&h?.instagramLink&&r.default.createElement("button",{onClick:()=>window.open(h?.instagramLink,"_blank"),className:"flex items-center gap-2 px-4 py-2 rounded-xl bg-pink-900/10 text-pink-400 hover:bg-pink-500 hover:text-white border border-pink-500/20 transition-all font-bold text-sm hover:scale-105 active:scale-95 btn-press ripple group"},r.default.createElement(cl,{className:"w-5 h-5 group-hover:-rotate-12 transition-transform"})," Instagram")),r.default.createElement("button",{onClick:()=>L(!g),"aria-label":g?"Cambiar a modo claro":"Cambiar a modo oscuro",className:`store-nav-icon-btn relative inline-flex items-center justify-center w-11 h-11 sm:w-12 sm:h-12 p-0 rounded-lg sm:rounded-xl transition group border focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-orange-500/70 ${g?"bg-slate-900/50 text-yellow-400 hover:bg-slate-800 border-slate-700/50":"bg-yellow-50 text-yellow-600 hover:bg-yellow-100 border-yellow-200"}`,title:g?"Cambiar a modo claro":"Cambiar a modo oscuro"},g?r.default.createElement(Mw,{className:"w-5 h-5 sm:w-6 sm:h-6 transition-transform duration-300 group-hover:scale-110 group-hover:rotate-12"}):r.default.createElement(Vw,{className:"w-5 h-5 sm:w-6 sm:h-6 transition-transform duration-300 group-hover:scale-110 group-hover:-rotate-12"}),r.default.createElement("span",{className:`pointer-events-none absolute left-1/2 top-[calc(100%+0.45rem)] -translate-x-1/2 translate-y-1 whitespace-nowrap rounded-full border px-2.5 py-1 text-[10px] font-bold shadow-lg opacity-0 transition-all duration-200 group-hover:translate-y-0 group-hover:opacity-100 group-focus-visible:translate-y-0 group-focus-visible:opacity-100 ${g?"bg-[#0a0a0a] border-slate-700 text-slate-200":"bg-white border-slate-200 text-slate-700"}`},g?"Pasar a claro":"Pasar a oscuro")),r.default.createElement("button",{onClick:()=>e("cart"),title:"Ver carrito",className:`store-nav-icon-btn relative inline-flex items-center justify-center w-11 h-11 sm:w-12 sm:h-12 p-0 rounded-lg sm:rounded-xl transition group border ${g?"bg-slate-900/50 text-slate-300 hover:text-white hover:bg-slate-800 border-slate-700/50 hover:border-orange-500/30":"bg-slate-100 text-slate-600 hover:text-slate-900 hover:bg-slate-200 border-slate-200 hover:border-orange-400"}`},r.default.createElement(Bs,{className:"w-5 h-5 sm:w-6 sm:h-6 group-hover:scale-110 group-hover:-rotate-12 transition-transform"}),Be.length>0&&r.default.createElement("span",{className:`absolute -top-1.5 -right-1.5 sm:-top-2 sm:-right-2 bg-orange-500 text-white text-[9px] sm:text-[10px] font-black w-5 h-5 sm:w-6 sm:h-6 rounded-full flex items-center justify-center shadow-lg border-2 animate-bounce-short ${g?"border-[#050505]":"border-white"}`},Be.length)),Y&&Y.id&&Y.email&&Y.name?r.default.createElement("button",{onClick:()=>e("profile"),className:`store-nav-profile-btn h-11 sm:h-12 flex items-center gap-2 sm:gap-3 pl-1.5 pr-2.5 sm:pr-4 py-0 rounded-lg sm:rounded-xl border transition group ${g?"bg-slate-900/50 border-slate-700/50 hover:border-orange-500/50":"bg-slate-100 border-slate-200 hover:border-orange-400"}`},r.default.createElement("div",{className:"w-7 h-7 sm:w-8 sm:h-8 rounded-lg bg-gradient-to-br from-orange-500 to-red-600 flex items-center justify-center text-white font-bold shadow-lg text-xs sm:text-sm group-hover:scale-105 transition"},Y.name.charAt(0)),r.default.createElement("div",{className:"text-left hidden md:block"},r.default.createElement("p",{className:`text-[9px] sm:text-[10px] uppercase font-bold tracking-wider ${g?"text-slate-400":"text-slate-500"}`},"Hola,"),r.default.createElement("p",{className:`text-xs sm:text-sm font-bold leading-none group-hover:text-orange-500 transition ${g?"text-white":"text-slate-900"}`},Y.name.split(" ")[0]))):r.default.createElement("button",{onClick:()=>e("login"),"aria-label":"Entrar",className:`store-nav-login-btn h-11 sm:h-12 px-2.5 sm:px-6 rounded-lg sm:rounded-xl text-[11px] sm:text-sm font-black transition shadow-lg inline-flex items-center justify-center gap-1.5 sm:gap-2 whitespace-nowrap transform hover:-translate-y-0.5 ${g?"bg-white text-black hover:bg-orange-500 hover:text-white":"bg-orange-500 text-white hover:bg-orange-600"}`},r.default.createElement(is,{className:"w-4 h-4 sm:w-5 sm:h-5 shrink-0"}),r.default.createElement("span",{className:"hidden sm:inline"},"INGRESAR"),r.default.createElement("span",{className:"store-nav-login-label sm:hidden"},"Entrar")))),N&&r.default.createElement("div",{className:"fixed inset-0 z-[10000] flex justify-start"},r.default.createElement("div",{className:`fixed inset-0 backdrop-blur-sm transition-opacity ${g?"bg-black/90":"bg-black/50"}`,onClick:()=>A(!1)}),r.default.createElement("div",{className:`relative w-72 sm:w-80 h-full p-6 sm:p-8 animate-fade-in-right flex flex-col shadow-2xl z-[10001] ${g?"bg-[#0a0a0a] border-r border-slate-800":"bg-white border-r border-slate-200"}`},r.default.createElement("div",{className:`flex justify-between items-center mb-8 sm:mb-10 border-b pb-4 sm:pb-6 ${g?"border-slate-800":"border-slate-200"}`},r.default.createElement("h2",{className:`text-2xl sm:text-3xl font-black tracking-tight drop-shadow-md ${g?"text-white":"text-slate-900"}`},"MEN"),r.default.createElement("button",{onClick:()=>A(!1),className:`p-2 sm:p-3 rounded-full transition border ${g?"bg-slate-900 text-slate-400 hover:text-white hover:bg-slate-800 border-slate-800":"bg-slate-100 text-slate-500 hover:text-slate-900 hover:bg-slate-200 border-slate-200"}`},r.default.createElement(lt,{className:"w-5 h-5 sm:w-6 sm:h-6"}))),r.default.createElement("div",{className:"space-y-2 sm:space-y-3 flex-1 overflow-y-auto custom-scrollbar pr-2"},r.default.createElement("button",{onClick:()=>{e("store"),A(!1)},className:`w-full text-left text-base sm:text-lg font-bold transition flex items-center gap-3 sm:gap-4 p-3 sm:p-4 rounded-xl group border border-transparent ${g?"text-slate-300 hover:text-orange-400 hover:bg-slate-900/50 hover:border-slate-800":"text-slate-700 hover:text-orange-500 hover:bg-slate-100 hover:border-slate-200"}`},r.default.createElement(Pw,{className:`w-5 h-5 sm:w-6 sm:h-6 group-hover:text-orange-500 transition ${g?"text-slate-500":"text-slate-400"}`})," Inicio"),r.default.createElement("button",{onClick:()=>{e("profile"),A(!1)},className:`w-full text-left text-base sm:text-lg font-bold transition flex items-center gap-3 sm:gap-4 p-3 sm:p-4 rounded-xl group border border-transparent ${g?"text-slate-300 hover:text-orange-400 hover:bg-slate-900/50 hover:border-slate-800":"text-slate-700 hover:text-orange-500 hover:bg-slate-100 hover:border-slate-200"}`},r.default.createElement(is,{className:`w-5 h-5 sm:w-6 sm:h-6 group-hover:text-orange-500 transition ${g?"text-slate-500":"text-slate-400"}`})," Mi Perfil"),r.default.createElement("button",{onClick:()=>{e("cart"),A(!1)},className:`w-full text-left text-base sm:text-lg font-bold transition flex items-center gap-3 sm:gap-4 p-3 sm:p-4 rounded-xl group border border-transparent ${g?"text-slate-300 hover:text-orange-400 hover:bg-slate-900/50 hover:border-slate-800":"text-slate-700 hover:text-orange-500 hover:bg-slate-100 hover:border-slate-200"}`},r.default.createElement("div",{className:"relative"},r.default.createElement(Bs,{className:`w-5 h-5 sm:w-6 sm:h-6 group-hover:text-orange-500 transition ${g?"text-slate-500":"text-slate-400"}`}),Be.length>0&&r.default.createElement("span",{className:"absolute -top-2 -right-2 bg-orange-500 text-[10px] text-white rounded-full w-4 h-4 flex items-center justify-center font-bold"},Be.length)),"Mi Carrito"),r.default.createElement("div",{className:`h-px my-3 sm:my-4 mx-4 ${g?"bg-slate-800":"bg-slate-200"}`}),r.default.createElement("button",{onClick:()=>{e("about"),A(!1)},className:`w-full text-left text-base sm:text-lg font-bold transition flex items-center gap-3 sm:gap-4 p-3 sm:p-4 rounded-xl group border border-transparent ${g?"text-slate-300 hover:text-orange-400 hover:bg-slate-900/50 hover:border-slate-800":"text-slate-700 hover:text-orange-500 hover:bg-slate-100 hover:border-slate-200"}`},r.default.createElement(zs,{className:`w-5 h-5 sm:w-6 sm:h-6 group-hover:text-orange-500 transition ${g?"text-slate-500":"text-slate-400"}`})," Sobre Nosotros"),h?.showGuideLink!==!1&&r.default.createElement("button",{onClick:()=>{e("guide"),A(!1)},className:`w-full text-left text-base sm:text-lg font-bold transition flex items-center gap-3 sm:gap-4 p-3 sm:p-4 rounded-xl group border border-transparent ${g?"text-slate-300 hover:text-orange-400 hover:bg-slate-900/50 hover:border-slate-800":"text-slate-700 hover:text-orange-500 hover:bg-slate-100 hover:border-slate-200"}`},r.default.createElement(sh,{className:`w-5 h-5 sm:w-6 sm:h-6 group-hover:text-orange-500 transition ${g?"text-slate-500":"text-slate-400"}`})," ",h?.guideTitle||"Cmo Comprar"),Vf(Y?.email)&&r.default.createElement("button",{onClick:()=>{e("admin"),A(!1)},className:`w-full text-left text-base sm:text-lg font-bold text-orange-500 mt-4 sm:mt-6 pt-4 sm:pt-6 flex items-center gap-3 sm:gap-4 p-3 sm:p-4 rounded-xl transition border ${g?"border-t border-slate-800 bg-orange-900/10 hover:bg-orange-900/20 border-orange-500/20":"border-t border-slate-200 bg-orange-50 hover:bg-orange-100 border-orange-200"}`},r.default.createElement(Bn,{className:"w-5 h-5 sm:w-6 sm:h-6"})," Admin Panel")),r.default.createElement("div",{className:`mt-6 sm:mt-8 pt-6 sm:pt-8 border-t text-center ${g?"border-slate-800":"border-slate-200"}`},r.default.createElement("p",{className:`text-[10px] sm:text-xs font-bold uppercase tracking-widest ${g?"text-slate-600":"text-slate-400"}`},h?.menuCopyright||h?.storeName||"")))),t!=="admin"&&t!=="login"&&t!=="register"&&r.default.createElement("div",{className:"store-nav-spacer h-14 sm:h-16 md:h-20"}),r.default.createElement("main",{className:`flex-grow relative z-10 ${t==="admin"?"min-h-screen min-full-viewport flex":t==="store"?"px-0 py-4 sm:px-0 sm:py-6 md:px-0 md:py-8":"px-3 py-4 sm:px-4 sm:py-6 md:px-8 md:py-8"}`},t==="store"&&r.default.createElement("div",{className:`max-w-[1400px] mx-auto px-3 sm:px-4 md:px-6 lg:px-8 pb-32 min-h-screen block storefront-shell store-view ${S2}`},_t&&h?.showAnnouncementBanner!==!1&&h?.announcementMessage&&r.default.createElement("div",{className:"w-full premium-announcement border border-slate-800/50 bg-[#080808]/50 rounded-2xl p-3 mb-8 text-center relative overflow-hidden before:absolute before:inset-y-0 before:left-0 before:w-1/2 before:bg-gradient-to-r before:from-orange-500/20 before:to-transparent before:pointer-events-none after:absolute after:inset-y-0 after:right-0 after:w-1/2 after:bg-gradient-to-l after:from-blue-500/20 after:to-transparent after:pointer-events-none"},r.default.createElement("p",{className:"text-orange-400 font-black text-xs md:text-sm tracking-[0.18em] uppercase flex items-center justify-center gap-3 relative z-10"},r.default.createElement(t0,{className:"w-4 h-4 text-orange-500"})," ",h.announcementMessage," ",r.default.createElement(t0,{className:"w-4 h-4 text-blue-500"}))),_t&&h?.showBrandTicker!==!1&&r.default.createElement("div",{className:`mb-8 w-full overflow-hidden border-y backdrop-blur-sm py-2 premium-brand-ticker ${g?"border-slate-800/50 bg-[#0a0a0a]/50":"border-slate-200 bg-slate-100/50"}`},r.default.createElement("div",{className:"ticker-wrap"},r.default.createElement("div",{className:`ticker-content font-mono text-xs md:text-sm tracking-[0.16em] md:tracking-[0.38em] uppercase flex items-center gap-6 md:gap-12 ${g?"text-orange-500/50":"text-orange-600/70"}`,style:{animationDuration:`${h?.tickerSpeed||60}s`}},[1,2,3,4].map(l=>r.default.createElement(r.default.Fragment,{key:l},r.default.createElement("span",{className:"whitespace-nowrap"},h?.tickerText||`${h?.storeName||""}  calidad profesional  atencin real  compra segura`),r.default.createElement("span",null,"")))))),r.default.createElement("div",{className:`relative w-full max-w-5xl mx-auto aspect-[16/9] rounded-2xl sm:rounded-[2rem] overflow-hidden shadow-2xl mb-6 sm:mb-8 border group container-tv premium-hero ${g?"border-slate-800 bg-[#080808]":"border-slate-200/50 bg-slate-100"}`},r.default.createElement("div",{className:"grid-bg"}),r.default.createElement("div",{className:`absolute inset-0 bg-[url('/noise.svg')] z-[1] pointer-events-none ${g?"opacity-20":"opacity-10"}`}),r.default.createElement(oO,{settingsLoaded:_t,banners:h?.showHomeBannerCarousel===!1?[]:Ao,fallbackUrl:h?.heroUrl,autoplayMs:h?.homeBannerAutoplayMs||5e3,darkMode:g,onBannerClick:Ok,onActiveIndexChange:za}),r.default.createElement("div",{className:`absolute inset-x-0 bottom-0 sm:inset-0 flex flex-col justify-end sm:justify-center px-4 pb-3 sm:px-8 sm:pb-0 md:px-20 z-10 pointer-events-none transition-opacity duration-500 ${Kt===0?g?"bg-gradient-to-t md:bg-gradient-to-r from-[#050505] via-[#050505]/72 sm:from-[#050505] sm:via-[#050505]/82 to-transparent":"bg-gradient-to-t md:bg-gradient-to-r from-black/65 via-black/40 sm:from-black/60 sm:via-black/35 to-transparent":"bg-transparent opacity-0"}`},r.default.createElement("div",{className:"max-w-2xl animate-fade-up premium-hero-content"},_t?r.default.createElement(r.default.Fragment,null,r.default.createElement("span",{className:"bg-orange-500 text-black px-2.5 py-0.5 sm:px-3 sm:py-1 rounded-md text-[9px] sm:text-[10px] font-black uppercase tracking-widest mb-2 sm:mb-4 inline-block"},h?.heroBadge||"Tienda profesional lista para vender"),r.default.createElement("h1",{className:"text-xl sm:text-3xl md:text-5xl lg:text-6xl text-tv-huge font-black leading-[0.95] sm:leading-[0.9] mb-1.5 sm:mb-4 text-white hero-title-neon",style:{textShadow:"0 2px 12px rgba(0,0,0,0.4)"}},h?.heroTitle1||h?.storeName||"Tu tienda online"," ",r.default.createElement("br",null),r.default.createElement("span",{className:`text-transparent bg-clip-text bg-gradient-to-r hero-title-neon-gradient ${g?"from-orange-400 to-blue-600":"from-orange-600 to-blue-700"}`},h?.heroTitle2||"que transmite confianza y vende ms")),r.default.createElement("p",{className:"text-[10px] sm:text-sm md:text-base lg:text-lg mb-3 sm:mb-6 max-w-md font-semibold line-clamp-2 md:line-clamp-none text-white/85",style:{textShadow:"0 1px 6px rgba(0,0,0,0.5)"}},h?.heroSubtitle||"Diseo premium, compra simple y una experiencia fluida en cualquier dispositivo."),r.default.createElement("div",{className:"flex flex-row items-center gap-2 sm:gap-4 premium-hero-ctas"},r.default.createElement("button",{onClick:()=>document.getElementById("catalog").scrollIntoView({behavior:"smooth"}),className:"flex-1 sm:flex-none px-2 py-2 sm:px-8 sm:py-4 bg-white text-black font-black text-xs sm:text-base rounded-xl hover:bg-orange-400 transition flex items-center justify-center gap-1 sm:gap-2 group/btn pointer-events-auto"},"Ver catlogo ",r.default.createElement(Qc,{className:"w-3 h-3 sm:w-5 sm:h-5 group-hover/btn:translate-x-1 transition"})),r.default.createElement("button",{onClick:()=>e("guide"),className:"flex-1 sm:flex-none px-2 py-2 sm:px-6 sm:py-2.5 rounded-xl flex items-center justify-center gap-1 sm:gap-2 transition font-bold text-xs sm:text-sm group pointer-events-auto bg-white/10 backdrop-blur-md border border-white/20 hover:bg-white/20 text-white"},r.default.createElement(zs,{className:"w-3 h-3 sm:w-4 sm:h-4 text-orange-400"})," Cmo comprar"))):r.default.createElement(r.default.Fragment,null,r.default.createElement("div",{className:"h-6 w-32 bg-slate-700/50 rounded-md mb-4 animate-pulse"}),r.default.createElement("div",{className:"h-12 md:h-16 w-64 md:w-80 bg-slate-700/50 rounded-lg mb-2 animate-pulse"}),r.default.createElement("div",{className:"h-12 md:h-16 w-48 md:w-64 bg-slate-700/50 rounded-lg mb-4 animate-pulse"}),r.default.createElement("div",{className:"h-4 w-72 bg-slate-700/50 rounded mb-2 animate-pulse"}),r.default.createElement("div",{className:"h-4 w-56 bg-slate-700/50 rounded mb-6 animate-pulse"}),r.default.createElement("div",{className:"flex items-center gap-4"},r.default.createElement("div",{className:"h-12 w-40 bg-slate-700/50 rounded-xl animate-pulse"}),r.default.createElement("div",{className:"h-10 w-24 bg-slate-700/50 rounded-xl animate-pulse"})))))),_t&&h?.showFeaturesSection!==!1&&r.default.createElement("div",{className:`grid grid-cols-1 premium-benefits ${[h?.showFeature1!==!1,h?.showFeature2!==!1,h?.showFeature3!==!1].filter(Boolean).length===1?"md:grid-cols-1 max-w-md mx-auto":[h?.showFeature1!==!1,h?.showFeature2!==!1,h?.showFeature3!==!1].filter(Boolean).length===2?"md:grid-cols-2 max-w-2xl mx-auto":"md:grid-cols-3"} gap-4 md:gap-8 mb-12 container-tv`},_t?r.default.createElement(r.default.Fragment,null,h?.showFeature1!==!1&&r.default.createElement("div",{className:`p-4 rounded-[1.5rem] border backdrop-blur-sm flex flex-col items-center text-center transition duration-500 group premium-feature-card ${g?"bg-slate-900/35 border-slate-800 hover:bg-slate-900/50":"bg-white border-slate-200 hover:bg-slate-50 shadow-sm hover:shadow-md"}`},r.default.createElement("div",{className:`w-10 h-10 rounded-full flex items-center justify-center mb-3 group-hover:scale-110 transition ${g?"bg-orange-900/20":"bg-orange-100"}`},r.default.createElement(ir,{className:`w-5 h-5 ${g?"text-orange-400":"text-orange-600"}`})),r.default.createElement("h3",{className:`text-base font-bold mb-1 ${g?"text-white":"text-slate-900"}`},h?.feature1Title||""),r.default.createElement("p",{className:`text-[11px] ${g?"text-slate-400":"text-slate-500"}`},h?.feature1Desc||"")),h?.showFeature2!==!1&&r.default.createElement("div",{className:`p-4 rounded-[1.5rem] border backdrop-blur-sm flex flex-col items-center text-center transition duration-500 group premium-feature-card ${g?"bg-slate-900/35 border-slate-800 hover:bg-slate-900/50":"bg-white border-slate-200 hover:bg-slate-50 shadow-sm hover:shadow-md"}`},r.default.createElement("div",{className:`w-10 h-10 rounded-full flex items-center justify-center mb-3 group-hover:scale-110 transition ${g?"bg-purple-900/20":"bg-purple-100"}`},r.default.createElement(Bn,{className:`w-5 h-5 ${g?"text-purple-400":"text-purple-600"}`})),r.default.createElement("h3",{className:`text-base font-bold mb-1 ${g?"text-white":"text-slate-900"}`},h?.feature2Title||""),r.default.createElement("p",{className:`text-[11px] ${g?"text-slate-400":"text-slate-500"}`},h?.feature2Desc||"")),h?.showFeature3!==!1&&r.default.createElement("div",{className:`p-4 rounded-[1.5rem] border backdrop-blur-sm flex flex-col items-center text-center transition duration-500 group premium-feature-card ${g?"bg-slate-900/35 border-slate-800 hover:bg-slate-900/50":"bg-white border-slate-200 hover:bg-slate-50 shadow-sm hover:shadow-md"}`},r.default.createElement("div",{className:`w-10 h-10 rounded-full flex items-center justify-center mb-3 group-hover:scale-110 transition ${g?"bg-green-900/20":"bg-green-100"}`},r.default.createElement(n0,{className:`w-5 h-5 ${g?"text-green-400":"text-green-600"}`})),r.default.createElement("h3",{className:`text-base font-bold mb-1 ${g?"text-white":"text-slate-900"}`},h?.feature3Title||""),r.default.createElement("p",{className:`text-[11px] ${g?"text-slate-400":"text-slate-500"}`},h?.feature3Desc||""))):r.default.createElement(r.default.Fragment,null,[1,2,3].map(l=>r.default.createElement("div",{key:l,className:"p-4 rounded-[1.5rem] bg-slate-900/30 border border-slate-800 backdrop-blur-sm flex flex-col items-center text-center"},r.default.createElement("div",{className:"w-10 h-10 rounded-full bg-slate-700/50 mb-3 animate-pulse"}),r.default.createElement("div",{className:"h-5 w-32 bg-slate-700/50 rounded mb-2 animate-pulse"}),r.default.createElement("div",{className:"h-3 w-48 bg-slate-700/50 rounded mb-1 animate-pulse"}),r.default.createElement("div",{className:"h-3 w-40 bg-slate-700/50 rounded animate-pulse"}))))),r.default.createElement("div",{className:`mb-3 sm:mb-4 flex items-center justify-between gap-4 premium-catalog-intro ${g?"text-slate-200":"text-slate-800"}`},r.default.createElement("div",null,r.default.createElement("p",{className:"text-[10px] sm:text-xs font-bold uppercase tracking-[0.2em] text-slate-500"},"Catlogo"),r.default.createElement("h2",{className:`text-xl sm:text-2xl font-black tracking-tight ${g?"text-white":"text-slate-900"}`},"Nuestros productos")),r.default.createElement("div",{className:`text-xs sm:text-sm font-bold whitespace-nowrap px-3 py-1.5 rounded-full border ${g?"bg-slate-900/70 border-slate-700 text-slate-300":"bg-white border-slate-200 text-slate-600"}`},he.filter(l=>l.isActive!==!1).length," disponibles")),r.default.createElement("div",{id:"catalog",className:`sticky top-14 sm:top-16 md:top-20 z-40 backdrop-blur-xl py-2.5 sm:py-3 md:py-4 mb-4 sm:mb-6 md:mb-8 -mx-3 px-3 sm:-mx-4 sm:px-4 border-y transition-colors duration-300 premium-category-bar ${g?"bg-[#050505]/80 border-slate-800/50":"bg-white/90 border-slate-200"}`},r.default.createElement("div",{ref:Po,onMouseDown:Bd,onMouseLeave:Sc,onMouseUp:Do,onMouseMove:Cf,className:`flex items-center gap-2 overflow-x-auto pb-1 category-scroll ${jd?"cursor-grabbing scroll-auto":"cursor-grab scroll-smooth"}`,style:{scrollbarWidth:"none",msOverflowStyle:"none",WebkitOverflowScrolling:"touch"}},r.default.createElement(Cw,{className:`w-4 h-4 sm:w-5 sm:h-5 flex-shrink-0 ${g?"text-slate-500":"text-slate-400"}`}),r.default.createElement("button",{onClick:()=>Xn("Promos"),className:`px-3 sm:px-5 py-1.5 sm:py-2 rounded-lg sm:rounded-xl font-black text-[10px] sm:text-xs transition border whitespace-nowrap flex items-center gap-1.5 sm:gap-2 group relative overflow-hidden flex-shrink-0 ${It==="Promos"?"text-white border-purple-500 shadow-[0_0_16px_rgba(168,85,247,0.34)]":g?"bg-slate-900 border-slate-800 text-purple-300 hover:text-white hover:border-purple-500/40":"bg-purple-50 border-purple-200 text-purple-600 hover:bg-purple-100 hover:border-purple-300"}`},It==="Promos"&&r.default.createElement("div",{className:"absolute inset-0 bg-gradient-to-r from-purple-600 to-blue-600 animate-gradient-xy"}),r.default.createElement("span",{className:"relative z-10 flex items-center gap-1.5 sm:gap-2"},r.default.createElement(qs,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4"})," Packs")),r.default.createElement("button",{onClick:()=>Xn("Ofertas"),className:`px-3 sm:px-5 py-1.5 sm:py-2 rounded-lg sm:rounded-xl font-bold text-[10px] sm:text-xs transition border whitespace-nowrap flex items-center gap-1.5 sm:gap-2 flex-shrink-0 ${It==="Ofertas"?"bg-red-600/20 text-red-500 border-red-500 shadow-[0_0_12px_rgba(220,38,38,0.26)]":g?"bg-slate-900 border-slate-800 text-red-300 hover:text-white hover:border-red-500/40":"bg-red-50 border-red-200 text-red-600 hover:bg-red-100 hover:border-red-300"}`},r.default.createElement(Jc,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4"})," Ofertas"),r.default.createElement("button",{onClick:()=>Xn(""),className:`px-3 sm:px-5 py-1.5 sm:py-2 rounded-lg sm:rounded-xl font-bold text-[10px] sm:text-xs transition border whitespace-nowrap flex-shrink-0 ${It===""?g?"bg-white text-black border-white shadow-[0_0_15px_rgba(255,255,255,0.2)]":"bg-slate-900 text-white border-slate-900 shadow-md":g?"bg-slate-900 border-slate-800 text-slate-400 hover:text-white hover:border-slate-600":"bg-white border-slate-200 text-slate-600 hover:bg-slate-50 hover:border-slate-300"}`},"Todo"),h?.categories?.map(l=>r.default.createElement("button",{key:l,onClick:()=>Xn(l),className:`px-3 sm:px-5 py-1.5 sm:py-2 rounded-lg sm:rounded-xl font-bold text-[10px] sm:text-xs transition border whitespace-nowrap flex-shrink-0 ${It===l?"bg-orange-500 text-white border-orange-500 shadow-[0_0_15px_rgba(249,115,22,0.3)]":g?"bg-slate-900 border-slate-800 text-slate-400 hover:text-white hover:border-slate-600":"bg-white border-slate-200 text-slate-600 hover:bg-orange-50 hover:border-orange-300 hover:text-orange-600"}`},l)))),It==="Promos"&&r.default.createElement("div",{className:"mb-16 animate-fade-in premium-promos-section"},_n.length>0?r.default.createElement(r.default.Fragment,null,r.default.createElement("h2",{className:`text-3xl font-black mb-8 flex items-center gap-3 ${g?"text-white":"text-slate-900"}`},r.default.createElement(dl,{className:"w-8 h-8 text-purple-500"})," Packs y promociones"),r.default.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8"},_n.map(l=>{let m=1/0;l.items.forEach(x=>{let E=he.find(U=>U.id===x.productId),V=E&&Number(E.stock)||0,P=Math.floor(V/x.quantity);P<m&&(m=P)});let v=m>0;return r.default.createElement("div",{key:l.id,className:`rounded-[2.2rem] border overflow-hidden group transition duration-500 relative flex flex-col premium-promo-card ${g?"bg-gradient-to-br from-purple-900/8 to-blue-900/8 border-slate-700/80 hover:border-purple-500/50 shadow-[0_10px_30px_rgba(2,6,23,0.35)]":"bg-white border-slate-200 shadow-sm hover:shadow-xl"}`},r.default.createElement("div",{className:`aspect-square flex items-center justify-center relative overflow-hidden cursor-zoom-in ${g?"bg-slate-900/50":"bg-slate-50"}`,onClick:()=>Yt({...l,isPromo:!0,stock:m})},r.default.createElement("img",{src:l.image,alt:l.name||"Promo",className:"w-full h-full object-contain transition duration-700 group-hover:scale-110"}),r.default.createElement("div",{className:`absolute inset-0 bg-gradient-to-t via-transparent to-transparent ${g?"from-[#0a0a0a]":"from-white/50"}`}),r.default.createElement("div",{className:"absolute top-4 right-4 bg-purple-600 text-white text-xs font-black px-3 py-1 rounded-full uppercase tracking-[0.12em] shadow-lg"},"Combo")),r.default.createElement("div",{className:"p-7 flex-1 flex flex-col"},r.default.createElement("h3",{className:`text-2xl font-black mb-2 leading-tight ${g?"text-white":"text-slate-900"}`},l.name),r.default.createElement("p",{className:`text-sm mb-6 flex-1 ${g?"text-slate-300":"text-slate-600"}`},l.description),r.default.createElement("div",{className:"mb-6 space-y-2"},r.default.createElement("p",{className:"text-[10px] uppercase font-bold text-slate-500 tracking-[0.2em]"},"Incluye:"),l.items.map((x,E)=>{let V=he.find(P=>P.id===x.productId);return r.default.createElement("div",{key:E,className:`flex items-center gap-2 text-sm ${g?"text-slate-400":"text-slate-600"}`},r.default.createElement(Me,{className:`w-3.5 h-3.5 ${g?"text-purple-500":"text-purple-600"}`}),r.default.createElement("span",{className:`font-bold ${g?"text-white":"text-slate-900"}`},x.quantity,"x")," ",V?V.name:"Producto")})),r.default.createElement("div",{className:`flex items-center justify-between mt-auto pt-6 border-t ${g?"border-white/5":"border-slate-100"}`},r.default.createElement("div",{className:"flex flex-col"},r.default.createElement("span",{className:"text-slate-500 text-xs font-bold line-through decoration-red-500 decoration-2"},"$",l.items.reduce((x,E)=>{let V=he.find(P=>P.id===E.productId);return x+(Number(V?.basePrice)||0)*E.quantity},0).toLocaleString()),r.default.createElement("span",{className:`text-3xl font-black ${g?"text-purple-300":"text-purple-700"}`},"$",Number(l.price).toLocaleString())),r.default.createElement("button",{onClick:()=>{if(!v)return F("Sin stock disponible para esta promo.","warning");let x={id:l.id,name:l.name,basePrice:l.price,image:l.image,isPromo:!0,items:l.items,stock:m};Mi(x,1)},disabled:!v,className:`px-6 py-3 rounded-xl font-bold flex items-center gap-2 transition shadow-lg ${v?g?"bg-white text-black hover:bg-purple-400 hover:text-white hover:scale-105":"bg-slate-900 text-white hover:bg-purple-600 hover:scale-105":g?"bg-slate-800 text-slate-500 cursor-not-allowed":"bg-slate-200 text-slate-400 cursor-not-allowed"}`},v?r.default.createElement(Go,{className:"w-5 h-5"}):r.default.createElement(lt,{className:"w-5 h-5"}),v?"Agregar":"Agotado"))))}))):r.default.createElement("div",{className:`flex flex-col items-center justify-center p-20 text-center border-2 border-dashed rounded-[3rem] premium-empty-state ${g?"border-slate-800 bg-slate-950/30":"border-slate-200 bg-slate-50"}`},r.default.createElement("div",{className:`p-8 rounded-full mb-6 shadow-2xl border ${g?"bg-slate-900 border-slate-800":"bg-white border-slate-200"}`},r.default.createElement(dl,{className:`w-16 h-16 ${g?"text-slate-600":"text-slate-400"}`})),r.default.createElement("h3",{className:`text-2xl font-black mb-2 ${g?"text-white":"text-slate-900"}`},"Sin promociones activas"),r.default.createElement("p",{className:"text-slate-500 max-w-sm"},"No hay promociones disponibles en este momento. Volv pronto!"),r.default.createElement("button",{onClick:()=>Xn(""),className:`mt-6 px-6 py-3 rounded-xl font-bold transition border ${g?"bg-orange-900/20 hover:bg-orange-900/40 text-orange-400 border-orange-500/20":"bg-orange-50 hover:bg-orange-100 text-orange-600 border-orange-200"}`},"Ver todo el catlogo"))),he.filter(l=>l.isActive!==!1).length===0?r.default.createElement("div",{className:`flex flex-col items-center justify-center p-20 text-center border-2 border-dashed rounded-[3rem] premium-empty-state ${g?"border-slate-800 bg-slate-950/30":"border-slate-200 bg-slate-50"}`},r.default.createElement("div",{className:`p-8 rounded-full mb-6 shadow-2xl border ${g?"bg-slate-900 border-slate-800":"bg-white border-slate-200"}`},r.default.createElement(sr,{className:`w-16 h-16 ${g?"text-slate-600":"text-slate-400"}`})),r.default.createElement("h3",{className:`text-2xl font-black mb-2 ${g?"text-white":"text-slate-900"}`},"Catlogo Vaco"),r.default.createElement("p",{className:"text-slate-500 max-w-sm"},"Todava no hay productos disponibles. Actualiz el catlogo y esta seccin se mostrar automticamente.")):r.default.createElement(r.default.Fragment,null,vw.length===0&&It!=="Promos"&&r.default.createElement("div",{className:"flex flex-col items-center justify-center p-20 text-center col-span-full animate-fade-in w-full premium-empty-state"},r.default.createElement("div",{className:`p-6 rounded-full mb-4 inline-block border ${g?"bg-slate-900/50 border-slate-800":"bg-white border-slate-200"}`},r.default.createElement(ul,{className:`w-12 h-12 ${g?"text-slate-500":"text-slate-400"}`})),r.default.createElement("h3",{className:`text-xl font-bold mb-2 ${g?"text-white":"text-slate-900"}`},"No encontramos productos con esos filtros"),r.default.createElement("p",{className:"text-slate-500 mb-6 max-w-md mx-auto"},"No hay productos que coincidan con ",r.default.createElement("span",{className:`${g?"text-white":"text-slate-900"} font-bold`},'"',Dt,'"'),It&&r.default.createElement("span",null," en la categora ",r.default.createElement("span",{className:`${g?"text-white":"text-slate-900"} font-bold`},It)),"."),r.default.createElement("button",{onClick:()=>{Ec(""),Xn("")},className:`px-6 py-3 rounded-xl font-bold transition border ${g?"bg-orange-900/20 hover:bg-orange-900/40 text-orange-400 border-orange-500/20":"bg-orange-50 hover:bg-orange-100 text-orange-600 border-orange-200"}`},"Quitar filtros")),r.default.createElement("div",{className:"grid product-grid-responsive mt-1 sm:mt-2 gap-3 sm:gap-5 md:gap-6 pb-32"},vw.map(l=>r.default.createElement(uO,{key:l.id,p:l,settings:h,currentUser:Y,toggleFavorite:uw,setSelectedProduct:Yt,manageCart:Mi,calculateItemPrice:$i,darkMode:g}))))),t==="cart"&&r.default.createElement("div",{className:"max-w-6xl mx-auto animate-fade-up px-2 sm:px-4 md:px-8 pb-20 cart-view"},r.default.createElement("div",{className:"flex flex-col gap-3 sm:gap-4 mb-6 sm:mb-8 pt-4 sm:pt-8 sm:flex-row sm:items-center sm:justify-between"},r.default.createElement("div",{className:"flex items-center gap-3 sm:gap-4"},r.default.createElement("button",{onClick:()=>e("store"),className:`p-2.5 sm:p-3 rounded-full transition group ${g?"bg-slate-900 text-slate-400 hover:text-white hover:bg-slate-800":"bg-slate-100 text-slate-500 hover:text-slate-900 hover:bg-slate-200"}`},r.default.createElement(Fs,{className:"w-5 h-5 sm:w-6 sm:h-6 group-hover:-translate-x-1 transition"})),r.default.createElement("h1",{className:`text-2xl sm:text-4xl font-black flex items-center gap-2 sm:gap-3 ${g?"text-white":"text-slate-900"}`},r.default.createElement(Bs,{className:"w-7 h-7 sm:w-10 sm:h-10 text-orange-500"})," Mi Carrito")),Be.length>0&&h?.showCartWhatsappCheckout===!0&&r.default.createElement("button",{onClick:()=>{let l=Hk(h?.whatsappLink,Kk());if(!l){F("Configura el enlace de WhatsApp en Admin  Configuracin  Social.","warning");return}window.open(l,"_blank")},className:"w-full sm:w-auto px-5 py-3 bg-green-600 hover:bg-green-500 text-white rounded-2xl font-black transition shadow-lg hover:shadow-green-500/30 flex items-center justify-center gap-2"},r.default.createElement(ko,{className:"w-5 h-5"})," Terminar compra por WhatsApp")),Be.length===0?r.default.createElement("div",{className:`flex flex-col items-center justify-center p-16 text-center border-2 border-dashed rounded-[3rem] ${g?"border-slate-800 bg-slate-950/30":"border-slate-200 bg-slate-50"}`},r.default.createElement("div",{className:`p-8 rounded-full mb-6 shadow-xl border ${g?"bg-slate-900 border-slate-800":"bg-white border-slate-200"}`},r.default.createElement(Go,{className:`w-16 h-16 ${g?"text-slate-600":"text-slate-400"}`})),r.default.createElement("h3",{className:`text-2xl font-black mb-2 ${g?"text-white":"text-slate-900"}`},"Tu carrito est vaco"),r.default.createElement("p",{className:"text-slate-500 text-sm max-w-xs mb-8 leading-relaxed"},"Es un buen momento para buscar ese producto que tanto quieres!"),r.default.createElement("button",{onClick:()=>e("store"),className:"px-8 py-4 bg-orange-600 text-white rounded-xl font-bold transition shadow-lg hover:bg-orange-500 hover:shadow-orange-500/30 flex items-center gap-2"},"Ir a la Tienda ",r.default.createElement(Qc,{className:"w-5 h-5"}))):r.default.createElement("div",{className:"grid lg:grid-cols-3 gap-4 sm:gap-8"},r.default.createElement("div",{className:"lg:col-span-2 space-y-4"},Be.map(l=>r.default.createElement("div",{key:l.product.id,className:`cart-item-row p-4 sm:p-5 md:p-6 rounded-2xl sm:rounded-3xl border flex flex-row gap-3 sm:gap-4 md:gap-6 items-center group relative overflow-hidden transition duration-300 ${g?"bg-[#0a0a0a] border-slate-800 hover:border-orange-900/50":"bg-white border-slate-200 hover:border-orange-200 shadow-sm hover:shadow-md"}`},r.default.createElement("div",{className:"cart-item-image w-20 sm:w-24 md:w-32 flex-shrink-0"},r.default.createElement("img",{src:l.product.image,alt:l.product.name,className:"w-auto h-auto max-w-full max-h-full object-contain rounded-xl sm:rounded-2xl"})),r.default.createElement("div",{className:"flex-1 min-w-0 text-left z-10"},r.default.createElement("div",{className:"flex justify-between items-start w-full"},r.default.createElement("h3",{className:`cart-item-title font-bold text-base sm:text-lg md:text-lg truncate mb-1 pr-2 sm:pr-4 ${g?"text-white":"text-slate-900"}`},l.product.name),r.default.createElement("button",{onClick:()=>Mi(l.product,-l.quantity),className:`p-2 rounded-lg transition ${g?"text-slate-600 hover:text-red-500 bg-slate-900 hover:bg-red-900/20":"text-slate-400 hover:text-red-600 bg-slate-50 hover:bg-red-50"}`},r.default.createElement(mt,{className:"w-5 h-5"}))),r.default.createElement("p",{className:"cart-item-unit-price text-orange-500 font-bold text-base mb-4"},"$",$i(l.product?.basePrice??0,l.product?.discount??0).toLocaleString()," ",r.default.createElement("span",{className:"text-slate-500 font-normal"},"unitario")),r.default.createElement("div",{className:"flex items-center justify-start gap-2 sm:gap-4"},r.default.createElement("div",{className:`cart-qty-wrap flex items-center gap-3 rounded-xl p-1 border ${g?"bg-slate-900 border-slate-700":"bg-slate-50 border-slate-200"}`},r.default.createElement("button",{onClick:()=>Mi(l.product,-1),className:`w-10 h-10 flex items-center justify-center rounded-lg transition ${g?"hover:bg-slate-800 text-slate-400 hover:text-white":"hover:bg-white text-slate-500 hover:text-slate-900"}`},r.default.createElement(lh,{className:"w-4 h-4"})),r.default.createElement("span",{className:`text-base font-bold w-8 text-center ${g?"text-white":"text-slate-900"}`},l.quantity),r.default.createElement("button",{onClick:()=>Mi(l.product,1),className:`w-10 h-10 flex items-center justify-center rounded-lg transition ${g?"hover:bg-slate-800 text-slate-400 hover:text-white":"hover:bg-white text-slate-500 hover:text-slate-900"}`},r.default.createElement(En,{className:"w-4 h-4"}))),r.default.createElement("div",{className:`hidden md:block h-8 w-px mx-2 ${g?"bg-slate-800":"bg-slate-200"}`}),r.default.createElement("p",{className:"text-xs text-slate-500 font-bold uppercase hidden md:block"},"Subtotal: ",r.default.createElement("span",{className:`text-lg ml-1 ${g?"text-white":"text-slate-900"}`},"$",($i(l.product?.basePrice??0,l.product?.discount??0)*(l.quantity||0)).toLocaleString()))))))),r.default.createElement("div",{className:`cart-summary-card border p-5 sm:p-8 rounded-2xl sm:rounded-[2.5rem] h-fit sticky top-20 sm:top-28 shadow-2xl transition-colors duration-300 ${g?"bg-[#0a0a0a] border-slate-800":"bg-white border-slate-200"}`},r.default.createElement("h3",{className:`text-2xl font-black mb-8 border-b pb-4 transition-colors duration-300 ${g?"text-white border-slate-800":"text-slate-900 border-slate-200"}`},"Resumen de Compra"),r.default.createElement("div",{className:"mb-8"},r.default.createElement("label",{className:`text-xs font-bold uppercase tracking-widest mb-3 block flex items-center gap-2 ${g?"text-slate-500":"text-slate-400"}`},r.default.createElement(dl,{className:"w-4 h-4"})," Cupn de Descuento"),fn?r.default.createElement("div",{className:"bg-purple-900/20 border border-purple-500/30 p-4 rounded-2xl flex justify-between items-center relative overflow-hidden group animate-fade-up"},r.default.createElement("div",{className:"absolute inset-0 bg-purple-500/5 group-hover:bg-purple-500/10 transition"}),r.default.createElement("div",{className:"relative z-10"},r.default.createElement("p",{className:"font-black text-purple-300 text-lg tracking-widest"},fn.code),r.default.createElement("p",{className:"text-xs text-purple-400 font-bold"},fn.type==="fixed"?`$${fn.value} OFF`:`${fn.value}% OFF`)),r.default.createElement("button",{onClick:()=>Jr(null),className:`p-2 rounded-full transition relative z-10 border border-transparent hover:border-red-500/30 ${g?"bg-slate-900/50 text-purple-300 hover:text-red-400 hover:bg-red-900/30":"bg-white text-purple-600 hover:text-red-600 hover:bg-red-50"}`},r.default.createElement(mt,{className:"w-4 h-4"}))):r.default.createElement("button",{onClick:()=>Vo(!0),className:`w-full py-4 border border-dashed rounded-2xl transition flex items-center justify-center gap-2 text-sm font-bold group ${g?"border-slate-700 hover:border-purple-500 bg-slate-900/30 hover:bg-purple-900/10 text-slate-400 hover:text-purple-300":"border-slate-300 hover:border-purple-500 bg-slate-50 hover:bg-purple-50 text-slate-500 hover:text-purple-600"}`},r.default.createElement(Gs,{className:"w-5 h-5 group-hover:rotate-12 transition"})," Ver cupones disponibles")),r.default.createElement("div",{className:`space-y-4 border-b pb-8 mb-8 ${g?"border-slate-800":"border-slate-200"}`},r.default.createElement("div",{className:`flex justify-between font-medium ${g?"text-slate-400":"text-slate-600"}`},r.default.createElement("span",null,"Subtotal"),r.default.createElement("span",{className:`font-mono font-bold ${g?"text-white":"text-slate-900"}`},"$",Sr.toLocaleString())),r.default.createElement("div",{className:`flex justify-between text-sm font-medium ${g?"text-slate-400":"text-slate-600"}`},r.default.createElement("span",null,"Envo ",pe.shippingMethod==="Delivery"?"(A domicilio)":"(Retiro)"),r.default.createElement("span",{className:"text-orange-500 font-bold flex items-center gap-1"},r.default.createElement(ss,{className:"w-3 h-3"}),zo>0?`$${zo.toLocaleString()}`:pe.shippingMethod==="Pickup"?"Gratis":"Envo Gratis!")),fn&&r.default.createElement("div",{className:"flex justify-between text-purple-500 font-bold text-sm animate-pulse bg-purple-900/10 p-2 rounded-lg"},r.default.createElement("span",null,"Descuento aplicado"),r.default.createElement("span",null,"-$",Xd.toLocaleString()))),r.default.createElement("div",{className:"flex justify-between items-end mb-8"},r.default.createElement("span",{className:`font-bold text-lg ${g?"text-white":"text-slate-900"}`},"Total Final"),r.default.createElement("span",{className:`text-4xl font-black tracking-tighter ${g?"text-white neon-text":"text-slate-900"}`},"$",Bo.toLocaleString())),r.default.createElement("button",{onClick:()=>e("checkout"),className:"w-full bg-gradient-to-r from-orange-600 to-blue-600 hover:from-orange-500 hover:to-blue-500 py-5 text-white font-bold text-lg rounded-2xl shadow-[0_0_25px_rgba(249,115,22,0.3)] hover:shadow-[0_0_35px_rgba(249,115,22,0.5)] transition-all flex items-center justify-center gap-3 transform hover:-translate-y-1"},"Iniciar Compra ",r.default.createElement(Qc,{className:"w-6 h-6"}))))),t==="checkout"&&r.default.createElement("div",{className:"max-w-5xl mx-auto pb-20 animate-fade-up px-2 sm:px-4 md:px-8 checkout-view"},r.default.createElement("button",{onClick:()=>e("cart"),className:`mb-4 sm:mb-8 mt-4 sm:mt-8 flex items-center gap-2 font-bold transition text-sm sm:text-base ${g?"text-slate-400 hover:text-white":"text-slate-500 hover:text-slate-900"}`},r.default.createElement(Fs,{className:"w-4 h-4 sm:w-5 sm:h-5"})," Volver al Carrito"),r.default.createElement("div",{className:"grid md:grid-cols-5 gap-4 sm:gap-8"},r.default.createElement("div",{className:"md:col-span-3 space-y-8"},r.default.createElement("div",{className:`checkout-card checkout-shipping-card border p-4 sm:p-6 md:p-8 rounded-2xl sm:rounded-[2.5rem] shadow-xl relative overflow-hidden ${g?"bg-[#0a0a0a] border-slate-800":"bg-white border-slate-200"}`},r.default.createElement("div",{className:"absolute top-0 right-0 w-32 h-32 bg-orange-500/10 rounded-bl-[100px] pointer-events-none"}),r.default.createElement("h2",{className:`text-xl sm:text-2xl font-black mb-4 sm:mb-6 flex items-center gap-2 sm:gap-3 ${g?"text-white":"text-slate-900"}`},r.default.createElement(ss,{className:"text-orange-500 w-5 h-5 sm:w-6 sm:h-6"})," Mtodo de Entrega"),r.default.createElement("div",{className:"checkout-options-grid grid grid-cols-2 gap-3 sm:gap-4 relative z-10 mb-4 sm:mb-6"},h?.shippingPickup?.enabled&&r.default.createElement("button",{onClick:()=>$n({...pe,shippingMethod:"Pickup"}),className:`p-4 sm:p-6 rounded-xl sm:rounded-2xl border transition flex flex-col items-center gap-2 sm:gap-3 relative overflow-hidden group ${pe.shippingMethod==="Pickup"?"border-orange-500 bg-orange-500/10 text-orange-500":g?"border-slate-700 bg-slate-900/30 text-slate-500 hover:border-slate-500":"border-slate-200 bg-slate-50 text-slate-500 hover:border-slate-400"}`},pe.shippingMethod==="Pickup"&&r.default.createElement(Me,{className:"absolute top-2 right-2 w-4 h-4 sm:w-5 sm:h-5 text-orange-500"}),r.default.createElement(s0,{className:"w-6 h-6 sm:w-8 sm:h-8 group-hover:scale-110 transition"}),r.default.createElement("span",{className:"text-xs sm:text-sm font-black uppercase"},"Retiro en Local")),h?.shippingDelivery?.enabled&&r.default.createElement("button",{onClick:()=>$n({...pe,shippingMethod:"Delivery"}),className:`p-4 sm:p-6 rounded-xl sm:rounded-2xl border transition flex flex-col items-center gap-2 sm:gap-3 relative overflow-hidden group ${pe.shippingMethod==="Delivery"?"border-orange-500 bg-orange-500/10 text-orange-500":g?"border-slate-700 bg-slate-900/30 text-slate-500 hover:border-slate-500":"border-slate-200 bg-slate-50 text-slate-500 hover:border-slate-400"}`},pe.shippingMethod==="Delivery"&&r.default.createElement(Me,{className:"absolute top-2 right-2 w-4 h-4 sm:w-5 sm:h-5 text-orange-500"}),r.default.createElement(ss,{className:"w-6 h-6 sm:w-8 sm:h-8 group-hover:scale-110 transition"}),r.default.createElement("span",{className:"text-xs sm:text-sm font-black uppercase"},"Envo a Domicilio"))),pe.shippingMethod==="Pickup"&&r.default.createElement("div",{className:`p-4 rounded-xl animate-fade-up flex gap-3 border ${g?"bg-orange-900/10 border-orange-500/20":"bg-orange-50 border-orange-200"}`},r.default.createElement(zs,{className:"w-5 h-5 text-orange-400 shrink-0"}),r.default.createElement("p",{className:`text-xs ${g?"text-orange-200":"text-orange-700"}`},"Retira tu pedido en: ",r.default.createElement("span",{className:`${g?"text-orange-100":"text-orange-900"} font-bold`},h?.shippingPickup?.address||"Direccin a coordinar"))),pe.shippingMethod==="Delivery"&&r.default.createElement("div",{className:"space-y-5 relative z-10 animate-fade-up mt-4"},r.default.createElement("h3",{className:`text-sm font-bold uppercase tracking-widest pl-2 ${g?"text-slate-400":"text-slate-500"}`},"Datos de Destino"),r.default.createElement("div",null,r.default.createElement("label",{htmlFor:"checkout-address",className:`text-xs font-bold uppercase ml-2 mb-1 block ${g?"text-slate-500":"text-slate-400"}`},"Direccin y Altura"),r.default.createElement("input",{className:`w-full border rounded-xl p-4 transition font-medium outline-none focus:border-orange-500 focus:ring-1 focus:ring-orange-500 ${g?"bg-slate-900 border-slate-700 text-white placeholder-slate-600":"bg-white border-slate-200 text-slate-900 placeholder-slate-400"}`,id:"checkout-address",name:"shipping_address",autoComplete:"address-line1",required:!0,placeholder:"Ej: Av. Santa Fe 1234",value:pe.address||"",onChange:l=>$n({...pe,address:l.target.value})})),r.default.createElement("div",{className:"grid grid-cols-2 gap-5"},r.default.createElement("div",null,r.default.createElement("label",{htmlFor:"checkout-city",className:`text-xs font-bold uppercase ml-2 mb-1 block ${g?"text-slate-500":"text-slate-400"}`},"Ciudad"),r.default.createElement("input",{className:`w-full border rounded-xl p-4 transition font-medium outline-none focus:border-orange-500 ${g?"bg-slate-900 border-slate-700 text-white placeholder-slate-600":"bg-white border-slate-200 text-slate-900 placeholder-slate-400"}`,id:"checkout-city",name:"shipping_city",autoComplete:"address-level2",required:!0,placeholder:"Ej: Rosario",value:pe.city||"",onChange:l=>$n({...pe,city:l.target.value})})),r.default.createElement("div",null,r.default.createElement("label",{htmlFor:"checkout-province",className:`text-xs font-bold uppercase ml-2 mb-1 block ${g?"text-slate-500":"text-slate-400"}`},"Provincia"),r.default.createElement("input",{className:`w-full border rounded-xl p-4 transition font-medium outline-none focus:border-orange-500 ${g?"bg-slate-900 border-slate-700 text-white placeholder-slate-600":"bg-white border-slate-200 text-slate-900 placeholder-slate-400"}`,id:"checkout-province",name:"shipping_province",autoComplete:"address-level1",required:!0,placeholder:"Ej: Santa Fe",value:pe.province||"",onChange:l=>$n({...pe,province:l.target.value})}))),r.default.createElement("div",null,r.default.createElement("label",{htmlFor:"checkout-zip",className:`text-xs font-bold uppercase ml-2 mb-1 block ${g?"text-slate-500":"text-slate-400"}`},"Cdigo Postal"),r.default.createElement("input",{className:`w-full border rounded-xl p-4 transition font-medium outline-none focus:border-orange-500 ${g?"bg-slate-900 border-slate-700 text-white placeholder-slate-600":"bg-white border-slate-200 text-slate-900 placeholder-slate-400"}`,id:"checkout-zip",name:"shipping_zip",autoComplete:"postal-code",required:!0,placeholder:"Ej: 2000",value:pe.zipCode||"",onChange:l=>$n({...pe,zipCode:l.target.value})})))),r.default.createElement("div",{className:`checkout-card checkout-payment-card border p-4 sm:p-6 md:p-8 rounded-2xl sm:rounded-[2.5rem] shadow-xl relative overflow-hidden ${g?"bg-[#0a0a0a] border-slate-800":"bg-white border-slate-200"}`},r.default.createElement("div",{className:"absolute top-0 right-0 w-32 h-32 bg-green-500/10 rounded-bl-[100px] pointer-events-none"}),r.default.createElement("h2",{className:`text-xl sm:text-2xl font-black mb-4 sm:mb-6 flex items-center gap-2 sm:gap-3 ${g?"text-white":"text-slate-900"}`},r.default.createElement(Us,{className:"text-orange-500 w-5 h-5 sm:w-6 sm:h-6"})," Mtodo de Pago"),r.default.createElement("div",{className:"checkout-payment-grid payment-grid-mobile grid grid-cols-1 md:grid-cols-2 gap-4 relative z-10"},h?.paymentMercadoPago?.enabled&&r.default.createElement("button",{onClick:()=>$n({...pe,paymentChoice:"Tarjeta"}),className:`p-4 md:p-6 rounded-2xl border transition flex flex-col items-center gap-3 relative overflow-hidden group ${pe.paymentChoice==="Tarjeta"?g?"border-orange-500 bg-orange-900/20 text-orange-300 shadow-[0_0_20px_rgba(249,115,22,0.2)]":"border-orange-500 bg-orange-50 text-orange-600 shadow-[0_0_16px_rgba(249,115,22,0.15)]":g?"border-slate-700 bg-slate-900/30 text-slate-400 hover:border-slate-500 hover:bg-slate-800":"border-slate-200 bg-slate-50 text-slate-600 hover:border-slate-300 hover:bg-slate-100"}`},pe.paymentChoice==="Tarjeta"&&r.default.createElement(Me,{className:"absolute top-2 right-2 text-orange-500"}),r.default.createElement(Us,{className:"w-8 h-8 group-hover:scale-110 transition"}),r.default.createElement("span",{className:"text-sm font-black tracking-wider uppercase"},"Tarjeta")),h?.paymentTransfer?.enabled&&r.default.createElement("button",{onClick:()=>$n({...pe,paymentChoice:"Transferencia"}),className:`p-4 md:p-6 rounded-2xl border transition flex flex-col items-center gap-3 relative overflow-hidden group ${pe.paymentChoice==="Transferencia"?g?"border-orange-500 bg-orange-900/20 text-orange-300 shadow-[0_0_20px_rgba(249,115,22,0.2)]":"border-orange-500 bg-orange-50 text-orange-600 shadow-[0_0_16px_rgba(249,115,22,0.15)]":g?"border-slate-700 bg-slate-900/30 text-slate-400 hover:border-slate-500 hover:bg-slate-800":"border-slate-200 bg-slate-50 text-slate-600 hover:border-slate-300 hover:bg-slate-100"}`},pe.paymentChoice==="Transferencia"&&r.default.createElement(Me,{className:"absolute top-2 right-2 text-orange-500"}),r.default.createElement(d0,{className:"w-8 h-8 group-hover:scale-110 transition"}),r.default.createElement("span",{className:"text-sm font-black tracking-wider uppercase"},"Transferencia")),h?.paymentCash&&pe.shippingMethod!=="Delivery"&&r.default.createElement("button",{onClick:()=>$n({...pe,paymentChoice:"Efectivo"}),className:`p-4 md:p-6 rounded-2xl border transition flex flex-col items-center gap-3 relative overflow-hidden group ${pe.paymentChoice==="Efectivo"?g?"border-orange-500 bg-orange-900/20 text-orange-300 shadow-[0_0_20px_rgba(249,115,22,0.2)]":"border-orange-500 bg-orange-50 text-orange-600 shadow-[0_0_16px_rgba(249,115,22,0.15)]":g?"border-slate-700 bg-slate-900/30 text-slate-400 hover:border-slate-500 hover:bg-slate-800":"border-slate-200 bg-slate-50 text-slate-600 hover:border-slate-300 hover:bg-slate-100"}`},pe.paymentChoice==="Efectivo"&&r.default.createElement(Me,{className:"absolute top-2 right-2 text-orange-500"}),r.default.createElement(Qf,{className:"w-8 h-8 group-hover:scale-110 transition"}),r.default.createElement("span",{className:"text-sm font-black tracking-wider uppercase"},"Efectivo"))),pe.paymentChoice==="Tarjeta"&&r.default.createElement("div",{className:"mt-8 animate-fade-up"},r.default.createElement("div",{className:`p-6 rounded-2xl border ${g?"bg-slate-900/50 border-orange-500/30":"bg-slate-50 border-orange-200"}`},r.default.createElement("h3",{className:`font-bold mb-4 flex items-center gap-2 ${g?"text-white":"text-slate-900"}`},r.default.createElement(Us,{className:"w-5 h-5 text-orange-400"}),"Ingres los datos de tu tarjeta"),r.default.createElement("p",{className:`text-sm mb-4 ${g?"text-slate-400":"text-slate-600"}`},"Pag de forma segura con Visa, MasterCard, AMEX y ms."),r.default.createElement("div",{className:`mb-6 p-4 rounded-xl flex items-start gap-3 border ${g?"bg-orange-900/10 border-orange-500/20":"bg-orange-50 border-orange-200"}`},r.default.createElement(Bi,{className:"w-5 h-5 text-orange-500 shrink-0 mt-0.5"}),r.default.createElement("p",{className:`text-xs leading-relaxed font-medium ${g?"text-orange-200":"text-orange-700"}`},r.default.createElement("strong",{className:`block mb-1 ${g?"text-orange-400":"text-orange-600"}`},"ATENCIN:"),"Si tens activado un ",r.default.createElement("span",{className:`${g?"text-white":"text-slate-900"} font-bold`},"AdBlocker/Bloqueador de Anuncios"),", por favor desactivalo temporalmente. Es posible que el pago no se concrete si el bloqueador interfiere con la seguridad del banco.")),r.default.createElement("div",{id:"cardPaymentBrick_container",ref:kk,className:"min-h-[400px]"}),gn&&r.default.createElement("div",{className:"mt-4 space-y-3"},r.default.createElement("div",{className:`p-4 border rounded-xl text-sm flex items-start gap-3 ${g?"bg-red-900/20 border-red-500/30 text-red-400":"bg-red-50 border-red-200 text-red-700"}`},r.default.createElement(Gi,{className:"w-5 h-5 flex-shrink-0"}),r.default.createElement("div",{className:"flex-1"},r.default.createElement("p",null,typeof gn=="string"?gn:gn?.message),typeof gn!="string"&&gn?.code&&r.default.createElement("p",{className:`text-[11px] mt-1 font-mono ${g?"text-red-300/90":"text-red-600"}`},"Cdigo tcnico: ",gn.code))),r.default.createElement("button",{onClick:()=>{if(typeof gn!="string"&&(gn?.canRetryConfirmation||!!Wd)){Xk();return}ht(null),zf({force:!0})},disabled:tr,className:`w-full py-3 rounded-xl text-sm font-bold transition-all flex items-center justify-center gap-2 ${tr?g?"bg-slate-700 text-slate-300 cursor-not-allowed":"bg-slate-200 text-slate-500 cursor-not-allowed":g?"bg-slate-800 text-white hover:bg-slate-700":"bg-slate-900 text-white hover:bg-slate-800"}`},r.default.createElement(d0,{className:"w-4 h-4"}),typeof gn!="string"&&(gn?.canRetryConfirmation||Wd)?"Reintentar Confirmacin":"Reintentar Pago")),tr&&r.default.createElement("div",{className:`mt-4 p-4 rounded-xl text-sm flex items-center gap-3 border ${g?"bg-orange-900/20 border-orange-500/30 text-orange-400":"bg-orange-50 border-orange-200 text-orange-700"}`},r.default.createElement(ns,{className:"w-5 h-5 animate-spin flex-shrink-0"}),"Procesando tu pago, por favor esper..."))),pe.paymentChoice==="Transferencia"&&r.default.createElement("div",{className:"mt-8 animate-fade-up"},r.default.createElement("div",{className:`p-6 rounded-2xl border ${g?"bg-slate-900/50 border-orange-500/20":"bg-slate-50 border-orange-200"}`},r.default.createElement("h3",{className:`font-bold mb-3 flex items-center gap-2 ${g?"text-white":"text-slate-900"}`},r.default.createElement(Xf,{className:"w-5 h-5 text-orange-400"}),"Datos para transferir"),r.default.createElement("div",{className:"space-y-2 text-sm"},r.default.createElement("div",{className:"flex items-start justify-between gap-4"},r.default.createElement("span",{className:`${g?"text-slate-400":"text-slate-500"}`},"Titular"),r.default.createElement("span",{className:`font-medium text-right break-all ${g?"text-white":"text-slate-900"}`},h?.paymentTransfer?.holderName?String(h.paymentTransfer.holderName):"Sin configurar")),r.default.createElement("div",{className:"flex items-start justify-between gap-4"},r.default.createElement("span",{className:`${g?"text-slate-400":"text-slate-500"}`},"Alias"),r.default.createElement("span",{className:`font-mono text-right break-all ${g?"text-white":"text-slate-900"}`},h?.paymentTransfer?.alias?String(h.paymentTransfer.alias):"Sin configurar")),r.default.createElement("div",{className:"flex items-start justify-between gap-4"},r.default.createElement("span",{className:`${g?"text-slate-400":"text-slate-500"}`},"CBU"),r.default.createElement("span",{className:`font-mono text-right break-all ${g?"text-white":"text-slate-900"}`},h?.paymentTransfer?.cbu?String(h.paymentTransfer.cbu):"Sin configurar"))),r.default.createElement("div",{className:`mt-4 p-4 rounded-xl flex items-start gap-3 border ${g?"bg-orange-900/10 border-orange-500/20":"bg-orange-50 border-orange-200"}`},r.default.createElement(zs,{className:"w-5 h-5 text-orange-500 shrink-0 mt-0.5"}),r.default.createElement("p",{className:`text-xs leading-relaxed font-medium ${g?"text-orange-200":"text-orange-700"}`},"Una vez realizada la transferencia, confirm el pedido. Si necesits coordinar el comprobante, te contactamos por WhatsApp si est disponible.")))))),r.default.createElement("div",{className:"md:col-span-2"},r.default.createElement("div",{className:`checkout-summary-card border p-5 sm:p-8 rounded-2xl sm:rounded-[2.5rem] sticky top-20 sm:top-28 shadow-2xl ${g?"bg-gradient-to-br from-slate-900 via-[#0a0a0a] to-[#050505] border-slate-800":"bg-white border-slate-200"}`},r.default.createElement("h3",{className:`font-black mb-6 sm:mb-8 text-lg sm:text-xl border-b pb-4 ${g?"text-white border-slate-800":"text-slate-900 border-slate-100"}`},"Resumen Final"),r.default.createElement("div",{className:"space-y-4 mb-8"},r.default.createElement("div",{className:`flex justify-between ${g?"text-slate-400":"text-slate-500"}`},r.default.createElement("span",null,"Productos (",Be.length,")"),r.default.createElement("span",{className:`font-bold ${g?"text-white":"text-slate-900"}`},"$",Sr.toLocaleString())),Xd>0&&r.default.createElement("div",{className:"flex justify-between text-purple-500 font-bold"},r.default.createElement("span",null,"Descuento"),r.default.createElement("span",null,"-$",Xd.toLocaleString())),r.default.createElement("div",{className:`h-px my-4 border-t border-dashed ${g?"bg-slate-800 border-slate-700":"bg-slate-100 border-slate-200"}`}),r.default.createElement("div",{className:"flex justify-between items-end"},r.default.createElement("span",{className:`font-bold ${g?"text-white":"text-slate-900"}`},"Total a Pagar"),r.default.createElement("span",{className:`text-3xl font-black tracking-tighter ${g?"text-white neon-text":"text-slate-900"}`},"$",Bo.toLocaleString()))),pe.paymentChoice&&pe.paymentChoice!=="Tarjeta"?r.default.createElement(r.default.Fragment,null,r.default.createElement("button",{onClick:Jk,disabled:Wr,className:`w-full py-5 text-white font-bold text-lg rounded-2xl shadow-xl flex items-center justify-center gap-3 transition-all ${Wr?"bg-slate-700 cursor-not-allowed":"bg-green-600 hover:bg-green-500 shadow-green-900/20 hover:scale-[1.02]"}`},Wr?r.default.createElement(ns,{className:"w-6 h-6 animate-spin"}):r.default.createElement(Me,{className:"w-6 h-6"}),Wr?"Procesando...":"Confirmar Pedido"),r.default.createElement("p",{className:`text-center text-xs mt-6 leading-relaxed px-4 ${g?"text-slate-400":"text-slate-600"}`},"Al confirmar, aceptas nuestros trminos de servicio y poltica de privacidad.")):pe.paymentChoice==="Tarjeta"?r.default.createElement("div",{className:`p-4 rounded-2xl text-center border ${g?"bg-orange-900/10 border-orange-500/20":"bg-orange-50 border-orange-200"}`},r.default.createElement("p",{className:`text-sm font-medium flex items-center justify-center gap-2 ${g?"text-orange-400":"text-orange-700"}`},r.default.createElement(Us,{className:"w-4 h-4"}),"Complet los datos de tu tarjeta arriba para pagar"),r.default.createElement("p",{className:`text-xs mt-2 ${g?"text-slate-400":"text-slate-600"}`},"Tu compra quedar confirmada automticamente al procesar el pago.")):null)))),t==="profile"&&Y&&Y.id&&Y.email&&Y.name&&r.default.createElement("div",{className:"max-w-6xl mx-auto pt-4 sm:pt-8 animate-fade-up px-2 sm:px-4 md:px-8 pb-20"},r.default.createElement("div",{className:`p-4 sm:p-8 md:p-12 rounded-2xl sm:rounded-[3rem] mb-6 sm:mb-12 flex flex-col md:flex-row items-center gap-4 sm:gap-8 relative overflow-hidden shadow-2xl border transition-colors duration-300 ${g?"bg-[#0a0a0a] border-slate-800":"bg-white border-slate-200"}`},r.default.createElement("div",{className:`absolute top-0 right-0 w-96 h-96 rounded-full blur-[120px] pointer-events-none ${g?"bg-orange-500/5":"bg-orange-500/10"}`}),r.default.createElement("div",{className:`absolute bottom-0 left-0 w-64 h-64 rounded-full blur-[100px] pointer-events-none ${g?"bg-blue-600/5":"bg-blue-600/10"}`}),r.default.createElement("div",{className:`w-20 h-20 sm:w-28 sm:h-28 rounded-2xl sm:rounded-[2rem] bg-gradient-to-br from-orange-500 to-blue-600 flex items-center justify-center text-3xl sm:text-5xl font-black text-white shadow-2xl z-10 transform rotate-3 border-4 ${g?"border-[#0a0a0a]":"border-white"}`},Y.name.charAt(0)),r.default.createElement("div",{className:"text-center md:text-left z-10 flex-1"},r.default.createElement("h2",{className:`text-2xl sm:text-4xl md:text-5xl font-black mb-2 tracking-tight ${g?"text-white":"text-slate-900"}`},Y.name),r.default.createElement("p",{className:`flex items-center justify-center md:justify-start gap-2 font-medium mb-4 ${g?"text-slate-400":"text-slate-500"}`},r.default.createElement(ah,{className:"w-4 h-4 text-orange-500"})," ",Y.email),r.default.createElement("div",{className:"flex flex-wrap gap-4 justify-center md:justify-start"},r.default.createElement("span",{className:`px-4 py-2 rounded-xl text-xs font-mono flex items-center gap-2 border ${g?"bg-slate-900 border-slate-800 text-slate-500":"bg-slate-50 border-slate-200 text-slate-600"}`},r.default.createElement(is,{className:"w-3 h-3"})," ",Y.dni||"Sin DNI"),r.default.createElement("span",{className:`px-4 py-2 rounded-xl text-xs font-mono flex items-center gap-2 border ${g?"bg-slate-900 border-slate-800 text-slate-500":"bg-slate-50 border-slate-200 text-slate-600"}`},r.default.createElement(c0,{className:"w-3 h-3"})," ",Y.phone||"Sin Telfono"),r.default.createElement("span",{className:`px-4 py-2 rounded-xl text-xs font-mono flex items-center gap-2 border ${g?"bg-slate-900 border-slate-800 text-slate-500":"bg-slate-50 border-slate-200 text-slate-600"}`},r.default.createElement(Bn,{className:"w-3 h-3"})," ",qc(Y.email).toUpperCase()))),r.default.createElement("div",{className:"flex flex-col gap-3 z-10 w-full md:w-auto"},Vf(Y.email)&&r.default.createElement("button",{onClick:()=>e("admin"),className:`px-6 py-4 rounded-2xl font-bold transition flex items-center justify-center gap-2 shadow-lg border ${g?"bg-slate-900 border-orange-500/30 text-orange-400 hover:bg-orange-900/20 hover:shadow-orange-500/10":"bg-orange-50 border-orange-200 text-orange-600 hover:bg-orange-100"}`},r.default.createElement(Bn,{className:"w-5 h-5"})," Panel Admin"),r.default.createElement("button",{onClick:Bk,className:`px-6 py-4 rounded-2xl font-bold transition flex items-center justify-center gap-2 border ${g?"bg-red-900/10 border-red-500/20 text-red-500 hover:bg-red-900/20 hover:border-red-500/40":"bg-red-50 border-red-100 text-red-600 hover:bg-red-100"}`},r.default.createElement(r0,{className:"w-5 h-5"})," Cerrar Sesin"))),r.default.createElement("div",{className:`p-4 sm:p-8 rounded-2xl sm:rounded-[2.5rem] mb-6 sm:mb-12 shadow-2xl animate-fade-up border transition-colors duration-300 ${g?"bg-[#0a0a0a] border-slate-800":"bg-white border-slate-200"}`},r.default.createElement("h3",{className:`text-xl sm:text-2xl font-black mb-4 sm:mb-6 flex items-center gap-2 sm:gap-3 ${g?"text-white":"text-slate-900"}`},r.default.createElement(Gs,{className:"text-purple-400 w-5 h-5 sm:w-6 sm:h-6"})," Mis Cupones Disponibles"),r.default.createElement("div",{className:"grid md:grid-cols-2 gap-4 sm:gap-8"},r.default.createElement("div",{className:"space-y-3 sm:space-y-4"},(()=>{let l=yr.filter(m=>m.targetType==="global"||m.targetType==="specific_email"&&Y?.email&&(m.targetUser||"").toLowerCase()===Y.email.toLowerCase());return l.length===0?r.default.createElement("p",{className:`${g?"text-slate-500":"text-slate-400"} italic`},"No tienes cupones disponibles en este momento."):l.map(m=>r.default.createElement("div",{key:m.id,className:`p-4 rounded-xl flex items-center justify-between group transition border ${g?"bg-slate-900/50 border-slate-800 hover:border-purple-500/30":"bg-slate-50 border-slate-100 hover:border-purple-300 hover:bg-white"}`},r.default.createElement("div",null,r.default.createElement("p",{className:`font-black text-lg tracking-widest ${g?"text-white":"text-slate-900"}`},m.code),r.default.createElement("p",{className:`text-sm font-bold ${g?"text-purple-400":"text-purple-600"}`},m.type==="fixed"?`$${m.value} OFF`:`${m.value}% OFF`),m.expirationDate&&r.default.createElement("p",{className:`text-[10px] mt-1 ${g?"text-slate-500":"text-slate-400"}`},"Vence: ",m.expirationDate)),r.default.createElement("button",{onClick:()=>{navigator.clipboard.writeText(m.code),F("Cdigo copiado","success")},className:`px-4 py-2 rounded-lg text-xs font-bold transition border ${g?"bg-purple-900/20 text-purple-400 border-purple-500/20 hover:bg-purple-500 hover:text-white":"bg-purple-50 text-purple-600 border-purple-200 hover:bg-purple-600 hover:text-white"}`},"COPIAR")))})()),r.default.createElement("div",{className:`p-6 rounded-2xl border ${g?"bg-slate-900/30 border-slate-800":"bg-slate-50 border-slate-200"}`},r.default.createElement("h4",{className:`font-bold mb-4 text-sm uppercase tracking-wider ${g?"text-white":"text-slate-900"}`},"Canjear Cdigo"),r.default.createElement("div",{className:"flex gap-2"},r.default.createElement("input",{className:`flex-1 rounded-xl p-3 outline-none uppercase font-mono border ${g?"bg-slate-950 border-slate-800 text-white focus:border-purple-500":"bg-white border-slate-200 text-slate-900 focus:border-purple-400"}`,placeholder:"CDIGO",id:"couponRedeemInput",name:"coupon_code",autoComplete:"off"}),r.default.createElement("button",{onClick:()=>{let l=document.getElementById("couponRedeemInput"),m=String(l?.value||"").trim().toUpperCase();if(!m)return F("Ingresa un cdigo","warning");yr.find(x=>x.code===m)?F("Cupn vlido! salo en el checkout.","success"):F("Cupn no encontrado o invlido","error")},className:"bg-purple-600 px-6 rounded-xl text-white font-bold hover:bg-purple-500 transition shadow-lg"},"Validar")),r.default.createElement("p",{className:`text-xs mt-3 leading-relaxed ${g?"text-slate-500":"text-slate-400"}`},"Ingresa el cdigo aqu para verificar si es vlido. Llvalo al checkout para aplicar el descuento.")))),r.default.createElement("div",{className:"grid lg:grid-cols-2 gap-10"},r.default.createElement("div",{className:"space-y-6"},r.default.createElement("div",{className:"flex items-center justify-between"},r.default.createElement("h3",{className:`text-2xl font-black flex items-center gap-3 ${g?"text-white":"text-slate-900"}`},r.default.createElement(Bs,{className:"text-orange-400 w-6 h-6"})," Tus Compras")),(()=>{let l=String(Ee?.uid||Y?.id||"").trim(),m=String(Y?.email||Ee?.email||"").trim().toLowerCase(),x=gt.filter(E=>{if(String(E?.status||"").trim().toLowerCase()!=="realizado")return!1;let P=[E?.userId,E?.customerId,E?.customer?.id].map(O=>String(O||"").trim()).filter(Boolean);if(l&&P.includes(l))return!0;let U=String(E?.customer?.email||"").trim().toLowerCase();return!!(m&&U&&m===U)}).flatMap(E=>E.items.map(V=>({...V,date:E.date})));return x.length===0?r.default.createElement("div",{className:`p-12 border-2 border-dashed rounded-[2rem] text-center bg-slate-900/20 ${g?"border-slate-800 text-slate-500":"border-slate-200 text-slate-400 bg-slate-50"}`},r.default.createElement(Bs,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),r.default.createElement("p",{className:"font-bold"},"An no tienes compras finalizadas."),r.default.createElement("button",{onClick:()=>e("store"),className:"mt-4 text-orange-400 hover:underline text-sm font-bold"},"Ir a la tienda")):r.default.createElement("div",{className:"grid grid-cols-1 gap-4 max-h-[600px] overflow-y-auto custom-scrollbar pr-2"},x.sort((E,V)=>new Date(V.date)-new Date(E.date)).map((E,V)=>r.default.createElement("div",{key:V,className:`p-4 rounded-2xl flex items-center gap-4 group transition duration-300 border ${g?"bg-[#0a0a0a] border-slate-800 hover:border-orange-500/50":"bg-white border-slate-200 hover:border-orange-400 hover:shadow-md"}`},r.default.createElement("div",{className:`w-16 h-16 rounded-xl p-1 flex-shrink-0 overflow-hidden product-preview-frame ${g?"bg-white":"bg-slate-50 border border-slate-100"}`},r.default.createElement("img",{src:E.image,className:"w-full h-full object-contain",alt:E.title})),r.default.createElement("div",{className:"flex-1 min-w-0"},r.default.createElement("h4",{className:`font-bold text-sm truncate transition group-hover:text-orange-500 ${g?"text-white":"text-slate-900"}`},E.title),r.default.createElement("p",{className:`text-xs font-mono mt-1 ${g?"text-slate-500":"text-slate-400"}`},new Date(E.date).toLocaleDateString())),r.default.createElement("div",{className:"text-right flex flex-col items-end gap-1"},r.default.createElement("p",{className:`font-black ${g?"text-white":"text-slate-900"}`},"$",E.unit_price.toLocaleString()),E.quantity>1&&r.default.createElement("span",{className:`text-[10px] font-bold ${g?"text-slate-500":"text-slate-400"}`},"x",E.quantity," und.")))))})()),r.default.createElement("div",{className:"space-y-6"},r.default.createElement("div",{className:"flex items-center justify-between"},r.default.createElement("h3",{className:`text-2xl font-black flex items-center gap-3 ${g?"text-white":"text-slate-900"}`},r.default.createElement(Yc,{className:"text-red-500 w-6 h-6 fill-current"})," Mis Favoritos"),r.default.createElement("span",{className:`text-xs font-bold px-3 py-1 rounded-full ${g?"text-slate-500 bg-slate-900":"text-slate-600 bg-slate-100"}`},Y.favorites?.length||0," Guardados")),!Y.favorites||Y.favorites.length===0?r.default.createElement("div",{className:`p-12 border-2 border-dashed rounded-[2rem] text-center bg-slate-900/20 ${g?"border-slate-800 text-slate-500":"border-slate-200 text-slate-400 bg-slate-50"}`},r.default.createElement(Yc,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),r.default.createElement("p",{className:"font-bold"},"Tu lista de deseos est vaca."),r.default.createElement("p",{className:"text-xs mt-2 max-w-xs mx-auto"},"Guarda productos haciendo click en el corazn de las tarjetas.")):r.default.createElement("div",{className:"space-y-4 max-h-[600px] overflow-y-auto custom-scrollbar pr-2"},Y.favorites.map(l=>{let m=he.find(v=>v.id===l);return m?r.default.createElement("div",{key:l,className:`p-4 rounded-2xl flex items-center gap-4 relative group transition border ${g?"bg-[#0a0a0a] border-slate-800 hover:border-slate-600":"bg-white border-slate-200 hover:border-orange-400 hover:shadow-md"}`},r.default.createElement("div",{className:`w-16 h-16 rounded-xl p-1 flex-shrink-0 overflow-hidden product-preview-frame ${g?"bg-white":"bg-slate-50 border border-slate-100"}`},r.default.createElement("img",{src:m.image,alt:m.name||"Producto",className:"w-full h-full object-contain"})),r.default.createElement("div",{className:"flex-1 min-w-0"},r.default.createElement("p",{className:`font-bold line-clamp-1 transition group-hover:text-orange-500 ${g?"text-white":"text-slate-900"}`},m.name),r.default.createElement("p",{className:"text-orange-500 font-bold text-sm mt-1"},"$",m.basePrice.toLocaleString())),r.default.createElement("div",{className:"flex gap-2"},r.default.createElement("button",{onClick:()=>uw(m),className:`p-3 rounded-xl transition border ${g?"bg-slate-900 text-red-400 border-slate-800 hover:bg-red-900/20 hover:border-red-500/30":"bg-red-50 text-red-500 border-red-100 hover:bg-red-100"}`,title:"Eliminar de favoritos"},r.default.createElement(mt,{className:"w-4 h-4"})),r.default.createElement("button",{onClick:()=>Mi(m,1),className:`p-3 rounded-xl transition border ${g?"bg-slate-900 text-orange-400 border-slate-800 hover:bg-orange-900/20 hover:border-orange-500/30":"bg-orange-50 text-orange-600 border-orange-100 hover:bg-orange-100"}`,title:"Agregar al carrito"},r.default.createElement(En,{className:"w-4 h-4"})))):null}))))),t==="profile"&&(!Y||!Y.id||!Y.email||!Y.name)&&r.default.createElement("div",{className:"max-w-md mx-auto pt-20 animate-fade-up px-4 text-center"},r.default.createElement("div",{className:"bg-[#0a0a0a] border border-slate-800 p-8 rounded-[2rem] shadow-2xl"},r.default.createElement(is,{className:"w-16 h-16 mx-auto mb-6 text-orange-500 opacity-50"}),r.default.createElement("h2",{className:"text-2xl font-black text-white mb-4"},"Inicia Sesin"),r.default.createElement("p",{className:"text-slate-400 mb-8"},"Debes iniciar sesin o registrarte para acceder a tu perfil."),r.default.createElement("button",{onClick:()=>e("login"),className:"w-full py-4 bg-gradient-to-r from-orange-500 to-blue-600 text-white rounded-2xl font-black hover:from-orange-400 hover:to-blue-500 transition shadow-lg"},"INICIAR SESIN"))),(t==="login"||t==="register")&&r.default.createElement("div",{className:"fixed inset-0 z-[20002] flex items-end sm:items-center justify-center bg-[#050505]/96 p-2 sm:p-4 md:p-6 animate-fade-up backdrop-blur-xl",onClick:()=>e("store")},r.default.createElement("div",{className:"bg-[#0a0a0a] rounded-2xl sm:rounded-[2.5rem] w-full max-w-[640px] shadow-2xl border border-slate-800 relative overflow-hidden max-h-[calc(100dvh-1rem)] sm:max-h-[92dvh] flex flex-col",onClick:l=>l.stopPropagation()},r.default.createElement("button",{onClick:()=>e("store"),className:"absolute top-4 right-4 sm:top-6 sm:right-6 p-2 bg-slate-900/60 hover:bg-slate-800 rounded-full text-slate-400 hover:text-white transition z-20","aria-label":"Cerrar modal de acceso"},r.default.createElement(lt,{className:"w-5 h-5 sm:w-6 sm:h-6"})),r.default.createElement("div",{className:"absolute top-0 left-0 w-full h-1.5 sm:h-2 bg-gradient-to-r from-orange-500 via-orange-600 to-red-600"}),r.default.createElement("div",{className:"px-4 sm:px-8 md:px-10 pt-8 sm:pt-10 md:pt-12 pb-3 sm:pb-4 border-b border-slate-800/80"},r.default.createElement("h2",{className:"text-[1.65rem] sm:text-4xl font-black text-white mb-2 text-center tracking-tight"},nn?"Bienvenido":"Crear Cuenta"),r.default.createElement("p",{className:"text-slate-500 text-center text-sm sm:text-base"},nn?"Ingresa a tu cuenta para continuar.":"nete a nosotros hoy mismo."),r.default.createElement("div",{className:"mt-5 sm:mt-6 grid grid-cols-2 gap-2 p-1 rounded-xl sm:rounded-2xl border border-slate-800 bg-slate-950/40"},r.default.createElement("button",{type:"button",onClick:()=>ks(!0),className:`py-2.5 sm:py-3 rounded-lg sm:rounded-xl font-bold text-xs sm:text-sm transition ${nn?"bg-gradient-to-r from-orange-600 to-blue-600 text-white shadow-lg":"text-slate-400 hover:text-white hover:bg-slate-900/70"}`},"Iniciar Sesin"),r.default.createElement("button",{type:"button",onClick:()=>ks(!1),className:`py-2.5 sm:py-3 rounded-lg sm:rounded-xl font-bold text-xs sm:text-sm transition ${nn?"text-slate-400 hover:text-white hover:bg-slate-900/70":"bg-gradient-to-r from-orange-600 to-blue-600 text-white shadow-lg"}`},"Registrarme"))),r.default.createElement("div",{className:"flex-1 overflow-y-auto px-4 sm:px-8 md:px-10 pb-5 sm:pb-7 md:pb-9 pt-4 sm:pt-6"},r.default.createElement("form",{onSubmit:l=>{l.preventDefault(),zk(!nn)},className:"space-y-3.5 sm:space-y-4"},!nn&&r.default.createElement("div",{className:"space-y-3.5 sm:space-y-4 animate-fade-up"},r.default.createElement("input",{id:"auth-name",name:"name",autoComplete:"name",className:"input-cyber w-full p-3.5 sm:p-4 text-base",placeholder:"Nombre Completo *",value:De.name,onChange:l=>Ln({...De,name:l.target.value}),required:!0}),r.default.createElement("input",{id:"auth-username",name:"username",autoComplete:"username",className:"input-cyber w-full p-3.5 sm:p-4 text-base",placeholder:"Nombre de Usuario *",value:De.username,onChange:l=>Ln({...De,username:l.target.value}),required:!0}),r.default.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3.5 sm:gap-4"},r.default.createElement("input",{id:"auth-dni",name:"dni",autoComplete:"off",className:"input-cyber p-3.5 sm:p-4 text-base",placeholder:Qt.requireDni?"DNI *":"DNI (opcional)",value:De.dni,onChange:l=>Ln({...De,dni:l.target.value}),required:Qt.requireDni}),r.default.createElement("input",{id:"auth-phone",name:"phone",autoComplete:"tel",className:"input-cyber p-3.5 sm:p-4 text-base",placeholder:Qt.requirePhone?"Telfono *":"Telfono (opcional)",value:De.phone,onChange:l=>Ln({...De,phone:l.target.value}),required:Qt.requirePhone}))),r.default.createElement("div",{className:"space-y-3.5 sm:space-y-4"},r.default.createElement("input",{id:"auth-email",name:"email",type:"email",autoComplete:"email",className:"input-cyber w-full p-3.5 sm:p-4 text-base",placeholder:nn?"Email":"Email *",value:De.email,onChange:l=>Ln({...De,email:l.target.value}),required:!0}),r.default.createElement("input",{id:"auth-password",name:"password",autoComplete:nn?"current-password":"new-password",className:"input-cyber w-full p-3.5 sm:p-4 text-base",type:"password",placeholder:nn?"Contrasea":"Contrasea *",value:De.password,onChange:l=>Ln({...De,password:l.target.value}),required:!0})),nn&&r.default.createElement("button",{type:"button",onClick:qk,className:"text-sm text-slate-500 hover:text-orange-400 transition text-right w-full mt-1"},"Olvidaste tu contrasea?"),r.default.createElement("button",{type:"submit",className:"w-full bg-gradient-to-r from-orange-600 to-blue-600 hover:from-orange-500 hover:to-blue-500 py-3.5 sm:py-4 text-white rounded-xl sm:rounded-2xl text-sm sm:text-base font-black mt-5 sm:mt-6 transition transform hover:-translate-y-1 shadow-lg flex items-center justify-center gap-2"},$d?r.default.createElement(ns,{className:"animate-spin w-5 h-5"}):nn?"INGRESAR":"REGISTRARSE")),r.default.createElement("button",{onClick:()=>ks(!nn),className:"w-full text-center text-slate-500 text-sm sm:text-base mt-6 sm:mt-8 font-bold hover:text-orange-400 transition border-t border-slate-800 pt-5 sm:pt-6"},nn?"No tienes cuenta? Regstrate gratis":"Ya tienes cuenta? Inicia sesin")))),t==="about"&&r.default.createElement("div",{className:"max-w-4xl mx-auto pt-6 sm:pt-10 px-3 sm:px-6 animate-fade-up pb-20"},r.default.createElement("button",{onClick:()=>e("store"),className:`mb-4 sm:mb-8 p-3 rounded-full transition ${g?"bg-slate-900 text-slate-400 hover:text-white":"bg-slate-100 text-slate-600 hover:text-slate-900"}`},r.default.createElement(Fs,null)),r.default.createElement("h2",{className:`text-2xl sm:text-4xl md:text-5xl font-black mb-6 sm:mb-12 flex items-center gap-3 sm:gap-4 ${g?"text-white neon-text":"text-slate-900"}`},r.default.createElement(zs,{className:"text-orange-500 w-8 h-8 sm:w-12 sm:h-12"})," Sobre Nosotros"),r.default.createElement("div",{className:`border p-4 sm:p-8 md:p-12 rounded-2xl sm:rounded-[3rem] text-base sm:text-xl leading-relaxed whitespace-pre-wrap shadow-2xl relative overflow-hidden ${g?"bg-[#0a0a0a] border-slate-800 text-slate-300":"bg-white border-slate-200 text-slate-600"}`},r.default.createElement("div",{className:"absolute top-0 right-0 w-64 h-64 bg-purple-500/10 rounded-full blur-[100px] pointer-events-none"}),r.default.createElement("p",{className:"relative z-10"},h?.aboutUsText||""),r.default.createElement("div",{className:`mt-12 pt-12 border-t flex flex-col md:flex-row gap-8 ${g?"border-slate-800":"border-slate-200"}`},r.default.createElement("div",{className:"flex items-center gap-4"},r.default.createElement("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center border ${g?"bg-slate-900 border-slate-800":"bg-slate-100 border-slate-200"}`},r.default.createElement(Bn,{className:"text-orange-500"})),r.default.createElement("div",null,r.default.createElement("h4",{className:`font-bold ${g?"text-white":"text-slate-900"}`},"Garanta Oficial"),r.default.createElement("p",{className:`text-sm ${g?"text-slate-500":"text-slate-400"}`},"Productos de calidad"))),r.default.createElement("div",{className:"flex items-center gap-4"},r.default.createElement("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center border ${g?"bg-slate-900 border-slate-800":"bg-slate-100 border-slate-200"}`},r.default.createElement(ss,{className:"text-purple-500"})),r.default.createElement("div",null,r.default.createElement("h4",{className:`font-bold ${g?"text-white":"text-slate-900"}`},"Envos Seguros"),r.default.createElement("p",{className:`text-sm ${g?"text-slate-500":"text-slate-400"}`},"A todo el pas")))))),t==="guide"&&r.default.createElement("div",{className:"max-w-4xl mx-auto pt-6 sm:pt-10 px-3 sm:px-6 animate-fade-up pb-20"},r.default.createElement("button",{onClick:()=>e("store"),className:`mb-4 sm:mb-8 p-3 rounded-full transition ${g?"bg-slate-900 text-slate-400 hover:text-white":"bg-slate-100 text-slate-600 hover:text-slate-900"}`},r.default.createElement(Fs,null)),r.default.createElement("h2",{className:`text-2xl sm:text-4xl md:text-5xl font-black mb-6 sm:mb-12 flex items-center gap-3 sm:gap-4 ${g?"text-white neon-text":"text-slate-900"}`},r.default.createElement(sh,{className:"text-orange-500 w-8 h-8 sm:w-12 sm:h-12"})," ",h?.guideTitle||"Cmo Comprar"),r.default.createElement("div",{className:`border p-4 sm:p-8 md:p-12 rounded-2xl sm:rounded-[3rem] shadow-2xl space-y-6 sm:space-y-8 ${g?"bg-[#0a0a0a] border-slate-800 text-slate-300":"bg-white border-slate-200 text-slate-600"}`},[{num:1,title:h?.guideStep1Title||"Selecciona Productos",text:h?.guideStep1Text||"Navega por nuestro catlogo y aade lo que te guste al carrito con el botn '+'."},{num:2,title:h?.guideStep2Title||"Revisa tu Carrito",text:h?.guideStep2Text||"Verifica las cantidades. Si tienes un cupn de descuento, es el momento de usarlo!"},{num:3,title:h?.guideStep3Title||"Datos de Envo",text:h?.guideStep3Text||"Completa la informacin de entrega. Hacemos envos a todo el pas."},{num:4,title:h?.guideStep4Title||"Pago y Confirmacin",text:h?.guideStep4Text||"Elige tu mtodo de pago preferido. Si es transferencia, recibirs los datos por email."},{num:5,title:h?.guideStep5Title||"Listo!",text:h?.guideStep5Text||"Recibirs un correo con el seguimiento de tu pedido. Disfruta tu compra!"}].filter((l,m)=>!(m===0&&h?.showGuideStep1===!1||m===1&&h?.showGuideStep2===!1||m===2&&h?.showGuideStep3===!1||m===3&&h?.showGuideStep4===!1||m===4&&h?.showGuideStep5===!1)).map((l,m)=>r.default.createElement("div",{key:l.num,className:"flex gap-6 items-start"},r.default.createElement("div",{className:`w-10 h-10 rounded-full font-black flex items-center justify-center border flex-shrink-0 mt-1 ${g?"bg-orange-900/20 text-orange-400 border-orange-500/20":"bg-orange-100 text-orange-600 border-orange-200"}`},l.num),r.default.createElement("div",null,r.default.createElement("h3",{className:`text-xl font-bold mb-2 ${g?"text-white":"text-slate-900"}`},l.title),r.default.createElement("p",{className:`leading-relaxed ${g?"text-slate-400":"text-slate-500"}`},l.text)))))),t==="privacy"&&r.default.createElement("div",{className:"max-w-4xl mx-auto pt-6 sm:pt-10 px-3 sm:px-6 animate-fade-up pb-20"},r.default.createElement("button",{onClick:()=>e("store"),className:`mb-4 sm:mb-8 p-3 rounded-full transition ${g?"bg-slate-900 text-slate-400 hover:text-white":"bg-slate-100 text-slate-600 hover:text-slate-900"}`},r.default.createElement(Fs,null)),r.default.createElement("h2",{className:`text-2xl sm:text-4xl md:text-5xl font-black mb-6 sm:mb-12 flex items-center gap-3 sm:gap-4 ${g?"text-white neon-text":"text-slate-900"}`},r.default.createElement(Bn,{className:"text-orange-500 w-8 h-8 sm:w-12 sm:h-12"})," Poltica de Privacidad"),r.default.createElement("div",{className:`border p-4 sm:p-8 md:p-12 rounded-2xl sm:rounded-[3rem] shadow-2xl space-y-6 sm:space-y-8 max-h-[70vh] overflow-y-auto custom-scrollbar ${g?"bg-[#0a0a0a] border-slate-800 text-slate-300":"bg-white border-slate-200 text-slate-600"}`},r.default.createElement("div",{className:"prose prose-invert max-w-none"},r.default.createElement("p",{className:`text-sm mb-8 italic ${g?"text-slate-500":"text-slate-400"}`},"ltima actualizacin: 07 de enero de 2026"),r.default.createElement("p",null,"Este Aviso de Privacidad para ",r.default.createElement("strong",null,h?.storeName||"Sustore"),' ("nosotros", "nos" o "nuestro"), describe cmo y por qu podramos acceder, recopilar, almacenar, usar y/o compartir ("proceso") su informacin personal cuando utiliza nuestros servicios ("Servicios"), incluso cuando:'),r.default.createElement("ul",{className:"list-disc pl-5 space-y-2"},r.default.createElement("li",null,"Visita nuestro sitio web en ",r.default.createElement("a",{href:h?.seoUrl||"#",className:"text-orange-500 hover:underline"},h?.seoUrl||"[URL del sitio]")," o cualquier sitio web nuestro que enlace a este Aviso de Privacidad."),r.default.createElement("li",null,"Interacte con nosotros de otras maneras relacionadas, incluido cualquier marketing o evento.")),r.default.createElement("div",{className:`p-6 rounded-2xl border my-8 ${g?"bg-slate-900/50 border-slate-800 text-slate-300":"bg-slate-50 border-slate-200 text-slate-700"}`},r.default.createElement("h3",{className:`text-xl font-bold mb-4 ${g?"text-white":"text-slate-900"}`},"RESUMEN DE PUNTOS CLAVE"),r.default.createElement("ul",{className:"space-y-4 text-sm"},r.default.createElement("li",null,r.default.createElement("strong",null,"Qu informacin personal procesamos?")," Informacin proporcionada al registrarse o comprar."),r.default.createElement("li",null,r.default.createElement("strong",null,"Procesamos informacin confidencial?")," No."),r.default.createElement("li",null,r.default.createElement("strong",null,"Recopilamos informacin de terceros?")," No."),r.default.createElement("li",null,r.default.createElement("strong",null,"Cmo procesamos su informacin?")," Para gestionar pedidos, seguridad y mejora del servicio."),r.default.createElement("li",null,r.default.createElement("strong",null,"Compartimos informacin?")," Solo en situaciones especficas como transferencias comerciales o requisitos legales."))),r.default.createElement("h3",{className:`text-xl font-bold mt-12 mb-4 border-b pb-2 ${g?"text-white border-slate-800":"text-slate-900 border-slate-200"}`},"1. QU INFORMACIN RECOPILAMOS?"),r.default.createElement("p",null,"Recopilamos informacin que usted nos proporciona voluntariamente: nombres, telfonos, emails, direcciones, nombres de usuario y contraseas."),r.default.createElement("p",null,"Tambin recopilamos datos tcnicos automticamente (IP, tipo de navegador) para seguridad y anlisis del sitio."),r.default.createElement("h3",{className:`text-xl font-bold mt-12 mb-4 border-b pb-2 ${g?"text-white border-slate-800":"text-slate-900 border-slate-200"}`},"2. CMO PROCESAMOS TU INFORMACIN?"),r.default.createElement("ul",{className:"list-disc pl-5 space-y-2"},r.default.createElement("li",null,"Facilitar creacin y administracin de cuentas."),r.default.createElement("li",null,"Gestionar pedidos, pagos y envos."),r.default.createElement("li",null,"Proteger nuestros servicios contra fraude."),r.default.createElement("li",null,"Evaluar y mejorar la experiencia del usuario.")),r.default.createElement("h3",{className:`text-xl font-bold mt-12 mb-4 border-b pb-2 ${g?"text-white border-slate-800":"text-slate-900 border-slate-200"}`},"3. CUNTO TIEMPO CONSERVAMOS TU INFORMACIN?"),r.default.createElement("p",null,"Conservamos su informacin mientras tenga una cuenta activa con nosotros o segn lo exija la ley para fines contables o legales."),r.default.createElement("h3",{className:`text-xl font-bold mt-12 mb-4 border-b pb-2 ${g?"text-white border-slate-800":"text-slate-900 border-slate-200"}`},"4. CULES SON SUS DERECHOS?"),r.default.createElement("p",null,"Puede revisar, cambiar o cancelar su cuenta en cualquier momento desde su perfil o contactndonos directamente."),r.default.createElement("h3",{className:`text-xl font-bold mt-12 mb-4 border-b pb-2 ${g?"text-white border-slate-800":"text-slate-900 border-slate-200"}`},"5. CONTACTO"),r.default.createElement("p",null,"Para preguntas sobre este aviso, puede escribirnos a:"),r.default.createElement("div",{className:`p-6 rounded-xl border font-mono text-sm leading-relaxed ${g?"bg-slate-950 border-slate-800":"bg-white border-slate-200 shadow-sm"}`},r.default.createElement("strong",null,h?.storeName||"Sustore"),r.default.createElement("br",null),h?.storeAddress||"[Direccin de contacto]",r.default.createElement("br",null),r.default.createElement("a",{href:`https://mail.google.com/mail/?view=cm&fs=1&to=${h?.storeEmail}`,target:"_blank",rel:"noopener noreferrer",className:"text-orange-500 hover:underline"},h?.storeEmail||"[Email de contacto]"))))),t==="admin"&&(!_t||Vk(Y?.email)?r.default.createElement("div",{className:"min-h-screen bg-[#050505] flex items-center justify-center"},r.default.createElement("div",{className:"text-center"},r.default.createElement("div",{className:"relative"},r.default.createElement("div",{className:"w-16 h-16 rounded-full border-4 border-slate-800 animate-spin",style:{borderTopColor:"#f97316"}}),r.default.createElement("div",{className:"absolute inset-0 flex items-center justify-center"},r.default.createElement(Bn,{className:"w-6 h-6 text-orange-500 animate-pulse"}))),r.default.createElement("p",{className:"text-slate-500 text-xs mt-4 font-mono uppercase tracking-widest"},"Verificando permisos..."))):Vf(Y?.email)&&Y?.id&&Y?.id.length>=10&&!Sk.detectManipulation()?r.default.createElement("div",{className:"admin-shell flex min-h-screen min-full-viewport bg-[#050505] animate-fade-up relative w-full font-sans"},z&&r.default.createElement("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-30 md:hidden animate-fade-in",onClick:()=>B(!1)}),r.default.createElement("div",{className:`admin-sidebar fixed inset-y-0 left-0 z-40 w-[280px] bg-[#0a0a0a] border-r border-slate-800 flex flex-col transition-transform duration-300 ease-out ${z?"translate-x-0":"-translate-x-full md:translate-x-0"} md:static md:w-72 shadow-2xl`},r.default.createElement("div",{className:"admin-sidebar-header p-6 md:p-8 border-b border-slate-900 flex items-center justify-between"},r.default.createElement("div",null,r.default.createElement("h2",{className:"admin-sidebar-title text-xl md:text-2xl font-black text-white tracking-tight flex items-center gap-3"},r.default.createElement("div",{className:"w-9 h-9 md:w-10 md:h-10 bg-orange-600 rounded-xl flex items-center justify-center text-white shadow-lg shadow-orange-900/20"},r.default.createElement(Bn,{className:"w-5 h-5 md:w-6 md:h-6"})),"Panel Admin"),r.default.createElement("p",{className:"admin-sidebar-version text-[10px] md:text-xs text-slate-500 mt-1.5 font-mono ml-1"},"Sustore Suite v3.0.0")),r.default.createElement("button",{onClick:()=>B(!1),className:"admin-sidebar-close-btn md:hidden p-2 bg-slate-900 hover:bg-slate-800 rounded-xl text-slate-400 hover:text-white transition border border-slate-800"},r.default.createElement(lt,{className:"w-5 h-5"}))),r.default.createElement("nav",{className:"admin-nav flex-1 p-3 md:p-4 space-y-1.5 md:space-y-2 overflow-y-auto custom-scrollbar"},r.default.createElement("p",{className:"admin-nav-section text-[10px] font-black text-slate-600 uppercase tracking-widest px-3 md:px-4 py-2 mt-1"},"Principal"),r.default.createElement("button",{onClick:()=>{s("dashboard"),B(!1)},className:`admin-nav-btn w-full text-left px-4 md:px-5 py-3 md:py-3.5 rounded-xl flex items-center gap-3 font-semibold text-sm transition ${n==="dashboard"?"bg-orange-500/15 text-orange-200 border border-orange-400/30 shadow-[inset_0_1px_0_rgba(255,255,255,0.05)]":"text-slate-400 border border-transparent hover:text-slate-100 hover:bg-slate-900/80 hover:border-slate-700/70"}`},r.default.createElement(Ow,{className:"w-5 h-5"})," Inicio"),r.default.createElement("button",{onClick:()=>{s("orders"),B(!1)},className:`admin-nav-btn w-full text-left px-4 md:px-5 py-3 md:py-3.5 rounded-xl flex items-center gap-3 font-semibold text-sm transition ${n==="orders"?"bg-orange-500/15 text-orange-200 border border-orange-400/30 shadow-[inset_0_1px_0_rgba(255,255,255,0.05)]":"text-slate-400 border border-transparent hover:text-slate-100 hover:bg-slate-900/80 hover:border-slate-700/70"}`},r.default.createElement(Bs,{className:"w-5 h-5"})," Pedidos",ot&&Mf&&r.default.createElement("span",{className:"ml-auto text-[10px] px-2 py-1 rounded-full bg-red-900/30 text-red-300 border border-red-500/30 font-black uppercase tracking-widest"},"Nuevo")),r.default.createElement("button",{onClick:()=>{s("products"),B(!1)},className:`admin-nav-btn w-full text-left px-4 md:px-5 py-3 md:py-3.5 rounded-xl flex items-center gap-3 font-semibold text-sm transition ${n==="products"?"bg-orange-500/15 text-orange-200 border border-orange-400/30 shadow-[inset_0_1px_0_rgba(255,255,255,0.05)]":"text-slate-400 border border-transparent hover:text-slate-100 hover:bg-slate-900/80 hover:border-slate-700/70"}`},r.default.createElement(sr,{className:"w-5 h-5"})," Productos"),(Gc(Y?.email)||Lk(Y?.email))&&r.default.createElement("button",{onClick:()=>{s("promos"),B(!1)},className:`admin-nav-btn w-full text-left px-4 md:px-5 py-3 md:py-3.5 rounded-xl flex items-center gap-3 font-semibold text-sm transition ${n==="promos"?"bg-purple-500/15 text-purple-200 border border-purple-400/30 shadow-[inset_0_1px_0_rgba(255,255,255,0.05)]":"text-slate-400 border border-transparent hover:text-slate-100 hover:bg-slate-900/80 hover:border-slate-700/70"}`},r.default.createElement(dl,{className:"w-5 h-5"})," Promos"),Gc(Y?.email)&&r.default.createElement("button",{onClick:()=>{s("carousel"),B(!1)},className:`admin-nav-btn w-full text-left px-4 md:px-5 py-3 md:py-3.5 rounded-xl flex items-center gap-3 font-semibold text-sm transition ${n==="carousel"?"bg-orange-500/15 text-orange-200 border border-orange-400/30 shadow-[inset_0_1px_0_rgba(255,255,255,0.05)]":"text-slate-400 border border-transparent hover:text-slate-100 hover:bg-slate-900/80 hover:border-slate-700/70"}`},r.default.createElement(u0,{className:"w-5 h-5"})," Carrusel",!["business","premium"].includes(h?.subscriptionPlan)&&r.default.createElement(Tr,{className:"w-3 h-3 text-yellow-500 ml-auto"})),Gc(Y?.email)&&r.default.createElement(r.default.Fragment,null,r.default.createElement("p",{className:"admin-nav-section text-[10px] font-black text-slate-600 uppercase tracking-widest px-3 md:px-4 py-2 mt-4 md:mt-6"},"Gestin"),r.default.createElement("button",{onClick:()=>{s("coupons"),B(!1)},className:`admin-nav-btn w-full text-left px-4 md:px-5 py-3 md:py-3.5 rounded-xl flex items-center gap-3 font-semibold text-sm transition ${n==="coupons"?"bg-orange-500/15 text-orange-200 border border-orange-400/30 shadow-[inset_0_1px_0_rgba(255,255,255,0.05)]":"text-slate-400 border border-transparent hover:text-slate-100 hover:bg-slate-900/80 hover:border-slate-700/70"}`},r.default.createElement(Gs,{className:"w-5 h-5"})," Cupones",!["business","premium"].includes(h?.subscriptionPlan)&&r.default.createElement(Tr,{className:"w-3 h-3 text-yellow-500 ml-auto"})),r.default.createElement("button",{onClick:()=>{s("suppliers"),B(!1)},className:`admin-nav-btn w-full text-left px-4 md:px-5 py-3 md:py-3.5 rounded-xl flex items-center gap-3 font-semibold text-sm transition ${n==="suppliers"?"bg-orange-500/15 text-orange-200 border border-orange-400/30 shadow-[inset_0_1px_0_rgba(255,255,255,0.05)]":"text-slate-400 border border-transparent hover:text-slate-100 hover:bg-slate-900/80 hover:border-slate-700/70"}`},r.default.createElement(ss,{className:"w-5 h-5"})," Proveedores"),r.default.createElement("button",{onClick:()=>{s("purchases"),B(!1)},className:`admin-nav-btn w-full text-left px-4 md:px-5 py-3 md:py-3.5 rounded-xl flex items-center gap-3 font-semibold text-sm transition ${n==="purchases"?"bg-orange-500/15 text-orange-200 border border-orange-400/30 shadow-[inset_0_1px_0_rgba(255,255,255,0.05)]":"text-slate-400 border border-transparent hover:text-slate-100 hover:bg-slate-900/80 hover:border-slate-700/70"}`},r.default.createElement(Go,{className:"w-5 h-5"})," Compras"),r.default.createElement("button",{onClick:()=>{s("finance"),B(!1)},className:`admin-nav-btn w-full text-left px-4 md:px-5 py-3 md:py-3.5 rounded-xl flex items-center gap-3 font-semibold text-sm transition ${n==="finance"?"bg-orange-500/15 text-orange-200 border border-orange-400/30 shadow-[inset_0_1px_0_rgba(255,255,255,0.05)]":"text-slate-400 border border-transparent hover:text-slate-100 hover:bg-slate-900/80 hover:border-slate-700/70"}`},r.default.createElement(b0,{className:"w-5 h-5"})," Finanzas"),r.default.createElement("button",{onClick:()=>{s("settings"),B(!1)},className:`admin-nav-btn w-full text-left px-4 md:px-5 py-3 md:py-3.5 rounded-xl flex items-center gap-3 font-semibold text-sm transition ${n==="settings"?"bg-orange-500/15 text-orange-200 border border-orange-400/30 shadow-[inset_0_1px_0_rgba(255,255,255,0.05)]":"text-slate-400 border border-transparent hover:text-slate-100 hover:bg-slate-900/80 hover:border-slate-700/70"}`},r.default.createElement(h0,{className:"w-5 h-5"})," Configuracin"),r.default.createElement("button",{onClick:()=>{s("users"),B(!1)},className:`admin-nav-btn w-full text-left px-4 md:px-5 py-3 md:py-3.5 rounded-xl flex items-center gap-3 font-semibold text-sm transition ${n==="users"?"bg-pink-500/15 text-pink-200 border border-pink-400/30 shadow-[inset_0_1px_0_rgba(255,255,255,0.05)]":"text-slate-400 border border-transparent hover:text-slate-100 hover:bg-slate-900/80 hover:border-slate-700/70"}`},r.default.createElement(Qo,{className:"w-5 h-5"})," Usuarios"))),r.default.createElement("div",{className:"admin-sidebar-footer p-4 md:p-6 border-t border-slate-900"},r.default.createElement("button",{onClick:()=>{e("store"),B(!1)},className:"admin-exit-btn w-full py-3.5 md:py-4 bg-slate-900 rounded-xl text-slate-300 hover:text-white hover:bg-slate-800 transition font-semibold text-sm flex items-center justify-center gap-2 group border border-slate-800"},r.default.createElement(r0,{className:"w-4 h-4 group-hover:-translate-x-1 transition"})," Volver a Tienda"))),r.default.createElement("div",{className:"admin-main admin-content flex-1 bg-[#050505] overflow-y-auto relative w-full p-4 md:p-10 custom-scrollbar"},r.default.createElement("button",{onClick:()=>B(!0),className:"admin-mobile-menu md:hidden mb-4 p-3 bg-slate-900 hover:bg-slate-800 rounded-xl text-white border border-slate-800 flex items-center gap-2 font-semibold text-sm transition"},r.default.createElement(o0,{className:"w-5 h-5"})," Men"),n==="dashboard"&&r.default.createElement("div",{className:"max-w-[1600px] mx-auto animate-fade-up space-y-8 pb-20"},r.default.createElement(y2,null),r.default.createElement(w2,null),r.default.createElement("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-end mb-4 gap-4"},r.default.createElement("div",null,r.default.createElement("h1",{className:"admin-page-title text-3xl md:text-4xl font-black text-white tracking-tight"},"Panel de Control"),r.default.createElement("p",{className:"admin-page-subtitle text-slate-400 text-sm mt-2"},"Resumen administrativo y financiero.")),r.default.createElement("div",{className:"flex items-center gap-3"},r.default.createElement(Hr,{guideKey:"dashboard"}),r.default.createElement("div",{className:"admin-date-chip hidden md:block bg-slate-900 px-4 py-2 rounded-lg text-xs text-slate-300 font-mono border border-slate-800"},new Date().toLocaleDateString("es-AR",{weekday:"long",year:"numeric",month:"long",day:"numeric"})))),r.default.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8"},r.default.createElement("div",{className:"bg-[#0a0a0a] border border-slate-800 p-8 rounded-[2.5rem] relative overflow-hidden group hover:border-green-500/30 transition"},r.default.createElement("div",{className:"flex justify-between items-center mb-6"},r.default.createElement("div",null,r.default.createElement("p",{className:"text-slate-500 font-black text-xs tracking-widest uppercase mb-1"},"Ingresos Brutos"),r.default.createElement("h2",{className:"text-4xl font-black text-white tracking-tighter"},"$",Ae.revenue.toLocaleString())),r.default.createElement("div",{className:"p-4 bg-green-900/20 text-green-400 rounded-2xl"},r.default.createElement(al,{className:"w-8 h-8"}))),r.default.createElement("div",{className:"space-y-4 mt-8 border-t border-slate-800 pt-6"},r.default.createElement("p",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-4"},"Rendimiento Mensual"),Ae.analytics.monthly.slice(-6).reverse().map((l,m)=>{let v=Math.max(...Ae.analytics.monthly.map(E=>E.revenue)),x=v>0?l.revenue/v*100:0;return r.default.createElement("div",{key:m,className:"group/item"},r.default.createElement("div",{className:"flex justify-between text-xs mb-1"},r.default.createElement("span",{className:"text-slate-400 font-mono"},l.date),r.default.createElement("span",{className:"text-white font-bold"},"$",l.revenue.toLocaleString())),r.default.createElement("div",{className:"h-2 bg-slate-800 rounded-full overflow-hidden w-full"},r.default.createElement("div",{className:"h-full bg-gradient-to-r from-green-600 to-emerald-400 rounded-full transition-all duration-1000 group-hover/item:brightness-125",style:{width:`${x}%`}})))}),Ae.analytics.monthly.length===0&&r.default.createElement("p",{className:"text-slate-600 text-xs"},"Sin datos suficientes."))),r.default.createElement("div",{className:"bg-[#0a0a0a] border border-slate-800 p-8 rounded-[2.5rem] relative overflow-hidden group hover:border-orange-500/30 transition"},r.default.createElement("div",{className:"flex justify-between items-center mb-6"},r.default.createElement("div",null,r.default.createElement("p",{className:"text-slate-500 font-black text-xs tracking-widest uppercase mb-1"},"Beneficio Neto (Estimado)"),r.default.createElement("h2",{className:`text-4xl font-black tracking-tighter ${Ae.netIncome>=0?"text-orange-400":"text-red-500"}`},"$",Ae.netIncome.toLocaleString())),r.default.createElement("div",{className:`p-4 rounded-2xl ${Ae.netIncome>=0?"bg-orange-900/20 text-orange-400":"bg-red-900/20 text-red-500"}`},Ae.netIncome>=0?r.default.createElement(Ko,{className:"w-8 h-8"}):r.default.createElement(ch,{className:"w-8 h-8"}))),r.default.createElement("div",{className:"space-y-4 mt-8 border-t border-slate-800 pt-6"},r.default.createElement("p",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-4"},"Ingresos vs Gastos (ltimos Meses)"),Ae.analytics.monthly.slice(-6).reverse().map((l,m)=>{let v=i.filter(V=>V.date.startsWith(l.date)).reduce((V,P)=>V+P.amount,0)+(d||[]).filter(V=>V.date.startsWith(l.date)).reduce((V,P)=>V+P.cost,0),x=l.revenue+v,E=x>0?l.revenue/x*100:0;return r.default.createElement("div",{key:m,className:"group/item"},r.default.createElement("div",{className:"flex justify-between text-xs mb-1"},r.default.createElement("span",{className:"text-slate-400 font-mono"},l.date),r.default.createElement("span",{className:"text-orange-400 font-bold"},"+$",(l.revenue-v).toLocaleString())),r.default.createElement("div",{className:"flex h-2 bg-slate-800 rounded-full overflow-hidden w-full"},r.default.createElement("div",{title:`Ingresos: $${l.revenue}`,className:"h-full bg-orange-500 transition-all duration-1000",style:{width:`${E}%`}}),r.default.createElement("div",{title:`Gastos: $${v}`,className:"h-full bg-red-500 transition-all duration-1000",style:{width:`${100-E}%`}})))}),Ae.analytics.monthly.length===0&&r.default.createElement("p",{className:"text-slate-600 text-xs"},"Sin datos suficientes.")))),r.default.createElement("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4"},r.default.createElement("div",{className:"bg-slate-900/30 p-4 rounded-2xl border border-slate-800"},r.default.createElement("p",{className:"text-slate-500 text-[10px] uppercase font-bold text-center"},"Usuarios Totales"),r.default.createElement("p",{className:"text-white font-black text-2xl text-center mt-1"},Ae.totalUsers)),r.default.createElement("div",{className:"bg-slate-900/30 p-4 rounded-2xl border border-slate-800"},r.default.createElement("p",{className:"text-slate-500 text-[10px] uppercase font-bold text-center"},"Pedidos Totales"),r.default.createElement("p",{className:"text-white font-black text-2xl text-center mt-1"},Ae.totalOrders)),r.default.createElement("div",{className:"bg-slate-900/30 p-4 rounded-2xl border border-slate-800"},r.default.createElement("p",{className:"text-slate-500 text-[10px] uppercase font-bold text-center"},"Ticket Promedio"),r.default.createElement("p",{className:"text-white font-black text-2xl text-center mt-1"},"$",Ae.totalOrders>0?Math.round(Ae.revenue/Ae.totalOrders).toLocaleString():0)),r.default.createElement("div",{className:"bg-slate-900/30 p-4 rounded-2xl border border-slate-800"},r.default.createElement("p",{className:"text-slate-500 text-[10px] uppercase font-bold text-center"},"Stock Bajo"),r.default.createElement("p",{className:`font-black text-2xl text-center mt-1 ${Ae.lowStockProducts.length>0?"text-red-500":"text-green-500"}`},Ae.lowStockProducts.length))),r.default.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8"},r.default.createElement("div",{className:"bg-[#0a0a0a] border border-slate-800 p-8 rounded-[2.5rem] relative overflow-hidden group hover:border-yellow-500/30 transition"},r.default.createElement("div",{className:"absolute top-0 right-0 p-8 opacity-10 pointer-events-none"},r.default.createElement(Ho,{className:"w-32 h-32 text-yellow-500"})),r.default.createElement("p",{className:"text-slate-500 font-black text-xs tracking-widest uppercase mb-4 flex items-center gap-2"},r.default.createElement(Ho,{className:"w-4 h-4 text-yellow-500"})," Producto Estrella"),Ae.starProduct?r.default.createElement("div",{className:"flex items-center gap-6 relative z-10"},r.default.createElement("div",{className:"w-24 h-24 bg-white rounded-2xl p-2 shadow-lg flex-shrink-0 overflow-hidden product-preview-frame"},r.default.createElement("img",{src:Ae.starProduct.image,alt:Ae.starProduct.name||"Producto estrella",className:"w-full h-full object-contain"})),r.default.createElement("div",null,r.default.createElement("h3",{className:"text-xl font-black text-white leading-tight mb-1"},Ae.starProduct.name),r.default.createElement("p",{className:"text-yellow-400 font-bold text-lg"},Ae.starProduct.sales," Und. vendidas"),r.default.createElement("p",{className:"text-slate-500 text-xs mt-1"},"Stock actual: ",Ae.starProduct.stock))):r.default.createElement("p",{className:"text-slate-600"},"No hay datos de ventas an.")),r.default.createElement("div",{className:"bg-[#0a0a0a] border border-slate-800 p-8 rounded-[2.5rem] relative overflow-hidden group hover:border-slate-600 transition"},r.default.createElement("div",{className:"absolute top-0 right-0 p-8 opacity-10 pointer-events-none"},r.default.createElement(Bi,{className:"w-32 h-32 text-slate-500"})),r.default.createElement("p",{className:"text-slate-500 font-black text-xs tracking-widest uppercase mb-4 flex items-center gap-2"},r.default.createElement(ch,{className:"w-4 h-4 text-slate-500"})," Menos Vendido (En Stock)"),Ae.leastSoldProduct?r.default.createElement("div",{className:"flex items-center gap-6 relative z-10"},r.default.createElement("div",{className:"w-24 h-24 bg-white rounded-2xl p-2 shadow-lg grayscale flex-shrink-0 overflow-hidden product-preview-frame"},r.default.createElement("img",{src:Ae.leastSoldProduct.image,alt:Ae.leastSoldProduct.name||"Menos vendido",className:"w-full h-full object-contain"})),r.default.createElement("div",null,r.default.createElement("h3",{className:"text-xl font-black text-white leading-tight mb-1"},Ae.leastSoldProduct.name),r.default.createElement("p",{className:"text-slate-400 font-bold text-lg"},Ae.salesCount[Ae.leastSoldProduct.id]||0," Und. vendidas"),r.default.createElement("p",{className:"text-slate-500 text-xs mt-1"},"Hay que rotar este stock."))):r.default.createElement("p",{className:"text-slate-600"},"Todos los productos tienen buena rotacin."))),r.default.createElement("div",{className:"bg-[#0a0a0a] border border-slate-800 rounded-[2.5rem] p-8 overflow-hidden shadow-2xl"},r.default.createElement("h3",{className:"text-xl font-black text-white mb-6 flex items-center gap-2"},r.default.createElement(ih,{className:"w-6 h-6 text-purple-400"})," Registro de Movimientos"),r.default.createElement("div",{className:"overflow-x-auto"},r.default.createElement("table",{className:"w-full text-left border-collapse"},r.default.createElement("thead",null,r.default.createElement("tr",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest border-b border-slate-800"},r.default.createElement("th",{className:"pb-4 pl-4"},"Fecha"),r.default.createElement("th",{className:"pb-4"},"Tipo"),r.default.createElement("th",{className:"pb-4"},"Concepto"),r.default.createElement("th",{className:"pb-4"},"Estado"),r.default.createElement("th",{className:"pb-4 text-right pr-4"},"Monto"))),r.default.createElement("tbody",{className:"text-sm font-medium"},Ae.transactions.map((l,m)=>r.default.createElement("tr",{key:`${l.type}-${m}`,className:"border-b border-slate-800/50 hover:bg-slate-900/20 transition group"},r.default.createElement("td",{className:"py-4 pl-4 text-slate-400 font-mono text-xs"},new Date(l.date).toLocaleDateString()),r.default.createElement("td",{className:"py-4"},r.default.createElement("span",{className:`px-2 py-1 rounded text-[10px] font-black uppercase tracking-wider ${l.type==="income"?"bg-green-900/20 text-green-400 border border-green-500/20":"bg-red-900/20 text-red-400 border border-red-500/20"}`},l.category)),r.default.createElement("td",{className:"py-4 text-white group-hover:text-purple-300 transition"},l.description),r.default.createElement("td",{className:"py-4 text-xs text-slate-500"},l.status),r.default.createElement("td",{className:`py-4 text-right pr-4 font-mono font-bold ${l.type==="income"?"text-green-400":"text-red-400"}`},l.type==="income"?"+":"-","$",l.amount.toLocaleString()))),Ae.transactions.length===0&&r.default.createElement("tr",null,r.default.createElement("td",{colSpan:"5",className:"text-center py-8 text-slate-500"},"Sin movimientos registrados."))))))),n==="suppliers"&&r.default.createElement("div",{className:"max-w-6xl mx-auto space-y-8 animate-fade-up pb-20"},r.default.createElement("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4"},r.default.createElement("h1",{className:"text-3xl font-black text-white"},"Proveedores"),r.default.createElement("div",{className:"flex items-center gap-2"},r.default.createElement(Hr,{guideKey:"suppliers"}),r.default.createElement("button",{onClick:()=>{Nr({name:"",contact:"",phone:"",ig:"",address:"",cuit:"",associatedProducts:[]}),Ja(null),Ii(!0)},className:"bg-orange-600 px-6 py-3 rounded-xl font-bold text-white flex gap-2 shadow-lg hover:bg-orange-500 transition transform hover:-translate-y-1"},r.default.createElement(En,{className:"w-5 h-5"})," Nuevo Proveedor"))),r.default.createElement("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6"},wr.map((l,m)=>r.default.createElement("div",{key:l.id,style:{animationDelay:`${m*.05}s`},className:"bg-[#0a0a0a] border border-slate-800 p-6 rounded-[2rem] hover:border-slate-600 transition duration-300 group animate-fade-up"},r.default.createElement("div",{className:"flex justify-between items-start mb-6"},r.default.createElement("div",{className:"p-4 bg-slate-900 rounded-xl text-slate-400 group-hover:text-orange-400 transition group-hover:bg-orange-900/20"},r.default.createElement(ss,{className:"w-8 h-8"})),r.default.createElement("div",{className:"flex gap-2"},r.default.createElement("button",{onClick:()=>{Nr(l),Ja(l.id),Ii(!0)},className:"text-slate-600 hover:text-orange-400 p-2 hover:bg-slate-900 rounded-lg transition",title:"Editar"},r.default.createElement(qi,{className:"w-5 h-5"})),r.default.createElement("button",{onClick:()=>Vt("Eliminar Proveedor","Eliminar proveedor?",async()=>await qr(fe(ae,"artifacts",w,"public","data","suppliers",l.id))),className:"text-slate-600 hover:text-red-400 p-2 hover:bg-slate-900 rounded-lg transition",title:"Eliminar"},r.default.createElement(mt,{className:"w-5 h-5"})))),r.default.createElement("h3",{className:"text-2xl font-bold text-white mb-2"},l.name),r.default.createElement("div",{className:"space-y-3 mb-6 p-4 bg-slate-900/30 rounded-xl border border-slate-800/50"},r.default.createElement("p",{className:"text-slate-400 text-sm flex items-center gap-3"},r.default.createElement(is,{className:"w-4 h-4 text-slate-500"})," ",l.contact),l.phone&&r.default.createElement("p",{className:"text-slate-400 text-sm flex items-center gap-3"},r.default.createElement(c0,{className:"w-4 h-4 text-slate-500"})," ",l.phone),l.ig&&r.default.createElement("p",{className:"text-slate-400 text-sm flex items-center gap-3"},r.default.createElement(cl,{className:"w-4 h-4 text-slate-500"})," ",l.ig)),r.default.createElement("div",{className:"pt-4 border-t border-slate-800"},r.default.createElement("p",{className:"text-xs font-bold text-slate-500 uppercase mb-3 tracking-wider"},"Productos Suministrados"),r.default.createElement("div",{className:"flex flex-wrap gap-2"},l.associatedProducts&&l.associatedProducts.length>0?l.associatedProducts.map(v=>{let x=he.find(E=>E.id===v);return x?r.default.createElement("div",{key:v,className:"w-10 h-10 rounded-lg bg-white p-1 flex items-center justify-center border border-slate-600 tooltip-container overflow-hidden product-preview-frame",title:x.name},r.default.createElement("img",{src:x.image,alt:x.name||"Producto",className:"w-full h-full object-contain"})):null}):r.default.createElement("span",{className:"text-xs text-slate-600 italic"},"No hay productos asignados"))))))),n==="purchases"&&r.default.createElement("div",{className:"max-w-6xl mx-auto animate-fade-up pb-20"},r.default.createElement("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-8"},r.default.createElement("h1",{className:"text-3xl font-black text-white"},"Gestin de Stock y Compras"),r.default.createElement(Hr,{guideKey:"purchases"})),r.default.createElement("div",{className:"bg-[#0a0a0a] border border-slate-800 rounded-[2.5rem] mb-10 shadow-xl overflow-hidden relative"},r.default.createElement("div",{className:"flex border-b border-slate-800"},r.default.createElement("div",{className:"flex-1 p-6 text-center font-bold tracking-wider bg-orange-900/20 text-orange-400"},r.default.createElement(sr,{className:"w-5 h-5 inline-block mr-2"})," REGISTRAR REPOSICIN DE STOCK")),r.default.createElement("div",{className:"p-8"},(()=>{let l=he.find(x=>x.id===it.productId),v=(l?.purchasePrice||l?.basePrice||0)*it.quantity;return r.default.createElement("div",{className:"space-y-6 animate-fade-in"},r.default.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6"},r.default.createElement("div",{className:"md:col-span-2"},r.default.createElement("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-2 block"},"Producto Existente"),r.default.createElement("div",{className:"flex gap-4 items-center"},l&&r.default.createElement("div",{className:"w-16 h-16 bg-white rounded-lg p-1 flex-shrink-0 border border-slate-700 overflow-hidden product-preview-frame"},r.default.createElement("img",{src:l.image,className:"w-full h-full object-contain",alt:"Preview"})),r.default.createElement("div",{className:"flex-1"},r.default.createElement("select",{className:"input-cyber w-full p-4",value:it.productId,onChange:x=>_i({...it,productId:x.target.value})},r.default.createElement("option",{value:""},"Seleccionar Producto..."),he.map(x=>r.default.createElement("option",{key:x.id,value:x.id},x.name," (Stock: ",isNaN(Number(x.stock))?0:x.stock,")"))),l&&r.default.createElement("p",{className:"text-xs text-orange-400 mt-2 font-bold"},"Stock Actual: ",isNaN(Number(l.stock))?0:l.stock," | Costo Total Estimado: $",v.toLocaleString())))),r.default.createElement("div",null,r.default.createElement("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-2 block"},"Cantidad"),r.default.createElement("input",{type:"number",className:"input-cyber w-full p-4",placeholder:"0",value:it.quantity,onChange:x=>_i({...it,quantity:parseInt(x.target.value)||0})})),r.default.createElement("div",{className:"md:col-span-3"},r.default.createElement("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-2 block"},"Proveedor"),r.default.createElement("select",{className:"input-cyber w-full p-4",value:it.supplierId,onChange:x=>_i({...it,supplierId:x.target.value})},r.default.createElement("option",{value:""},"Seleccionar..."),wr.map(x=>r.default.createElement("option",{key:x.id,value:x.id},x.name))))))})(),r.default.createElement("button",{onClick:async()=>{if(!it.productId)return F("Selecciona un producto existente.","warning");if(it.quantity<=0)return F("La cantidad debe ser mayor a 0.","warning");if(it.cost<0)return F("El costo no puede ser negativo.","warning");try{let l=he.find(E=>E.id===it.productId),m=l?.name||"Desconocido",x=(l?.purchasePrice||l?.basePrice||0)*it.quantity;await Gr(Ke(ae,"artifacts",w,"public","data","purchases"),{productId:it.productId,supplierId:it.supplierId||"",quantity:it.quantity,cost:x,date:new Date().toISOString()}),await Nt(fe(ae,"artifacts",w,"public","data","products",it.productId),{stock:xi(it.quantity)}),_i({isNewProduct:!1,productId:"",supplierId:"",quantity:1,cost:0,newProdName:"",newProdPrice:0,newProdImage:"",newProdCategory:""}),F(`Compra de "${m}" registrada exitosamente.`,"success")}catch(l){console.error("Error stock update:",l),F("Error: "+(l.message||"Operacin fallida"),"error")}},className:"w-full mt-8 bg-gradient-to-r from-orange-600 to-orange-500 hover:from-orange-500 hover:to-orange-400 text-white font-black py-5 rounded-2xl shadow-xl transition transform hover:scale-[1.01] flex items-center justify-center gap-3 text-lg"},r.default.createElement(rs,{className:"w-6 h-6"})," REGISTRAR REPOSICIN DE STOCK"))),rn.length>0&&r.default.createElement("div",{className:"bg-gradient-to-br from-orange-900/20 to-red-900/20 border border-orange-800 rounded-[2.5rem] p-8 mb-10 animate-fade-up"},r.default.createElement("div",{className:"flex items-center justify-between mb-6"},r.default.createElement("h3",{className:"text-2xl font-black text-white flex items-center gap-3"},r.default.createElement(Go,{className:"w-6 h-6 text-orange-400"}),"Carrito de Compras (",rn.length," ",rn.length===1?"producto":"productos",")"),r.default.createElement("p",{className:"text-orange-400 font-black text-2xl"},"TOTAL: $",rn.reduce((l,m)=>l+m.cost,0).toLocaleString())),r.default.createElement("div",{className:"space-y-4 mb-6"},rn.map((l,m)=>r.default.createElement("div",{key:m,className:"flex items-center gap-6 bg-slate-900/50 p-4 rounded-xl border border-slate-700"},r.default.createElement("div",{className:"w-16 h-16 bg-white rounded-lg p-1 flex-shrink-0 overflow-hidden product-preview-frame"},r.default.createElement("img",{src:l.productImage,className:"w-full h-full object-contain",alt:l.productName})),r.default.createElement("div",{className:"flex-1"},r.default.createElement("p",{className:"font-bold text-white"},l.productName),r.default.createElement("p",{className:"text-xs text-slate-400"},"Precio Unit.: $",l.unitPrice.toLocaleString())),r.default.createElement("div",{className:"flex items-center gap-3"},r.default.createElement("input",{type:"number",value:l.quantity,onChange:v=>f2(m,parseInt(v.target.value)||1),className:"w-20 bg-slate-800 border border-slate-700 text-white px-3 py-2 rounded-lg text-center font-bold",min:"1"}),r.default.createElement("p",{className:"text-orange-400 font-bold w-28 text-right"},"$",l.cost.toLocaleString()),r.default.createElement("button",{onClick:()=>p2(m),className:"p-2 bg-red-900/20 hover:bg-red-900/40 text-red-400 rounded-lg transition"},r.default.createElement(mt,{className:"w-5 h-5"})))))),r.default.createElement("button",{onClick:g2,className:"w-full py-5 bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-500 hover:to-emerald-500 text-white font-black rounded-2xl shadow-xl transition transform hover:scale-[1.01] flex items-center justify-center gap-3 text-lg"},r.default.createElement(Me,{className:"w-6 h-6"})," FINALIZAR PEDIDO")),r.default.createElement("div",{className:"bg-[#0a0a0a] border border-slate-800 rounded-[2.5rem] p-8"},r.default.createElement("h3",{className:"text-xl font-bold text-white mb-6"},"Historial de Compras"),r.default.createElement("div",{className:"space-y-4"},d.sort((l,m)=>new Date(m.date)-new Date(l.date)).map((l,m)=>{let v=he.find(E=>E.id===l.productId),x=wr.find(E=>E.id===l.supplierId);return r.default.createElement("div",{key:l.id,style:{animationDelay:`${m*.05}s`},className:"flex justify-between items-center bg-slate-900/40 p-4 rounded-xl border border-slate-800 hover:border-slate-600 transition group animate-fade-up"},r.default.createElement("div",{className:"flex items-center gap-4 flex-1"},r.default.createElement("div",{className:"w-12 h-12 bg-white rounded-lg p-1 flex-shrink-0 border border-slate-700 overflow-hidden product-preview-frame"},v?.image?r.default.createElement("img",{src:v.image,className:"w-full h-full object-contain",alt:v.name}):r.default.createElement(sr,{className:"w-full h-full text-slate-400 p-2"})),r.default.createElement("div",null,r.default.createElement("p",{className:"font-bold text-white flex items-center gap-2"},v?.name||"Producto Eliminado",r.default.createElement("span",{className:"text-[10px] bg-slate-800 px-2 py-0.5 rounded text-slate-400"},"STOCK ACTUAL: ",v?.stock||0)),r.default.createElement("p",{className:"text-xs text-slate-500"},new Date(l.date).toLocaleDateString()," ",x?`- Prov: ${x.name}`:""))),r.default.createElement("div",{className:"flex items-center gap-6"},r.default.createElement("div",{className:"text-right"},r.default.createElement("p",{className:"text-orange-400 font-bold"},"+",l.quantity," u."),r.default.createElement("p",{className:"text-slate-400 text-xs font-mono"},"$",(l.cost||0).toLocaleString())),r.default.createElement("div",{className:"flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity"},r.default.createElement("button",{onClick:()=>Zr(l),className:"p-2 bg-slate-800 hover:bg-blue-900/30 text-slate-400 hover:text-blue-400 rounded-lg transition"},r.default.createElement(qi,{className:"w-4 h-4"})),r.default.createElement("button",{onClick:()=>d2(l),className:"p-2 bg-slate-800 hover:bg-red-900/30 text-slate-400 hover:text-red-400 rounded-lg transition"},r.default.createElement(mt,{className:"w-4 h-4"})))))}))),_r&&r.default.createElement("div",{className:"fixed inset-0 z-[160] flex items-center justify-center bg-black/90 backdrop-blur-md p-4 animate-fade-in"},r.default.createElement("div",{className:"bg-[#0a0a0a] border border-slate-700 rounded-3xl p-8 w-full max-w-lg shadow-2xl relative"},r.default.createElement("button",{onClick:()=>Zr(null),className:"absolute top-4 right-4 p-2 text-slate-500 hover:text-white"},r.default.createElement(lt,{className:"w-6 h-6"})),r.default.createElement("h3",{className:"text-2xl font-bold text-white mb-6"},"Editar Compra"),r.default.createElement("div",{className:"space-y-4"},r.default.createElement("div",null,r.default.createElement("label",{className:"text-xs font-bold text-slate-500 uppercase block mb-1"},"Cantidad comprada"),r.default.createElement("div",{className:"text-xs text-yellow-500 mb-2"}," Modificar esto ajustar el stock del producto automticamente."),r.default.createElement("input",{type:"number",className:"input-cyber w-full p-3",value:_r.quantity,onChange:l=>Zr({..._r,quantity:parseInt(l.target.value)||0})})),r.default.createElement("div",null,r.default.createElement("label",{className:"text-xs font-bold text-slate-500 uppercase block mb-1"},"Costo Total ($)"),r.default.createElement("input",{type:"number",className:"input-cyber w-full p-3",value:_r.cost,onChange:l=>Zr({..._r,cost:parseFloat(l.target.value)||0})}))),r.default.createElement("button",{onClick:()=>{let l=d.find(m=>m.id===_r.id);l&&h2(_r.id,l,_r)},className:"w-full mt-6 bg-orange-600 hover:bg-orange-500 text-white font-bold py-3 rounded-xl transition shadow-lg"},"Guardar Cambios")))),n==="finance"&&r.default.createElement("div",{className:"max-w-6xl mx-auto animate-fade-up pb-20"},r.default.createElement("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-8"},r.default.createElement("h1",{className:"text-4xl font-black text-white neon-text"},"Finanzas y Capital"),r.default.createElement(Hr,{guideKey:"finance"})),r.default.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-12"},r.default.createElement("div",{className:"bg-[#0a0a0a] border border-orange-900/30 p-8 rounded-[2.5rem] shadow-xl relative overflow-hidden"},r.default.createElement("div",{className:"absolute top-0 right-0 w-32 h-32 bg-orange-500/5 rounded-bl-[100px] pointer-events-none"}),r.default.createElement("h3",{className:"text-xl font-bold text-white mb-6 flex items-center gap-2"},r.default.createElement(Ko,{className:"w-5 h-5 text-orange-400"})," Registrar Inversin / Aporte"),r.default.createElement("div",{className:"space-y-4"},r.default.createElement("div",null,r.default.createElement("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-2 block"},"Inversor (Socio)"),r.default.createElement("div",{className:"relative"},r.default.createElement(Qo,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-slate-500 w-4 h-4"}),r.default.createElement("select",{className:"input-cyber w-full pl-12 p-4 appearance-none",value:Ot.investor,onChange:l=>Ni({...Ot,investor:l.target.value})},r.default.createElement("option",{value:""},"Seleccionar Socio..."),(h?.team||[]).map((l,m)=>r.default.createElement("option",{key:m,value:l.name||l.email},l.name||l.email)),r.default.createElement("option",{value:"other"},"Otro / Externo"))),Ot.investor==="other"&&r.default.createElement("input",{className:"input-cyber w-full p-4 mt-2",placeholder:"Nombre del Inversor Externo",value:Ot.investorCustomName||"",onChange:l=>Ni({...Ot,investorCustomName:l.target.value})})),r.default.createElement("div",{className:"grid grid-cols-2 gap-4"},r.default.createElement("div",null,r.default.createElement("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-2 block"},"Monto ($)"),r.default.createElement("input",{type:"number",className:"input-cyber w-full p-4 font-mono font-bold text-orange-400",placeholder:"0.00",value:Ot.amount,onChange:l=>Ni({...Ot,amount:parseFloat(l.target.value)||0})})),r.default.createElement("div",null,r.default.createElement("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-2 block"},"Fecha"),r.default.createElement("input",{type:"date",className:"input-cyber w-full p-4",value:Ot.date,onChange:l=>Ni({...Ot,date:l.target.value})}))),r.default.createElement("div",null,r.default.createElement("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-2 block"},"Notas (Opcional)"),r.default.createElement("input",{className:"input-cyber w-full p-4",placeholder:"Ej: Inversin Inicial, Refuerzo de capital...",value:Ot.notes,onChange:l=>Ni({...Ot,notes:l.target.value})})),r.default.createElement("button",{onClick:async()=>{let l=Ot.investor==="other"?(Ot.investorCustomName||"").trim():Ot.investor;if(!l||Ot.amount<=0)return F("Completa los datos correctamente.","warning");let{investorCustomName:m,...v}=Ot;await Gr(Ke(ae,"artifacts",w,"public","data","investments"),{...v,investor:l,timestamp:new Date().toISOString()}),Ni({investor:"",investorCustomName:"",amount:"",date:new Date().toISOString().split("T")[0],notes:""}),F("Inversin registrada correctamente.","success")},className:"w-full mt-2 bg-gradient-to-r from-orange-600 to-blue-600 hover:from-orange-500 hover:to-blue-500 text-white font-black py-4 rounded-xl shadow-lg transition flex items-center justify-center gap-2 border border-orange-500/20"},r.default.createElement(rs,{className:"w-5 h-5"})," Registrar Aporte"))),r.default.createElement("div",{className:"bg-[#0a0a0a] border border-red-900/30 p-8 rounded-[2.5rem] shadow-xl relative overflow-hidden"},r.default.createElement("div",{className:"absolute top-0 right-0 w-32 h-32 bg-red-500/5 rounded-bl-[100px] pointer-events-none"}),r.default.createElement("h3",{className:"text-xl font-bold text-white mb-6 flex items-center gap-2"},r.default.createElement(b0,{className:"w-5 h-5 text-red-400"})," Registrar Gasto / Egreso"),r.default.createElement("div",{className:"space-y-4"},r.default.createElement("div",null,r.default.createElement("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-2 block"},"Descripcin"),r.default.createElement("input",{className:"input-cyber w-full p-4",placeholder:"Ej: Pago de Internet, Alquiler...",value:Zn.description,onChange:l=>Ka({...Zn,description:l.target.value})})),r.default.createElement("div",{className:"grid grid-cols-2 gap-4"},r.default.createElement("div",null,r.default.createElement("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-2 block"},"Monto ($)"),r.default.createElement("input",{type:"number",className:"input-cyber w-full p-4 font-mono font-bold text-red-400",placeholder:"0.00",value:Zn.amount,onChange:l=>Ka({...Zn,amount:parseFloat(l.target.value)||0})})),r.default.createElement("div",null,r.default.createElement("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-2 block"},"Categora"),r.default.createElement("select",{className:"input-cyber w-full p-4",value:Zn.category,onChange:l=>Ka({...Zn,category:l.target.value})},r.default.createElement("option",null,"General"),r.default.createElement("option",null,"Servicios"),r.default.createElement("option",null,"Impuestos"),r.default.createElement("option",null,"Mantenimiento"),r.default.createElement("option",null,"Marketing"),r.default.createElement("option",null,"Sueldos"),r.default.createElement("option",null,"Otros")))),r.default.createElement("button",{onClick:async()=>{if(!Zn.description||Zn.amount<=0)return F("Completa los datos correctamente.","warning");await Gr(Ke(ae,"artifacts",w,"public","data","expenses"),{...Zn,date:new Date().toISOString()}),Ka({description:"",amount:"",category:"General",date:new Date().toISOString().split("T")[0]}),F("Gasto registrado correctamente.","success")},className:"w-full mt-2 bg-red-900/50 hover:bg-red-900 text-white font-black py-4 rounded-xl shadow-lg transition flex items-center justify-center gap-2 border border-red-500/20"},r.default.createElement(rs,{className:"w-5 h-5"})," Registrar Gasto")))),r.default.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-12"},r.default.createElement("div",{className:"bg-[#0a0a0a] border border-slate-800 rounded-[2.5rem] p-8 h-[500px] flex flex-col"},r.default.createElement("h3",{className:"text-lg font-bold text-white mb-4"},"Historial de Inversiones"),r.default.createElement("div",{className:"flex-1 overflow-y-auto custom-scrollbar pr-2 space-y-3"},a.length===0?r.default.createElement("p",{className:"text-slate-500 text-sm italic text-center py-10"},"Sin inversiones registradas."):a.sort((l,m)=>new Date(m.date)-new Date(l.date)).map((l,m)=>r.default.createElement("div",{key:l.id,className:"bg-slate-900/30 border border-slate-800 p-4 rounded-xl flex justify-between items-center group hover:border-orange-500/30 transition"},r.default.createElement("div",null,r.default.createElement("p",{className:"text-white font-bold text-sm"},l.investor),r.default.createElement("p",{className:"text-slate-500 text-xs"},new Date(l.date).toLocaleDateString()," ",l.notes&&`- ${l.notes}`)),r.default.createElement("div",{className:"flex items-center gap-4"},r.default.createElement("p",{className:"text-orange-400 font-mono font-bold"},"+$",l.amount.toLocaleString()),r.default.createElement("button",{onClick:()=>Vt("Eliminar Inversin","Deseas eliminar este registro?",async()=>await qr(fe(ae,"artifacts",w,"public","data","investments",l.id))),className:"text-slate-600 hover:text-red-400 p-2 hover:bg-slate-800 rounded-lg transition"},r.default.createElement(mt,{className:"w-4 h-4"}))))))),r.default.createElement("div",{className:"bg-[#0a0a0a] border border-slate-800 rounded-[2.5rem] p-8 h-[500px] flex flex-col"},r.default.createElement("h3",{className:"text-lg font-bold text-white mb-4"},"Historial de Gastos"),r.default.createElement("div",{className:"flex-1 overflow-y-auto custom-scrollbar pr-2 space-y-3"},i.length===0?r.default.createElement("p",{className:"text-slate-500 text-sm italic text-center py-10"},"Sin gastos registrados."):i.sort((l,m)=>new Date(m.date)-new Date(l.date)).map((l,m)=>r.default.createElement("div",{key:l.id,className:"bg-slate-900/30 border border-slate-800 p-4 rounded-xl flex justify-between items-center group hover:border-red-500/30 transition"},r.default.createElement("div",null,r.default.createElement("p",{className:"text-white font-bold text-sm"},l.description),r.default.createElement("p",{className:"text-slate-500 text-xs flex gap-2"},r.default.createElement("span",{className:"text-red-300 font-bold bg-red-900/20 px-1.5 rounded"},l.category),r.default.createElement("span",null,new Date(l.date).toLocaleDateString()))),r.default.createElement("div",{className:"flex items-center gap-4"},r.default.createElement("p",{className:"text-red-400 font-mono font-bold"},"-$",l.amount.toLocaleString()),r.default.createElement("button",{onClick:()=>Vt("Eliminar Gasto","Deseas eliminar este registro?",async()=>await qr(fe(ae,"artifacts",w,"public","data","expenses",l.id))),className:"text-slate-600 hover:text-red-400 p-2 hover:bg-slate-800 rounded-lg transition"},r.default.createElement(mt,{className:"w-4 h-4"})))))))),r.default.createElement("div",{className:"animate-fade-up pt-12 border-t border-slate-800"},r.default.createElement("div",{className:"flex justify-between items-center mb-8"},r.default.createElement("div",null,r.default.createElement("h2",{className:"text-2xl font-black text-white flex items-center gap-3"},r.default.createElement(al,{className:"w-8 h-8 text-green-500"})," Distribucin de Ganancias"),r.default.createElement("p",{className:"text-slate-500 mt-1"},"Clculo automtico basado en las inversiones registradas.")),r.default.createElement("div",{className:"text-right"},r.default.createElement("p",{className:"text-xs font-bold text-slate-500 uppercase tracking-widest"},"Beneficio Neto"),r.default.createElement("p",{className:`text-3xl font-black ${Ae.netIncome>=0?"text-green-400":"text-red-500"}`},"$",Ae.netIncome.toLocaleString()))),r.default.createElement("div",{className:"flex flex-col gap-8 bg-[#0a0a0a] border border-slate-800 p-8 rounded-[2rem]"},(()=>{let m=(h?.team||[]).map(x=>{let E=a.filter(V=>V.investor===x.name||V.investor===x.email).reduce((V,P)=>V+(Number(P.amount)||0),0);return{...x,totalInv:E}}),v=m.reduce((x,E)=>x+E.totalInv,0);return v===0?r.default.createElement("p",{className:"text-slate-500 text-center py-12"},"Registra inversiones para ver la distribucin de ganancias."):r.default.createElement(r.default.Fragment,null,r.default.createElement("div",{className:"w-full h-8 bg-slate-900 rounded-full flex overflow-hidden"},m.map((x,E)=>{let V=v>0?x.totalInv/v*100:0,P=["bg-green-500","bg-orange-500","bg-purple-500","bg-pink-500","bg-yellow-500","bg-red-500"];return V<=0?null:r.default.createElement("div",{key:E,className:`${P[E%P.length]} h-full transition-all duration-500`,style:{width:`${V}%`},title:`${x.name}: ${V.toFixed(1)}%`})})),r.default.createElement("div",{className:"overflow-x-auto"},r.default.createElement("table",{className:"w-full text-left border-collapse"},r.default.createElement("thead",null,r.default.createElement("tr",{className:"bg-slate-900/50 border-b border-slate-800"},r.default.createElement("th",{className:"p-6 text-xs font-black text-slate-500 uppercase tracking-widest"},"Socio"),r.default.createElement("th",{className:"p-6 text-xs font-black text-slate-500 uppercase tracking-widest text-right"},"Capital Aportado"),r.default.createElement("th",{className:"p-6 text-xs font-black text-slate-500 uppercase tracking-widest text-center"},"% Part."),r.default.createElement("th",{className:"p-6 text-xs font-black text-slate-500 uppercase tracking-widest text-right text-green-500"},"Ganancia Est."))),r.default.createElement("tbody",{className:"divide-y divide-slate-800/50"},m.map((x,E)=>{let V=v>0?x.totalInv/v*100:0,P=Ae.netIncome*V/100,U=["text-green-500","text-orange-500","text-purple-500","text-pink-500","text-yellow-500","text-red-500"];return r.default.createElement("tr",{key:E,className:"hover:bg-slate-900/20 transition"},r.default.createElement("td",{className:"p-5"},r.default.createElement("div",{className:"flex items-center gap-3"},r.default.createElement("div",{className:`w-3 h-3 rounded-full ${U[E%U.length].replace("text-","bg-")}`}),r.default.createElement("div",null,r.default.createElement("p",{className:"font-bold text-white"},x.name||"Sin Nombre"),r.default.createElement("p",{className:"text-xs text-slate-500"},x.email)))),r.default.createElement("td",{className:"p-6 text-right font-mono font-bold text-white"},"$",x.totalInv.toLocaleString()),r.default.createElement("td",{className:"p-6 text-center font-mono text-slate-300 font-bold"},V.toFixed(1),"%"),r.default.createElement("td",{className:"p-6 text-right font-mono font-black text-green-400 text-lg"},"$",P.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})))})),r.default.createElement("tfoot",{className:"bg-slate-900/30 border-t border-slate-800"},r.default.createElement("tr",null,r.default.createElement("td",{className:"p-6 font-black text-white text-right"},"TOTAL CAPITAL"),r.default.createElement("td",{className:"p-6 text-right font-black text-orange-400 text-lg"},"$",v.toLocaleString()),r.default.createElement("td",{className:"p-6 text-center font-bold text-slate-500"},"100%"),r.default.createElement("td",{className:"p-6 text-right font-black text-green-500 text-xl"},"$",Ae.netIncome.toLocaleString()))))))})()))),n==="coupons"&&r.default.createElement("div",{className:"max-w-5xl mx-auto animate-fade-up pb-20 relative"},["business","premium"].includes(h?.subscriptionPlan)?r.default.createElement(r.default.Fragment,null,r.default.createElement("div",{className:"relative z-30 flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-8"},r.default.createElement("h1",{className:"text-3xl font-black text-white"},"Gestin de Cupones"),r.default.createElement(Hr,{guideKey:"coupons"})),r.default.createElement("div",{className:"bg-[#0a0a0a] border border-slate-800 p-8 rounded-[2.5rem] mb-10 shadow-xl"},r.default.createElement("h3",{className:"text-xl font-bold text-white mb-6 flex items-center gap-2"},r.default.createElement(En,{className:"w-5 h-5 text-purple-400"})," Crear Nuevo Cupn"),r.default.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6"},r.default.createElement("div",{className:"space-y-4"},r.default.createElement("div",null,r.default.createElement("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-2 block"},"Cdigo del Cupn"),r.default.createElement("input",{className:"input-cyber w-full p-4 font-mono text-lg uppercase tracking-widest",placeholder:"Ej: VERANO2024",value:ke.code,onChange:l=>Un({...ke,code:l.target.value.toUpperCase()})})),r.default.createElement("div",{className:"flex gap-4"},r.default.createElement("div",{className:"flex-1"},r.default.createElement("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-2 block"},"Tipo"),r.default.createElement("select",{className:"input-cyber w-full p-4",value:ke.type,onChange:l=>Un({...ke,type:l.target.value})},r.default.createElement("option",{value:"percentage"},"Porcentaje (%)"),r.default.createElement("option",{value:"fixed"},"Fijo ($)"))),r.default.createElement("div",{className:"flex-1"},r.default.createElement("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-2 block"},"Valor"),r.default.createElement("input",{className:"input-cyber w-full p-4",type:"number",placeholder:"0",value:ke.value,onChange:l=>Un({...ke,value:l.target.value})})))),r.default.createElement("div",{className:"space-y-4"},r.default.createElement("div",{className:"flex gap-4"},r.default.createElement("div",{className:"flex-1"},r.default.createElement("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-2 block"},"Mnimo de Compra"),r.default.createElement("input",{className:"input-cyber w-full p-4",type:"number",placeholder:"$0",value:ke.minPurchase,onChange:l=>Un({...ke,minPurchase:l.target.value})})),ke.type==="percentage"&&r.default.createElement("div",{className:"flex-1"},r.default.createElement("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-2 block"},"Tope Reintegro"),r.default.createElement("input",{className:"input-cyber w-full p-4",type:"number",placeholder:"$0 (Opcional)",value:ke.maxDiscount,onChange:l=>Un({...ke,maxDiscount:l.target.value})}))),r.default.createElement("div",{className:"flex gap-4"},r.default.createElement("div",{className:"flex-1"},r.default.createElement("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-2 block"},"Lmite Usos (Total)"),r.default.createElement("input",{className:"input-cyber w-full p-4",type:"number",placeholder:"Ej: 100",value:ke.usageLimit,onChange:l=>Un({...ke,usageLimit:l.target.value})})),r.default.createElement("div",{className:"flex-1"},r.default.createElement("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-2 block"},"Vencimiento"),r.default.createElement("input",{className:"input-cyber w-full p-4",type:"date",value:ke.expirationDate,onChange:l=>Un({...ke,expirationDate:l.target.value})}))),r.default.createElement("div",{className:"md:col-span-2"},r.default.createElement("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-2 block"},"Tipo de Cupn"),r.default.createElement("select",{className:"input-cyber w-full p-4",value:ke.targetType,onChange:l=>Un({...ke,targetType:l.target.value})},r.default.createElement("option",{value:"global"}," Pblico / Canjeable (Redes Sociales)"),r.default.createElement("option",{value:"specific_email"}," Usuario Especfico (Email)"))),ke.targetType==="specific_email"&&r.default.createElement("div",{className:"md:col-span-2"},r.default.createElement("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-2 block"},"Email del Usuario"),r.default.createElement("input",{type:"email",className:"input-cyber w-full p-4",placeholder:"usuario@ejemplo.com",value:ke.targetUser||"",onChange:l=>Un({...ke,targetUser:l.target.value})}),r.default.createElement("p",{className:"text-xs text-slate-400 mt-1"},"Solo este usuario podr usar el cupn")))),r.default.createElement("button",{onClick:c2,className:"w-full bg-purple-600 hover:bg-purple-500 text-white font-bold py-4 rounded-xl shadow-lg transition flex items-center justify-center gap-2"},r.default.createElement(rs,{className:"w-5 h-5"})," Guardar Cupn")),r.default.createElement("div",{className:"grid gap-4"},yr.length===0&&r.default.createElement("div",{className:"text-center py-16 border-2 border-dashed border-slate-800 rounded-[2rem]"},r.default.createElement(Gs,{className:"w-14 h-14 mx-auto mb-4 text-slate-700"}),r.default.createElement("p",{className:"text-slate-500 font-bold text-lg"},"No hay cupones creados"),r.default.createElement("p",{className:"text-slate-600 text-sm mt-1"},"Cre uno arriba para empezar.")),yr.map((l,m)=>{let v=l.expirationDate&&new Date(l.expirationDate)<new Date,x=Array.isArray(l.usedBy)?l.usedBy.length:0,E=l.usageLimit&&x>=l.usageLimit,V=!v&&!E;return r.default.createElement("div",{key:l.id,style:{animationDelay:`${m*.05}s`},className:`relative overflow-hidden border p-6 rounded-[1.5rem] flex flex-col md:flex-row justify-between items-start md:items-center group transition animate-fade-up ${V?"bg-[#0a0a0a] border-slate-800 hover:border-purple-500/40":"bg-[#080808] border-slate-800/50 opacity-60"}`},r.default.createElement("div",{className:`absolute top-0 left-0 w-1.5 h-full ${V?"bg-purple-500":"bg-slate-700"}`}),r.default.createElement("div",{className:"flex items-center gap-5 mb-4 md:mb-0 w-full md:w-auto pl-3"},r.default.createElement("div",{className:`w-14 h-14 rounded-2xl flex items-center justify-center border font-black text-xl flex-shrink-0 ${V?"bg-purple-500/10 border-purple-500/30 text-purple-400":"bg-slate-900 border-slate-800 text-slate-600"}`},l.type==="fixed"?"$":"%"),r.default.createElement("div",{className:"min-w-0"},r.default.createElement("div",{className:"flex items-center gap-2 flex-wrap"},r.default.createElement("h4",{className:"text-white font-black text-lg tracking-widest font-mono"},l.code),!V&&r.default.createElement("span",{className:"text-[9px] px-2 py-0.5 rounded bg-red-500/10 text-red-400 border border-red-500/20 font-black uppercase"},v?"Vencido":"Agotado")),r.default.createElement("p",{className:"text-purple-400 font-bold text-sm mt-0.5"},l.type==="fixed"?`$${l.value} OFF`:`${l.value}% OFF`,l.maxDiscount>0&&l.type==="percentage"&&r.default.createElement("span",{className:"text-slate-500 text-xs ml-1"},"(tope $",l.maxDiscount,")"),l.minPurchase>0&&r.default.createElement("span",{className:"text-slate-600 font-normal text-xs ml-2"},"Min: $",l.minPurchase)),r.default.createElement("div",{className:"flex flex-wrap items-center gap-x-4 gap-y-1 mt-2"},r.default.createElement("span",{className:"text-[10px] text-slate-500 font-bold flex items-center gap-1"},r.default.createElement(Qo,{className:"w-3 h-3"})," ",x,l.usageLimit?`/${l.usageLimit}`:""," usos"),l.expirationDate&&r.default.createElement("span",{className:`text-[10px] font-bold flex items-center gap-1 ${v?"text-red-400":"text-slate-500"}`},r.default.createElement(ol,{className:"w-3 h-3"})," ",new Date(l.expirationDate).toLocaleDateString()),l.targetType==="specific_email"&&l.targetUser&&r.default.createElement("span",{className:"text-[10px] text-blue-400 font-bold flex items-center gap-1"},r.default.createElement(ah,{className:"w-3 h-3"})," ",l.targetUser)))),r.default.createElement("div",{className:"flex items-center gap-2 mt-3 md:mt-0 pl-3 md:pl-0 flex-shrink-0"},l.targetType==="global"||!l.targetType&&!l.targetUser?r.default.createElement("div",{className:"bg-purple-900/20 text-purple-400 px-3 py-1.5 rounded-xl border border-purple-500/20 flex items-center gap-1.5 text-[10px] font-black uppercase tracking-wider"},r.default.createElement(oh,{className:"w-3 h-3"})," Pblico"):r.default.createElement("div",{className:"bg-blue-900/20 text-blue-400 px-3 py-1.5 rounded-xl border border-blue-500/20 flex items-center gap-1.5 text-[10px] font-black uppercase tracking-wider"},r.default.createElement(is,{className:"w-3 h-3"})," Personal"),r.default.createElement("button",{onClick:()=>{navigator.clipboard.writeText(l.code),F("Cdigo copiado al portapapeles","success")},className:"bg-slate-900 hover:bg-slate-800 text-slate-400 hover:text-white p-2.5 rounded-xl transition border border-slate-800",title:"Copiar Cdigo"},r.default.createElement(Tw,{className:"w-4 h-4"})),r.default.createElement("button",{onClick:()=>Vt("Eliminar Cupn",`Eliminar el cupn ${l.code}?`,async()=>await qr(fe(ae,"artifacts",w,"public","data","coupons",l.id))),className:"bg-slate-900 hover:bg-red-900/20 text-slate-500 hover:text-red-400 p-2.5 rounded-xl transition border border-slate-800"},r.default.createElement(mt,{className:"w-4 h-4"}))))}))):r.default.createElement("div",{className:"flex flex-col items-center justify-center py-20 text-center"},r.default.createElement("div",{className:"w-20 h-20 bg-yellow-900/20 rounded-full flex items-center justify-center mx-auto mb-6 border border-yellow-500/30"},r.default.createElement(Tr,{className:"w-10 h-10 text-yellow-500"})),r.default.createElement("h3",{className:"text-2xl font-black text-white mb-4"},"Cupones Bloqueados"),r.default.createElement("p",{className:"text-slate-400 mb-6 max-w-md"},"Los cupones de descuento estn disponibles a partir del ",r.default.createElement("span",{className:"text-purple-400 font-bold"},"Plan Negocio"),". Mejor tu plan para gestionar cupones en tu tienda."),r.default.createElement("button",{onClick:()=>_e(!0),className:"px-8 py-4 bg-purple-600 hover:bg-purple-500 text-white font-bold rounded-xl shadow-lg shadow-purple-600/20 transition flex items-center gap-2"},r.default.createElement(ir,{className:"w-5 h-5"})," Ver Planes Disponibles"))),n==="users"&&(()=>{let l=Qr.filter(m=>{let v=b.toLowerCase(),x=(m.name||"").toLowerCase().includes(v)||(m.email||"").toLowerCase().includes(v)||(m.username||"").toLowerCase().includes(v),E=j==="all"||m.role===j;return x&&E});return r.default.createElement("div",{className:"max-w-6xl mx-auto animate-fade-up pb-20"},r.default.createElement("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-6 mb-10"},r.default.createElement("div",null,r.default.createElement("h1",{className:"text-4xl font-black text-white tracking-tighter flex items-center gap-4"},r.default.createElement("div",{className:"w-12 h-12 rounded-2xl bg-pink-500/20 flex items-center justify-center border border-pink-500/30"},r.default.createElement(Qo,{className:"w-6 h-6 text-pink-400"})),"Gestin de Usuarios"),r.default.createElement("p",{className:"text-slate-500 mt-2 font-medium"},"Control total sobre cuentas, roles y auditora de carritos.")),r.default.createElement("div",{className:"flex flex-col sm:flex-row items-center gap-3 w-full md:w-auto"},r.default.createElement("div",{className:"w-full sm:w-auto flex justify-end"},r.default.createElement(Hr,{guideKey:"users"})),r.default.createElement("div",{className:"relative w-full sm:w-64 group"},r.default.createElement(ul,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-500 group-focus-within:text-orange-400 transition"}),r.default.createElement("input",{className:"input-cyber w-full pl-11 pr-4 py-3 text-sm",placeholder:"Buscar por nombre, email...",value:b,onChange:m=>I(m.target.value)})),r.default.createElement("div",{className:"flex bg-slate-900/50 p-1 rounded-xl border border-white/5"},["all","admin","user"].map(m=>r.default.createElement("button",{key:m,onClick:()=>H(m),className:`px-4 py-2 rounded-lg text-xs font-black uppercase transition-all ${j===m?"bg-white/10 text-white shadow-lg":"text-slate-500 hover:text-slate-300"}`},m==="all"?"Todos":m))))),r.default.createElement("div",{className:"bg-[#050505] border border-white/5 rounded-[2.5rem] overflow-hidden shadow-2xl"},r.default.createElement("div",{className:"overflow-x-auto overflow-y-visible"},r.default.createElement("table",{className:"w-full text-left border-collapse"},r.default.createElement("thead",null,r.default.createElement("tr",{className:"bg-white/[0.02] border-b border-white/5"},r.default.createElement("th",{className:"p-5 text-[10px] font-black text-slate-500 uppercase tracking-[0.2em]"},"Identidad"),r.default.createElement("th",{className:"p-5 text-[10px] font-black text-slate-500 uppercase tracking-[0.2em] text-center"},"Actividad & Stats"),r.default.createElement("th",{className:"p-5 text-[10px] font-black text-slate-500 uppercase tracking-[0.2em]"},"Rango"),r.default.createElement("th",{className:"p-5 text-[10px] font-black text-slate-500 uppercase tracking-[0.2em] text-right"},"Acciones"))),r.default.createElement("tbody",{className:"divide-y divide-white/5"},l.length===0?r.default.createElement("tr",null,r.default.createElement("td",{colSpan:"4",className:"p-20 text-center"},r.default.createElement("div",{className:"flex flex-col items-center gap-4 opacity-20"},r.default.createElement(g0,{className:"w-16 h-16"}),r.default.createElement("p",{className:"font-black uppercase tracking-widest"},"No se encontraron usuarios")))):l.map((m,v)=>r.default.createElement("tr",{key:m.id,style:{animationDelay:`${v*.03}s`},className:"group hover:bg-white/[0.01] transition-all animate-fade-up"},r.default.createElement("td",{className:"p-5"},r.default.createElement("div",{className:"flex items-center gap-5"},r.default.createElement("div",{className:"relative group/avatar"},r.default.createElement("div",{className:"absolute inset-0 bg-gradient-to-br from-pink-500 to-purple-600 rounded-2xl blur-lg opacity-20 group-hover/avatar:opacity-40 transition"}),r.default.createElement("div",{className:"relative w-14 h-14 rounded-2xl bg-[#0a0a0a] border border-white/10 flex items-center justify-center text-xl font-black text-white overflow-hidden shadow-xl"},m.image?r.default.createElement("img",{src:m.image,alt:m.name||"Usuario",className:"w-full h-full object-cover"}):(m.name||"?").charAt(0).toUpperCase())),r.default.createElement("div",null,r.default.createElement("div",{className:"flex items-center gap-2"},r.default.createElement("p",{className:"font-bold text-white text-lg tracking-tight"},m.name),m.isVerified&&r.default.createElement(Me,{className:"w-4 h-4 text-orange-400"})),r.default.createElement("p",{className:"text-xs text-slate-500 font-mono"},m.email),r.default.createElement("div",{className:"flex items-center gap-3 mt-2"},r.default.createElement("span",{className:"text-[9px] font-black text-slate-600 uppercase tracking-widest bg-white/5 px-2 py-0.5 rounded-md"},"ID: ",m.id.slice(-6)),r.default.createElement("span",{className:"text-[9px] font-bold text-slate-500 uppercase"},"INC. ",m.createdAt||m.joinDate?new Date(m.createdAt||m.joinDate).toLocaleDateString():"Sin fecha"))))),r.default.createElement("td",{className:"p-8 relative"},(h?.subscriptionPlan==="entrepreneur"||!h?.subscriptionPlan)&&r.default.createElement("button",{onClick:()=>_e(!0),className:"absolute inset-0 z-10 flex items-center justify-center bg-black/60 backdrop-blur-sm rounded-xl cursor-pointer hover:bg-black/70 transition group"},r.default.createElement("div",{className:"text-center"},r.default.createElement(Tr,{className:"w-6 h-6 text-yellow-500 mx-auto mb-2 group-hover:scale-110 transition"}),r.default.createElement("p",{className:"text-xs font-black text-yellow-400 uppercase tracking-wider"},"Plan Negocio"),r.default.createElement("p",{className:"text-[10px] text-slate-400 group-hover:text-white transition"},"Clic para ver planes"))),r.default.createElement("div",{className:`flex flex-col items-center gap-3 ${h?.subscriptionPlan==="entrepreneur"||!h?.subscriptionPlan?"filter blur-sm pointer-events-none":""}`},r.default.createElement("div",{className:"flex gap-2"},r.default.createElement("div",{className:"bg-slate-900/80 px-4 py-2 rounded-xl border border-white/5 flex items-center gap-3",title:"Favoritos"},r.default.createElement(Yc,{className:`w-4 h-4 ${m.favorites?.length>0?"text-pink-500 fill-pink-500":"text-slate-600"}`}),r.default.createElement("span",{className:"text-sm font-black text-white"},m.favorites?m.favorites.length:0)),r.default.createElement("div",{className:"bg-slate-900/80 px-4 py-2 rounded-xl border border-white/5 flex items-center gap-3",title:"Pedidos Realizados"},r.default.createElement(Bs,{className:"w-4 h-4 text-orange-500"}),r.default.createElement("span",{className:"text-sm font-black text-white"},m.ordersCount||0))),r.default.createElement("button",{onClick:()=>Uo(m),className:"w-full py-2.5 rounded-xl border border-orange-500/20 bg-orange-500/5 text-orange-400 hover:bg-orange-500/20 text-[10px] font-black uppercase tracking-widest transition-all flex items-center justify-center gap-2"},r.default.createElement(i0,{className:"w-3 h-3"})," Ver Carrito en Vivo"))),r.default.createElement("td",{className:"p-8"},r.default.createElement("div",{className:`inline-flex items-center gap-2 px-4 py-1.5 rounded-full text-[10px] font-black uppercase tracking-[0.1em] border shadow-inner ${m.role==="admin"?"bg-purple-500/10 text-purple-400 border-purple-500/30":"bg-slate-900/50 text-slate-500 border-white/5"}`},m.role==="admin"?r.default.createElement(Bn,{className:"w-3 h-3"}):r.default.createElement(is,{className:"w-3 h-3"}),m.role)),r.default.createElement("td",{className:"p-8"},r.default.createElement("div",{className:"flex justify-end gap-3 translate-x-2 opacity-60 group-hover:opacity-100 transition-opacity"},r.default.createElement("button",{onClick:()=>Vs(m),className:"w-11 h-11 flex items-center justify-center bg-[#0a0a0a] border border-white/5 rounded-2xl text-slate-400 hover:text-orange-400 hover:border-orange-500/40 hover:bg-orange-500/5 transition-all shadow-xl group",title:"Gestionar Perfil"},r.default.createElement(qi,{className:"w-5 h-5 group-hover:scale-110 transition-transform"})),r.default.createElement("button",{onClick:()=>{f(""),jc(m)},className:"w-11 h-11 flex items-center justify-center bg-[#0a0a0a] border border-white/5 rounded-2xl text-slate-400 hover:text-pink-400 hover:border-pink-500/40 hover:bg-pink-500/5 transition-all shadow-xl group",title:"Seguridad & Acceso"},r.default.createElement(Tr,{className:"w-5 h-5 group-hover:scale-110 transition-transform"})))))))))))})(),n==="promos"&&r.default.createElement("div",{className:"max-w-6xl mx-auto animate-fade-up pb-20"},r.default.createElement("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-8"},r.default.createElement("h1",{className:"text-3xl font-black text-white flex items-center gap-3"},r.default.createElement(dl,{className:"w-8 h-8 text-purple-500"})," Gestin de Promos"),r.default.createElement(Hr,{guideKey:"promos"})),!((h?.subscriptionPlan==="entrepreneur"||!h?.subscriptionPlan)&&_n.length>=1)||Xr?r.default.createElement("div",{className:"bg-[#0a0a0a] border border-purple-500/30 p-8 rounded-[2rem] mb-10 shadow-2xl"},r.default.createElement("h3",{className:"text-xl font-bold text-white mb-6 flex items-center gap-2"},Xr?r.default.createElement(qi,{className:"w-5 h-5 text-purple-400"}):r.default.createElement(En,{className:"w-5 h-5 text-green-400"}),Xr?"Editar Promo":"Crear Nueva Promo"),r.default.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8"},r.default.createElement("div",{className:"space-y-4"},r.default.createElement("input",{type:"text",className:"input-cyber w-full p-4",placeholder:"Nombre de la Promo",value:Fe.name,onChange:l=>Fn({...Fe,name:l.target.value})}),r.default.createElement("div",{className:"grid grid-cols-2 gap-4"},r.default.createElement("div",{className:"relative"},r.default.createElement("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-500"},"$"),r.default.createElement("input",{type:"number",className:"input-cyber w-full p-4 pl-8",placeholder:"Precio",value:Fe.price,onChange:l=>Fn({...Fe,price:l.target.value})})),r.default.createElement("div",{className:"p-4 bg-slate-900 rounded-xl border border-slate-700 text-slate-400 font-mono text-sm flex items-center"},"Costo: $",Fe.items.reduce((l,m)=>{let v=he.find(x=>x.id===m.productId);return l+Number(v?.purchasePrice??v?.basePrice??0)*m.quantity},0).toLocaleString())),r.default.createElement("div",{className:"mb-4"},r.default.createElement("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-2 block"},"Imagen de la Promo"),r.default.createElement("input",{type:"file",className:"block w-full text-sm text-slate-400 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-purple-900/20 file:text-purple-400 hover:file:bg-purple-900/40 transition",accept:"image/*",onChange:l=>qo(l,Fn)}),Fe.image&&r.default.createElement("div",{className:"mt-2 relative group w-32 aspect-video overflow-hidden rounded-xl border border-slate-700"},r.default.createElement("img",{src:Fe.image,alt:Fe.name||"Promo",className:"w-full h-full object-cover"}),r.default.createElement("button",{onClick:()=>Fn({...Fe,image:""}),className:"absolute top-1 right-1 bg-black/50 p-1 rounded-full text-white hover:bg-red-500 transition opacity-0 group-hover:opacity-100"},r.default.createElement(lt,{className:"w-3 h-3"})))),r.default.createElement("textarea",{className:"input-cyber w-full p-4 h-20 resize-none",placeholder:"Descripcin breve...",value:Fe.description,onChange:l=>Fn({...Fe,description:l.target.value})})),r.default.createElement("div",{className:"bg-slate-900/40 p-6 rounded-2xl border border-slate-800"},r.default.createElement("p",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-4 flex items-center gap-2"},r.default.createElement(sr,{className:"w-4 h-4"})," Productos Incluidos"),r.default.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-[1fr_5rem_auto] gap-2 mb-4"},r.default.createElement("select",{className:"input-cyber w-full p-3 text-sm min-w-0",value:ki,onChange:l=>Ci(l.target.value)},r.default.createElement("option",{value:""},"Agregar producto..."),he.map(l=>r.default.createElement("option",{key:l.id,value:l.id},l.name," ($",Number(l.basePrice),")"))),r.default.createElement("input",{type:"number",className:"input-cyber w-full sm:w-20 p-3 text-sm text-center",value:Ps,min:"1",onChange:l=>Oc(Math.max(1,parseInt(l.target.value)||1))}),r.default.createElement("button",{onClick:()=>{if(!ki)return;let l=Fe.items.find(m=>m.productId===ki);Fn(l?{...Fe,items:Fe.items.map(m=>m.productId===ki?{...m,quantity:m.quantity+Ps}:m)}:{...Fe,items:[...Fe.items,{productId:ki,quantity:Ps}]}),Ci(""),Oc(1)},className:"h-[46px] w-full sm:w-auto px-4 bg-purple-600 hover:bg-purple-500 text-white rounded-xl transition flex items-center justify-center"},r.default.createElement(En,{className:"w-5 h-5"}))),r.default.createElement("div",{className:"space-y-2 max-h-[150px] overflow-y-auto custom-scrollbar"},Fe.items.map((l,m)=>{let v=he.find(x=>x.id===l.productId);return v?r.default.createElement("div",{key:m,className:"flex justify-between items-center bg-slate-900 p-3 rounded-lg border border-slate-700"},r.default.createElement("div",{className:"flex items-center gap-3"},r.default.createElement("div",{className:"w-8 h-8 rounded bg-white p-0.5 overflow-hidden flex-shrink-0 product-preview-frame"},r.default.createElement("img",{src:v.image,alt:v.name||"Producto",className:"w-full h-full object-contain"})),r.default.createElement("div",null,r.default.createElement("p",{className:"text-sm font-bold text-white truncate max-w-[200px] sm:max-w-none"},v.name),r.default.createElement("p",{className:"text-xs text-slate-500"},l.quantity," un. x $",v.basePrice))),r.default.createElement("button",{onClick:()=>Fn({...Fe,items:Fe.items.filter((x,E)=>E!==m)}),className:"text-red-500 hover:text-red-400 p-1"},r.default.createElement(mt,{className:"w-4 h-4"}))):null}),Fe.items.length===0&&r.default.createElement("div",{className:"text-center py-6 text-slate-600 italic text-sm border border-dashed border-slate-800 rounded-lg"},"Agrega productos para armar el combo")))),r.default.createElement("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 sm:justify-end mt-6"},Xr&&r.default.createElement("button",{onClick:()=>{Ye(!1),Lc(null),Fn({name:"",price:"",image:"",description:"",items:[]})},className:"w-full sm:w-auto px-6 py-3 rounded-xl border border-slate-800 bg-slate-900/40 text-slate-300 hover:text-white hover:bg-slate-900 transition font-bold"},"Cancelar"),r.default.createElement("button",{onClick:async()=>{if(!Fe.name||!Fe.price||Fe.items.length===0)return F("Completa nombre, precio y agrega productos.","warning");Wt(!0);try{Xr&&Gd?(await Nt(fe(ae,"artifacts",w,"public","data","promos",Gd),Fe),F("Promo actualizada","success")):(await Gr(Ke(ae,"artifacts",w,"public","data","promos"),{...Fe,createdAt:new Date().toISOString()}),F("Promo creada exitosamente","success")),Fn({name:"",price:"",image:"",description:"",items:[]}),Ye(!1),Lc(null)}catch(l){console.error(l),F("Error al guardar promo","error")}finally{Wt(!1)}},className:"w-full sm:w-auto px-8 py-3 bg-purple-600 hover:bg-purple-500 text-white font-bold rounded-xl shadow-lg transition flex items-center justify-center"},Xr?"Guardar Cambios":"Crear Promo"))):r.default.createElement("div",{className:"bg-[#0a0a0a] border border-slate-800 p-8 rounded-[2rem] mb-10 shadow-xl flex flex-col items-center justify-center text-center animate-fade-up"},r.default.createElement("div",{className:"w-20 h-20 bg-purple-500/20 rounded-full flex items-center justify-center mb-6 border border-purple-500/30"},r.default.createElement(Tr,{className:"w-10 h-10 text-purple-400"})),r.default.createElement("h3",{className:"text-2xl font-black text-white mb-2"},"Lmite de Promos Alcanzado"),r.default.createElement("p",{className:"text-slate-400 max-w-md mb-8"},"Tu plan actual te permite tener hasta ",r.default.createElement("strong",{className:"text-white"},"1 promo activa"),". Para crear ms promociones ilimitadas, actualiza tu plan."),r.default.createElement("button",{onClick:()=>_e(!0),className:"px-8 py-3 bg-purple-600 hover:bg-purple-500 text-white font-bold rounded-xl shadow-lg shadow-purple-600/20 transition flex items-center gap-2"},r.default.createElement(ir,{className:"w-5 h-5"})," Mejorar mi Plan")),r.default.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},_n.map(l=>{let m=(l.items||[]).reduce((P,U)=>{let O=he.find(G=>G.id===U.productId);return P+(Number(O?.purchasePrice)||0)*U.quantity},0),v=Number(l.price)||0,x=v-m,E=v>0?(x/v*100).toFixed(1):0,V=x>0;return r.default.createElement("div",{key:l.id,className:"bg-[#0a0a0a] border border-slate-800 rounded-2xl overflow-hidden hover:border-purple-500/30 transition group flex flex-col"},r.default.createElement("div",{className:"aspect-[16/10] sm:aspect-video relative overflow-hidden"},r.default.createElement("img",{src:l.image||"https://via.placeholder.com/400",alt:l.name||"Promo",className:"w-full h-full object-cover transition duration-500 group-hover:scale-105"}),r.default.createElement("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-black/20 to-transparent"}),r.default.createElement("div",{className:"absolute bottom-3 left-3 right-3 sm:bottom-4 sm:left-4 sm:right-4 bg-black/55 backdrop-blur-sm rounded-2xl p-3 sm:p-4 border border-white/10"},r.default.createElement("h4",{className:"text-lg sm:text-xl font-black text-white mb-1 leading-tight line-clamp-2"},l.name),r.default.createElement("div",{className:"flex flex-wrap items-center gap-2.5"},r.default.createElement("p",{className:"text-2xl sm:text-3xl leading-none text-purple-400 font-black"},"$",v.toLocaleString()),m>0&&r.default.createElement("div",{className:`px-2 py-1 rounded text-xs font-bold border whitespace-nowrap ${V?"bg-green-900/30 border-green-500/30 text-green-400":"bg-red-900/30 border-red-500/30 text-red-400"}`},E,"% MG")))),r.default.createElement("div",{className:"p-4 sm:p-6 flex-1 flex flex-col"},r.default.createElement("div",{className:"mb-6 flex-1"},r.default.createElement("p",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-3"},"Incluye:"),r.default.createElement("div",{className:"flex flex-col gap-2"},(l.items||[]).map((P,U)=>{let O=he.find(J=>J.id===P.productId),G=Number(O?.purchasePrice??O?.basePrice??0);return r.default.createElement("div",{key:U,className:"flex items-center gap-3 p-2.5 rounded-lg bg-slate-900/50 border border-slate-800/50"},r.default.createElement("div",{className:"w-11 h-11 bg-white rounded-lg p-0.5 flex-shrink-0 overflow-hidden"},r.default.createElement("img",{src:O?.image,alt:O?.name||"Producto",className:"w-full h-full object-contain"})),r.default.createElement("div",{className:"flex-1 min-w-0"},r.default.createElement("p",{className:"text-sm sm:text-[15px] font-bold text-white truncate"},O?.name||"Producto Eliminado"),r.default.createElement("p",{className:"text-xs text-slate-500 truncate"},P.quantity," x $",G.toLocaleString()," (Costo)")))}))),r.default.createElement("div",{className:"mb-6 p-4 bg-slate-900/40 rounded-xl border border-dashed border-slate-800"},r.default.createElement("div",{className:"flex justify-between text-sm mb-1"},r.default.createElement("span",{className:"text-slate-500"},"Costo Real:"),r.default.createElement("span",{className:"text-slate-300 font-mono"},"$",m.toLocaleString())),r.default.createElement("div",{className:"flex justify-between text-sm mb-1"},r.default.createElement("span",{className:"text-slate-500"},"Precio Venta:"),r.default.createElement("span",{className:"text-slate-300 font-mono"},"$",v.toLocaleString())),r.default.createElement("div",{className:"border-t border-slate-800 my-2"}),r.default.createElement("div",{className:"flex justify-between text-sm font-bold"},r.default.createElement("span",{className:V?"text-green-500":"text-red-500"},"Ganancia Neta:"),r.default.createElement("span",{className:`font-mono ${V?"text-green-400":"text-red-400"}`},V?"+":"","$",x.toLocaleString()))),r.default.createElement("div",{className:"flex gap-3 mt-auto"},r.default.createElement("button",{onClick:()=>{Fn({name:l.name,price:l.price,image:l.image,description:l.description||"",items:l.items||[]}),Lc(l.id),Ye(!0),window.scrollTo({top:0,behavior:"smooth"})},className:"flex-1 py-3 bg-slate-900 hover:bg-slate-800 text-white rounded-xl font-bold transition border border-slate-700 flex items-center justify-center gap-2 group-hover:border-purple-500/30"},r.default.createElement(qi,{className:"w-4 h-4"})," Editar"),r.default.createElement("button",{onClick:()=>Vt("Eliminar Promo","Ests seguro? Esto no se puede deshacer.",async()=>{await qr(fe(ae,"artifacts",w,"public","data","promos",l.id)),F("Promo eliminada","info")}),className:"px-4 py-3 bg-red-900/20 hover:bg-red-900/40 text-red-500 rounded-xl transition border border-red-500/20"},r.default.createElement(mt,{className:"w-4 h-4"})))))}))),n==="orders"&&r.default.createElement("div",{className:"max-w-6xl mx-auto animate-fade-up pb-20"},r.default.createElement("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-8"},r.default.createElement("h1",{className:"text-3xl font-black text-white"},"Gestin de Pedidos"),r.default.createElement("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3"},r.default.createElement(Hr,{guideKey:"orders"}),r.default.createElement("button",{onClick:()=>$k(),className:`px-5 py-3 rounded-xl font-black transition border flex items-center gap-3 ${Nn?"bg-slate-900 text-slate-400 border-slate-800 hover:bg-slate-800":"bg-green-900/10 text-green-400 border-green-500/20 hover:bg-green-600 hover:text-white"}`},r.default.createElement(Yf,{className:`w-5 h-5 ${Nn?"opacity-40":""}`}),"Notificacin pedidos",r.default.createElement("span",{className:`text-[10px] px-2 py-1 rounded-full border font-black uppercase tracking-widest ${Nn?"bg-slate-900/60 text-slate-400 border-slate-700":"bg-green-900/20 text-green-400 border-green-500/30"}`},Nn?"Muteada":"Activa")))),gt.length===0?r.default.createElement("div",{className:"text-center py-20 border border-dashed border-slate-800 rounded-[3rem] bg-slate-900/20"},r.default.createElement(Bs,{className:"w-20 h-20 mx-auto mb-4 text-slate-700"}),r.default.createElement("p",{className:"text-xl text-slate-500 font-bold"},"No hay pedidos registrados an.")):r.default.createElement("div",{className:"space-y-4"},gt.map((l,m)=>r.default.createElement("div",{key:l.id,style:{animationDelay:`${m*.05}s`},className:"bg-[#0a0a0a] border border-slate-800 p-6 rounded-2xl flex flex-col lg:flex-row justify-between items-center gap-6 hover:border-slate-700 transition group animate-fade-up"},r.default.createElement("div",{className:"flex-1 w-full lg:w-auto"},r.default.createElement("div",{className:"flex items-center gap-4 mb-2"},r.default.createElement("span",{className:"bg-slate-900 text-orange-400 px-3 py-1 rounded-lg text-sm font-black tracking-widest border border-slate-800"},"#",l.orderId),r.default.createElement("span",{className:`text-[10px] px-2 py-1 rounded-full uppercase font-bold border ${l.status==="Realizado"?"bg-green-900/20 text-green-400 border-green-500/30":"bg-yellow-900/20 text-yellow-400 border-yellow-500/30"}`},l.status)),r.default.createElement("h4",{className:"text-white font-bold text-lg mb-1"},l.customer.name),r.default.createElement("p",{className:"text-slate-500 text-xs flex items-center gap-2"},r.default.createElement(ol,{className:"w-3 h-3"})," ",new Date(l.date).toLocaleString(),r.default.createElement("span",{className:"w-1 h-1 bg-slate-700 rounded-full"}),r.default.createElement("span",{className:"text-slate-400 font-mono"},"$",l.total.toLocaleString()))),r.default.createElement("div",{className:"flex -space-x-2"},l.items.slice(0,4).map((v,x)=>r.default.createElement("div",{key:x,className:"w-10 h-10 rounded-full border-2 border-[#0a0a0a] bg-slate-800 flex items-center justify-center overflow-hidden",title:v.title},v.image?r.default.createElement("img",{src:v.image,alt:v.title||"Producto",className:"w-full h-full object-cover"}):r.default.createElement(sr,{className:"w-4 h-4 text-slate-500"}))),l.items.length>4&&r.default.createElement("div",{className:"w-10 h-10 rounded-full border-2 border-[#0a0a0a] bg-slate-800 flex items-center justify-center text-xs text-white font-bold"},"+",l.items.length-4)),r.default.createElement("div",{className:"flex items-center gap-3 w-full lg:w-auto justify-end"},r.default.createElement("button",{onClick:()=>Mc(l),className:"p-3 bg-slate-900 hover:bg-slate-800 text-slate-300 hover:text-white rounded-xl transition border border-slate-800",title:"Ver Detalles"},r.default.createElement(rh,{className:"w-5 h-5"})),l.status!=="Realizado"&&r.default.createElement("button",{onClick:()=>a2(l.id),className:"p-3 bg-green-900/10 hover:bg-green-600 text-green-500 hover:text-white rounded-xl transition border border-green-500/20",title:"Marcar como Finalizado"},r.default.createElement(Me,{className:"w-5 h-5"})),r.default.createElement("button",{onClick:()=>l2(l.id),className:"p-3 bg-red-900/10 hover:bg-red-600 text-red-500 hover:text-white rounded-xl transition border border-red-500/20",title:"Eliminar Pedido"},r.default.createElement(mt,{className:"w-5 h-5"}))))),r.default.createElement("div",{className:"flex items-center justify-center gap-4 mt-10 pb-10"},r.default.createElement("button",{onClick:jk,disabled:Ls.length===0,className:`flex items-center gap-2 px-6 py-3 rounded-xl font-bold transition ${Ls.length===0?"bg-slate-900 text-slate-700 cursor-not-allowed":"bg-slate-800 text-white hover:bg-slate-700"}`},r.default.createElement(th,{className:"w-5 h-5"})," Anterior"),r.default.createElement("span",{className:"text-slate-500 font-mono text-sm"},"Pgina ",Ls.length+1),r.default.createElement("button",{onClick:Uk,disabled:!Fo||gt.length<Rr,className:`flex items-center gap-2 px-6 py-3 rounded-xl font-bold transition ${!Fo||gt.length<Rr?"bg-slate-900 text-slate-700 cursor-not-allowed":"bg-orange-600 text-white hover:bg-orange-500"}`},"Siguiente ",r.default.createElement(nh,{className:"w-5 h-5"}))))),n==="products"&&r.default.createElement("div",{className:"max-w-7xl mx-auto animate-fade-in pb-20"},r.default.createElement("div",{className:"flex justify-between items-center mb-8"},r.default.createElement("div",null,r.default.createElement("h1",{className:"text-3xl font-black text-white"},"Inventario"),(()=>{let l=h?.subscriptionPlan||"entrepreneur",m=l==="premium"?"":l==="business"?50:30,v=he.length,x=l!=="premium"&&v>=m*.8;return r.default.createElement("p",{className:`text-sm font-bold mt-1 ${x?"text-yellow-400":"text-slate-500"}`},v," / ",m," productos",x&&l!=="premium"&&r.default.createElement("span",{className:"text-yellow-500 ml-2"}," Cerca del lmite"))})()),r.default.createElement("div",{className:"flex flex-wrap gap-2"},r.default.createElement(Hr,{guideKey:"products"}),r.default.createElement("button",{onClick:()=>Bc(!0),className:"bg-green-900/30 px-4 py-3 rounded-xl font-bold text-green-400 flex gap-2 shadow-lg hover:bg-green-900/50 transition transform hover:scale-105 active:scale-95 border border-green-500/30"},r.default.createElement(Ko,{className:"w-5 h-5"})," Aumento de Precios"),r.default.createElement("button",{onClick:()=>Si(!0),className:"bg-slate-800 px-6 py-3 rounded-xl font-bold text-white flex gap-2 shadow-lg hover:bg-slate-700 transition transform hover:scale-105 active:scale-95 border border-slate-700"},r.default.createElement(ll,{className:"w-5 h-5"})," Categoras"),r.default.createElement("button",{onClick:()=>{jt({}),Za(null),Ra(!0)},className:"bg-orange-600 px-6 py-3 rounded-xl font-bold text-white flex gap-2 shadow-lg hover:bg-orange-500 transition transform hover:scale-105 active:scale-95"},r.default.createElement(En,{className:"w-5 h-5"})," Agregar Producto"))),r.default.createElement("div",{className:"relative mb-6"},r.default.createElement(ul,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-500"}),r.default.createElement("input",{type:"text",placeholder:"Buscar producto por nombre...",value:Kd,onChange:l=>iw(l.target.value),className:"w-full pl-12 pr-4 py-3 bg-slate-900/50 border border-slate-800 rounded-xl text-white placeholder-slate-600 focus:border-orange-500/50 focus:outline-none transition"}),Kd&&r.default.createElement("button",{onClick:()=>iw(""),className:"absolute right-4 top-1/2 -translate-y-1/2 text-slate-500 hover:text-white transition"},r.default.createElement(lt,{className:"w-4 h-4"}))),(()=>{let l=he.filter(x=>x.isActive===!1&&x.deactivatedByPlan),m=he.filter(x=>x.isActive===!1&&!x.deactivatedByPlan),v=he.filter(x=>x.isActive===!1);return v.length>0?r.default.createElement("div",{className:"bg-yellow-900/20 border border-yellow-500/30 p-4 rounded-2xl mb-6 flex flex-col md:flex-row items-start md:items-center justify-between gap-4"},r.default.createElement("div",{className:"flex items-start gap-3"},r.default.createElement(Gi,{className:"w-6 h-6 text-yellow-400 flex-shrink-0 mt-0.5"}),r.default.createElement("div",null,r.default.createElement("p",{className:"font-bold text-yellow-400"},v.length," producto(s) desactivado(s)"),r.default.createElement("p",{className:"text-sm text-yellow-200/70"},l.length>0&&`${l.length} por lmite de plan. `,m.length>0&&`${m.length} desactivado(s) manualmente. `,"Los productos desactivados no se muestran en la tienda."))),r.default.createElement("button",{onClick:()=>F("Usa el botn de ojo () en cada producto para activar/desactivar","info"),className:"px-4 py-2 bg-yellow-500/20 text-yellow-400 rounded-xl font-bold text-sm hover:bg-yellow-500/30 transition border border-yellow-500/30 whitespace-nowrap"},"Ver desactivados")):null})(),Ti&&r.default.createElement("div",{className:"bg-[#0a0a0a] border border-orange-500/30 p-6 sm:p-8 rounded-[2rem] mb-10 shadow-2xl relative"},r.default.createElement("h3",{className:"text-xl font-bold text-white mb-6 flex items-center gap-3"},r.default.createElement(sr,{className:"w-5 h-5 text-orange-400"}),Mo?"Editar Producto":"Nuevo Producto"),r.default.createElement("div",{className:"space-y-6"},r.default.createElement("input",{className:"input-cyber w-full p-4 text-lg",placeholder:"Nombre del Producto",value:ge.name||"",onChange:l=>jt({...ge,name:l.target.value})}),r.default.createElement("div",{className:"grid grid-cols-3 gap-3"},r.default.createElement("div",null,r.default.createElement("label",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-wider mb-1 block"},"Precio Venta"),r.default.createElement("input",{className:"input-cyber w-full p-3",type:"number",placeholder:"$0",value:ge.basePrice||"",onChange:l=>jt({...ge,basePrice:l.target.value})})),r.default.createElement("div",null,r.default.createElement("label",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-wider mb-1 block"},"Costo"),r.default.createElement("input",{className:"input-cyber w-full p-3",type:"number",placeholder:"$0",value:ge.purchasePrice||"",onChange:l=>jt({...ge,purchasePrice:l.target.value})})),r.default.createElement("div",null,r.default.createElement("label",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-wider mb-1 block"},"Stock"),r.default.createElement("input",{className:"input-cyber w-full p-3",type:"number",placeholder:"0",value:ge.stock||"",onChange:l=>jt({...ge,stock:l.target.value})}))),r.default.createElement("div",null,r.default.createElement("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-widest block mb-2"},"Categoras"),r.default.createElement("div",{className:"bg-slate-900/50 border border-slate-700 rounded-xl p-4 max-h-48 overflow-y-auto custom-scrollbar"},(h?.categories||[]).length===0?r.default.createElement("p",{className:"text-center text-slate-600 py-2 text-sm"},"No hay categoras. Agregalas abajo."):(h?.categories||[]).map(l=>{let m=Array.isArray(ge.categories)?ge.categories.includes(l):ge.category===l;return r.default.createElement("label",{key:l,className:`flex items-center gap-3 p-2.5 rounded-lg cursor-pointer transition-all group hover:bg-slate-800 mb-1 last:mb-0 ${m?"bg-orange-900/20 border border-orange-500/30":"border border-transparent"}`},r.default.createElement("input",{type:"checkbox",checked:m,onChange:v=>{if(v.target.checked){let x=Array.isArray(ge.categories)?ge.categories:ge.category?[ge.category]:[];jt({...ge,categories:[...x,l],category:void 0})}else{let x=Array.isArray(ge.categories)?ge.categories.filter(E=>E!==l):[];jt({...ge,categories:x})}},className:"w-4 h-4 text-orange-600 bg-slate-900 border-slate-600 rounded focus:ring-orange-500 focus:ring-2"}),r.default.createElement("span",{className:`flex-1 text-sm font-medium transition-colors ${m?"text-orange-400":"text-slate-300 group-hover:text-white"}`},l),m&&r.default.createElement(Me,{className:"w-3.5 h-3.5 text-orange-500"}))})),ge.categories&&ge.categories.length>0&&r.default.createElement("div",{className:"flex flex-wrap gap-2 mt-2"},ge.categories.map(l=>r.default.createElement("span",{key:l,className:"bg-orange-500/20 text-orange-400 text-xs font-bold px-2.5 py-1 rounded-full border border-orange-500/30 flex items-center gap-1.5"},l,r.default.createElement("button",{type:"button",onClick:()=>jt({...ge,categories:ge.categories.filter(m=>m!==l)}),className:"hover:text-orange-300 transition"},r.default.createElement(lt,{className:"w-3 h-3"}))))),r.default.createElement("button",{type:"button",onClick:()=>Si(!0),className:"w-full mt-2 py-2 bg-orange-900/20 hover:bg-orange-900/40 text-orange-400 rounded-xl font-bold transition flex items-center justify-center gap-2 text-sm border border-orange-800"},r.default.createElement(ll,{className:"w-4 h-4"})," Nueva Categora")),r.default.createElement("div",null,r.default.createElement("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-2 block flex items-center gap-2"},r.default.createElement(js,{className:"w-4 h-4"})," Imgenes del Producto",r.default.createElement("span",{className:"text-[10px] text-slate-600 font-normal ml-auto"},(ge.images||[]).length,"/",Wc)),r.default.createElement("div",{className:"grid grid-cols-3 sm:grid-cols-5 gap-3 mb-3"},(ge.images||[]).map((l,m)=>r.default.createElement("div",{key:m,className:"relative group aspect-square bg-white rounded-xl overflow-hidden border-2 border-slate-700 hover:border-orange-500/50 transition-all"},r.default.createElement("img",{src:l,alt:`Imagen ${m+1}`,className:"w-full h-full object-contain p-1"}),m===0&&r.default.createElement("div",{className:"absolute top-1 left-1 bg-orange-500 text-white text-[8px] font-black px-1.5 py-0.5 rounded uppercase tracking-wider"},"Principal"),r.default.createElement("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/40 transition-all flex items-center justify-center gap-1 opacity-0 group-hover:opacity-100"},m>0&&r.default.createElement("button",{type:"button",onClick:()=>bw(m,m-1),className:"w-7 h-7 bg-white/90 text-slate-700 rounded-lg flex items-center justify-center hover:bg-white transition",title:"Mover izquierda"},r.default.createElement(th,{className:"w-4 h-4"})),m<(ge.images||[]).length-1&&r.default.createElement("button",{type:"button",onClick:()=>bw(m,m+1),className:"w-7 h-7 bg-white/90 text-slate-700 rounded-lg flex items-center justify-center hover:bg-white transition",title:"Mover derecha"},r.default.createElement(nh,{className:"w-4 h-4"})),r.default.createElement("button",{type:"button",onClick:()=>n2(m),className:"w-7 h-7 bg-red-500/90 text-white rounded-lg flex items-center justify-center hover:bg-red-600 transition",title:"Eliminar"},r.default.createElement(lt,{className:"w-4 h-4"}))))),(ge.images||[]).length<Wc&&r.default.createElement("label",{className:"aspect-square border-2 border-dashed border-slate-700 hover:border-orange-500/50 rounded-xl flex flex-col items-center justify-center cursor-pointer transition-all hover:bg-orange-500/5 group"},r.default.createElement(Dw,{className:"w-6 h-6 text-slate-600 group-hover:text-orange-400 transition mb-1"}),r.default.createElement("span",{className:"text-[10px] text-slate-600 group-hover:text-orange-400 font-bold transition"},"Agregar"),r.default.createElement("input",{type:"file",accept:"image/*",multiple:!0,onChange:t2,className:"hidden"}))),r.default.createElement("p",{className:"text-[10px] text-slate-600"},"La primera imagen ser la principal. Pods reordenar pasando el mouse.")),r.default.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4"},r.default.createElement("div",null,r.default.createElement("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-1 block"},"Descuento (%)"),r.default.createElement("input",{type:"number",min:"0",max:"100",className:"input-cyber w-full p-3",placeholder:"0",value:ge.discount||0,onChange:l=>jt({...ge,discount:Jd(l.target.value)})})),r.default.createElement("div",{className:"flex items-end"},Zd>0?r.default.createElement("div",{className:`w-full rounded-xl border p-3 ${il>0?"border-emerald-500/30 bg-emerald-500/10":"border-slate-700 bg-slate-900/40"}`},r.default.createElement("p",{className:"text-[11px] text-slate-400 font-semibold"},"Original: ",r.default.createElement("span",{className:"text-slate-300"},"$",Zd.toLocaleString())),r.default.createElement("div",{className:"mt-1 flex items-center gap-2"},r.default.createElement("span",{className:`text-sm font-black ${il>0?"text-emerald-300":"text-slate-200"}`},"Final: $",Qk.toLocaleString()),il>0&&r.default.createElement("span",{className:"inline-flex items-center gap-1 rounded-full bg-orange-500/20 px-2 py-0.5 text-[10px] font-bold text-orange-300 border border-orange-500/30"},r.default.createElement(Jc,{className:"w-3 h-3"})," -",il,"%"))):r.default.createElement("p",{className:"text-[11px] text-slate-500 pb-3"},"Carg el precio para ver el total con descuento."))),r.default.createElement("textarea",{className:"input-cyber w-full h-28 p-4 resize-none",placeholder:"Descripcin del producto (opcional)...",value:ge.description||"",onChange:l=>jt({...ge,description:l.target.value})}),r.default.createElement("div",{className:"flex gap-4 justify-end pt-2"},r.default.createElement("button",{onClick:()=>Ra(!1),className:"px-6 py-3 text-slate-400 font-bold hover:text-white transition"},"Cancelar"),r.default.createElement("button",{onClick:Zk,className:"px-8 py-3 bg-orange-600 rounded-xl text-white font-bold shadow-lg hover:bg-orange-500 transition flex items-center gap-2"},r.default.createElement(rs,{className:"w-4 h-4"})," Guardar Producto")))),r.default.createElement("div",{className:"grid gap-3"},he.filter(l=>!Kd||(l.name||"").toLowerCase().includes(Kd.toLowerCase())).map((l,m)=>r.default.createElement("div",{key:l.id,style:{animationDelay:`${m*.05}s`},className:`bg-[#0a0a0a] border p-3 sm:p-4 rounded-xl flex flex-col sm:flex-row justify-between items-stretch sm:items-center gap-3 sm:gap-4 group hover:border-orange-900/50 transition animate-fade-up ${l.isActive===!1?"border-yellow-500/30 opacity-60":"border-slate-800"}`},r.default.createElement("div",{className:"flex items-start sm:items-center gap-3 sm:gap-6 w-full min-w-0"},r.default.createElement("div",{className:`w-14 h-14 sm:w-16 sm:h-16 bg-white rounded-lg p-2 flex-shrink-0 relative overflow-hidden product-preview-frame ${l.isActive===!1?"grayscale":""}`},r.default.createElement("img",{src:l.image,alt:l.name||"Producto",className:"w-full h-full object-contain"}),l.isFeatured&&r.default.createElement("div",{className:"absolute -top-1 -right-1 w-5 h-5 bg-yellow-500 rounded-full flex items-center justify-center shadow-lg"},r.default.createElement(Ho,{className:"w-3 h-3 text-black fill-current"}))),r.default.createElement("div",{className:"flex-1 min-w-0"},r.default.createElement("p",{className:"font-bold text-white text-base sm:text-lg leading-tight break-words"},l.name),r.default.createElement("div",{className:"mt-1 flex flex-wrap items-center gap-1.5"},l.isFeatured&&r.default.createElement("span",{className:"text-[10px] bg-yellow-500/20 text-yellow-400 px-2 py-0.5 rounded-full font-bold"},"DESTACADO"),l.isActive===!1&&r.default.createElement("span",{className:"text-[10px] bg-red-500/20 text-red-400 px-2 py-0.5 rounded-full font-bold"},"OCULTO",l.deactivatedByPlan?" (LMITE)":"")),r.default.createElement("div",{className:"mt-2 flex flex-wrap items-center gap-1.5 text-[11px] sm:text-xs font-mono"},r.default.createElement("span",{className:"inline-flex items-center gap-1 rounded-md border border-slate-700 bg-slate-900/70 px-2 py-0.5 text-slate-400"},"Stock:",r.default.createElement("span",{className:(l.stock||0)<(h?.lowStockThreshold||5)?"text-red-400 font-bold animate-pulse":"text-slate-300"},l.stock||0)),r.default.createElement("span",{className:"inline-flex items-center rounded-md border border-orange-500/20 bg-orange-900/10 px-2 py-0.5 font-bold text-orange-400",title:"Precio Venta"},"$",Number(l.basePrice).toLocaleString()),r.default.createElement("span",{className:"inline-flex items-center rounded-md border border-slate-700 bg-slate-900/70 px-2 py-0.5 text-slate-500",title:"Costo Adquisicin"},"Costo: $",Number(l.purchasePrice||0).toLocaleString()),Number(l.basePrice)>0&&r.default.createElement("span",{className:`inline-flex items-center rounded-md border px-2 py-0.5 text-[10px] font-black ${(Number(l.basePrice)-Number(l.purchasePrice||0))/Number(l.basePrice)<.3?"bg-red-900/20 text-red-400 border-red-500/20":"bg-green-900/20 text-green-400 border-green-500/20"}`},((Number(l.basePrice)-Number(l.purchasePrice||0))/Number(l.basePrice)*100).toFixed(0),"% MG"),r.default.createElement("span",{className:"inline-flex items-center rounded-md border border-green-500/20 bg-green-900/10 px-2 py-0.5 text-green-400"},"Ventas: ",Ae?.salesCount?.[l.id]||0)))),r.default.createElement("div",{className:"flex flex-wrap sm:flex-nowrap gap-2 mt-1 sm:mt-0 w-full sm:w-auto justify-end items-center"},r.default.createElement("button",{onClick:async()=>{try{await Nt(fe(ae,"artifacts",w,"public","data","products",l.id),{isFeatured:!l.isFeatured}),F(l.isFeatured?"Producto quitado de destacados":"Producto marcado como destacado","success")}catch(v){console.error(v),F("Error al actualizar","error")}},className:`p-3 rounded-xl transition border transform hover:scale-105 active:scale-95 ${l.isFeatured?"bg-yellow-500/20 text-yellow-400 border-yellow-500/30 hover:bg-yellow-500/30":"bg-slate-900 text-slate-500 border-slate-800 hover:text-yellow-400 hover:border-yellow-500/30"}`,title:l.isFeatured?"Quitar de Destacados":"Marcar como Destacado"},r.default.createElement(Ho,{className:`w-5 h-5 ${l.isFeatured?"fill-current":""}`})),r.default.createElement("button",{onClick:()=>l.isActive===!1?qd(l.id):Af(l.id),className:`p-3 rounded-xl transition border transform hover:scale-105 active:scale-95 ${l.isActive===!1?"bg-red-500/20 text-red-400 border-red-500/30 hover:bg-green-500/20 hover:text-green-400 hover:border-green-500/30":"bg-slate-900 text-slate-500 border-slate-800 hover:text-red-400 hover:border-red-500/30"}`,title:l.isActive===!1?"Activar Producto (hacerlo visible en tienda)":"Desactivar Producto (ocultarlo de la tienda)"},l.isActive===!1?r.default.createElement(rh,{className:"w-5 h-5"}):r.default.createElement(kw,{className:"w-5 h-5"})),r.default.createElement("button",{onClick:()=>Ak(l),className:"p-3 bg-slate-900 rounded-xl text-green-400 hover:bg-green-900/20 transition border border-slate-800 transform hover:scale-105 active:scale-95",title:"Venta Manual (Descontar 1)"},r.default.createElement(al,{className:"w-5 h-5"})),r.default.createElement("button",{onClick:()=>{let v={...l,images:Array.isArray(l.images)&&l.images.length>0?l.images:l.image?[l.image]:[]};jt(v),Za(l.id),Ra(!0)},className:"p-3 bg-slate-900 rounded-xl text-orange-400 hover:bg-orange-900/20 transition border border-slate-800 transform hover:scale-105 active:scale-95"},r.default.createElement(qi,{className:"w-5 h-5"})),r.default.createElement("button",{onClick:()=>o2(l),className:"p-3 bg-slate-900 rounded-xl text-red-400 hover:bg-red-900/20 transition border border-slate-800 transform hover:scale-105 active:scale-95"},r.default.createElement(mt,{className:"w-5 h-5"})))))),sl.filter(l=>l.active).length>0&&r.default.createElement("div",{className:"mt-8 space-y-3"},r.default.createElement("h3",{className:"text-sm font-black text-slate-500 uppercase tracking-widest flex items-center gap-2"},r.default.createElement(Ko,{className:"w-4 h-4"})," Reglas de Aumento Activas"),sl.filter(l=>l.active).map(l=>r.default.createElement("div",{key:l.id,className:"bg-green-900/10 border border-green-500/20 p-4 rounded-xl flex flex-col md:flex-row md:items-center justify-between gap-3"},r.default.createElement("div",null,r.default.createElement("p",{className:"text-sm text-green-400 font-bold"},"+",l.increaseAmount,l.increaseType==="percent"?"%":"$"," cada ",l.intervalValue," ",l.intervalUnit==="months"?l.intervalValue===1?"mes":"meses":l.intervalValue===1?"da":"das"),r.default.createElement("p",{className:"text-xs text-slate-500 mt-1"},(l.productIds||[]).length," producto(s)  Creada: ",new Date(l.createdAt).toLocaleDateString("es-AR"),l.lastApplied&&`  ltimo aumento: ${new Date(l.lastApplied).toLocaleDateString("es-AR")}`)),r.default.createElement("div",{className:"flex gap-2"},r.default.createElement("button",{onClick:async()=>{try{await Nt(fe(ae,"artifacts",w,"public","data","priceRules",l.id),{active:!1}),F("Regla desactivada","success")}catch{F("Error al desactivar","error")}},className:"px-4 py-2 bg-red-900/20 text-red-400 rounded-lg font-bold text-xs hover:bg-red-900/40 transition border border-red-500/30"},"Desactivar"),r.default.createElement("button",{onClick:async()=>{try{await qr(fe(ae,"artifacts",w,"public","data","priceRules",l.id)),F("Regla eliminada","success")}catch{F("Error al eliminar","error")}},className:"px-4 py-2 bg-slate-900 text-slate-400 rounded-lg font-bold text-xs hover:text-red-400 transition border border-slate-800"},r.default.createElement(mt,{className:"w-4 h-4"})))))),Ck&&(()=>{let l=sl.filter(x=>x.active).flatMap(x=>x.productIds||[]),m=he.filter(x=>!l.includes(x.id));return r.default.createElement(()=>{let[x,E]=r.default.useState(""),[V,P]=r.default.useState([]),[U,O]=r.default.useState("percent"),[G,J]=r.default.useState(""),[te,Z]=r.default.useState("months"),[ee,le]=r.default.useState("1"),[xe,Ne]=r.default.useState(!1),Pe=m.filter(Ce=>!x||(Ce.name||"").toLowerCase().includes(x.toLowerCase())),Le=Ce=>{P(Fi=>Fi.includes(Ce)?Fi.filter(Ui=>Ui!==Ce):[...Fi,Ce])},$t=()=>{P(Pe.map(Ce=>Ce.id))},zn=()=>{P([])},nr=async()=>{if(V.length===0)return F("Seleccion al menos un producto","warning");if(!G||Number(G)<=0)return F("Ingres un valor de aumento vlido","warning");if(!ee||Number(ee)<=0)return F("Ingres un intervalo vlido","warning");Ne(!0);try{await Gr(Ke(ae,"artifacts",w,"public","data","priceRules"),{productIds:V,increaseType:U,increaseAmount:Number(G),intervalUnit:te,intervalValue:Number(ee),active:!0,createdAt:new Date().toISOString(),lastApplied:null}),F(`Regla de aumento creada para ${V.length} producto(s)`,"success"),Bc(!1)}catch(Ce){console.error(Ce),F("Error al crear la regla","error")}Ne(!1)};return r.default.createElement("div",{className:"fixed inset-0 z-[160] flex items-center justify-center bg-black/90 backdrop-blur-md p-4 animate-fade-up",onClick:()=>Bc(!1)},r.default.createElement("div",{className:"bg-[#0a0a0a] border border-slate-800 rounded-[2rem] w-full max-w-2xl max-h-[90vh] flex flex-col shadow-2xl relative overflow-hidden",onClick:Ce=>Ce.stopPropagation()},r.default.createElement("div",{className:"p-6 border-b border-slate-800 flex justify-between items-center"},r.default.createElement("div",null,r.default.createElement("h3",{className:"text-xl font-black text-white flex items-center gap-3"},r.default.createElement(Ko,{className:"w-6 h-6 text-green-400"})," Aumento Masivo de Precios"),r.default.createElement("p",{className:"text-xs text-slate-500 mt-1"},"Configur incrementos automticos peridicos para tus productos.")),r.default.createElement("button",{onClick:()=>Bc(!1),className:"p-2 bg-slate-900 rounded-full text-slate-400 hover:text-white transition border border-slate-800"},r.default.createElement(lt,{className:"w-5 h-5"}))),r.default.createElement("div",{className:"p-6 border-b border-slate-800 space-y-4"},r.default.createElement("div",{className:"grid grid-cols-2 gap-4"},r.default.createElement("div",null,r.default.createElement("label",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-wider block mb-1"},"Tipo de Aumento"),r.default.createElement("div",{className:"flex gap-2"},r.default.createElement("button",{onClick:()=>O("percent"),className:`flex-1 py-2.5 rounded-xl font-bold text-sm transition border ${U==="percent"?"bg-green-900/30 text-green-400 border-green-500/30":"bg-slate-900 text-slate-500 border-slate-800 hover:text-white"}`},r.default.createElement(Jc,{className:"w-4 h-4 inline mr-1"})," Porcentaje"),r.default.createElement("button",{onClick:()=>O("fixed"),className:`flex-1 py-2.5 rounded-xl font-bold text-sm transition border ${U==="fixed"?"bg-green-900/30 text-green-400 border-green-500/30":"bg-slate-900 text-slate-500 border-slate-800 hover:text-white"}`},r.default.createElement(al,{className:"w-4 h-4 inline mr-1"})," Pesos ($)"))),r.default.createElement("div",null,r.default.createElement("label",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-wider block mb-1"},"Cantidad (",U==="percent"?"%":"$",")"),r.default.createElement("input",{type:"number",min:"1",placeholder:U==="percent"?"Ej: 10":"Ej: 500",value:G,onChange:Ce=>J(Ce.target.value),className:"w-full p-3 bg-slate-900 border border-slate-700 rounded-xl text-white placeholder-slate-600 focus:border-green-500/50 outline-none transition"}))),r.default.createElement("div",{className:"grid grid-cols-2 gap-4"},r.default.createElement("div",null,r.default.createElement("label",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-wider block mb-1"},"Frecuencia"),r.default.createElement("div",{className:"flex gap-2"},r.default.createElement("button",{onClick:()=>Z("days"),className:`flex-1 py-2.5 rounded-xl font-bold text-sm transition border ${te==="days"?"bg-orange-900/30 text-orange-400 border-orange-500/30":"bg-slate-900 text-slate-500 border-slate-800 hover:text-white"}`},"Das"),r.default.createElement("button",{onClick:()=>Z("months"),className:`flex-1 py-2.5 rounded-xl font-bold text-sm transition border ${te==="months"?"bg-orange-900/30 text-orange-400 border-orange-500/30":"bg-slate-900 text-slate-500 border-slate-800 hover:text-white"}`},"Meses"))),r.default.createElement("div",null,r.default.createElement("label",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-wider block mb-1"},"Cada cuntos ",te==="months"?"meses":"das"),r.default.createElement("input",{type:"number",min:"1",placeholder:"Ej: 1",value:ee,onChange:Ce=>le(Ce.target.value),className:"w-full p-3 bg-slate-900 border border-slate-700 rounded-xl text-white placeholder-slate-600 focus:border-orange-500/50 outline-none transition"}))),G&&Number(G)>0&&ee&&Number(ee)>0&&r.default.createElement("div",{className:"bg-green-900/10 border border-green-500/20 p-3 rounded-xl"},r.default.createElement("p",{className:"text-xs text-green-400 font-bold"}," Los productos seleccionados subirn ",r.default.createElement("span",{className:"text-white"},"+",G,U==="percent"?"%":"$")," cada ",r.default.createElement("span",{className:"text-white"},ee," ",te==="months"?Number(ee)===1?"mes":"meses":Number(ee)===1?"da":"das")))),r.default.createElement("div",{className:"p-6 flex-1 overflow-hidden flex flex-col"},r.default.createElement("div",{className:"flex items-center justify-between mb-3"},r.default.createElement("p",{className:"text-xs font-bold text-slate-500 uppercase tracking-widest"},"Productos disponibles (",m.length,")"),r.default.createElement("div",{className:"flex gap-2"},r.default.createElement("button",{onClick:$t,className:"text-[10px] text-green-400 hover:text-green-300 font-bold transition"},"Seleccionar todos"),r.default.createElement("span",{className:"text-slate-700"},"|"),r.default.createElement("button",{onClick:zn,className:"text-[10px] text-slate-400 hover:text-white font-bold transition"},"Deseleccionar"))),r.default.createElement("div",{className:"relative mb-3"},r.default.createElement(ul,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-500"}),r.default.createElement("input",{type:"text",placeholder:"Buscar producto...",value:x,onChange:Ce=>E(Ce.target.value),className:"w-full pl-10 pr-4 py-2.5 bg-slate-900/50 border border-slate-800 rounded-xl text-white text-sm placeholder-slate-600 focus:border-green-500/50 outline-none transition"}),x&&r.default.createElement("button",{onClick:()=>E(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-500 hover:text-white transition"},r.default.createElement(lt,{className:"w-3 h-3"}))),m.length===0?r.default.createElement("div",{className:"text-center py-8"},r.default.createElement("p",{className:"text-slate-500 text-sm"},"Todos los productos ya tienen reglas activas."),r.default.createElement("p",{className:"text-slate-600 text-xs mt-1"},"Desactiv o elimin una regla existente para liberar productos.")):r.default.createElement("div",{className:"flex-1 overflow-y-auto custom-scrollbar space-y-1.5 max-h-[300px]"},Pe.map(Ce=>r.default.createElement("label",{key:Ce.id,className:`flex items-center gap-3 p-3 rounded-xl cursor-pointer transition-all group hover:bg-slate-900 ${V.includes(Ce.id)?"bg-green-900/15 border border-green-500/20":"border border-transparent"}`},r.default.createElement("input",{type:"checkbox",checked:V.includes(Ce.id),onChange:()=>Le(Ce.id),className:"w-4 h-4 text-green-600 bg-slate-900 border-slate-600 rounded focus:ring-green-500"}),r.default.createElement("div",{className:"w-10 h-10 bg-white rounded-lg p-1 flex-shrink-0"},r.default.createElement("img",{src:Ce.image,alt:Ce.name,className:"w-full h-full object-contain"})),r.default.createElement("div",{className:"flex-1 min-w-0"},r.default.createElement("p",{className:"text-sm font-bold text-white truncate"},Ce.name),r.default.createElement("div",{className:"flex items-center gap-2 mt-0.5"},r.default.createElement("span",{className:"text-xs text-orange-400 font-bold"},"$",Number(Ce.basePrice).toLocaleString()),r.default.createElement("span",{className:"text-[10px] text-slate-600"},"Costo: $",Number(Ce.purchasePrice||0).toLocaleString()))),V.includes(Ce.id)&&G&&Number(G)>0&&r.default.createElement("div",{className:"text-right flex-shrink-0"},r.default.createElement("p",{className:"text-[10px] text-slate-500"},"Nuevo precio"),r.default.createElement("p",{className:"text-xs text-green-400 font-black"},"$",(U==="percent"?Math.round(Number(Ce.basePrice)*(1+Number(G)/100)):Number(Ce.basePrice)+Number(G)).toLocaleString())))),Pe.length===0&&x&&r.default.createElement("p",{className:"text-center text-slate-600 py-4 text-sm"},'No se encontraron productos con "',x,'"'))),r.default.createElement("div",{className:"p-6 border-t border-slate-800 flex items-center justify-between"},r.default.createElement("p",{className:"text-sm text-slate-400"},r.default.createElement("span",{className:"text-green-400 font-bold"},V.length)," producto(s) seleccionado(s)"),r.default.createElement("div",{className:"flex gap-3"},r.default.createElement("button",{onClick:()=>Bc(!1),className:"px-6 py-3 text-slate-400 font-bold hover:text-white transition"},"Cancelar"),r.default.createElement("button",{onClick:nr,disabled:xe||V.length===0,className:`px-8 py-3 rounded-xl font-bold shadow-lg transition flex items-center gap-2 ${xe||V.length===0?"bg-slate-800 text-slate-600 cursor-not-allowed":"bg-green-600 hover:bg-green-500 text-white shadow-green-900/20"}`},xe?r.default.createElement(ns,{className:"w-4 h-4 animate-spin"}):r.default.createElement(rs,{className:"w-4 h-4"}),"Crear Regla")))))},null)})()),n==="carousel"&&r.default.createElement("div",{className:"max-w-6xl mx-auto animate-fade-up pb-20 relative"},["business","premium"].includes(h?.subscriptionPlan)?r.default.createElement(r.default.Fragment,null,r.default.createElement("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-8"},r.default.createElement("div",null,r.default.createElement("h1",{className:"text-3xl md:text-4xl font-black text-white neon-text"},"Carrusel"),r.default.createElement("p",{className:"text-slate-500 mt-2"},"Administr los banners rotativos del home de tu tienda.")),r.default.createElement(Hr,{guideKey:"carousel"})),r.default.createElement("div",{className:"space-y-6"},r.default.createElement("div",{className:"bg-[#0a0a0a] border border-slate-800 p-5 md:p-8 rounded-[2rem]"},r.default.createElement("h3",{className:"text-xl font-bold text-white mb-6 flex items-center gap-2"},r.default.createElement(u0,{className:"w-5 h-5 text-orange-400"})," Configuracin del Carrusel"),r.default.createElement("div",{className:"space-y-6"},r.default.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},r.default.createElement("div",{className:"flex items-center justify-between p-4 bg-slate-900/50 rounded-xl border border-slate-800"},r.default.createElement("div",null,r.default.createElement("p",{className:"font-bold text-white"},"Mostrar carrusel"),r.default.createElement("p",{className:"text-xs text-slate-500"},"Si est apagado, se usa la imagen Hero tradicional.")),r.default.createElement("button",{onClick:()=>K({...h,showHomeBannerCarousel:h?.showHomeBannerCarousel===!1}),className:`w-14 h-8 rounded-full transition relative ${h?.showHomeBannerCarousel!==!1?"bg-orange-500":"bg-slate-700"}`},r.default.createElement("div",{className:`absolute top-1 w-6 h-6 bg-white rounded-full transition ${h?.showHomeBannerCarousel!==!1?"left-7":"left-1"}`}))),r.default.createElement("div",{className:"p-4 bg-slate-900/50 rounded-xl border border-slate-800"},r.default.createElement("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-2 block"},"Cambio automtico (segundos)"),r.default.createElement("input",{type:"number",min:"1",className:"input-cyber w-full p-3",value:Number.isFinite(Number(h?.homeBannerAutoplayMs))?Math.max(1,Math.round(Number(h.homeBannerAutoplayMs)/1e3)):5,onChange:l=>{let m=Number(l.target.value),v=Number.isFinite(m)?Math.max(1,m):5;K({...h,homeBannerAutoplayMs:Math.round(v*1e3)})}}))),r.default.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6"},r.default.createElement("div",{className:"lg:col-span-1"},r.default.createElement("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-2 block"},"Imagen del slide"),r.default.createElement("input",{type:"file",accept:"image/*",onChange:l=>qo(l,Vn,"imageUrl"),className:"block w-full text-sm text-slate-400 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-orange-900/20 file:text-orange-400 hover:file:bg-orange-900/40 transition"}),Re?.imageUrl&&r.default.createElement("div",{className:"mt-4 rounded-xl overflow-hidden border border-slate-700 h-28"},r.default.createElement("img",{src:Re.imageUrl,className:"w-full h-full object-cover",alt:"Banner preview"})),r.default.createElement("p",{className:"text-xs text-slate-500 mt-2"},"Recomendado: 2400x1350 px mnimo para que no pierda nitidez en pantallas grandes")),r.default.createElement("div",{className:"lg:col-span-2 space-y-4"},r.default.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},r.default.createElement("div",null,r.default.createElement("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-2 block"},"Accin al hacer click"),r.default.createElement("select",{className:"input-cyber w-full p-3",value:Re?.targetType||"none",onChange:l=>Vn(m=>({...m,targetType:l.target.value,targetId:""}))},r.default.createElement("option",{value:"none"},"Solo mostrar (sin link)"),r.default.createElement("option",{value:"product"},"Abrir producto"),r.default.createElement("option",{value:"promo"},"Abrir promo"))),r.default.createElement("div",null,r.default.createElement("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-2 block"},"Orden (0 = primero)"),r.default.createElement("input",{type:"number",className:"input-cyber w-full p-3",value:Number.isFinite(Number(Re?.order))?Number(Re.order):0,onChange:l=>Vn(m=>({...m,order:l.target.value}))}),r.default.createElement("p",{className:"text-xs text-slate-500 mt-2"},"Menor nmero aparece primero (0, 1, 2...)."))),Re?.targetType!=="none"&&r.default.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},r.default.createElement("div",null,r.default.createElement("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-2 block"},Re?.targetType==="promo"?"Promo al hacer click":"Producto al hacer click"),r.default.createElement("select",{className:"input-cyber w-full p-3",value:Re?.targetId||"",onChange:l=>Vn(m=>({...m,targetId:l.target.value}))},r.default.createElement("option",{value:""},"Seleccionar..."),(Re?.targetType==="promo"?[..._n]:[...he]).sort((l,m)=>(l?.name||"").localeCompare(m?.name||"")).map(l=>r.default.createElement("option",{key:l.id,value:l.id},l.name)))),r.default.createElement("div",{className:"p-4 bg-slate-900/50 rounded-xl border border-slate-800 flex items-center gap-4"},(()=>{let l=Re?.targetType==="promo",m=l?_n.find(x=>x.id===Re?.targetId):he.find(x=>x.id===Re?.targetId),v=m?.image;return r.default.createElement(r.default.Fragment,null,r.default.createElement("div",{className:"w-16 h-16 rounded-xl overflow-hidden border border-slate-700 bg-black/30 flex items-center justify-center flex-shrink-0"},v?r.default.createElement("img",{src:v,className:"w-full h-full object-cover",alt:"Preview"}):r.default.createElement(js,{className:"w-6 h-6 text-slate-600"})),r.default.createElement("div",{className:"min-w-0"},r.default.createElement("p",{className:"text-xs text-slate-500 font-bold uppercase tracking-wider"},"Vista previa"),r.default.createElement("p",{className:"font-black text-white truncate"},m?.name||"Sin seleccin")))})())),r.default.createElement("div",{className:"flex flex-col md:flex-row md:items-center gap-4"},r.default.createElement("div",{className:"flex items-center justify-between flex-1 p-4 bg-slate-900/50 rounded-xl border border-slate-800"},r.default.createElement("div",null,r.default.createElement("p",{className:"font-bold text-white"},"Slide habilitado"),r.default.createElement("p",{className:"text-xs text-slate-500"},"Si est apagado no se muestra.")),r.default.createElement("button",{onClick:()=>Vn(l=>({...l,enabled:l?.enabled===!1})),className:`w-14 h-8 rounded-full transition relative ${Re?.enabled!==!1?"bg-green-500":"bg-slate-700"}`},r.default.createElement("div",{className:`absolute top-1 w-6 h-6 bg-white rounded-full transition ${Re?.enabled!==!1?"left-7":"left-1"}`}))),r.default.createElement("div",{className:"flex gap-3"},Mn&&r.default.createElement("button",{onClick:Gf,className:"px-6 py-3 rounded-xl font-bold border border-slate-700 text-slate-200 hover:bg-slate-900/60 transition"},"Cancelar"),r.default.createElement("button",{onClick:s2,className:"px-8 py-3 bg-orange-600 rounded-xl text-white font-bold shadow-lg hover:bg-orange-500 transition"},Mn?"Guardar Slide":"Agregar Slide"))))),r.default.createElement("div",{className:"space-y-3"},Ao.length===0?r.default.createElement("p",{className:"text-slate-500 text-sm"},"Todava no hay slides en el carrusel."):Ao.map(l=>{let m=l.targetType||(l.promoId?"promo":l.productId?"product":"none"),v=l.targetId||l.promoId||l.productId||"",x=m==="promo"?_n.find(P=>P.id===v):m==="product"?he.find(P=>P.id===v):null,E=m==="none"?"Solo imagen":x?.name||(m==="promo"?"Promo inexistente":"Producto inexistente"),V=l?.enabled!==!1;return r.default.createElement("div",{key:l.id,className:"flex flex-col md:flex-row md:items-center gap-4 p-4 bg-slate-900/40 rounded-2xl border border-slate-800"},r.default.createElement("div",{className:"w-full md:w-40 h-20 rounded-xl overflow-hidden border border-slate-700 bg-black/30 flex-shrink-0"},l?.imageUrl?r.default.createElement("img",{src:l.imageUrl,className:"w-full h-full object-cover",alt:"Slide"}):null),r.default.createElement("div",{className:"flex-1 min-w-0"},r.default.createElement("div",{className:"flex items-center gap-3 flex-wrap"},r.default.createElement("div",{className:"w-10 h-10 rounded-lg overflow-hidden border border-slate-700 bg-black/30 flex items-center justify-center flex-shrink-0"},x?.image?r.default.createElement("img",{src:x.image,className:"w-full h-full object-cover",alt:"Target"}):r.default.createElement(js,{className:"w-4 h-4 text-slate-600"})),r.default.createElement("p",{className:"font-black text-white truncate"},E),r.default.createElement("span",{className:`text-[10px] font-black px-2 py-1 rounded-lg border ${V?"text-green-400 border-green-500/30 bg-green-500/10":"text-slate-400 border-slate-700 bg-slate-800/30"}`},V?"ACTIVO":"PAUSADO"),r.default.createElement("span",{className:"text-[10px] font-black px-2 py-1 rounded-lg border border-slate-700 bg-slate-800/30 text-slate-300"},m==="promo"?"PROMO":m==="product"?"PRODUCTO":"SIN LINK"),r.default.createElement("span",{className:"text-[10px] font-black px-2 py-1 rounded-lg border border-slate-700 bg-slate-800/30 text-slate-300"},"ORDEN ",Number.isFinite(Number(l.order))?Number(l.order):0)),r.default.createElement("p",{className:"text-xs text-slate-500 mt-1 truncate"},m==="none"?"Click desactivado":v)),r.default.createElement("div",{className:"flex items-center gap-2"},r.default.createElement("button",{onClick:()=>r2(l),className:"px-4 py-2 rounded-xl font-bold border border-slate-700 text-slate-200 hover:bg-slate-900/60 transition flex items-center gap-2"},r.default.createElement(qi,{className:"w-4 h-4"})," Editar"),r.default.createElement("button",{onClick:()=>i2(l),className:"px-4 py-2 rounded-xl font-bold border border-red-500/30 text-red-400 hover:bg-red-500/10 transition flex items-center gap-2"},r.default.createElement(mt,{className:"w-4 h-4"})," Eliminar")))})))),Y?.email===Qe&&r.default.createElement("div",{className:"fixed bottom-8 right-8 z-50"},r.default.createElement("button",{onClick:async()=>{try{Wt(!0);let l=fe(ae,"artifacts",w,"public","data","settings","config");await br(l,h,{merge:!0}),F("Configuracin del carrusel guardada","success")}catch(l){console.error(l),F("Error al guardar","error")}finally{Wt(!1)}},className:"px-8 py-4 bg-gradient-to-r from-orange-600 to-orange-500 hover:from-orange-500 hover:to-orange-400 text-white font-bold rounded-2xl shadow-2xl shadow-orange-900/30 flex items-center gap-3 transition transform hover:scale-105"},r.default.createElement(rs,{className:"w-5 h-5"})," Guardar Cambios")))):r.default.createElement("div",{className:"flex flex-col items-center justify-center py-20 text-center"},r.default.createElement("div",{className:"w-20 h-20 bg-yellow-900/20 rounded-full flex items-center justify-center mx-auto mb-6 border border-yellow-500/30"},r.default.createElement(Tr,{className:"w-10 h-10 text-yellow-500"})),r.default.createElement("h3",{className:"text-2xl font-black text-white mb-4"},"Carrusel Bloqueado"),r.default.createElement("p",{className:"text-slate-400 mb-6 max-w-md"},"El carrusel de banners del home est disponible a partir del ",r.default.createElement("span",{className:"text-purple-400 font-bold"},"Plan Negocio"),". Mejor tu plan para personalizar los slides de tu tienda."),r.default.createElement("button",{onClick:()=>_e(!0),className:"px-8 py-4 bg-purple-600 hover:bg-purple-500 text-white font-bold rounded-xl shadow-lg shadow-purple-600/20 transition flex items-center gap-2"},r.default.createElement(ir,{className:"w-5 h-5"})," Ver Planes Disponibles"))),n==="settings"&&r.default.createElement("div",{className:"max-w-6xl mx-auto animate-fade-up pb-20 relative"},Y?.email!==Qe&&r.default.createElement("div",{className:"absolute inset-0 z-30 flex items-center justify-center bg-black/90 backdrop-blur-md rounded-[2.5rem]"},r.default.createElement("div",{className:"text-center p-8 max-w-lg"},r.default.createElement("div",{className:"w-24 h-24 mx-auto mb-6 bg-red-500/20 rounded-full flex items-center justify-center border border-red-500/30"},r.default.createElement(Bn,{className:"w-12 h-12 text-red-400"})),r.default.createElement("h3",{className:"text-3xl font-black text-white mb-4"},"Acceso Restringido"),r.default.createElement("p",{className:"text-slate-400 mb-6"},"Esta seccin est reservada nicamente para el ",r.default.createElement("span",{className:"text-orange-400 font-bold"},"desarrollador")," de la plataforma."),r.default.createElement("div",{className:"bg-slate-900/50 p-4 rounded-xl border border-slate-800 mb-6"},r.default.createElement("p",{className:"text-sm text-slate-500 mb-2"},"Para solicitar cambios en la configuracin, contacta a:"),r.default.createElement("p",{className:"text-orange-400 font-bold text-lg"},"lautarocorazza63@gmail.com")),r.default.createElement("p",{className:"text-xs text-slate-600"},"Si necesitas modificar tu tienda, enva un email detallando los cambios que deseas realizar."))),r.default.createElement("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-8"},r.default.createElement("h1",{className:"text-4xl font-black text-white neon-text flex items-center gap-3"},r.default.createElement(h0,{className:"w-8 h-8 text-orange-500 animate-spin-slow"})," Configuracin General"),r.default.createElement(Hr,{guideKey:"settings"})),r.default.createElement("div",{className:"flex flex-wrap gap-2 mb-8 pb-4 border-b border-slate-800"},[{id:"store",label:"Tienda",icon:Wo},{id:"appearance",label:"Apariencia",icon:l0},{id:"social",label:"Redes",icon:m0},{id:"payments",label:"Pagos",icon:Us},{id:"ticket",label:"Ticket",icon:Gs},{id:"shipping",label:"Envos",icon:ss},{id:"seo",label:"SEO",icon:oh},{id:"advanced",label:"Avanzado",icon:Zf},{id:"team",label:"Equipo",icon:Qo},...Y?.email===Qe?[{id:"subscription",label:"Suscripciones",icon:ir}]:[]].map(l=>r.default.createElement("button",{key:l.id,onClick:()=>Pf(l.id),className:`px-5 py-2.5 rounded-xl font-bold text-sm flex items-center gap-2 transition-all duration-300 border ${In===l.id?"bg-orange-600 text-white shadow-[0_0_20px_rgba(8,145,178,0.4)] border-orange-400 transform scale-105":"bg-slate-900 text-slate-400 hover:text-white hover:bg-slate-800 border-slate-800"}`},r.default.createElement(l.icon,{className:`w-4 h-4 ${In===l.id?"animate-pulse":""}`})," ",l.label))),In==="subscription"&&Y?.email===Qe&&r.default.createElement("div",{className:"space-y-6 animate-fade-up"},r.default.createElement("div",{className:"bg-[#0a0a0a] border border-orange-500/30 p-8 rounded-[2rem] shadow-[0_0_50px_rgba(249,115,22,0.1)]"},r.default.createElement("h3",{className:"text-2xl font-black text-white mb-6 flex items-center gap-3"},r.default.createElement(ir,{className:"w-6 h-6 text-yellow-500 fill-current"}),"Modelos de Suscripcin"),r.default.createElement("div",{className:"mb-8 p-4 bg-yellow-500/10 border border-yellow-500/20 rounded-xl flex items-center gap-4"},r.default.createElement(Gi,{className:"w-8 h-8 text-yellow-500"}),r.default.createElement("div",null,r.default.createElement("p",{className:"font-bold text-yellow-500"},"Zona de Peligro: Super Admin"),r.default.createElement("p",{className:"text-sm text-yellow-200"},"Cambiar el plan afecta inmediatamente los lmites y funcionalidades de la tienda."))),r.default.createElement("div",{className:"mb-8 p-6 bg-slate-900/40 border border-slate-800 rounded-2xl"},r.default.createElement("div",{className:"flex items-center justify-between gap-4 flex-wrap"},r.default.createElement("div",null,r.default.createElement("p",{className:"text-white font-black text-lg"},"Backup de Tienda"),r.default.createElement("p",{className:"text-slate-500 text-xs font-mono"},"storeId: ",w||"")),r.default.createElement("div",{className:"flex items-center gap-2"},r.default.createElement("button",{disabled:M||!w,onClick:Cc,className:"px-4 py-3 rounded-xl bg-green-500/10 border border-green-500/20 text-green-400 font-black text-[10px] uppercase tracking-widest hover:bg-green-500/20 transition disabled:opacity-50"},M?"Exportando":"Exportar"),r.default.createElement("label",{className:`px-4 py-3 rounded-xl bg-indigo-600/20 border border-indigo-500/30 text-indigo-200 font-black text-[10px] uppercase tracking-widest hover:bg-indigo-600/30 transition ${q||!w?"opacity-50 pointer-events-none":""}`},q?"Importando":"Importar",r.default.createElement("input",{type:"file",accept:"application/json",className:"hidden",onChange:l=>{let m=l.target.files&&l.target.files[0];m&&We(m),l.target.value=""}})))),r.default.createElement("p",{className:"text-slate-600 text-xs mt-4"},"Importar escribe con merge (no borra por defecto). Usalo con cuidado.")),r.default.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6"},r.default.createElement("button",{onClick:()=>Ac("entrepreneur"),className:`relative p-6 rounded-2xl border-2 transition-all duration-300 text-left group ${h.subscriptionPlan==="entrepreneur"||!h.subscriptionPlan?"bg-slate-900 border-orange-500 shadow-[0_0_30px_rgba(249,115,22,0.2)] scale-105 z-10":"bg-[#050505] border-slate-800 hover:border-slate-600 opacity-60 hover:opacity-100"}`},r.default.createElement("div",{className:"flex justify-between items-start mb-4"},r.default.createElement("div",{className:"p-3 bg-slate-800 rounded-xl"},r.default.createElement(Wo,{className:"w-6 h-6 text-orange-400"})),(h.subscriptionPlan==="entrepreneur"||!h.subscriptionPlan)&&r.default.createElement("div",{className:"bg-orange-500 text-black text-xs font-black px-2 py-1 rounded"},"ACTIVO")),r.default.createElement("h4",{className:"text-xl font-black text-white mb-1"},"Emprendedor"),r.default.createElement("p",{className:"text-sm text-slate-400 mb-4 h-10"},"El esencial para arrancar slido y econmico."),r.default.createElement("div",{className:"text-2xl font-black text-orange-400 mb-6"},"US$5.99 ",r.default.createElement("span",{className:"text-sm text-slate-500 font-normal"},"/mes")),r.default.createElement("ul",{className:"space-y-2 text-sm text-slate-300"},r.default.createElement("li",{className:"flex items-center gap-2"},r.default.createElement(Me,{className:"w-4 h-4 text-orange-500"})," Hasta 30 productos"),r.default.createElement("li",{className:"flex items-center gap-2"},r.default.createElement(Me,{className:"w-4 h-4 text-orange-500"})," Mercado Pago integrado"),r.default.createElement("li",{className:"flex items-center gap-2"},r.default.createElement(Me,{className:"w-4 h-4 text-orange-500"})," 1 promocin activa"),r.default.createElement("li",{className:"flex items-center gap-2"},r.default.createElement(Me,{className:"w-4 h-4 text-orange-500"})," Panel de control completo"),r.default.createElement("li",{className:"flex items-center gap-2"},r.default.createElement(Me,{className:"w-4 h-4 text-orange-500"})," Soporte tcnico por Gmail"))),r.default.createElement("button",{onClick:()=>Ac("business"),className:`relative p-6 rounded-2xl border-2 transition-all duration-300 text-left group ${h.subscriptionPlan==="business"?"bg-slate-900 border-purple-500 shadow-[0_0_30px_rgba(168,85,247,0.2)] scale-105 z-10":"bg-[#050505] border-slate-800 hover:border-slate-600 opacity-60 hover:opacity-100"}`},r.default.createElement("div",{className:"flex justify-between items-start mb-4"},r.default.createElement("div",{className:"p-3 bg-slate-800 rounded-xl"},r.default.createElement(Jf,{className:"w-6 h-6 text-purple-400"})),h.subscriptionPlan==="business"&&r.default.createElement("div",{className:"bg-purple-500 text-white text-xs font-black px-2 py-1 rounded"},"ACTIVO")),r.default.createElement("h4",{className:"text-xl font-black text-white mb-1"},"Negocio"),r.default.createElement("p",{className:"text-sm text-slate-400 mb-4 h-10"},"Para marcas con identidad definida."),r.default.createElement("div",{className:"text-2xl font-black text-purple-400 mb-6"},"US$9.99 ",r.default.createElement("span",{className:"text-sm text-slate-500 font-normal"},"/mes")),r.default.createElement("ul",{className:"space-y-2 text-sm text-slate-300"},r.default.createElement("li",{className:"flex items-center gap-2"},r.default.createElement(Me,{className:"w-4 h-4 text-purple-500"})," Incluye todo Emprendedor"),r.default.createElement("li",{className:"flex items-center gap-2"},r.default.createElement(Me,{className:"w-4 h-4 text-purple-500"})," Hasta 50 productos"),r.default.createElement("li",{className:"flex items-center gap-2"},r.default.createElement(Me,{className:"w-4 h-4 text-purple-500"})," Promociones ilimitadas + cupones"),r.default.createElement("li",{className:"flex items-center gap-2"},r.default.createElement(Me,{className:"w-4 h-4 text-purple-500"})," Analtica de clientes + carrusel"),r.default.createElement("li",{className:"flex items-center gap-2"},r.default.createElement(Me,{className:"w-4 h-4 text-purple-500"})," Botn WhatsApp flotante"))),r.default.createElement("button",{onClick:()=>Ac("premium"),className:`relative p-6 rounded-2xl border-2 transition-all duration-300 text-left group ${h.subscriptionPlan==="premium"?"bg-slate-900 border-yellow-500 shadow-[0_0_30px_rgba(234,179,8,0.2)] scale-105 z-10":"bg-[#050505] border-slate-800 hover:border-slate-600 opacity-60 hover:opacity-100"}`},r.default.createElement("div",{className:"flex justify-between items-start mb-4"},r.default.createElement("div",{className:"p-3 bg-slate-800 rounded-xl"},r.default.createElement(qs,{className:"w-6 h-6 text-yellow-400"})),h.subscriptionPlan==="premium"&&r.default.createElement("div",{className:"bg-yellow-500 text-black text-xs font-black px-2 py-1 rounded"},"ACTIVO")),r.default.createElement("h4",{className:"text-xl font-black text-white mb-1"},"Premium"),r.default.createElement("p",{className:"text-sm text-slate-400 mb-4 h-10"},"Servicio full con IA."),r.default.createElement("div",{className:"text-2xl font-black text-yellow-400 mb-6"},"US$17.99 ",r.default.createElement("span",{className:"text-sm text-slate-500 font-normal"},"/mes")),r.default.createElement("ul",{className:"space-y-2 text-sm text-slate-300"},r.default.createElement("li",{className:"flex items-center gap-2"},r.default.createElement(Me,{className:"w-4 h-4 text-yellow-500"})," Incluye todo Negocio"),r.default.createElement("li",{className:"flex items-center gap-2"},r.default.createElement(Me,{className:"w-4 h-4 text-yellow-500"})," Productos y promos ilimitados"),r.default.createElement("li",{className:"flex items-center gap-2"},r.default.createElement(Me,{className:"w-4 h-4 text-yellow-500"})," Asistente IA 24/7 (SustIA)"),r.default.createElement("li",{className:"flex items-center gap-2"},r.default.createElement(Me,{className:"w-4 h-4 text-yellow-500"})," Carga VIP inicial (10 productos)"),r.default.createElement("li",{className:"flex items-center gap-2"},r.default.createElement(Me,{className:"w-4 h-4 text-yellow-500"})," Mantenimiento mensual full"),r.default.createElement("li",{className:"flex items-center gap-2"},r.default.createElement(Me,{className:"w-4 h-4 text-yellow-500"})," Omnicanalidad total")))),r.default.createElement("div",{className:"mt-8 pt-8 border-t border-slate-800/50"},r.default.createElement("h4",{className:"text-lg font-bold text-slate-300 mb-4 flex items-center gap-2"},r.default.createElement(_w,{className:"w-5 h-5 text-green-400"})," Ciclo de Facturacin"),r.default.createElement("div",{className:"grid grid-cols-3 gap-4"},[{id:"Semanal",label:"Semanal"},{id:"Mensual",label:"Mensual"},{id:"Anual",label:"Anual"}].map(l=>r.default.createElement("button",{key:l.id,onClick:()=>K({...h,subscriptionBillingCycle:l.id}),className:`p-3 rounded-xl border transition-all font-bold ${h?.subscriptionBillingCycle===l.id?"bg-green-500 text-black border-green-400 shadow-lg shadow-green-500/20":"bg-slate-900 text-slate-400 border-slate-800 hover:bg-slate-800"}`},l.label))),r.default.createElement("p",{className:"text-xs text-slate-500 mt-2"},"Define la frecuencia de cobro para este plan.")))),In==="store"&&r.default.createElement("div",{className:"space-y-6 animate-fade-up"},r.default.createElement("div",{className:"bg-[#0a0a0a] border border-slate-800 p-8 rounded-[2rem]"},r.default.createElement("h3",{className:"text-xl font-bold text-white mb-6 flex items-center gap-2"},r.default.createElement(Wo,{className:"w-5 h-5 text-orange-400"})," Informacin de la Tienda"),r.default.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6"},r.default.createElement("div",null,r.default.createElement("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-2 block"},"Nombre de la Tienda"),r.default.createElement("input",{className:"input-cyber w-full p-4",value:h?.storeName||"",onChange:l=>K({...h,storeName:l.target.value}),placeholder:"Mi Tienda"})),r.default.createElement("div",null,r.default.createElement("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-2 block"},"Email de Contacto"),r.default.createElement("input",{type:"email",className:"input-cyber w-full p-4",value:h?.storeEmail||"",onChange:l=>K({...h,storeEmail:l.target.value}),placeholder:"contacto@mitienda.com"})),r.default.createElement("div",null,r.default.createElement("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-2 block"},"Telfono"),r.default.createElement("input",{className:"input-cyber w-full p-4",value:h?.storePhone||"",onChange:l=>K({...h,storePhone:l.target.value}),placeholder:"+54 11 1234-5678"})),r.default.createElement("div",null,r.default.createElement("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-2 block"},"Direccin"),r.default.createElement("input",{className:"input-cyber w-full p-4",value:h?.storeAddress||"",onChange:l=>K({...h,storeAddress:l.target.value}),placeholder:"Av. Corrientes 1234, CABA"}))),r.default.createElement("div",{className:"mt-6"},r.default.createElement("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-2 block"},"Descripcin de la Tienda"),r.default.createElement("textarea",{className:"input-cyber w-full p-4 h-24 resize-none",value:h?.storeDescription||"",onChange:l=>K({...h,storeDescription:l.target.value}),placeholder:"Breve descripcin de tu tienda..."})),r.default.createElement("div",{className:"mt-6"},r.default.createElement("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-2 block"},"Texto de Nosotros"),r.default.createElement("textarea",{className:"input-cyber w-full p-4 h-32 resize-none",value:h?.aboutUsText||"",onChange:l=>K({...h,aboutUsText:l.target.value}),placeholder:"Historia de tu marca, valores, misin..."}))),r.default.createElement("div",{className:"bg-[#0a0a0a] border border-slate-800 p-5 md:p-8 rounded-[2rem]"},r.default.createElement("h3",{className:"text-xl font-bold text-white mb-6 flex items-center gap-2"},r.default.createElement(ih,{className:"w-5 h-5 text-orange-400"})," Textos de Copyright"),r.default.createElement("div",{className:"space-y-6"},r.default.createElement("div",null,r.default.createElement("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-2 block"},"Copyright del Men Lateral"),r.default.createElement("input",{className:"input-cyber w-full p-3",value:h?.menuCopyright||"",onChange:l=>K({...h,menuCopyright:l.target.value}),placeholder:`${h?.storeName||"Mi Tienda"}  ${new Date().getFullYear()}`}),r.default.createElement("p",{className:"text-xs text-slate-500 mt-2"},"Aparece al final del men hamburguesa")),r.default.createElement("div",null,r.default.createElement("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-2 block"},"Copyright del Footer"),r.default.createElement("input",{className:"input-cyber w-full p-3",value:h?.footerCopyright||"",onChange:l=>K({...h,footerCopyright:l.target.value}),placeholder:` ${new Date().getFullYear()} ${h?.storeName||"Mi Tienda"}. All rights reserved.`}),r.default.createElement("p",{className:"text-xs text-slate-500 mt-2"},"Aparece en la barra inferior del sitio")))),r.default.createElement("div",{className:"bg-[#0a0a0a] border border-slate-800 p-5 md:p-8 rounded-[2rem]"},r.default.createElement("h3",{className:"text-xl font-bold text-white mb-6 flex items-center gap-2"},r.default.createElement(sh,{className:"w-5 h-5 text-orange-400"}),' Gua "Cmo Comprar"'),r.default.createElement("div",{className:"space-y-6"},r.default.createElement("div",{className:"flex items-center justify-between p-4 bg-slate-900/50 rounded-xl border border-slate-800"},r.default.createElement("div",null,r.default.createElement("p",{className:"font-bold text-white"},"Mostrar en Men"),r.default.createElement("p",{className:"text-xs text-slate-500"},'Mostrar enlace "Cmo Comprar" en el men lateral')),r.default.createElement("button",{onClick:()=>K({...h,showGuideLink:h?.showGuideLink===!1}),className:`w-14 h-7 rounded-full transition-all duration-300 relative ${h?.showGuideLink!==!1?"bg-orange-600":"bg-slate-700"}`},r.default.createElement("div",{className:`w-5 h-5 bg-white rounded-full absolute top-1 transition-all duration-300 shadow-md ${h?.showGuideLink!==!1?"left-8":"left-1"}`}))),r.default.createElement("div",null,r.default.createElement("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-2 block"},"Ttulo de la Pgina"),r.default.createElement("input",{className:"input-cyber w-full p-3",value:h?.guideTitle||"",onChange:l=>K({...h,guideTitle:l.target.value}),placeholder:"Cmo Comprar"})),r.default.createElement("div",{className:"border-t border-slate-800 pt-4"},r.default.createElement("div",{className:"flex items-center justify-between mb-3"},r.default.createElement("div",{className:"flex items-center gap-2"},r.default.createElement("span",{className:"w-6 h-6 rounded-full bg-orange-900/30 text-orange-400 text-xs font-bold flex items-center justify-center"},"1"),r.default.createElement("label",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider"},"Paso 1")),r.default.createElement("button",{onClick:()=>K({...h,showGuideStep1:h?.showGuideStep1===!1}),className:`w-10 h-5 rounded-full transition-all duration-300 relative ${h?.showGuideStep1!==!1?"bg-orange-600":"bg-slate-700"}`},r.default.createElement("div",{className:`w-3 h-3 bg-white rounded-full absolute top-1 transition-all duration-300 shadow-md ${h?.showGuideStep1!==!1?"left-6":"left-1"}`}))),r.default.createElement("div",{className:`grid grid-cols-1 md:grid-cols-2 gap-3 ${h?.showGuideStep1===!1?"opacity-50":""}`},r.default.createElement("input",{className:"input-cyber w-full p-3",value:h?.guideStep1Title||"",onChange:l=>K({...h,guideStep1Title:l.target.value}),placeholder:"Selecciona Productos",disabled:h?.showGuideStep1===!1}),r.default.createElement("input",{className:"input-cyber w-full p-3",value:h?.guideStep1Text||"",onChange:l=>K({...h,guideStep1Text:l.target.value}),placeholder:"Descripcin del paso...",disabled:h?.showGuideStep1===!1}))),r.default.createElement("div",{className:"border-t border-slate-800 pt-4"},r.default.createElement("div",{className:"flex items-center justify-between mb-3"},r.default.createElement("div",{className:"flex items-center gap-2"},r.default.createElement("span",{className:"w-6 h-6 rounded-full bg-orange-900/30 text-orange-400 text-xs font-bold flex items-center justify-center"},"2"),r.default.createElement("label",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider"},"Paso 2")),r.default.createElement("button",{onClick:()=>K({...h,showGuideStep2:h?.showGuideStep2===!1}),className:`w-10 h-5 rounded-full transition-all duration-300 relative ${h?.showGuideStep2!==!1?"bg-orange-600":"bg-slate-700"}`},r.default.createElement("div",{className:`w-3 h-3 bg-white rounded-full absolute top-1 transition-all duration-300 shadow-md ${h?.showGuideStep2!==!1?"left-6":"left-1"}`}))),r.default.createElement("div",{className:`grid grid-cols-1 md:grid-cols-2 gap-3 ${h?.showGuideStep2===!1?"opacity-50":""}`},r.default.createElement("input",{className:"input-cyber w-full p-3",value:h?.guideStep2Title||"",onChange:l=>K({...h,guideStep2Title:l.target.value}),placeholder:"Revisa tu Carrito",disabled:h?.showGuideStep2===!1}),r.default.createElement("input",{className:"input-cyber w-full p-3",value:h?.guideStep2Text||"",onChange:l=>K({...h,guideStep2Text:l.target.value}),placeholder:"Descripcin del paso...",disabled:h?.showGuideStep2===!1}))),r.default.createElement("div",{className:"border-t border-slate-800 pt-4"},r.default.createElement("div",{className:"flex items-center justify-between mb-3"},r.default.createElement("div",{className:"flex items-center gap-2"},r.default.createElement("span",{className:"w-6 h-6 rounded-full bg-orange-900/30 text-orange-400 text-xs font-bold flex items-center justify-center"},"3"),r.default.createElement("label",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider"},"Paso 3")),r.default.createElement("button",{onClick:()=>K({...h,showGuideStep3:h?.showGuideStep3===!1}),className:`w-10 h-5 rounded-full transition-all duration-300 relative ${h?.showGuideStep3!==!1?"bg-orange-600":"bg-slate-700"}`},r.default.createElement("div",{className:`w-3 h-3 bg-white rounded-full absolute top-1 transition-all duration-300 shadow-md ${h?.showGuideStep3!==!1?"left-6":"left-1"}`}))),r.default.createElement("div",{className:`grid grid-cols-1 md:grid-cols-2 gap-3 ${h?.showGuideStep3===!1?"opacity-50":""}`},r.default.createElement("input",{className:"input-cyber w-full p-3",value:h?.guideStep3Title||"",onChange:l=>K({...h,guideStep3Title:l.target.value}),placeholder:"Datos de Envo",disabled:h?.showGuideStep3===!1}),r.default.createElement("input",{className:"input-cyber w-full p-3",value:h?.guideStep3Text||"",onChange:l=>K({...h,guideStep3Text:l.target.value}),placeholder:"Descripcin del paso...",disabled:h?.showGuideStep3===!1}))),r.default.createElement("div",{className:"border-t border-slate-800 pt-4"},r.default.createElement("div",{className:"flex items-center justify-between mb-3"},r.default.createElement("div",{className:"flex items-center gap-2"},r.default.createElement("span",{className:"w-6 h-6 rounded-full bg-orange-900/30 text-orange-400 text-xs font-bold flex items-center justify-center"},"4"),r.default.createElement("label",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider"},"Paso 4")),r.default.createElement("button",{onClick:()=>K({...h,showGuideStep4:h?.showGuideStep4===!1}),className:`w-10 h-5 rounded-full transition-all duration-300 relative ${h?.showGuideStep4!==!1?"bg-orange-600":"bg-slate-700"}`},r.default.createElement("div",{className:`w-3 h-3 bg-white rounded-full absolute top-1 transition-all duration-300 shadow-md ${h?.showGuideStep4!==!1?"left-6":"left-1"}`}))),r.default.createElement("div",{className:`grid grid-cols-1 md:grid-cols-2 gap-3 ${h?.showGuideStep4===!1?"opacity-50":""}`},r.default.createElement("input",{className:"input-cyber w-full p-3",value:h?.guideStep4Title||"",onChange:l=>K({...h,guideStep4Title:l.target.value}),placeholder:"Pago y Confirmacin",disabled:h?.showGuideStep4===!1}),r.default.createElement("input",{className:"input-cyber w-full p-3",value:h?.guideStep4Text||"",onChange:l=>K({...h,guideStep4Text:l.target.value}),placeholder:"Descripcin del paso...",disabled:h?.showGuideStep4===!1}))),r.default.createElement("div",{className:"border-t border-slate-800 pt-4"},r.default.createElement("div",{className:"flex items-center justify-between mb-3"},r.default.createElement("div",{className:"flex items-center gap-2"},r.default.createElement("span",{className:"w-6 h-6 rounded-full bg-orange-900/30 text-orange-400 text-xs font-bold flex items-center justify-center"},"5"),r.default.createElement("label",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider"},"Paso 5")),r.default.createElement("button",{onClick:()=>K({...h,showGuideStep5:h?.showGuideStep5===!1}),className:`w-10 h-5 rounded-full transition-all duration-300 relative ${h?.showGuideStep5!==!1?"bg-orange-600":"bg-slate-700"}`},r.default.createElement("div",{className:`w-3 h-3 bg-white rounded-full absolute top-1 transition-all duration-300 shadow-md ${h?.showGuideStep5!==!1?"left-6":"left-1"}`}))),r.default.createElement("div",{className:`grid grid-cols-1 md:grid-cols-2 gap-3 ${h?.showGuideStep5===!1?"opacity-50":""}`},r.default.createElement("input",{className:"input-cyber w-full p-3",value:h?.guideStep5Title||"",onChange:l=>K({...h,guideStep5Title:l.target.value}),placeholder:"Listo!",disabled:h?.showGuideStep5===!1}),r.default.createElement("input",{className:"input-cyber w-full p-3",value:h?.guideStep5Text||"",onChange:l=>K({...h,guideStep5Text:l.target.value}),placeholder:"Descripcin del paso...",disabled:h?.showGuideStep5===!1}))))),r.default.createElement("div",{className:"bg-[#0a0a0a] border border-slate-800 p-5 md:p-8 rounded-[2rem]"},r.default.createElement("h3",{className:"text-xl font-bold text-white mb-6 flex items-center gap-2"},r.default.createElement(Yf,{className:"w-5 h-5 text-yellow-400"})," Anuncios"),r.default.createElement("div",null,r.default.createElement("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-2 block"},"Mensaje de Anuncio (Banner superior)"),r.default.createElement("input",{className:"input-cyber w-full p-4",value:h?.announcementMessage||"",onChange:l=>K({...h,announcementMessage:l.target.value}),placeholder:" Envo gratis en compras mayores a $50.000!"}),r.default.createElement("p",{className:"text-xs text-slate-500 mt-2"},"Dejar vaco para ocultar el banner."))),r.default.createElement("div",{className:"bg-[#0a0a0a] border border-slate-800 p-5 md:p-8 rounded-[2rem]"},r.default.createElement("h3",{className:"text-xl font-bold text-white mb-6 flex items-center gap-2"},r.default.createElement(ir,{className:"w-5 h-5 text-yellow-500"})," Pantalla de Carga"),r.default.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6"},r.default.createElement("div",null,r.default.createElement("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-2 block"},"Ttulo de Carga"),r.default.createElement("input",{className:"input-cyber w-full p-4",value:h?.loadingTitle||"",onChange:l=>K({...h,loadingTitle:l.target.value}),placeholder:h?.storeName||"SUSTORE"}),r.default.createElement("p",{className:"text-xs text-slate-500 mt-2"},"Aparece en grande (ej. SUSTORE).")),r.default.createElement("div",null,r.default.createElement("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-2 block"},"Mensaje de Carga"),r.default.createElement("input",{className:"input-cyber w-full p-4",value:h?.loadingText||"",onChange:l=>K({...h,loadingText:l.target.value}),placeholder:"Cargando sistema..."}),r.default.createElement("p",{className:"text-xs text-slate-500 mt-2"},"Texto pequeo debajo del ttulo."))))),In==="appearance"&&r.default.createElement("div",{className:"space-y-6 animate-fade-up"},r.default.createElement("div",{className:"bg-[#0a0a0a] border border-slate-800 p-5 md:p-8 rounded-[2rem]"},r.default.createElement("h3",{className:"text-xl font-bold text-white mb-6 flex items-center gap-2"},r.default.createElement(js,{className:"w-5 h-5 text-purple-400"})," Imgenes"),r.default.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8"},r.default.createElement("div",null,r.default.createElement("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-2 block"},"Imagen Hero (Banner Principal)"),r.default.createElement("input",{type:"file",accept:"image/*",onChange:l=>qo(l,K,"heroUrl"),className:"block w-full text-sm text-slate-400 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-purple-900/20 file:text-purple-400 hover:file:bg-purple-900/40 transition"}),h?.heroUrl&&r.default.createElement("div",{className:"mt-4 rounded-xl overflow-hidden border border-slate-700 h-32"},r.default.createElement("img",{src:h.heroUrl,className:"w-full h-full object-cover",alt:"Hero Preview"}))),r.default.createElement("div",null,r.default.createElement("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-2 block"},"Logo de la Tienda"),r.default.createElement("input",{type:"file",accept:"image/*",onChange:l=>qo(l,K,"logoUrl"),className:"block w-full text-sm text-slate-400 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-orange-900/20 file:text-orange-400 hover:file:bg-orange-900/40 transition"}),h?.logoUrl&&r.default.createElement("div",{className:"mt-4 w-24 h-24 rounded-xl overflow-hidden border border-slate-700 bg-white p-2"},r.default.createElement("img",{src:h.logoUrl,className:"w-full h-full object-contain",alt:"Logo Preview"}))))),r.default.createElement("div",{className:"bg-[#0a0a0a] border border-slate-800 p-5 md:p-8 rounded-[2rem]"},r.default.createElement("h3",{className:"text-xl font-bold text-white mb-6 flex items-center gap-2"},r.default.createElement(l0,{className:"w-5 h-5 text-pink-400"})," Colores del Tema"),r.default.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6"},r.default.createElement("div",null,r.default.createElement("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-2 block"},"Color Primario"),r.default.createElement("div",{className:"flex gap-3 items-center"},r.default.createElement("input",{type:"color",value:h?.primaryColor||"#f97316",onChange:l=>K({...h,primaryColor:l.target.value}),className:"w-12 h-12 rounded-lg border border-slate-700 cursor-pointer"}),r.default.createElement("input",{type:"text",value:h?.primaryColor||"#f97316",onChange:l=>K({...h,primaryColor:l.target.value}),className:"input-cyber flex-1 p-3 font-mono"}))),r.default.createElement("div",null,r.default.createElement("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-2 block"},"Color Secundario"),r.default.createElement("div",{className:"flex gap-3 items-center"},r.default.createElement("input",{type:"color",value:h?.secondaryColor||"#8b5cf6",onChange:l=>K({...h,secondaryColor:l.target.value}),className:"w-12 h-12 rounded-lg border border-slate-700 cursor-pointer"}),r.default.createElement("input",{type:"text",value:h?.secondaryColor||"#8b5cf6",onChange:l=>K({...h,secondaryColor:l.target.value}),className:"input-cyber flex-1 p-3 font-mono"}))),r.default.createElement("div",null,r.default.createElement("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-2 block"},"Color Acento"),r.default.createElement("div",{className:"flex gap-3 items-center"},r.default.createElement("input",{type:"color",value:h?.accentColor||"#22c55e",onChange:l=>K({...h,accentColor:l.target.value}),className:"w-12 h-12 rounded-lg border border-slate-700 cursor-pointer"}),r.default.createElement("input",{type:"text",value:h?.accentColor||"#22c55e",onChange:l=>K({...h,accentColor:l.target.value}),className:"input-cyber flex-1 p-3 font-mono"}))))),r.default.createElement("div",{className:"bg-[#0a0a0a] border border-slate-800 p-5 md:p-8 rounded-[2rem]"},r.default.createElement("h3",{className:"text-xl font-bold text-white mb-6 flex items-center gap-2"},r.default.createElement(qs,{className:"w-5 h-5 text-orange-400"})," Ticker de Marca"),r.default.createElement("div",{className:"space-y-6"},r.default.createElement("div",{className:"flex items-center justify-between p-4 bg-slate-900/50 rounded-xl border border-slate-800"},r.default.createElement("div",null,r.default.createElement("p",{className:"font-bold text-white"},"Mostrar Ticker"),r.default.createElement("p",{className:"text-xs text-slate-500"},"Activar/desactivar la cinta de texto animada.")),r.default.createElement("button",{onClick:()=>K({...h,showBrandTicker:h?.showBrandTicker===!1}),className:`w-14 h-8 rounded-full transition relative ${h?.showBrandTicker!==!1?"bg-orange-500":"bg-slate-700"}`},r.default.createElement("div",{className:`absolute top-1 w-6 h-6 bg-white rounded-full transition ${h?.showBrandTicker!==!1?"left-7":"left-1"}`}))),r.default.createElement("div",null,r.default.createElement("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-2 block"},"Texto del Ticker"),r.default.createElement("input",{className:"input-cyber w-full p-3",value:h?.tickerText||"",onChange:l=>K({...h,tickerText:l.target.value}),placeholder:"TECNOLOGA  INNOVACIN  CALIDAD PREMIUM  FUTURO"}),r.default.createElement("p",{className:"text-xs text-slate-500 mt-2"},"Este texto se repetir en bucle.")),r.default.createElement("div",null,r.default.createElement("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-2 block"},"Velocidad del Ticker (segundos)"),r.default.createElement("div",{className:"flex items-center gap-4"},r.default.createElement("input",{type:"range",min:"10",max:"150",step:"5",className:"w-full accent-orange-500 h-2 bg-slate-800 rounded-lg appearance-none cursor-pointer",value:h?.tickerSpeed||60,onChange:l=>K({...h,tickerSpeed:parseInt(l.target.value)})}),r.default.createElement("span",{className:"text-white font-bold min-w-[3rem] text-right"},h?.tickerSpeed||60,"s")),r.default.createElement("p",{className:"text-xs text-slate-500 mt-2"},"Un nmero mayor hace que se mueva ms lento (Por defecto: 60s).")))),r.default.createElement("div",{className:"bg-[#0a0a0a] border border-slate-800 p-5 md:p-8 rounded-[2rem]"},r.default.createElement("h3",{className:"text-xl font-bold text-white mb-6 flex items-center gap-2"},r.default.createElement(js,{className:"w-5 h-5 text-purple-400"})," Banner Principal (Hero)"),r.default.createElement("div",{className:"space-y-6"},r.default.createElement("div",null,r.default.createElement("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-2 block"},"Badge/Etiqueta"),r.default.createElement("input",{className:"input-cyber w-full p-3",value:h?.heroBadge||"",onChange:l=>K({...h,heroBadge:l.target.value}),placeholder:"Nueva Coleccin 2026"})),r.default.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},r.default.createElement("div",null,r.default.createElement("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-2 block"},"Ttulo Lnea 1"),r.default.createElement("input",{className:"input-cyber w-full p-3",value:h?.heroTitle1||"",onChange:l=>K({...h,heroTitle1:l.target.value}),placeholder:"TECNOLOGA"})),r.default.createElement("div",null,r.default.createElement("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-2 block"},"Ttulo Lnea 2"),r.default.createElement("input",{className:"input-cyber w-full p-3",value:h?.heroTitle2||"",onChange:l=>K({...h,heroTitle2:l.target.value}),placeholder:"DEL FUTURO"}))),r.default.createElement("div",null,r.default.createElement("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-2 block"},"Subttulo"),r.default.createElement("textarea",{className:"input-cyber w-full p-3 h-20 resize-none",value:h?.heroSubtitle||"",onChange:l=>K({...h,heroSubtitle:l.target.value}),placeholder:"Explora nuestra seleccin premium. Calidad garantizada y soporte tcnico especializado."})),r.default.createElement("div",null,r.default.createElement("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-2 block"},"Imagen de Fondo"),r.default.createElement("input",{type:"file",accept:"image/*",onChange:l=>qo(l,K,"heroUrl"),className:"block w-full text-sm text-slate-400 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-purple-900/20 file:text-purple-400 hover:file:bg-purple-900/40 transition"}),h?.heroUrl&&r.default.createElement("div",{className:"mt-4 rounded-xl overflow-hidden border border-slate-700 h-32"},r.default.createElement("img",{src:h.heroUrl,className:"w-full h-full object-cover",alt:"Hero Preview"})),r.default.createElement("p",{className:"text-xs text-slate-500 mt-2"},"Recomendado: 2400x1000 px mnimo para mxima nitidez")))),r.default.createElement("div",{className:"bg-[#0a0a0a] border border-slate-800 p-5 md:p-8 rounded-[2rem]"},r.default.createElement("h3",{className:"text-xl font-bold text-white mb-6 flex items-center gap-2"},r.default.createElement(Ho,{className:"w-5 h-5 text-yellow-400"})," Beneficios Destacados"),r.default.createElement("div",{className:"space-y-6"},r.default.createElement("div",{className:"flex items-center justify-between p-4 bg-slate-900/50 rounded-xl border border-slate-800"},r.default.createElement("div",null,r.default.createElement("p",{className:"font-bold text-white"},"Mostrar Seccin de Beneficios"),r.default.createElement("p",{className:"text-xs text-slate-500"},"Activa/desactiva toda la seccin de beneficios")),r.default.createElement("button",{onClick:()=>K({...h,showFeaturesSection:h?.showFeaturesSection===!1}),className:`w-14 h-7 rounded-full transition-all duration-300 relative ${h?.showFeaturesSection!==!1?"bg-orange-600":"bg-slate-700"}`},r.default.createElement("div",{className:`w-5 h-5 bg-white rounded-full absolute top-1 transition-all duration-300 shadow-md ${h?.showFeaturesSection!==!1?"left-8":"left-1"}`}))),r.default.createElement("div",{className:`transition-opacity duration-300 ${h?.showFeaturesSection===!1?"opacity-50 pointer-events-none":""}`},r.default.createElement("div",{className:"flex items-center justify-between mb-3"},r.default.createElement("div",{className:"flex items-center gap-2"},r.default.createElement(ir,{className:"w-4 h-4 text-orange-400"}),r.default.createElement("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider block"},"Beneficio 1 (Rayo)")),r.default.createElement("button",{onClick:()=>K({...h,showFeature1:h?.showFeature1===!1}),className:`w-12 h-6 rounded-full transition-all duration-300 relative ${h?.showFeature1!==!1?"bg-orange-600":"bg-slate-700"}`},r.default.createElement("div",{className:`w-4 h-4 bg-white rounded-full absolute top-1 transition-all duration-300 shadow-md ${h?.showFeature1!==!1?"left-7":"left-1"}`}))),r.default.createElement("div",{className:`grid grid-cols-1 md:grid-cols-2 gap-4 ${h?.showFeature1===!1?"opacity-50":""}`},r.default.createElement("input",{className:"input-cyber w-full p-3",value:h?.feature1Title||"",onChange:l=>K({...h,feature1Title:l.target.value}),placeholder:"Envo Ultra Rpido",disabled:h?.showFeature1===!1}),r.default.createElement("input",{className:"input-cyber w-full p-3",value:h?.feature1Desc||"",onChange:l=>K({...h,feature1Desc:l.target.value}),placeholder:"Subttulo corto...",disabled:h?.showFeature1===!1}))),r.default.createElement("div",{className:`transition-opacity duration-300 ${h?.showFeaturesSection===!1?"opacity-50 pointer-events-none":""}`},r.default.createElement("div",{className:"flex items-center justify-between mb-3"},r.default.createElement("div",{className:"flex items-center gap-2"},r.default.createElement(Bn,{className:"w-4 h-4 text-purple-400"}),r.default.createElement("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider block"},"Beneficio 2 (Escudo)")),r.default.createElement("button",{onClick:()=>K({...h,showFeature2:h?.showFeature2===!1}),className:`w-12 h-6 rounded-full transition-all duration-300 relative ${h?.showFeature2!==!1?"bg-purple-600":"bg-slate-700"}`},r.default.createElement("div",{className:`w-4 h-4 bg-white rounded-full absolute top-1 transition-all duration-300 shadow-md ${h?.showFeature2!==!1?"left-7":"left-1"}`}))),r.default.createElement("div",{className:`grid grid-cols-1 md:grid-cols-2 gap-4 ${h?.showFeature2===!1?"opacity-50":""}`},r.default.createElement("input",{className:"input-cyber w-full p-3",value:h?.feature2Title||"",onChange:l=>K({...h,feature2Title:l.target.value}),placeholder:"Garanta Extendida",disabled:h?.showFeature2===!1}),r.default.createElement("input",{className:"input-cyber w-full p-3",value:h?.feature2Desc||"",onChange:l=>K({...h,feature2Desc:l.target.value}),placeholder:"Subttulo corto...",disabled:h?.showFeature2===!1}))),r.default.createElement("div",{className:`transition-opacity duration-300 ${h?.showFeaturesSection===!1?"opacity-50 pointer-events-none":""}`},r.default.createElement("div",{className:"flex items-center justify-between mb-3"},r.default.createElement("div",{className:"flex items-center gap-2"},r.default.createElement(n0,{className:"w-4 h-4 text-green-400"}),r.default.createElement("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider block"},"Beneficio 3 (Soporte)")),r.default.createElement("button",{onClick:()=>K({...h,showFeature3:h?.showFeature3===!1}),className:`w-12 h-6 rounded-full transition-all duration-300 relative ${h?.showFeature3!==!1?"bg-green-600":"bg-slate-700"}`},r.default.createElement("div",{className:`w-4 h-4 bg-white rounded-full absolute top-1 transition-all duration-300 shadow-md ${h?.showFeature3!==!1?"left-7":"left-1"}`}))),r.default.createElement("div",{className:`grid grid-cols-1 md:grid-cols-2 gap-4 ${h?.showFeature3===!1?"opacity-50":""}`},r.default.createElement("input",{className:"input-cyber w-full p-3",value:h?.feature3Title||"",onChange:l=>K({...h,feature3Title:l.target.value}),placeholder:"Soporte 24/7",disabled:h?.showFeature3===!1}),r.default.createElement("input",{className:"input-cyber w-full p-3",value:h?.feature3Desc||"",onChange:l=>K({...h,feature3Desc:l.target.value}),placeholder:"Subttulo corto...",disabled:h?.showFeature3===!1}))))),r.default.createElement("div",{className:"bg-[#0a0a0a] border border-slate-800 p-5 md:p-8 rounded-[2rem]"},r.default.createElement("h3",{className:"text-xl font-bold text-white mb-6 flex items-center gap-2"},r.default.createElement(ko,{className:"w-5 h-5 text-green-400"})," Seccin Contacto (Footer)"),r.default.createElement("div",{className:"space-y-6"},r.default.createElement("div",{className:"flex items-center justify-between p-4 bg-slate-900/50 rounded-xl border border-slate-800"},r.default.createElement("div",null,r.default.createElement("p",{className:"font-bold text-white"},"Mostrar Seccin"),r.default.createElement("p",{className:"text-xs text-slate-500"},"Activa/desactiva la seccin de contacto en el footer")),r.default.createElement("button",{onClick:()=>K({...h,showFooterContact:h?.showFooterContact===!1}),className:`w-14 h-8 rounded-full transition relative ${h?.showFooterContact!==!1?"bg-green-500":"bg-slate-700"}`},r.default.createElement("div",{className:`absolute top-1 w-6 h-6 bg-white rounded-full transition ${h?.showFooterContact!==!1?"left-7":"left-1"}`}))),r.default.createElement("div",null,r.default.createElement("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-2 block"},"Ttulo"),r.default.createElement("input",{className:"input-cyber w-full p-3",value:h?.footerContactTitle||"",onChange:l=>K({...h,footerContactTitle:l.target.value}),placeholder:"Contacto"})),r.default.createElement("div",null,r.default.createElement("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-2 block"},"Descripcin"),r.default.createElement("input",{className:"input-cyber w-full p-3",value:h?.footerContactDescription||"",onChange:l=>K({...h,footerContactDescription:l.target.value}),placeholder:"Tienes alguna duda? Estamos aqu para ayudarte."})),r.default.createElement("div",null,r.default.createElement("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-2 block"},"Texto del Botn"),r.default.createElement("input",{className:"input-cyber w-full p-3",value:h?.footerContactButtonText||"",onChange:l=>K({...h,footerContactButtonText:l.target.value}),placeholder:"Contactar Soporte"})),r.default.createElement("div",null,r.default.createElement("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-2 block"},"Tipo de Contacto"),r.default.createElement("select",{className:"input-cyber w-full p-3",value:h?.footerContactType||"whatsapp",onChange:l=>K({...h,footerContactType:l.target.value})},r.default.createElement("option",{value:"whatsapp"},"WhatsApp"),r.default.createElement("option",{value:"instagram"},"Instagram"),r.default.createElement("option",{value:"email"},"Email")),(!h?.footerContactType||h?.footerContactType==="whatsapp")&&r.default.createElement("div",{className:"mt-3 animate-fade-in"},r.default.createElement("label",{className:"text-[10px] font-bold text-green-500 uppercase tracking-wider mb-1 block"},"Enlace de WhatsApp"),r.default.createElement("input",{className:"input-cyber w-full p-3 text-sm border-green-500/30 focus:border-green-500",value:h?.whatsappLink||"",onChange:l=>K({...h,whatsappLink:l.target.value}),placeholder:"https://wa.me/54911..."})),h?.footerContactType==="instagram"&&r.default.createElement("div",{className:"mt-3 animate-fade-in"},r.default.createElement("label",{className:"text-[10px] font-bold text-pink-500 uppercase tracking-wider mb-1 block"},"Perfil de Instagram"),r.default.createElement("input",{className:"input-cyber w-full p-3 text-sm border-pink-500/30 focus:border-pink-500",value:h?.instagramLink||"",onChange:l=>K({...h,instagramLink:l.target.value}),placeholder:"https://instagram.com/usuario"})),h?.footerContactType==="email"&&r.default.createElement("div",{className:"mt-3 animate-fade-in"},r.default.createElement("label",{className:"text-[10px] font-bold text-blue-500 uppercase tracking-wider mb-1 block"},"Email de Soporte"),r.default.createElement("input",{className:"input-cyber w-full p-3 text-sm border-blue-500/30 focus:border-blue-500",value:h?.storeEmail||"",onChange:l=>K({...h,storeEmail:l.target.value}),placeholder:"soporte@tienda.com"}))))),r.default.createElement("div",{className:"bg-[#0a0a0a] border border-slate-800 p-5 md:p-8 rounded-[2rem]"},r.default.createElement("h3",{className:"text-xl font-bold text-white mb-6 flex items-center gap-2"},r.default.createElement(Wo,{className:"w-5 h-5 text-orange-400"})," Marca en Footer"),r.default.createElement("div",{className:"space-y-6"},r.default.createElement("div",null,r.default.createElement("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-2 block"},"Sufijo del Nombre"),r.default.createElement("input",{className:"input-cyber w-full p-3",value:h?.footerSuffix||"",onChange:l=>K({...h,footerSuffix:l.target.value}),placeholder:".SF"}),r.default.createElement("p",{className:"text-xs text-slate-500 mt-1"},"Aparece junto al nombre de la tienda (ej: SUSTORE.SF)")),r.default.createElement("div",null,r.default.createElement("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-2 block"},"Descripcin"),r.default.createElement("textarea",{className:"input-cyber w-full p-3 h-24 resize-none",value:h?.footerDescription||"",onChange:l=>K({...h,footerDescription:l.target.value}),placeholder:"Tu destino premium para tecnologa de vanguardia..."})))),r.default.createElement("div",{className:"bg-[#0a0a0a] border border-slate-800 p-5 md:p-8 rounded-[2rem]"},r.default.createElement("h3",{className:"text-xl font-bold text-white mb-6 flex items-center gap-2"},r.default.createElement(ih,{className:"w-5 h-5 text-slate-400"})," Links Legales"),r.default.createElement("div",{className:"space-y-4"},r.default.createElement("div",{className:"flex items-center justify-between p-4 bg-slate-900/50 rounded-xl border border-slate-800"},r.default.createElement("div",null,r.default.createElement("p",{className:"font-bold text-white"},"Poltica de Privacidad"),r.default.createElement("p",{className:"text-xs text-slate-500"},"Mostrar link en el footer")),r.default.createElement("button",{onClick:()=>K({...h,showPrivacyPolicy:h?.showPrivacyPolicy===!1}),className:`w-14 h-8 rounded-full transition relative ${h?.showPrivacyPolicy!==!1?"bg-green-500":"bg-slate-700"}`},r.default.createElement("div",{className:`absolute top-1 w-6 h-6 bg-white rounded-full transition ${h?.showPrivacyPolicy!==!1?"left-7":"left-1"}`}))),r.default.createElement("div",{className:"flex items-center justify-between p-4 bg-slate-900/50 rounded-xl border border-slate-800"},r.default.createElement("div",null,r.default.createElement("p",{className:"font-bold text-white"},"Terms of Service"),r.default.createElement("p",{className:"text-xs text-slate-500"},"Mostrar link en el footer")),r.default.createElement("button",{onClick:()=>K({...h,showTermsOfService:h?.showTermsOfService===!1}),className:`w-14 h-8 rounded-full transition relative ${h?.showTermsOfService!==!1?"bg-green-500":"bg-slate-700"}`},r.default.createElement("div",{className:`absolute top-1 w-6 h-6 bg-white rounded-full transition ${h?.showTermsOfService!==!1?"left-7":"left-1"}`})))))),In==="ticket"&&r.default.createElement("div",{className:"space-y-6 animate-fade-up"},r.default.createElement("div",{className:"bg-[#0a0a0a] border border-slate-800 p-8 rounded-[2rem]"},r.default.createElement("h3",{className:"text-xl font-bold text-white mb-6 flex items-center gap-2"},r.default.createElement(Gs,{className:"w-5 h-5 text-orange-400"})," Ticket / Comprobante"),r.default.createElement("p",{className:"text-sm text-slate-500 mb-6"},"Estos datos se usan en el comprobante que se enva por email al confirmar la compra."),r.default.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6"},r.default.createElement("div",null,r.default.createElement("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-2 block"},"Nombre que aparece en el ticket"),r.default.createElement("input",{className:"input-cyber w-full p-4",value:h?.ticket?.brandName||"",onChange:l=>K({...h,ticket:{...h?.ticket,brandName:l.target.value}}),placeholder:h?.storeName||"Mi Tienda"})),r.default.createElement("div",null,r.default.createElement("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-2 block"},"Link de WhatsApp (para el ticket)"),r.default.createElement("input",{className:"input-cyber w-full p-4",value:h?.ticket?.whatsappLink||"",onChange:l=>K({...h,ticket:{...h?.ticket,whatsappLink:l.target.value}}),placeholder:h?.whatsappLink||"https://wa.me/5491112345678"})),r.default.createElement("div",{className:"md:col-span-2"},r.default.createElement("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-2 block"},"Link de la pgina (para el ticket)"),r.default.createElement("input",{className:"input-cyber w-full p-4",value:h?.ticket?.siteUrl||"",onChange:l=>K({...h,ticket:{...h?.ticket,siteUrl:l.target.value}}),placeholder:h?.seoUrl||""}))))),In==="social"&&r.default.createElement("div",{className:"space-y-6 animate-fade-up"},r.default.createElement("div",{className:"bg-[#0a0a0a] border border-slate-800 p-8 rounded-[2rem]"},r.default.createElement("h3",{className:"text-xl font-bold text-white mb-6 flex items-center gap-2"},r.default.createElement(m0,{className:"w-5 h-5 text-blue-400"})," Redes Sociales"),r.default.createElement("p",{className:"text-sm text-slate-500 mb-6"},"Configura los enlaces y activa/desactiva la visibilidad de cada red social en el footer."),r.default.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6"},r.default.createElement("div",{className:"p-4 bg-slate-900/50 rounded-xl border border-slate-800"},r.default.createElement("div",{className:"flex items-center justify-between mb-3"},r.default.createElement("label",{className:"text-sm font-bold text-white flex items-center gap-2"},r.default.createElement(ko,{className:"w-4 h-4 text-green-400"})," WhatsApp"),r.default.createElement("div",{className:"flex items-center gap-2"},r.default.createElement("span",{className:"text-[10px] text-slate-500 font-mono uppercase"},"Footer"),r.default.createElement("button",{onClick:()=>K({...h,showWhatsapp:!h?.showWhatsapp}),className:`w-10 h-5 rounded-full transition relative ${h?.showWhatsapp===!0?"bg-green-500":"bg-slate-700"}`},r.default.createElement("div",{className:"absolute top-0.5 w-4 h-4 bg-white rounded-full transition",style:{left:h?.showWhatsapp===!0?"22px":"2px"}})))),r.default.createElement("input",{className:"input-cyber w-full p-3 text-sm mb-3",value:h?.whatsappLink||"",onChange:l=>K({...h,whatsappLink:l.target.value}),placeholder:"https://wa.me/5491112345678"}),r.default.createElement("div",{className:"flex items-center justify-between pt-3 border-t border-slate-800/50"},r.default.createElement("div",null,r.default.createElement("p",{className:"text-xs text-slate-400 font-bold flex items-center gap-2"},"Botn Flotante",!["business","premium"].includes(h?.subscriptionPlan)&&r.default.createElement(Tr,{className:"w-3 h-3 text-yellow-500"})),!["business","premium"].includes(h?.subscriptionPlan)&&r.default.createElement("p",{className:"text-[9px] text-yellow-500/80 mt-0.5"},"Requiere Plan Negocio")),r.default.createElement("button",{onClick:()=>{["business","premium"].includes(h?.subscriptionPlan)?K({...h,showFloatingWhatsapp:!h?.showFloatingWhatsapp}):_e(!0)},className:`w-10 h-5 rounded-full transition relative ${h?.showFloatingWhatsapp?"bg-green-500":"bg-slate-700"} ${["business","premium"].includes(h?.subscriptionPlan)?"":"opacity-50 cursor-not-allowed"}`},r.default.createElement("div",{className:"absolute top-0.5 w-4 h-4 bg-white rounded-full transition",style:{left:h?.showFloatingWhatsapp?"22px":"2px"}}))),r.default.createElement("div",{className:"flex items-center justify-between pt-3 mt-3 border-t border-slate-800/50"},r.default.createElement("div",null,r.default.createElement("p",{className:"text-xs text-slate-400 font-bold"},"Botn en Carrito"),r.default.createElement("p",{className:"text-[9px] text-slate-500 mt-0.5"},"Terminar compra por WhatsApp")),r.default.createElement("button",{onClick:()=>K({...h,showCartWhatsappCheckout:!h?.showCartWhatsappCheckout}),className:`w-10 h-5 rounded-full transition relative ${h?.showCartWhatsappCheckout?"bg-green-500":"bg-slate-700"}`},r.default.createElement("div",{className:"absolute top-0.5 w-4 h-4 bg-white rounded-full transition",style:{left:h?.showCartWhatsappCheckout?"22px":"2px"}})))),r.default.createElement("div",{className:"p-4 bg-slate-900/50 rounded-xl border border-slate-800"},r.default.createElement("div",{className:"flex items-center justify-between mb-3"},r.default.createElement("label",{className:"text-sm font-bold text-white flex items-center gap-2"},r.default.createElement(cl,{className:"w-4 h-4 text-pink-400"})," Instagram"),r.default.createElement("button",{onClick:()=>K({...h,showInstagram:h?.showInstagram===!1}),className:`w-12 h-6 rounded-full transition relative ${h?.showInstagram!==!1?"bg-pink-500":"bg-slate-700"}`},r.default.createElement("div",{className:`absolute top-0.5 w-5 h-5 bg-white rounded-full transition ${h?.showInstagram!==!1?"left-6":"left-0.5"}`}))),r.default.createElement("input",{className:"input-cyber w-full p-3 text-sm",value:h?.instagramLink||"",onChange:l=>K({...h,instagramLink:l.target.value}),placeholder:"https://instagram.com/mitienda"})),r.default.createElement("div",{className:"p-4 bg-slate-900/50 rounded-xl border border-slate-800"},r.default.createElement("div",{className:"flex items-center justify-between mb-3"},r.default.createElement("label",{className:"text-sm font-bold text-white flex items-center gap-2"},r.default.createElement(e0,{className:"w-4 h-4 text-blue-500"})," Facebook"),r.default.createElement("button",{onClick:()=>K({...h,showFacebook:!h?.showFacebook}),className:`w-12 h-6 rounded-full transition relative ${h?.showFacebook?"bg-blue-500":"bg-slate-700"}`},r.default.createElement("div",{className:`absolute top-0.5 w-5 h-5 bg-white rounded-full transition ${h?.showFacebook?"left-6":"left-0.5"}`}))),r.default.createElement("input",{className:"input-cyber w-full p-3 text-sm",value:h?.facebookLink||"",onChange:l=>K({...h,facebookLink:l.target.value}),placeholder:"https://facebook.com/mitienda"})),r.default.createElement("div",{className:"p-4 bg-slate-900/50 rounded-xl border border-slate-800"},r.default.createElement("div",{className:"flex items-center justify-between mb-3"},r.default.createElement("label",{className:"text-sm font-bold text-white flex items-center gap-2"},r.default.createElement(p0,{className:"w-4 h-4 text-sky-400"})," Twitter/X"),r.default.createElement("button",{onClick:()=>K({...h,showTwitter:!h?.showTwitter}),className:`w-12 h-6 rounded-full transition relative ${h?.showTwitter?"bg-sky-500":"bg-slate-700"}`},r.default.createElement("div",{className:`absolute top-0.5 w-5 h-5 bg-white rounded-full transition ${h?.showTwitter?"left-6":"left-0.5"}`}))),r.default.createElement("input",{className:"input-cyber w-full p-3 text-sm",value:h?.twitterLink||"",onChange:l=>K({...h,twitterLink:l.target.value}),placeholder:"https://twitter.com/mitienda"})),r.default.createElement("div",{className:"p-4 bg-slate-900/50 rounded-xl border border-slate-800"},r.default.createElement("div",{className:"flex items-center justify-between mb-3"},r.default.createElement("label",{className:"text-sm font-bold text-white flex items-center gap-2"},r.default.createElement(a0,{className:"w-4 h-4 text-rose-400"})," TikTok"),r.default.createElement("button",{onClick:()=>K({...h,showTiktok:!h?.showTiktok}),className:`w-12 h-6 rounded-full transition relative ${h?.showTiktok?"bg-rose-500":"bg-slate-700"}`},r.default.createElement("div",{className:`absolute top-0.5 w-5 h-5 bg-white rounded-full transition ${h?.showTiktok?"left-6":"left-0.5"}`}))),r.default.createElement("input",{className:"input-cyber w-full p-3 text-sm",value:h?.tiktokLink||"",onChange:l=>K({...h,tiktokLink:l.target.value}),placeholder:"https://tiktok.com/@mitienda"})),r.default.createElement("div",{className:"p-4 bg-slate-900/50 rounded-xl border border-slate-800"},r.default.createElement("div",{className:"flex items-center justify-between mb-3"},r.default.createElement("label",{className:"text-sm font-bold text-white flex items-center gap-2"},r.default.createElement(v0,{className:"w-4 h-4 text-red-500"})," YouTube"),r.default.createElement("button",{onClick:()=>K({...h,showYoutube:!h?.showYoutube}),className:`w-12 h-6 rounded-full transition relative ${h?.showYoutube?"bg-red-500":"bg-slate-700"}`},r.default.createElement("div",{className:`absolute top-0.5 w-5 h-5 bg-white rounded-full transition ${h?.showYoutube?"left-6":"left-0.5"}`}))),r.default.createElement("input",{className:"input-cyber w-full p-3 text-sm",value:h?.youtubeLink||"",onChange:l=>K({...h,youtubeLink:l.target.value}),placeholder:"https://youtube.com/c/mitienda"}))))),In==="payments"&&r.default.createElement("div",{className:"space-y-6 animate-fade-up"},r.default.createElement("div",{className:"bg-[#0a0a0a] border border-slate-800 p-8 rounded-[2rem]"},r.default.createElement("h3",{className:"text-xl font-bold text-white mb-6 flex items-center gap-2"},r.default.createElement(Us,{className:"w-5 h-5 text-green-400"})," Mtodos de Pago"),r.default.createElement("div",{className:"space-y-6"},r.default.createElement("div",{className:"bg-slate-900/50 p-6 rounded-2xl border border-slate-800"},r.default.createElement("div",{className:"flex items-center justify-between"},r.default.createElement("div",{className:"flex items-center gap-3"},r.default.createElement(Xf,{className:"w-6 h-6 text-orange-400"}),r.default.createElement("div",null,r.default.createElement("p",{className:"font-bold text-white"},"Transferencia Bancaria"),r.default.createElement("p",{className:"text-xs text-slate-500"},"Activado / Desactivado"))),r.default.createElement("button",{onClick:()=>K({...h,paymentTransfer:{...h?.paymentTransfer,enabled:!h?.paymentTransfer?.enabled}}),className:`w-14 h-8 rounded-full transition relative ${h?.paymentTransfer?.enabled?"bg-green-500":"bg-slate-700"}`},r.default.createElement("div",{className:`absolute top-1 w-6 h-6 bg-white rounded-full transition ${h?.paymentTransfer?.enabled?"left-7":"left-1"}`}))),h?.paymentTransfer?.enabled&&r.default.createElement("div",{className:"mt-5 grid grid-cols-1 md:grid-cols-3 gap-4"},r.default.createElement("div",null,r.default.createElement("label",{className:"text-xs font-bold text-slate-400 uppercase ml-2 mb-1 block"},"Titular"),r.default.createElement("input",{className:"input-cyber w-full p-3 text-sm",value:h?.paymentTransfer?.holderName||"",onChange:l=>K({...h,paymentTransfer:{...h?.paymentTransfer,holderName:l.target.value}}),placeholder:"Nombre y apellido"})),r.default.createElement("div",null,r.default.createElement("label",{className:"text-xs font-bold text-slate-400 uppercase ml-2 mb-1 block"},"Alias"),r.default.createElement("input",{className:"input-cyber w-full p-3 text-sm",value:h?.paymentTransfer?.alias||"",onChange:l=>K({...h,paymentTransfer:{...h?.paymentTransfer,alias:l.target.value}}),placeholder:"alias.ejemplo"})),r.default.createElement("div",null,r.default.createElement("label",{className:"text-xs font-bold text-slate-400 uppercase ml-2 mb-1 block"},"CBU"),r.default.createElement("input",{className:"input-cyber w-full p-3 text-sm",value:h?.paymentTransfer?.cbu||"",onChange:l=>K({...h,paymentTransfer:{...h?.paymentTransfer,cbu:l.target.value}}),placeholder:"0000000000000000000000"})))),r.default.createElement("div",{className:"bg-slate-900/50 p-6 rounded-2xl border border-slate-800"},r.default.createElement("div",{className:"flex items-center justify-between"},r.default.createElement("div",{className:"flex items-center gap-3"},r.default.createElement(Qf,{className:"w-6 h-6 text-green-400"}),r.default.createElement("div",null,r.default.createElement("p",{className:"font-bold text-white"},"Efectivo"),r.default.createElement("p",{className:"text-xs text-slate-500"},"Pago al recibir"))),r.default.createElement("button",{onClick:()=>{if(!h?.shippingPickup?.enabled){F('Debes activar "Retiro en Local" (Envos) para habilitar efectivo.',"warning");return}K({...h,paymentCash:!h?.paymentCash})},className:`w-14 h-8 rounded-full transition relative ${h?.paymentCash&&h?.shippingPickup?.enabled?"bg-green-500":"bg-slate-700"} ${h?.shippingPickup?.enabled?"":"opacity-50 cursor-not-allowed"}`},r.default.createElement("div",{className:`absolute top-1 w-6 h-6 bg-white rounded-full transition ${h?.paymentCash&&h?.shippingPickup?.enabled?"left-7":"left-1"}`}))),!h?.shippingPickup?.enabled&&r.default.createElement("p",{className:"text-[10px] text-orange-400/80 mt-2 flex items-center gap-1"},r.default.createElement(Gi,{className:"w-3 h-3"})," Requiere activar Retiro en Local")),r.default.createElement("div",{className:"bg-slate-900/50 p-6 rounded-2xl border border-slate-800"},r.default.createElement("div",{className:"flex items-center justify-between"},r.default.createElement("div",{className:"flex items-center gap-3"},r.default.createElement(Us,{className:"w-6 h-6 text-orange-400"}),r.default.createElement("div",null,r.default.createElement("p",{className:"font-bold text-white"},"Tarjeta (Mercado Pago)"),r.default.createElement("p",{className:"text-xs text-slate-500"},"Activado / Desactivado"))),r.default.createElement("button",{onClick:()=>K({...h,paymentMercadoPago:{...h?.paymentMercadoPago,enabled:!h?.paymentMercadoPago?.enabled}}),className:`w-14 h-8 rounded-full transition relative ${h?.paymentMercadoPago?.enabled?"bg-green-500":"bg-slate-700"}`},r.default.createElement("div",{className:`absolute top-1 w-6 h-6 bg-white rounded-full transition ${h?.paymentMercadoPago?.enabled?"left-7":"left-1"}`}))))))),In==="shipping"&&r.default.createElement("div",{className:"space-y-6 animate-fade-up"},r.default.createElement("div",{className:"bg-[#0a0a0a] border border-slate-800 p-8 rounded-[2rem]"},r.default.createElement("h3",{className:"text-xl font-bold text-white mb-6 flex items-center gap-2"},r.default.createElement(ss,{className:"w-5 h-5 text-orange-400"})," Opciones de Envo"),r.default.createElement("div",{className:"space-y-6"},r.default.createElement("div",{className:"bg-slate-900/50 p-6 rounded-2xl border border-slate-800"},r.default.createElement("div",{className:"flex items-center justify-between mb-4"},r.default.createElement("div",{className:"flex items-center gap-3"},r.default.createElement(s0,{className:"w-6 h-6 text-orange-400"}),r.default.createElement("div",null,r.default.createElement("p",{className:"font-bold text-white"},"Retiro en Local"),r.default.createElement("p",{className:"text-xs text-slate-500"},"El cliente pasa a buscar"))),r.default.createElement("button",{onClick:()=>K({...h,shippingPickup:{...h?.shippingPickup,enabled:!h?.shippingPickup?.enabled}}),className:`w-14 h-8 rounded-full transition relative ${h?.shippingPickup?.enabled?"bg-green-500":"bg-slate-700"}`},r.default.createElement("div",{className:`absolute top-1 w-6 h-6 bg-white rounded-full transition ${h?.shippingPickup?.enabled?"left-7":"left-1"}`}))),h?.shippingPickup?.enabled&&r.default.createElement("input",{className:"input-cyber w-full p-4",value:h?.shippingPickup?.address||"",onChange:l=>K({...h,shippingPickup:{...h?.shippingPickup,address:l.target.value}}),placeholder:"Direccin de retiro: Av. Corrientes 1234"})),r.default.createElement("div",{className:"bg-slate-900/50 p-6 rounded-2xl border border-slate-800"},r.default.createElement("div",{className:"flex items-center justify-between mb-4"},r.default.createElement("div",{className:"flex items-center gap-3"},r.default.createElement(sr,{className:"w-6 h-6 text-purple-400"}),r.default.createElement("div",null,r.default.createElement("p",{className:"font-bold text-white"},"Envo a Domicilio"),r.default.createElement("p",{className:"text-xs text-slate-500"},"Delivery estndar"))),r.default.createElement("button",{onClick:()=>K({...h,shippingDelivery:{...h?.shippingDelivery,enabled:!h?.shippingDelivery?.enabled}}),className:`w-14 h-8 rounded-full transition relative ${h?.shippingDelivery?.enabled?"bg-green-500":"bg-slate-700"}`},r.default.createElement("div",{className:`absolute top-1 w-6 h-6 bg-white rounded-full transition ${h?.shippingDelivery?.enabled?"left-7":"left-1"}`}))),h?.shippingDelivery?.enabled&&r.default.createElement("div",{className:"grid grid-cols-2 gap-4"},r.default.createElement("div",null,r.default.createElement("label",{className:"text-xs text-slate-500 mb-1 block"},"Costo de Envo ($)"),r.default.createElement("input",{type:"number",className:"input-cyber w-full p-4",value:h?.shippingDelivery?.fee||0,onChange:l=>K({...h,shippingDelivery:{...h?.shippingDelivery,fee:parseFloat(l.target.value)||0}})})),r.default.createElement("div",null,r.default.createElement("label",{className:"text-xs text-slate-500 mb-1 block"},"Gratis desde ($)"),r.default.createElement("input",{type:"number",className:"input-cyber w-full p-4",value:h?.shippingDelivery?.freeAbove||0,onChange:l=>K({...h,shippingDelivery:{...h?.shippingDelivery,freeAbove:parseFloat(l.target.value)||0}}),placeholder:"0 = nunca gratis"}))))))),In==="seo"&&r.default.createElement("div",{className:"space-y-6 animate-fade-up"},r.default.createElement("div",{className:"bg-[#0a0a0a] border border-slate-800 p-8 rounded-[2rem]"},r.default.createElement("h3",{className:"text-xl font-bold text-white mb-6 flex items-center gap-2"},r.default.createElement(oh,{className:"w-5 h-5 text-green-400"})," Optimizacin SEO"),r.default.createElement("div",{className:"space-y-6"},r.default.createElement("div",null,r.default.createElement("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-2 block"},"Ttulo del Sitio"),r.default.createElement("input",{className:"input-cyber w-full p-4",value:h?.seoTitle||"",onChange:l=>K({...h,seoTitle:l.target.value}),placeholder:"Mi Tienda Online | Los Mejores Productos"}),r.default.createElement("p",{className:"text-xs text-slate-500 mt-1"},"Aparece en la pestaa del navegador")),r.default.createElement("div",null,r.default.createElement("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-2 block"},"Meta Descripcin"),r.default.createElement("textarea",{className:"input-cyber w-full p-4 h-20 resize-none",value:h?.seoDescription||"",onChange:l=>K({...h,seoDescription:l.target.value}),placeholder:"Tienda online de productos de alta calidad. Envos a todo el pas. Visitanos!"}),r.default.createElement("p",{className:"text-xs text-slate-500 mt-1"},"Descripcin que aparece en Google (max 160 caracteres)")),r.default.createElement("div",null,r.default.createElement("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-2 block"},"Palabras Clave"),r.default.createElement("input",{className:"input-cyber w-full p-4",value:h?.seoKeywords||"",onChange:l=>K({...h,seoKeywords:l.target.value}),placeholder:"tienda online, productos, ofertas, descuentos"}),r.default.createElement("p",{className:"text-xs text-slate-500 mt-1"},"Separadas por comas")),r.default.createElement("div",null,r.default.createElement("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-2 block"},"URL del Sitio (Cannica)"),r.default.createElement("input",{className:"input-cyber w-full p-4",value:h?.seoUrl||"",onChange:l=>K({...h,seoUrl:l.target.value}),placeholder:"https://mitienda.vercel.app"}),r.default.createElement("p",{className:"text-xs text-slate-500 mt-1"},"URL oficial de tu tienda (aparece en Google y redes sociales)")),r.default.createElement("div",null,r.default.createElement("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-2 block"},"Autor / Empresa"),r.default.createElement("input",{className:"input-cyber w-full p-4",value:h?.seoAuthor||"",onChange:l=>K({...h,seoAuthor:l.target.value}),placeholder:"Mi Empresa S.A."}),r.default.createElement("p",{className:"text-xs text-slate-500 mt-1"},"Nombre que aparece como autor del sitio")),r.default.createElement("div",null,r.default.createElement("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-2 block"},"Imagen para Redes Sociales (OG:Image)"),r.default.createElement("div",{className:"flex items-center gap-4"},r.default.createElement("div",{className:"relative group w-32 h-32 bg-slate-900 rounded-xl border-2 border-dashed border-slate-700 hover:border-orange-500 transition flex items-center justify-center overflow-hidden cursor-pointer"},h?.seoImage?r.default.createElement("img",{src:h.seoImage,alt:"SEO Preview",className:"w-full h-full object-cover"}):r.default.createElement(js,{className:"w-8 h-8 text-slate-600 group-hover:text-orange-500 transition"}),r.default.createElement("input",{type:"file",accept:"image/*",className:"absolute inset-0 opacity-0 cursor-pointer z-50",onChange:l=>qo(l,K,"seoImage",1200)}),r.default.createElement("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 flex items-center justify-center transition pointer-events-none"},r.default.createElement(f0,{className:"w-6 h-6 text-white"}))),r.default.createElement("div",{className:"flex-1"},r.default.createElement("p",{className:"text-sm text-slate-400 mb-2"},"Sube una imagen atractiva (ej: logo con fondo, banner)."),r.default.createElement("p",{className:"text-xs text-slate-600"},"Recomendado: 1200x630 pxeles para mejor visualizacin en Facebook/WhatsApp."),h?.seoImage&&r.default.createElement("button",{onClick:()=>K({...h,seoImage:""}),className:"mt-2 text-xs text-red-400 hover:text-red-300 flex items-center gap-1"},r.default.createElement(mt,{className:"w-3 h-3"})," Eliminar imagen")))),r.default.createElement("div",{className:"pt-4 border-t border-slate-800 grid grid-cols-2 gap-4"},r.default.createElement("a",{href:"/sitemap.xml",target:"_blank",className:"p-3 bg-slate-900 rounded-xl hover:bg-slate-800 transition flex items-center justify-between group"},r.default.createElement("div",null,r.default.createElement("p",{className:"text-sm font-bold text-white"},"Ver Sitemap.xml"),r.default.createElement("p",{className:"text-xs text-green-500"},"Activo")),r.default.createElement(Rf,{className:"w-4 h-4 text-slate-500 group-hover:text-white transition"})),r.default.createElement("a",{href:"/robots.txt",target:"_blank",className:"p-3 bg-slate-900 rounded-xl hover:bg-slate-800 transition flex items-center justify-between group"},r.default.createElement("div",null,r.default.createElement("p",{className:"text-sm font-bold text-white"},"Ver Robots.txt"),r.default.createElement("p",{className:"text-xs text-green-500"},"Activo")),r.default.createElement(Rf,{className:"w-4 h-4 text-slate-500 group-hover:text-white transition"})))))),In==="advanced"&&r.default.createElement("div",{className:"space-y-6 animate-fade-up"},r.default.createElement("div",{className:"bg-[#0a0a0a] border border-slate-800 p-8 rounded-[2rem]"},r.default.createElement("h3",{className:"text-xl font-bold text-white mb-6 flex items-center gap-2"},r.default.createElement(Zf,{className:"w-5 h-5 text-slate-400"})," Configuracin Avanzada"),r.default.createElement("div",{className:"space-y-4"},r.default.createElement("div",{className:"flex items-center justify-between p-4 bg-slate-900/50 rounded-xl border border-slate-800"},r.default.createElement("div",null,r.default.createElement("p",{className:"font-bold text-white"},"Modo Mantenimiento"),r.default.createElement("p",{className:"text-xs text-slate-500"},'Mostrar pgina de "Volvemos pronto"')),r.default.createElement("button",{onClick:()=>K({...h,maintenanceMode:!h?.maintenanceMode}),className:`w-14 h-8 rounded-full transition relative ${h?.maintenanceMode?"bg-red-500":"bg-slate-700"}`},r.default.createElement("div",{className:`absolute top-1 w-6 h-6 bg-white rounded-full transition ${h?.maintenanceMode?"left-7":"left-1"}`}))),r.default.createElement("div",{className:"p-4 bg-slate-900/50 rounded-xl border border-slate-800 space-y-4"},r.default.createElement("h4",{className:"text-sm font-bold text-orange-400 uppercase tracking-wider mb-2"},"Rendimiento & PWA"),r.default.createElement("div",{className:"flex items-center justify-between"},r.default.createElement("div",null,r.default.createElement("p",{className:"font-bold text-white"},"Carga Diferida (Lazy Load)"),r.default.createElement("p",{className:"text-xs text-slate-500"},"Mejora velocidad cargando imgenes al hacer scroll")),r.default.createElement("button",{onClick:()=>K({...h,enableLazyLoad:h?.enableLazyLoad===!1}),className:`w-14 h-8 rounded-full transition relative ${h?.enableLazyLoad!==!1?"bg-green-500":"bg-slate-700"}`},r.default.createElement("div",{className:`absolute top-1 w-6 h-6 bg-white rounded-full transition ${h?.enableLazyLoad!==!1?"left-7":"left-1"}`}))),r.default.createElement("div",{className:"flex items-center justify-between"},r.default.createElement("div",null,r.default.createElement("p",{className:"font-bold text-white"},"Modo Offline (PWA)"),r.default.createElement("p",{className:"text-xs text-slate-500"},"Permite instalar la app y uso sin internet")),r.default.createElement("button",{onClick:()=>K({...h,enablePWA:h?.enablePWA===!1}),className:`w-14 h-8 rounded-full transition relative ${h?.enablePWA!==!1?"bg-green-500":"bg-slate-700"}`},r.default.createElement("div",{className:`absolute top-1 w-6 h-6 bg-white rounded-full transition ${h?.enablePWA!==!1?"left-7":"left-1"}`}))),r.default.createElement("div",{className:"pt-2 border-t border-slate-700"},r.default.createElement("button",{onClick:()=>{"caches"in window?caches.keys().then(l=>{l.forEach(m=>caches.delete(m)),F("Cach limpiada. Recargando...","success"),setTimeout(()=>window.location.reload(),1500)}):F("Tu navegador no soporta gestin de cach","warning")},className:"w-full py-2 px-4 bg-slate-800 hover:bg-slate-700 text-white rounded-lg text-sm font-medium transition flex items-center justify-center gap-2"},r.default.createElement(mt,{className:"w-4 h-4"})," Forzar Limpieza de Cach y Recargar"),r.default.createElement("p",{className:"text-xs text-slate-500 mt-2 text-center"},"Usar si ves errores grficos o versiones antiguas.")),r.default.createElement("div",{className:"pt-2 border-t border-slate-700"},r.default.createElement("button",{disabled:At||!w,onClick:()=>Vt("Reparar textos (UTF-8)","Se corregirn caracteres rotos en la configuracin y datos guardados de esta tienda. Continuar?",async()=>{await Xa()}),className:"w-full py-2 px-4 bg-cyan-900/40 hover:bg-cyan-800/50 border border-cyan-500/30 text-cyan-200 rounded-lg text-sm font-medium transition flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed"},At?r.default.createElement(ns,{className:"w-4 h-4 animate-spin"}):r.default.createElement(qs,{className:"w-4 h-4"}),At?"Reparando textos":"Reparar textos (UTF-8)"),r.default.createElement("p",{className:"text-xs text-slate-500 mt-2 text-center"},"Corrige mojibake en Firestore sin modificar el tono de los textos."))),r.default.createElement("div",{className:"p-4 bg-slate-900/50 rounded-xl border border-slate-800"},r.default.createElement("div",{className:"mb-3"},r.default.createElement("p",{className:"font-bold text-white"},"Texto de Carga"),r.default.createElement("p",{className:"text-xs text-slate-500"},"Mensaje que aparece mientras carga la pgina")),r.default.createElement("input",{className:"input-cyber w-full p-3",value:h?.loadingText||"",onChange:l=>K({...h,loadingText:l.target.value}),placeholder:"Cargando sistema..."})),r.default.createElement("div",{className:"flex items-center justify-between p-4 bg-slate-900/50 rounded-xl border border-slate-800"},r.default.createElement("div",null,r.default.createElement("p",{className:"font-bold text-white"},"Banner de Anuncio"),r.default.createElement("p",{className:"text-xs text-slate-500"},"Barra superior con mensaje promocional")),r.default.createElement("button",{onClick:()=>K({...h,showAnnouncementBanner:h?.showAnnouncementBanner===!1}),className:`w-14 h-8 rounded-full transition relative ${h?.showAnnouncementBanner!==!1?"bg-green-500":"bg-slate-700"}`},r.default.createElement("div",{className:`absolute top-1 w-6 h-6 bg-white rounded-full transition ${h?.showAnnouncementBanner!==!1?"left-7":"left-1"}`}))),r.default.createElement("div",{className:"flex items-center justify-between p-4 bg-slate-900/50 rounded-xl border border-slate-800"},r.default.createElement("div",null,r.default.createElement("p",{className:"font-bold text-white"},"Ticker de Marca"),r.default.createElement("p",{className:"text-xs text-slate-500"},"Texto en movimiento debajo del anuncio")),r.default.createElement("button",{onClick:()=>K({...h,showBrandTicker:h?.showBrandTicker===!1}),className:`w-14 h-8 rounded-full transition relative ${h?.showBrandTicker!==!1?"bg-green-500":"bg-slate-700"}`},r.default.createElement("div",{className:`absolute top-1 w-6 h-6 bg-white rounded-full transition ${h?.showBrandTicker!==!1?"left-7":"left-1"}`}))),r.default.createElement("div",{className:"flex items-center justify-between p-4 bg-slate-900/50 rounded-xl border border-slate-800"},r.default.createElement("div",null,r.default.createElement("p",{className:"font-bold text-white"},"Mostrar Stock Disponible"),r.default.createElement("p",{className:"text-xs text-slate-500"},"Los clientes ven cuntas unidades hay")),r.default.createElement("button",{onClick:()=>K({...h,showStockCount:h?.showStockCount===!1}),className:`w-14 h-8 rounded-full transition relative ${h?.showStockCount!==!1?"bg-green-500":"bg-slate-700"}`},r.default.createElement("div",{className:`absolute top-1 w-6 h-6 bg-white rounded-full transition ${h?.showStockCount!==!1?"left-7":"left-1"}`}))),r.default.createElement("div",{className:"flex items-center justify-between p-4 bg-slate-900/50 rounded-xl border border-slate-800"},r.default.createElement("div",null,r.default.createElement("p",{className:"font-bold text-white"},"Requerir Telfono"),r.default.createElement("p",{className:"text-xs text-slate-500"},"Obligatorio al registrarse")),r.default.createElement("button",{onClick:()=>K({...h,requirePhone:h?.requirePhone===!1}),className:`w-14 h-8 rounded-full transition relative ${h?.requirePhone!==!1?"bg-green-500":"bg-slate-700"}`},r.default.createElement("div",{className:`absolute top-1 w-6 h-6 bg-white rounded-full transition ${h?.requirePhone!==!1?"left-7":"left-1"}`}))),r.default.createElement("div",{className:"flex items-center justify-between p-4 bg-slate-900/50 rounded-xl border border-slate-800"},r.default.createElement("div",null,r.default.createElement("p",{className:"font-bold text-white"},"Requerir DNI"),r.default.createElement("p",{className:"text-xs text-slate-500"},"Obligatorio al registrarse")),r.default.createElement("button",{onClick:()=>K({...h,requireDNI:h?.requireDNI===!1}),className:`w-14 h-8 rounded-full transition relative ${h?.requireDNI!==!1?"bg-green-500":"bg-slate-700"}`},r.default.createElement("div",{className:`absolute top-1 w-6 h-6 bg-white rounded-full transition ${h?.requireDNI!==!1?"left-7":"left-1"}`}))),r.default.createElement("div",{className:"p-4 bg-slate-900/50 rounded-xl border border-slate-800"},r.default.createElement("div",{className:"flex items-center justify-between mb-3"},r.default.createElement("div",null,r.default.createElement("p",{className:"font-bold text-white"},"Umbral de Stock Bajo"),r.default.createElement("p",{className:"text-xs text-slate-500"},"Alerta cuando el stock es menor a este valor"))),r.default.createElement("input",{type:"number",className:"input-cyber w-full p-4",value:h?.lowStockThreshold||5,onChange:l=>K({...h,lowStockThreshold:parseInt(l.target.value)||5})})))),r.default.createElement("div",{className:"bg-[#0a0a0a] border border-slate-800 p-8 rounded-[2rem]"},r.default.createElement("h3",{className:"text-xl font-bold text-white mb-6 flex items-center gap-2"},r.default.createElement(qs,{className:"w-5 h-5 text-yellow-500"})," Personalizacin IA"),r.default.createElement("div",{className:"flex items-center gap-6"},r.default.createElement("div",{className:"relative group w-24 h-24 bg-slate-900 rounded-full border-2 border-dashed border-slate-700 hover:border-yellow-500 transition flex items-center justify-center overflow-hidden cursor-pointer shrink-0 shadow-xl"},h?.botImage?r.default.createElement("img",{src:h.botImage,alt:"Bot Preview",className:"w-full h-full object-cover"}):r.default.createElement(qs,{className:"w-8 h-8 text-slate-600 group-hover:text-yellow-500 transition"}),r.default.createElement("input",{type:"file",accept:"image/*",className:"absolute inset-0 opacity-0 cursor-pointer z-50",onChange:l=>qo(l,K,"botImage",300)}),r.default.createElement("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 flex items-center justify-center transition pointer-events-none"},r.default.createElement(f0,{className:"w-6 h-6 text-white"}))),r.default.createElement("div",null,r.default.createElement("p",{className:"font-bold text-white text-base mb-1"},"Avatar del Asistente"),r.default.createElement("p",{className:"text-xs text-slate-500 mb-3 max-w-xs leading-relaxed"},"Sube una imagen personalizada para el bot (PNG/JPG). Se recomienda formato cuadrado."),h?.botImage?r.default.createElement("button",{onClick:()=>K({...h,botImage:""}),className:"text-xs bg-red-900/20 text-red-400 hover:bg-red-900/40 px-3 py-1.5 rounded-lg transition flex items-center gap-2 border border-red-500/20"},r.default.createElement(mt,{className:"w-3 h-3"})," Restaurar Default"):r.default.createElement("span",{className:"text-xs text-yellow-600 bg-yellow-900/20 px-3 py-1 rounded-lg border border-yellow-700/30"},"Usando imagen por defecto")))),r.default.createElement("div",{className:"bg-[#0a0a0a] border border-slate-800 p-8 rounded-[2rem]"},r.default.createElement("h3",{className:"text-xl font-bold text-white mb-6 flex items-center gap-2"},r.default.createElement(ll,{className:"w-5 h-5 text-orange-400"})," Categoras de Productos"),r.default.createElement("div",{className:"flex flex-wrap gap-2 mb-4"},(h?.categories||[]).map((l,m)=>r.default.createElement("div",{key:m,className:"bg-slate-900 text-white px-4 py-2 rounded-lg flex items-center gap-2 border border-slate-700"},r.default.createElement("span",null,l),r.default.createElement("button",{onClick:()=>K({...h,categories:(h?.categories||[]).filter((v,x)=>x!==m)}),className:"text-red-400 hover:text-red-300"},r.default.createElement(lt,{className:"w-4 h-4"}))))),r.default.createElement("button",{onClick:()=>Si(!0),className:"px-4 py-2 bg-orange-900/20 text-orange-400 rounded-lg font-bold text-sm border border-orange-500/30 hover:bg-orange-900/40 transition flex items-center gap-2"},r.default.createElement(En,{className:"w-4 h-4"})," Agregar Categora"))),In==="team"&&r.default.createElement("div",{className:"space-y-6 animate-fade-up"},r.default.createElement("div",{className:"bg-[#0a0a0a] border border-slate-800 p-8 rounded-[2rem]"},r.default.createElement("h3",{className:"text-xl font-bold text-white mb-6 flex items-center gap-2"},r.default.createElement(Qo,{className:"w-5 h-5 text-purple-400"})," Equipo y Accesos"),r.default.createElement("p",{className:"text-slate-500 mb-6"},"Gestiona los miembros del equipo, sus roles de acceso y participacin en ganancias."),r.default.createElement("div",{className:"space-y-4 mb-6"},(h?.team||[]).map((l,m)=>r.default.createElement("div",{key:m,className:"flex flex-col md:flex-row md:items-center gap-4 bg-slate-900/50 p-6 rounded-2xl border border-slate-800"},r.default.createElement("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center text-white font-bold text-lg flex-shrink-0"},l.name?.charAt(0)?.toUpperCase()||"?"),r.default.createElement("div",{className:"flex-1 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},r.default.createElement("div",null,r.default.createElement("label",{className:"text-[10px] uppercase font-bold text-slate-500 mb-1 block"},"Nombre"),r.default.createElement("input",{className:"input-cyber w-full p-2 text-sm",value:l.name||"",onChange:v=>{let x=[...h?.team||[]];x[m]={...x[m],name:v.target.value},K({...h,team:x})},placeholder:"Nombre"})),r.default.createElement("div",null,r.default.createElement("label",{className:"text-[10px] uppercase font-bold text-slate-500 mb-1 block"},"Email (Acceso)"),r.default.createElement("input",{type:"email",className:`input-cyber w-full p-2 text-sm ${l.email===Qe?"opacity-50 cursor-not-allowed":""}`,value:l.email||"",onChange:v=>{let x=[...h?.team||[]];x[m]={...x[m],email:v.target.value},K({...h,team:x})},placeholder:"usuario@email.com",disabled:l.email===Qe})),r.default.createElement("div",null,r.default.createElement("label",{className:"text-[10px] uppercase font-bold text-slate-500 mb-1 block"},"Rol"),r.default.createElement("select",{className:`input-cyber w-full p-2 text-sm ${l.email===Qe?"opacity-50 cursor-not-allowed":""}`,value:l.role||"employee",onChange:v=>{let x=[...h?.team||[]];x[m]={...x[m],role:v.target.value},K({...h,team:x})},disabled:l.email===Qe},r.default.createElement("option",{value:"employee"},"Empleado"),r.default.createElement("option",{value:"admin"},"Admin"))),r.default.createElement("div",null,r.default.createElement("label",{className:"text-[10px] uppercase font-bold text-slate-500 mb-1 block"},"Total Invertido"),r.default.createElement("div",{className:"input-cyber w-full p-2 text-sm bg-slate-900/50 text-slate-400 flex items-center cursor-not-allowed"},"$ ",a.filter(v=>v.investor===l.name||v.investor===l.email).reduce((v,x)=>v+(Number(x.amount)||0),0).toLocaleString()))),l.email!==Qe&&r.default.createElement("button",{onClick:()=>K({...h,team:(h?.team||[]).filter((v,x)=>x!==m)}),className:"p-3 bg-red-900/20 text-red-400 hover:bg-red-900/40 rounded-xl transition flex-shrink-0",title:"Eliminar Miembro"},r.default.createElement(mt,{className:"w-5 h-5"}))))),r.default.createElement("button",{onClick:()=>K({...h,team:[...h?.team||[],{name:"",email:"",role:"employee",investment:0}]}),className:"px-6 py-3 bg-purple-600 hover:bg-purple-500 text-white rounded-xl font-bold shadow-lg shadow-purple-600/30 flex items-center gap-2 transition"},r.default.createElement(g0,{className:"w-5 h-5"})," Agregar Nuevo Miembro"))),Y?.email===Qe&&r.default.createElement("div",{className:"fixed bottom-8 right-8 z-50"},r.default.createElement("button",{onClick:async()=>{try{Wt(!0);let l=fe(ae,"artifacts",w,"public","data","settings","config");await br(l,h,{merge:!0}),F("Configuracin guardada exitosamente","success")}catch(l){console.error(l),F("Error al guardar","error")}finally{Wt(!1)}},className:"px-8 py-4 bg-gradient-to-r from-orange-600 to-orange-500 hover:from-orange-500 hover:to-orange-400 text-white font-bold rounded-2xl shadow-2xl shadow-orange-900/30 flex items-center gap-3 transition transform hover:scale-105"},r.default.createElement(rs,{className:"w-5 h-5"})," Guardar Cambios"))),Tc&&r.default.createElement("div",{className:"fixed inset-0 bg-black/90 z-[200] flex items-center justify-center p-4 backdrop-blur-sm animate-fade-in-scale"},r.default.createElement("div",{className:"bg-[#0a0a0a] border border-slate-700 p-8 rounded-[2.5rem] w-full max-w-lg shadow-2xl relative overflow-hidden flex flex-col max-h-[90vh]"},r.default.createElement("div",{className:"overflow-y-auto custom-scrollbar pr-2 pb-20"},r.default.createElement("h3",{className:"text-2xl font-black text-white mb-6 sticky top-0 bg-[#0a0a0a] py-2 z-10"},Ya?"Editar":"Nuevo"," Proveedor"),r.default.createElement("div",{className:"space-y-4 mb-6"},r.default.createElement("input",{className:"input-cyber w-full p-4",placeholder:"Nombre de la Empresa",value:Lt.name,onChange:l=>Nr({...Lt,name:l.target.value})}),r.default.createElement("input",{className:"input-cyber w-full p-4",placeholder:"Nombre del Contacto",value:Lt.contact,onChange:l=>Nr({...Lt,contact:l.target.value})}),r.default.createElement("div",{className:"grid grid-cols-2 gap-4"},r.default.createElement("input",{className:"input-cyber w-full p-4",placeholder:"Telfono",value:Lt.phone,onChange:l=>Nr({...Lt,phone:l.target.value})}),r.default.createElement("input",{className:"input-cyber w-full p-4",placeholder:"Instagram (sin @)",value:Lt.ig,onChange:l=>Nr({...Lt,ig:l.target.value})})),r.default.createElement("div",{className:"border-t border-slate-800 pt-6 mt-6"},r.default.createElement("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-3 block"},"Asignar Productos Suministrados"),r.default.createElement("div",{className:"h-48 overflow-y-auto bg-slate-900/50 rounded-xl p-2 border border-slate-800 custom-scrollbar"},he.length===0?r.default.createElement("p",{className:"text-center text-slate-600 text-xs py-4"},"Carga productos primero."):he.map(l=>r.default.createElement("div",{key:l.id,onClick:()=>{let m=Lt.associatedProducts||[],v=m.includes(l.id);Nr({...Lt,associatedProducts:v?m.filter(x=>x!==l.id):[...m,l.id]})},className:`flex items-center gap-3 p-2 rounded-lg cursor-pointer mb-1 transition ${Lt.associatedProducts?.includes(l.id)?"bg-orange-900/30 border border-orange-500/30":"hover:bg-slate-800 border border-transparent"}`},r.default.createElement("div",{className:"w-8 h-8 bg-white rounded p-0.5 flex-shrink-0 overflow-hidden product-preview-frame"},r.default.createElement("img",{src:l.image,alt:l.name||"Producto",className:"w-full h-full object-contain"})),r.default.createElement("span",{className:"text-xs text-white truncate flex-1 font-medium"},l.name),Lt.associatedProducts?.includes(l.id)&&r.default.createElement(Me,{className:"w-4 h-4 text-orange-400"}))))))),r.default.createElement("div",{className:"absolute bottom-0 left-0 w-full p-8 bg-gradient-to-t from-[#0a0a0a] via-[#0a0a0a] to-transparent flex gap-4"},r.default.createElement("button",{onClick:()=>Ii(!1),className:"flex-1 py-4 text-slate-400 font-bold hover:text-white transition bg-slate-900 rounded-xl"},"Cancelar"),r.default.createElement("button",{onClick:u2,className:"flex-1 py-4 bg-orange-600 hover:bg-orange-500 text-white rounded-xl font-bold shadow-lg transition"},"Guardar")))))):r.default.createElement(fO,{onBack:()=>e("store")})),t==="terms"&&r.default.createElement("div",{className:"max-w-4xl mx-auto py-10 sm:py-20 px-3 sm:px-6 animate-fade-up"},r.default.createElement("div",{className:"glass p-5 sm:p-8 md:p-12 rounded-2xl sm:rounded-[3rem] border border-slate-800"},r.default.createElement("div",{className:"prose prose-invert max-w-none"},r.default.createElement("h1",{className:"text-3xl sm:text-5xl font-black mb-8 sm:mb-12 tracking-tighter italic"},"Condiciones de ",r.default.createElement("span",{className:"text-orange-500 text-4xl sm:text-6xl"},"Uso")),r.default.createElement("p",{className:"text-slate-400 font-bold mb-8"},"ltima actualizacin: 07 de enero de 2026"),r.default.createElement("h3",{className:"text-xl font-bold text-white mt-8 mb-4"},"ACUERDO CON NUESTROS TRMINOS LEGALES"),r.default.createElement("p",{className:"text-slate-500 leading-relaxed mb-4"},"Nosotros somos ",r.default.createElement("strong",null,h?.storeName||"Sustore"),' ("',r.default.createElement("strong",null,"Empresa"),'", "',r.default.createElement("strong",null,"nosotros"),'", "',r.default.createElement("strong",null,"nos"),'", "',r.default.createElement("strong",null,"nuestro"),'").'),r.default.createElement("p",{className:"text-slate-500 leading-relaxed mb-4"},"Operamos el sitio web ",r.default.createElement("a",{href:h?.seoUrl||"#",className:"text-orange-400 hover:underline"},h?.seoUrl||"[URL del sitio]"),' (el "',r.default.createElement("strong",null,"Sitio"),'"), as como cualquier otro producto y servicio relacionado que haga referencia o se vincule con estos trminos legales (los "',r.default.createElement("strong",null,"Trminos Legales"),'") (colectivamente, los "',r.default.createElement("strong",null,"Servicios"),'").'),r.default.createElement("p",{className:"text-slate-500 leading-relaxed mb-4"},"Puede contactarnos por correo electrnico a la direccin proporcionada al final de este documento."),r.default.createElement("p",{className:"text-slate-500 leading-relaxed mb-4"},'Estos Trminos Legales constituyen un acuerdo legalmente vinculante celebrado entre usted, ya sea personalmente o en nombre de una entidad ("',r.default.createElement("strong",null,"usted"),'"), y Sustore, en relacin con su acceso y uso de los Servicios. Usted acepta que al acceder a los Servicios, ha ledo, comprendido y aceptado estar sujeto a todos estos Trminos Legales. ',r.default.createElement("strong",{className:"text-red-400"},"SI NO EST DE ACUERDO CON TODOS ESTOS TRMINOS LEGALES, ENTONCES TIENE EXPRESAMENTE PROHIBIDO UTILIZAR LOS SERVICIOS Y DEBE DEJAR DE UTILIZARLOS INMEDIATAMENTE.")),r.default.createElement("div",{className:"bg-slate-900/50 p-8 rounded-3xl border border-slate-800 my-10"},r.default.createElement("h3",{className:"text-lg font-black text-white uppercase tracking-widest mb-6"},"NDICE"),r.default.createElement("ul",{className:"space-y-2 text-sm text-orange-400 font-medium"},r.default.createElement("li",null,r.default.createElement("a",{href:"#section1",className:"hover:text-orange-300 transition"},"1. NUESTROS SERVICIOS")),r.default.createElement("li",null,r.default.createElement("a",{href:"#section2",className:"hover:text-orange-300 transition"},"2. DERECHOS DE PROPIEDAD INTELECTUAL")),r.default.createElement("li",null,r.default.createElement("a",{href:"#section3",className:"hover:text-orange-300 transition"},"3. REPRESENTACIONES DE USUARIOS")),r.default.createElement("li",null,r.default.createElement("a",{href:"#section4",className:"hover:text-orange-300 transition"},"4. ACTIVIDADES PROHIBIDAS")),r.default.createElement("li",null,r.default.createElement("a",{href:"#section5",className:"hover:text-orange-300 transition"},"5. CONTRIBUCIONES GENERADAS POR EL USUARIO")),r.default.createElement("li",null,r.default.createElement("a",{href:"#section6",className:"hover:text-orange-300 transition"},"6. LICENCIA DE CONTRIBUCIN")),r.default.createElement("li",null,r.default.createElement("a",{href:"#section7",className:"hover:text-orange-300 transition"},"7. GESTIN DE SERVICIOS")),r.default.createElement("li",null,r.default.createElement("a",{href:"#section8",className:"hover:text-orange-300 transition"},"8. PLAZO Y TERMINACIN")),r.default.createElement("li",null,r.default.createElement("a",{href:"#section9",className:"hover:text-orange-300 transition"},"9. MODIFICACIONES E INTERRUPCIONES")),r.default.createElement("li",null,r.default.createElement("a",{href:"#section10",className:"hover:text-orange-300 transition"},"10. LEY APLICABLE")),r.default.createElement("li",null,r.default.createElement("a",{href:"#section11",className:"hover:text-orange-300 transition"},"11. RESOLUCIN DE DISPUTAS")),r.default.createElement("li",null,r.default.createElement("a",{href:"#section12",className:"hover:text-orange-300 transition"},"12. CORRECCIONES")),r.default.createElement("li",null,r.default.createElement("a",{href:"#section13",className:"hover:text-orange-300 transition"},"13. DESCARGO DE RESPONSABILIDAD")),r.default.createElement("li",null,r.default.createElement("a",{href:"#section14",className:"hover:text-orange-300 transition"},"14. LIMITACIONES DE RESPONSABILIDAD")),r.default.createElement("li",null,r.default.createElement("a",{href:"#section15",className:"hover:text-orange-300 transition"},"15. INDEMNIZACIN")),r.default.createElement("li",null,r.default.createElement("a",{href:"#section16",className:"hover:text-orange-300 transition"},"16. DATOS DEL USUARIO")),r.default.createElement("li",null,r.default.createElement("a",{href:"#section17",className:"hover:text-orange-300 transition"},"17. COMUNICACIONES ELECTRNICAS")),r.default.createElement("li",null,r.default.createElement("a",{href:"#section18",className:"hover:text-orange-300 transition"},"18. VARIOS")),r.default.createElement("li",null,r.default.createElement("a",{href:"#section19",className:"hover:text-orange-300 transition"},"19. CONTCTENOS")))),r.default.createElement("section",{id:"section1",className:"mb-12"},r.default.createElement("h2",{className:"text-2xl font-bold text-white mb-4"},"1. NUESTROS SERVICIOS"),r.default.createElement("p",{className:"text-slate-500 leading-relaxed"},"La informacin proporcionada al utilizar los Servicios no est destinada a ser distribuida o utilizada por ninguna persona o entidad en ninguna jurisdiccin o pas donde dicha distribucin o uso sera contrario a la ley o regulacin o que nos sometera a cualquier requisito de registro dentro de dicha jurisdiccin o pas. En consecuencia, aquellas personas que eligen acceder a los Servicios desde otras ubicaciones lo hacen por iniciativa propia y son las nicas responsables del cumplimiento de las leyes locales, si y en la medida en que sean aplicables.")),r.default.createElement("section",{id:"section2",className:"mb-12"},r.default.createElement("h2",{className:"text-2xl font-bold text-white mb-4"},"2. DERECHOS DE PROPIEDAD INTELECTUAL"),r.default.createElement("h3",{className:"text-lg font-bold text-white mt-6 mb-2"},"Nuestra propiedad intelectual"),r.default.createElement("p",{className:"text-slate-500 leading-relaxed mb-4"},'Somos propietarios o licenciatarios de todos los derechos de propiedad intelectual de nuestros Servicios, incluido todo el cdigo fuente, bases de datos, funcionalidad, software, diseos de sitios web, audio, video, texto, fotografas y grficos de los Servicios (colectivamente, el "Contenido"), as como las marcas comerciales, marcas de servicio y logotipos contenidos en ellas (las "Marcas").'),r.default.createElement("p",{className:"text-slate-500 leading-relaxed mb-4"},"Nuestro Contenido y Marcas estn protegidos por leyes de derechos de autor y marcas registradas (y varias otras leyes de derechos de propiedad intelectual y competencia desleal) y tratados alrededor del mundo."),r.default.createElement("p",{className:"text-slate-500 leading-relaxed"},'El Contenido y las Marcas se proporcionan en o a travs de los Servicios "TAL CUAL" para su uso personal, no comercial o finalidad empresarial interna.'),r.default.createElement("h3",{className:"text-lg font-bold text-white mt-6 mb-2"},"Su uso de nuestros Servicios"),r.default.createElement("p",{className:"text-slate-500 leading-relaxed mb-4"},'Sujeto a su cumplimiento de estos Trminos Legales, incluidos los "ACTIVIDADES PROHIBIDAS" en la seccin siguiente, le otorgamos un contrato no exclusivo, intransferible y revocable licencia para:'),r.default.createElement("ul",{className:"list-disc pl-6 text-slate-500 space-y-2 mb-4"},r.default.createElement("li",null,"acceder a los Servicios; y"),r.default.createElement("li",null,"descargar o imprimir una copia de cualquier parte del Contenido al que haya obtenido acceso correctamente,")),r.default.createElement("p",{className:"text-slate-500 leading-relaxed mb-4"},"nicamente para tu uso personal, no comercial o finalidad empresarial interna."),r.default.createElement("p",{className:"text-slate-500 leading-relaxed mb-4"},"Salvo lo establecido en esta seccin o en otra parte de nuestros Trminos Legales, ninguna parte de los Servicios ni ningn Contenido o Marca podrn copiarse ni reproducirse, agregado, republicado, cargado, publicado, mostrado pblicamente, codificado, traducido, transmitido, distribuido, vendido, licenciado o explotado de otro modo para cualquier fin comercial, sin nuestro expreso previo escrito permiso."),r.default.createElement("p",{className:"text-slate-500 leading-relaxed"},"Si desea hacer algn uso de los Servicios, Contenido o Marcas que no sea el establecido en esta seccin o en otra parte de nuestros Trminos Legales, dirija su solicitud a nuestro correo de contacto.")),r.default.createElement("section",{id:"section3",className:"mb-12"},r.default.createElement("h2",{className:"text-2xl font-bold text-white mb-4"},"3. REPRESENTACIONES DE USUARIOS"),r.default.createElement("p",{className:"text-slate-500 leading-relaxed"},"Al utilizar los Servicios, usted declara y garantiza que: (1) usted tiene la capacidad legal y acepta cumplir con estos Trminos Legales; (2) no eres un menor de edad en la jurisdiccin en la que usted reside; (3) no acceders a los Servicios a travs de medios automatizados o no humanos, ya sea a travs de un bot, script o de otro modo; (4) no utilizar los Servicios para ninguna actividad ilegal o no autorizado propsito; y (5) su uso de los Servicios no violar ninguna ley o regulacin aplicable.")),r.default.createElement("section",{id:"section4",className:"mb-12"},r.default.createElement("h2",{className:"text-2xl font-bold text-white mb-4"},"4. ACTIVIDADES PROHIBIDAS"),r.default.createElement("p",{className:"text-slate-500 leading-relaxed mb-4"},"No puede acceder ni utilizar los Servicios para ningn otro propsito que no sea aquel para el cual los ponemos a disposicin. Los Servicios no podrn utilizarse en relacin con ningn negocio comercial esfuerzo excepto aquellos que estn especficamente respaldados o aprobados por nosotros."),r.default.createElement("p",{className:"text-slate-500 leading-relaxed mb-4"},"Como usuario de los Servicios, usted acepta no:"),r.default.createElement("ul",{className:"list-disc pl-6 text-slate-500 space-y-2"},r.default.createElement("li",null,"Recuperar sistemticamente datos u otro contenido de los Servicios para crear o compilar, directa o indirectamente, una coleccin, compilacin, base de datos o directorio sin nuestro permiso por escrito."),r.default.createElement("li",null,"Engaarnos, defraudarnos o engaarnos a nosotros y a otros usuarios, especialmente en cualquier intento de obtener informacin confidencial de la cuenta, como las contraseas de los usuarios."),r.default.createElement("li",null,"Eludir, deshabilitar o interferir de otro modo con las caractersticas relacionadas con la seguridad de los Servicios."),r.default.createElement("li",null,"Menospreciar, empaar o daar de otro modo, en nuestra opinin, a nosotros y/o a los Servicios."),r.default.createElement("li",null,"Utilizar cualquier informacin obtenida de los Servicios para acosar, abusar o daar a otra persona."),r.default.createElement("li",null,"Hacer un uso indebido de nuestros servicios de soporte o presentar informes falsos de abuso o mala conducta."),r.default.createElement("li",null,"Utilice los Servicios de una manera incompatible con las leyes o regulaciones aplicables."))),r.default.createElement("section",{id:"section13",className:"mb-12"},r.default.createElement("h2",{className:"text-2xl font-bold text-white mb-4"},"13. DESCARGO DE RESPONSABILIDAD"),r.default.createElement("p",{className:"text-slate-500 leading-relaxed text-xs uppercase tracking-wide border-l-4 border-red-500/50 pl-4 py-2 bg-red-900/5"},"LOS SERVICIOS SE PRESTAN TAL CUAL Y SEGN EST DISPONIBLE. USTED ACEPTA QUE SU USO DE LOS SERVICIOS SER BAJO SU PROPIO RIESGO. EN LA MXIMA MEDIDA PERMITIDA POR LA LEY, RENUNCIAMOS A TODAS LAS GARANTAS, EXPRESAS O IMPLCITAS, EN RELACIN CON LOS SERVICIOS Y SU USO DE LOS MISMOS.")),r.default.createElement("section",{id:"section19",className:"mb-12"},r.default.createElement("h2",{className:"text-2xl font-bold text-white mb-4"},"19. CONTCTENOS"),r.default.createElement("p",{className:"text-slate-500 leading-relaxed mb-4"},"Para resolver una queja con respecto a los Servicios o para recibir ms informacin sobre el uso de los Servicios, contctenos en:"),r.default.createElement("p",{className:"text-2xl font-black text-orange-400"},h?.storeEmail||"soporte@tuempresa.com")),r.default.createElement("button",{onClick:()=>e("store"),className:"px-10 py-4 bg-slate-900 hover:bg-slate-800 text-white rounded-2xl font-bold transition flex items-center gap-3 border border-slate-700 mt-12"},r.default.createElement(Fs,{className:"w-5 h-5"})," Volver a la Tienda"))))),t!=="admin"&&t!=="login"&&t!=="register"&&r.default.createElement("footer",{className:`pt-16 pb-8 relative overflow-hidden transition-colors duration-300 border-t ${g?"bg-[#050505] border-slate-900":"bg-slate-100 border-slate-200"}`},r.default.createElement("div",{className:"absolute top-0 left-0 w-full h-px bg-gradient-to-r from-transparent via-orange-500/30 to-transparent"}),r.default.createElement("div",{className:`absolute -top-40 -right-40 w-96 h-96 rounded-full blur-[100px] pointer-events-none ${g?"bg-blue-900/5":"bg-blue-500/5"}`}),r.default.createElement("div",{className:"max-w-[1400px] mx-auto px-4 sm:px-6 md:px-12 grid grid-cols-1 md:grid-cols-4 gap-8 sm:gap-12 mb-10 sm:mb-16 relative z-10"},r.default.createElement("div",{className:"md:col-span-2 space-y-6"},r.default.createElement("h2",{className:`text-3xl font-black tracking-tighter italic ${g?"text-white":"text-slate-900"}`},_t&&h?.storeName||"",r.default.createElement("span",{className:"text-orange-500"},h?.footerSuffix||".SF")),r.default.createElement("p",{className:`max-w-sm leading-relaxed text-sm ${g?"text-slate-500":"text-slate-600"}`},h?.footerDescription||"Tu destino premium para tecnologa de vanguardia. Ofrecemos los mejores productos con garanta y soporte especializado. Elevamos tu experiencia digital."),r.default.createElement("div",{className:"flex gap-3 pt-2 flex-wrap"},h?.showInstagram!==!1&&h?.instagramLink&&r.default.createElement("button",{onClick:()=>window.open(h?.instagramLink,"_blank"),className:`p-2 rounded-lg transition border ${g?"bg-slate-900 text-slate-400 border-slate-800 hover:text-pink-400 hover:bg-pink-900/10 hover:border-pink-500/30":"bg-white text-slate-500 border-slate-200 hover:text-pink-600 hover:bg-pink-50 hover:border-pink-300"}`},r.default.createElement(cl,{className:"w-5 h-5"})),h?.showWhatsapp===!0&&h?.whatsappLink&&r.default.createElement("button",{onClick:()=>window.open(h?.whatsappLink,"_blank"),className:`p-2 rounded-lg transition border ${g?"bg-slate-900 text-slate-400 border-slate-800 hover:text-green-400 hover:bg-green-900/10 hover:border-green-500/30":"bg-white text-slate-500 border-slate-200 hover:text-green-600 hover:bg-green-50 hover:border-green-300"}`},r.default.createElement(ko,{className:"w-5 h-5"})),h?.showFacebook&&h?.facebookLink&&r.default.createElement("button",{onClick:()=>window.open(h?.facebookLink,"_blank"),className:`p-2 rounded-lg transition border ${g?"bg-slate-900 text-slate-400 border-slate-800 hover:text-blue-400 hover:bg-blue-900/10 hover:border-blue-500/30":"bg-white text-slate-500 border-slate-200 hover:text-blue-600 hover:bg-blue-50 hover:border-blue-300"}`},r.default.createElement(e0,{className:"w-5 h-5"})),h?.showTwitter&&h?.twitterLink&&r.default.createElement("button",{onClick:()=>window.open(h?.twitterLink,"_blank"),className:`p-2 rounded-lg transition border ${g?"bg-slate-900 text-slate-400 border-slate-800 hover:text-sky-400 hover:bg-sky-900/10 hover:border-sky-500/30":"bg-white text-slate-500 border-slate-200 hover:text-sky-600 hover:bg-sky-50 hover:border-sky-300"}`},r.default.createElement(p0,{className:"w-5 h-5"})),h?.showTiktok&&h?.tiktokLink&&r.default.createElement("button",{onClick:()=>window.open(h?.tiktokLink,"_blank"),className:`p-2 rounded-lg transition border ${g?"bg-slate-900 text-slate-400 border-slate-800 hover:text-rose-400 hover:bg-rose-900/10 hover:border-rose-500/30":"bg-white text-slate-500 border-slate-200 hover:text-rose-600 hover:bg-rose-50 hover:border-rose-300"}`},r.default.createElement(a0,{className:"w-5 h-5"})),h?.showYoutube&&h?.youtubeLink&&r.default.createElement("button",{onClick:()=>window.open(h?.youtubeLink,"_blank"),className:`p-2 rounded-lg transition border ${g?"bg-slate-900 text-slate-400 border-slate-800 hover:text-red-400 hover:bg-red-900/10 hover:border-red-500/30":"bg-white text-slate-500 border-slate-200 hover:text-red-600 hover:bg-red-50 hover:border-red-300"}`},r.default.createElement(v0,{className:"w-5 h-5"})))),r.default.createElement("div",{className:"space-y-6"},r.default.createElement("h3",{className:`font-bold uppercase tracking-widest text-xs ${g?"text-white":"text-slate-900"}`},"Enlaces Rpidos"),r.default.createElement("ul",{className:`space-y-3 text-sm font-medium ${g?"text-slate-500":"text-slate-600"}`},r.default.createElement("li",null,r.default.createElement("button",{onClick:()=>e("store"),className:"hover:text-orange-500 transition flex items-center gap-2 group"},r.default.createElement("span",{className:"w-0 group-hover:w-2 h-px bg-orange-500 transition-all duration-300"})," Inicio")),r.default.createElement("li",null,r.default.createElement("button",{onClick:()=>e("profile"),className:"hover:text-orange-500 transition flex items-center gap-2 group"},r.default.createElement("span",{className:"w-0 group-hover:w-2 h-px bg-orange-500 transition-all duration-300"})," Mi Cuenta")),r.default.createElement("li",null,r.default.createElement("button",{onClick:()=>e("guide"),className:"hover:text-orange-500 transition flex items-center gap-2 group"},r.default.createElement("span",{className:"w-0 group-hover:w-2 h-px bg-orange-500 transition-all duration-300"})," Ayuda & Soporte")))),h?.showFooterContact!==!1&&r.default.createElement("div",{className:"space-y-6"},r.default.createElement("h3",{className:`font-bold uppercase tracking-widest text-xs ${g?"text-white":"text-slate-900"}`},h?.footerContactTitle||"Contacto"),r.default.createElement("p",{className:`text-sm leading-relaxed mb-4 ${g?"text-slate-500":"text-slate-600"}`},h?.footerContactDescription||"Tienes alguna duda? Estamos aqu para ayudarte."),(()=>{let l=h?.footerContactType||"whatsapp",m=String(h?.footerContactButtonText||"").trim()||"Contactar Soporte",v=l==="whatsapp"?String(h?.whatsappLink||"").trim():l==="instagram"?String(h?.instagramLink||"").trim():l==="email"?`https://mail.google.com/mail/?view=cm&fs=1&to=${encodeURIComponent(String(h?.storeEmail||"").trim())}`:"",x=!!v&&(l!=="email"||!!String(h?.storeEmail||"").trim()),P=g?{whatsapp:"bg-green-600 text-white border-green-500/70 hover:bg-green-500",instagram:"bg-pink-600 text-white border-pink-500/70 hover:bg-pink-500",email:"bg-blue-600 text-white border-blue-500/70 hover:bg-blue-500"}[l]||"bg-orange-600 text-white border-orange-500/70 hover:bg-orange-500":{whatsapp:"bg-green-50 text-green-700 border-green-200 hover:bg-green-500 hover:text-white hover:border-green-500",instagram:"bg-pink-50 text-pink-700 border-pink-200 hover:bg-pink-500 hover:text-white hover:border-pink-500",email:"bg-blue-50 text-blue-700 border-blue-200 hover:bg-blue-500 hover:text-white hover:border-blue-500"}[l]||"bg-orange-50 text-orange-700 border-orange-200 hover:bg-orange-500 hover:text-white hover:border-orange-500";return r.default.createElement("button",{onClick:()=>{if(!x){F("Configura el contacto del footer en Admin  Configuracin  Footer.","warning");return}window.open(v,"_blank")},disabled:!x,className:`px-6 py-3 rounded-xl text-sm font-bold transition w-full md:w-auto border inline-flex items-center justify-center gap-2 ${P} ${x?"":"opacity-60 cursor-not-allowed"}`,style:{WebkitTextFillColor:"currentColor"}},l==="whatsapp"&&r.default.createElement(ko,{className:"w-4 h-4"}),l==="instagram"&&r.default.createElement(cl,{className:"w-4 h-4"}),l==="email"&&r.default.createElement(ah,{className:"w-4 h-4"}),r.default.createElement("span",{className:"leading-none"},m))})())),r.default.createElement("div",{className:`border-t transition-colors duration-300 ${g?"border-slate-900 bg-[#020202]":"border-slate-200 bg-slate-200/50"}`},r.default.createElement("div",{className:"max-w-[1400px] mx-auto px-6 md:px-12 py-6 flex flex-col md:flex-row justify-between items-center gap-4"},r.default.createElement("p",{className:`text-xs font-mono ${g?"text-slate-600":"text-slate-500"}`},h?.footerCopyright||` ${new Date().getFullYear()} Sustore. Todos los derechos reservados.`),r.default.createElement("div",{className:"flex gap-6"},h?.showPrivacyPolicy!==!1&&r.default.createElement("span",{onClick:()=>e("privacy"),className:`text-xs font-bold uppercase tracking-wider cursor-pointer hover:text-orange-500 transition underline underline-offset-4 ${g?"text-slate-700 decoration-slate-900":"text-slate-500 decoration-slate-300"}`},"Privacy Policy"),h?.showTermsOfService!==!1&&r.default.createElement("span",{onClick:()=>e("terms"),className:`text-xs font-bold uppercase tracking-wider cursor-pointer hover:text-orange-500 transition underline underline-offset-4 ${g?"text-slate-700 decoration-slate-900":"text-slate-500 decoration-slate-300"}`},"Terms of Service"))))),kc&&r.default.createElement("div",{className:"fixed inset-0 z-[10000] flex items-center justify-center bg-black/90 backdrop-blur-md animate-fade-in-scale p-4"},r.default.createElement("div",{className:"glass p-8 rounded-[2rem] max-w-md w-full border border-orange-800 shadow-2xl"},r.default.createElement("div",{className:"w-16 h-16 rounded-full flex items-center justify-center mb-6 mx-auto bg-orange-900/20 text-orange-500"},r.default.createElement(ll,{className:"w-8 h-8"})),r.default.createElement("h3",{className:"text-2xl font-black text-center mb-6 text-white"},"Nueva Categora"),r.default.createElement("input",{type:"text",value:el,onChange:l=>Os(l.target.value),className:"input-cyber w-full p-4 mb-6",id:"new-category-modal-input",name:"new_category_modal",autoComplete:"off",placeholder:"Nombre de la categora",autoFocus:!0}),r.default.createElement("div",{className:"flex gap-3"},r.default.createElement("button",{onClick:()=>{Os(""),Si(!1)},className:"flex-1 py-3 bg-slate-800 hover:bg-slate-700 text-slate-300 rounded-xl font-bold transition"},"Cancelar"),r.default.createElement("button",{onClick:m2,className:"flex-1 py-3 bg-orange-600 hover:bg-orange-500 text-white rounded-xl font-bold transition shadow-lg shadow-orange-600/30"},"Crear")))),Fc&&r.default.createElement("div",{className:"fixed inset-0 z-[10000] flex items-center justify-center bg-black/90 backdrop-blur-md animate-fade-in-scale p-4"},r.default.createElement("div",{className:"glass p-8 rounded-[2rem] max-w-md w-full border border-green-900 shadow-2xl"},r.default.createElement("div",{className:"w-16 h-16 rounded-full flex items-center justify-center mb-6 mx-auto bg-green-900/20 text-green-500"},r.default.createElement(al,{className:"w-8 h-8"})),r.default.createElement("h3",{className:"text-2xl font-black text-center mb-2 text-white"},"Venta Manual"),r.default.createElement("p",{className:"text-center text-slate-400 mb-6"},he.find(l=>l.id===we.productId)?.name),r.default.createElement("div",{className:"space-y-4 mb-8"},r.default.createElement("div",{className:"grid grid-cols-2 gap-4"},r.default.createElement("div",null,r.default.createElement("label",{className:"text-[10px] font-bold text-slate-500 uppercase mb-1 block"},"Cantidad"),r.default.createElement("input",{type:"number",className:"input-cyber w-full p-3",value:we.quantity,onChange:l=>Rn({...we,quantity:parseInt(l.target.value)||1}),min:"1"})),r.default.createElement("div",null,r.default.createElement("label",{className:"text-[10px] font-bold text-slate-500 uppercase mb-1 block"},"Precio Unit."),r.default.createElement("input",{type:"number",className:"input-cyber w-full p-3",value:we.price,onChange:l=>Rn({...we,price:parseFloat(l.target.value)||0})}))),r.default.createElement("div",null,r.default.createElement("label",{className:"text-[10px] font-bold text-slate-500 uppercase mb-1 block"},"Mtodo de Pago"),r.default.createElement("select",{className:"input-cyber w-full p-3",value:we.paymentMethod,onChange:l=>Rn({...we,paymentMethod:l.target.value})},r.default.createElement("option",{value:"Efectivo"},"Efectivo"),r.default.createElement("option",{value:"Transferencia"},"Transferencia"),r.default.createElement("option",{value:"Tarjeta"},"Tarjeta"))),r.default.createElement("div",{className:"bg-slate-900 p-4 rounded-xl flex justify-between items-center border border-slate-800"},r.default.createElement("span",{className:"text-slate-400 font-bold"},"Total:"),r.default.createElement("span",{className:"text-2xl font-black text-green-400"},"$",(we.quantity*we.price).toLocaleString()))),r.default.createElement("div",{className:"flex gap-3"},r.default.createElement("button",{onClick:()=>Ir(!1),className:"flex-1 py-3 bg-slate-800 hover:bg-slate-700 text-slate-300 rounded-xl font-bold transition"},"Cancelar"),r.default.createElement("button",{onClick:Pk,disabled:Wr,className:"flex-1 py-3 bg-green-600 hover:bg-green-500 text-white rounded-xl font-bold transition shadow-lg shadow-green-600/30 flex items-center justify-center gap-2"},Wr?r.default.createElement(ns,{className:"w-5 h-5 animate-spin"}):r.default.createElement(Me,{className:"w-5 h-5"}),"Confirmar")))),eh&&r.default.createElement("button",{onClick:()=>window.open(h.whatsappLink,"_blank"),"data-testid":"store-wa-fab",className:"fixed left-4 bottom-[calc(1rem+env(safe-area-inset-bottom))] sm:left-auto sm:right-6 sm:bottom-[calc(1.5rem+env(safe-area-inset-bottom))] z-50 p-3 sm:p-4 bg-green-500 rounded-full shadow-[0_0_20px_rgba(34,197,94,0.4)] hover:scale-110 hover:shadow-[0_0_30px_rgba(34,197,94,0.6)] transition-all animate-bounce-slow",title:"Chatea con nosotros"},r.default.createElement(ko,{className:"w-6 h-6 sm:w-8 sm:h-8 text-white"})),r.default.createElement(I2,null),ie&&r.default.createElement(pO,{settings:h,onClose:()=>_e(!1)}),!1,r.default.createElement(lO,{isOpen:y.isOpen,title:y.title,message:y.message,onConfirm:y.onConfirm,onCancel:y.onCancel||(()=>_(l=>({...l,isOpen:!1}))),isDangerous:!0,darkMode:g}),r.default.createElement(dO,{isOpen:kc,onClose:()=>Si(!1),categories:h?.categories||[],onAdd:l=>K({...h,categories:[...h?.categories||[],l]}),onRemove:l=>K({...h,categories:(h?.categories||[]).filter(m=>m!==l)}),darkMode:g}),r.default.createElement(r.Suspense,{fallback:null},r.default.createElement(ZD,{settings:h,products:he,addToCart:(l,m=1)=>Mi(l,m),hasFloatingWhatsapp:eh,controlPanel:{setDarkMode:L,openCart:()=>e("cart")},coupons:yr,appId:w})))}var pO=({settings:t,onClose:e})=>{let[n,s]=r.default.useState(null),[i,o]=r.default.useState(null),a={purple:{iconBg:"bg-purple-600",iconText:"text-purple-400",price:"text-purple-400",check:"text-purple-500",activeBg:"bg-purple-500",activeBorder:"border-purple-400",gradient:"from-purple-900/40 to-slate-900",border:"border-purple-500/50"},orange:{iconBg:"bg-orange-600",iconText:"text-orange-400",price:"text-orange-400",check:"text-orange-500",activeBg:"bg-orange-500",activeBorder:"border-orange-400",gradient:"from-orange-900/40 to-slate-900",border:"border-orange-500/50"},yellow:{iconBg:"bg-yellow-500",iconText:"text-yellow-400",price:"text-yellow-400",check:"text-yellow-500",activeBg:"bg-yellow-500",activeBorder:"border-yellow-400",gradient:"from-yellow-900/40 to-slate-900",border:"border-yellow-500/50"}};return r.default.createElement("div",{className:"fixed inset-0 z-[10000] flex items-center justify-center bg-black/95 backdrop-blur-xl animate-fade-in-scale p-2 sm:p-4 overflow-hidden"},r.default.createElement("div",{className:"bg-gradient-to-b from-[#0d0d0d] to-[#050505] relative w-full h-full sm:h-auto sm:max-h-[95vh] sm:max-w-5xl sm:rounded-3xl border-0 sm:border sm:border-slate-800/50 shadow-2xl flex flex-col overflow-hidden"},r.default.createElement("div",{className:"flex justify-between items-center p-4 sm:p-6 border-b border-slate-800/50 shrink-0"},r.default.createElement("div",null,r.default.createElement("h2",{className:"text-xl sm:text-3xl font-black text-white flex items-center gap-2 sm:gap-3"},r.default.createElement(ir,{className:"w-6 h-6 sm:w-8 sm:h-8 text-yellow-500 fill-current"})," Planes Disponibles"),r.default.createElement("p",{className:"text-slate-500 text-xs sm:text-sm mt-1"},"Eleg un plan y seleccion tu forma de pago")),r.default.createElement("button",{onClick:e,className:"p-2 sm:p-3 bg-slate-800 hover:bg-slate-700 rounded-full text-white transition-all hover:rotate-90"},r.default.createElement(lt,{className:"w-5 h-5 sm:w-6 sm:h-6"}))),r.default.createElement("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-4 sm:p-6"},r.default.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 sm:gap-5"},[{id:"entrepreneur",name:"Plan Emprendedor",emoji:"",subtitle:"El impulso que tu negocio necesita para despegar.",price:"US$5.99",features:[" Carga de hasta 30 productos"," Integracin con Mercado Pago"," 1 promocin activa"," Panel de control completo"," Soporte tcnico va Gmail"],cycles:[{id:"weekly",label:"Semanal",price:"US$1.99",sub:"Flexibilidad total"},{id:"monthly",label:"Mensual",price:"US$5.99",sub:"Opcin equilibrada"},{id:"annual",label:"Anual",price:"US$59.90",sub:" 2 MESES GRATIS"}],color:"orange",icon:Wo},{id:"business",name:"Plan Negocio",emoji:"",subtitle:"Para marcas con identidad que buscan escalar.",price:"US$9.99",popular:!0,features:[" Incluye TODO lo del Plan Emprendedor"," Hasta 50 productos"," Promociones ilimitadas"," Sistema de cupones"," Analtica de clientes"," Botn WhatsApp flotante"," Carrusel de banners"],cycles:[{id:"weekly",label:"Semanal",price:"US$3.49",sub:"Flexibilidad total"},{id:"monthly",label:"Mensual",price:"US$9.99",sub:"Equilibrio perfecto"},{id:"annual",label:"Anual",price:"US$89.90",sub:" 3 MESES GRATIS"}],color:"purple",icon:Jf},{id:"premium",name:"Plan Premium",emoji:"",subtitle:"Automatizacin total y cero preocupaciones.",price:"US$17.99",features:[" Incluye TODO lo del Plan Negocio"," Productos ilimitados"," Promociones ilimitadas"," Asistente IA 24/7"," Carga VIP (10 productos)"," Mantenimiento mensual"," Omnicanalidad total"],cycles:[{id:"weekly",label:"Semanal",price:"US$5.99",sub:"Flexibilidad total"},{id:"monthly",label:"Mensual",price:"US$17.99",sub:"Equilibrio perfecto"},{id:"annual",label:"Anual",price:"US$161.90",sub:" 3 MESES GRATIS"}],color:"yellow",icon:qs}].map(d=>{let p=n===d.id,y=t?.subscriptionPlan===d.id||!t?.subscriptionPlan&&d.id==="entrepreneur",_=d.icon,N=a[d.color];return r.default.createElement("div",{key:d.id,onClick:()=>s(p?null:d.id),className:`relative rounded-2xl sm:rounded-3xl border-2 transition-all duration-300 overflow-hidden cursor-pointer flex flex-col
                                        ${p?`bg-gradient-to-b ${N.gradient} ${N.border} shadow-xl scale-[1.01]`:"bg-[#111] border-slate-800 hover:border-slate-600"}`},d.popular&&r.default.createElement("div",{className:"absolute top-0 right-0 bg-gradient-to-r from-purple-500 to-pink-500 text-white text-[10px] font-black px-3 py-1 rounded-bl-xl"},"POPULAR"),y&&r.default.createElement("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 bg-white/10 backdrop-blur text-white text-[10px] font-bold px-3 py-1 rounded-b-lg border border-white/20"}," TU PLAN"),r.default.createElement("div",{className:"p-4 sm:p-5 flex-1 flex flex-col"},r.default.createElement("div",{className:"flex items-center gap-3 mb-3"},r.default.createElement("div",{className:`p-2.5 sm:p-3 rounded-xl ${N.iconBg} shadow-lg`},r.default.createElement(_,{className:"w-5 h-5 sm:w-6 sm:h-6 text-white"})),r.default.createElement("div",null,r.default.createElement("h3",{className:"text-lg sm:text-xl font-black text-white"},d.name),r.default.createElement("p",{className:"text-[11px] sm:text-xs text-slate-500"},d.subtitle))),r.default.createElement("div",{className:`text-2xl sm:text-3xl font-black ${N.price} mb-4`},d.price," ",r.default.createElement("span",{className:"text-sm text-slate-500 font-normal"},"/mes")),r.default.createElement("div",{className:"space-y-2 mb-4 flex-1"},d.features.map((A,z)=>r.default.createElement("div",{key:z,className:"flex items-start gap-2 text-xs sm:text-sm text-slate-300"},r.default.createElement(Me,{className:`w-3.5 h-3.5 sm:w-4 sm:h-4 ${N.check} shrink-0 mt-0.5`}),r.default.createElement("span",null,A)))),r.default.createElement("button",{className:`w-full py-2 text-xs font-bold uppercase tracking-wider rounded-lg transition-all flex items-center justify-center gap-2
                                                ${p?"bg-white/5 text-white":"bg-slate-800/50 text-slate-400 hover:bg-slate-700/50"}`},p?"Eleg tu forma de pago":"Ver opciones de pago",r.default.createElement(Ew,{className:`w-4 h-4 transition-transform ${p?"rotate-180":""}`})),r.default.createElement("div",{className:`transition-all duration-300 overflow-hidden ${p?"max-h-[400px] opacity-100 mt-4":"max-h-0 opacity-0"}`},r.default.createElement("div",{className:"space-y-2 pt-4 border-t border-white/10"},d.cycles.map(A=>{let z=i?.price===A.price&&i?.plan===d.name;return r.default.createElement("button",{key:A.id,onClick:B=>{B.stopPropagation(),o({plan:d.name,cycle:A.label,price:A.price,sub:A.sub,emoji:d.emoji})},className:`w-full text-left p-3 rounded-xl border-2 transition-all flex justify-between items-center
                                                                ${z?`${N.activeBg} text-black ${N.activeBorder} shadow-lg`:"bg-slate-900/50 border-slate-700 hover:bg-slate-800 text-slate-300 hover:border-slate-500"}`},r.default.createElement("div",null,r.default.createElement("div",{className:"font-bold text-sm"},A.label),r.default.createElement("div",{className:`text-[10px] ${z?"text-black/70":"text-slate-500"}`},A.sub)),r.default.createElement("div",{className:"font-black text-base sm:text-lg"},A.price))})))))}))),i&&r.default.createElement("div",{className:"border-t border-slate-800 bg-gradient-to-r from-green-900/30 to-emerald-900/30 p-3 sm:p-5 shrink-0 animate-slide-up"},r.default.createElement("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-3 max-w-4xl mx-auto"},r.default.createElement("div",{className:"text-center sm:text-left"},r.default.createElement("p",{className:"text-white text-sm sm:text-base font-bold"},i.emoji," ",i.plan,"  ",r.default.createElement("span",{className:"text-green-400"},i.cycle)),r.default.createElement("p",{className:"text-slate-400 text-xs"},i.sub,"  ",i.price)),r.default.createElement("a",{href:`https://wa.me/5493425906300?text=${encodeURIComponent(`Hola! Quiero contratar el *${i.plan}* con pago *${i.cycle}* (${i.price}). Cmo sigo?`)}`,target:"_blank",rel:"noopener noreferrer",className:"w-full sm:w-auto px-6 py-3 bg-green-500 hover:bg-green-400 text-black font-black text-sm sm:text-base rounded-xl transition shadow-lg shadow-green-500/30 flex items-center justify-center gap-2"},r.default.createElement(ko,{className:"w-5 h-5"})," Confirmar por WhatsApp")))))},fO=({onBack:t})=>r.default.createElement("div",{className:"min-h-screen bg-black flex items-center justify-center p-4 animate-fade-in"},r.default.createElement("div",{className:"text-center max-w-md"},r.default.createElement("div",{className:"w-20 h-20 bg-red-900/20 text-red-500 rounded-full flex items-center justify-center mx-auto mb-6 border border-red-900/50"},r.default.createElement(Bn,{className:"w-10 h-10"})),r.default.createElement("h1",{className:"text-3xl font-black text-white mb-2"},"ACCESO DENEGADO"),r.default.createElement("p",{className:"text-slate-500 mb-8"},"No tienes los permisos necesarios para acceder al Panel de Administracin."),r.default.createElement("button",{onClick:t,className:"px-8 py-3 bg-slate-800 hover:bg-slate-700 text-white rounded-xl font-bold transition flex items-center gap-2 mx-auto border border-slate-700"},r.default.createElement(Fs,{className:"w-4 h-4"})," Volver a la Tienda"))),Tk=document.getElementById("root");if(!Tk)throw new Error("No se encontr el contenedor #root");var gO=(0,Nk.createRoot)(Tk);gO.render(r.default.createElement(ew,null,r.default.createElement(mO,null)));
/*! Bundled license information:

scheduler/cjs/scheduler.production.min.js:
  (**
   * @license React
   * scheduler.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

react-dom/cjs/react-dom.production.min.js:
  (**
   * @license React
   * react-dom.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

@firebase/util/dist/index.esm.js:
@firebase/util/dist/index.esm.js:
@firebase/util/dist/index.esm.js:
@firebase/util/dist/index.esm.js:
@firebase/util/dist/index.esm.js:
@firebase/util/dist/index.esm.js:
@firebase/util/dist/index.esm.js:
@firebase/util/dist/index.esm.js:
@firebase/util/dist/index.esm.js:
@firebase/logger/dist/esm/index.esm.js:
@firebase/firestore/dist/common-3cb50c20.esm.js:
@firebase/firestore/dist/common-3cb50c20.esm.js:
@firebase/firestore/dist/common-3cb50c20.esm.js:
@firebase/firestore/dist/common-3cb50c20.esm.js:
@firebase/firestore/dist/common-3cb50c20.esm.js:
@firebase/firestore/dist/common-3cb50c20.esm.js:
@firebase/firestore/dist/common-3cb50c20.esm.js:
@firebase/firestore/dist/common-3cb50c20.esm.js:
@firebase/firestore/dist/common-3cb50c20.esm.js:
@firebase/firestore/dist/common-3cb50c20.esm.js:
@firebase/firestore/dist/common-3cb50c20.esm.js:
@firebase/firestore/dist/common-3cb50c20.esm.js:
@firebase/firestore/dist/common-3cb50c20.esm.js:
@firebase/firestore/dist/common-3cb50c20.esm.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/util/dist/index.esm.js:
  (**
   * @license
   * Copyright 2022 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2025 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2021 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/util/dist/index.esm.js:
@firebase/firestore/dist/common-3cb50c20.esm.js:
@firebase/firestore/dist/common-3cb50c20.esm.js:
@firebase/firestore/dist/common-3cb50c20.esm.js:
@firebase/firestore/dist/common-3cb50c20.esm.js:
@firebase/firestore/dist/common-3cb50c20.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
  (**
   * @license
   * Copyright 2022 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/util/dist/index.esm.js:
@firebase/component/dist/esm/index.esm.js:
@firebase/app/dist/esm/index.esm.js:
@firebase/app/dist/esm/index.esm.js:
@firebase/auth/dist/esm/index-36fcbc82.js:
@firebase/auth/dist/esm/index-36fcbc82.js:
@firebase/firestore/dist/common-3cb50c20.esm.js:
@firebase/firestore/dist/common-3cb50c20.esm.js:
@firebase/firestore/dist/common-3cb50c20.esm.js:
@firebase/firestore/dist/common-3cb50c20.esm.js:
  (**
   * @license
   * Copyright 2019 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/util/dist/index.esm.js:
firebase/app/dist/esm/index.esm.js:
@firebase/auth/dist/esm/index-36fcbc82.js:
@firebase/auth/dist/esm/index-36fcbc82.js:
@firebase/auth/dist/esm/index-36fcbc82.js:
@firebase/auth/dist/esm/index-36fcbc82.js:
@firebase/auth/dist/esm/index-36fcbc82.js:
@firebase/auth/dist/esm/index-36fcbc82.js:
@firebase/auth/dist/esm/index-36fcbc82.js:
@firebase/auth/dist/esm/index-36fcbc82.js:
@firebase/auth/dist/esm/index-36fcbc82.js:
@firebase/auth/dist/esm/index-36fcbc82.js:
@firebase/auth/dist/esm/index-36fcbc82.js:
@firebase/auth/dist/esm/index-36fcbc82.js:
@firebase/auth/dist/esm/index-36fcbc82.js:
@firebase/auth/dist/esm/index-36fcbc82.js:
@firebase/auth/dist/esm/index-36fcbc82.js:
@firebase/auth/dist/esm/index-36fcbc82.js:
@firebase/auth/dist/esm/index-36fcbc82.js:
@firebase/auth/dist/esm/index-36fcbc82.js:
@firebase/auth/dist/esm/index-36fcbc82.js:
@firebase/auth/dist/esm/index-36fcbc82.js:
@firebase/auth/dist/esm/index-36fcbc82.js:
@firebase/auth/dist/esm/index-36fcbc82.js:
@firebase/auth/dist/esm/index-36fcbc82.js:
@firebase/auth/dist/esm/index-36fcbc82.js:
@firebase/auth/dist/esm/index-36fcbc82.js:
@firebase/auth/dist/esm/index-36fcbc82.js:
@firebase/auth/dist/esm/index-36fcbc82.js:
@firebase/auth/dist/esm/index-36fcbc82.js:
@firebase/auth/dist/esm/index-36fcbc82.js:
@firebase/firestore/dist/common-3cb50c20.esm.js:
@firebase/firestore/dist/common-3cb50c20.esm.js:
@firebase/firestore/dist/common-3cb50c20.esm.js:
@firebase/firestore/dist/common-3cb50c20.esm.js:
@firebase/firestore/dist/common-3cb50c20.esm.js:
@firebase/firestore/dist/common-3cb50c20.esm.js:
@firebase/firestore/dist/common-3cb50c20.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/util/dist/index.esm.js:
@firebase/auth/dist/esm/index-36fcbc82.js:
@firebase/firestore/dist/index.esm.js:
  (**
   * @license
   * Copyright 2021 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/app/dist/esm/index.esm.js:
  (**
   * @license
   * Copyright 2019 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2023 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/app/dist/esm/index.esm.js:
  (**
   * @license
   * Copyright 2021 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2019 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm/index-36fcbc82.js:
@firebase/auth/dist/esm/index-36fcbc82.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2019 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm/index-36fcbc82.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2022 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2023 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm/index-36fcbc82.js:
  (**
   * @license
   * Copyright 2019 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm/index-36fcbc82.js:
  (**
   * @license
   * Copyright 2019 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2025 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm/index-36fcbc82.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2019 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2020 Google LLC.
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm/index-36fcbc82.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2021 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2019 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm/index-36fcbc82.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2020 Google LLC.
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2021 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/webchannel-wrapper/dist/bloom-blob/esm/bloom_blob_es2018.js:
@firebase/webchannel-wrapper/dist/webchannel-blob/esm/webchannel_blob_es2018.js:
  (** @license
  Copyright The Closure Library Authors.
  SPDX-License-Identifier: Apache-2.0
  *)
  (** @license
  
   Copyright The Closure Library Authors.
   SPDX-License-Identifier: Apache-2.0
  *)

@firebase/firestore/dist/common-3cb50c20.esm.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/common-3cb50c20.esm.js:
@firebase/firestore/dist/common-3cb50c20.esm.js:
@firebase/firestore/dist/common-3cb50c20.esm.js:
@firebase/firestore/dist/common-3cb50c20.esm.js:
@firebase/firestore/dist/common-3cb50c20.esm.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/common-3cb50c20.esm.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2025 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2021 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/common-3cb50c20.esm.js:
  (**
   * @license
   * Copyright 2018 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/common-3cb50c20.esm.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2023 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/common-3cb50c20.esm.js:
@firebase/firestore/dist/index.esm.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2022 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/common-3cb50c20.esm.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2018 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2022 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2023 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/common-3cb50c20.esm.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2023 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/common-3cb50c20.esm.js:
  (**
   * @license
   * Copyright 2023 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2022 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/common-3cb50c20.esm.js:
  (**
   * @license
   * Copyright 2024 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/common-3cb50c20.esm.js:
  (**
   * @license
   * Copyright 2021 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2021 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law | agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/common-3cb50c20.esm.js:
  (**
   * @license
   * Copyright 2018 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/common-3cb50c20.esm.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2022 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2024 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/common-3cb50c20.esm.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2023 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2019 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/common-3cb50c20.esm.js:
  (**
   * @license
   * Copyright 2018 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/common-3cb50c20.esm.js:
  (**
   * @license
   * Copyright 2019 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2023 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/common-3cb50c20.esm.js:
@firebase/firestore/dist/common-3cb50c20.esm.js:
@firebase/firestore/dist/common-3cb50c20.esm.js:
  (**
   * @license
   * Copyright 2025 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/common-3cb50c20.esm.js:
  (**
   * @license
   * Copyright 2023 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/common-3cb50c20.esm.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2024 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/common-3cb50c20.esm.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2024 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.esm.js:
  (**
   * @license
   * Copyright 2025 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
  (**
   * @license
   * Copyright 2023 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
*/
//# sourceMappingURL=app.js.map
