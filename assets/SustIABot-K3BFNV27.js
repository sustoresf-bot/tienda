import t,{useState as C,useEffect as Q,useRef as _,useMemo as Ne}from"react";import{Send as ke,X as le,Trash2 as $e,Plus as Ae}from"lucide-react";var Se=({product:o,onAdd:y})=>{let[w,N]=C(1),z=o.basePrice*(1-(o.discount||0)/100);return t.createElement("div",{className:"min-w-[200px] max-w-[200px] bg-[#1a1a1a] rounded-2xl border border-white/5 overflow-hidden flex flex-col group snap-center"},t.createElement("div",{className:"relative h-28 bg-white p-2"},t.createElement("img",{src:o.image,className:"w-full h-full object-contain group-hover:scale-110 transition duration-500",alt:o.name}),o.discount>0&&t.createElement("div",{className:"absolute top-2 left-2 bg-red-600 text-white text-[10px] font-black px-2 py-0.5 rounded-full shadow-lg"},"-",o.discount,"%")),t.createElement("div",{className:"p-3 flex-1 flex flex-col"},t.createElement("h4",{className:"text-white font-bold text-xs line-clamp-2 mb-2 leading-tight h-8"},o.name),t.createElement("div",{className:"mt-auto"},t.createElement("div",{className:"flex items-center gap-2 mb-3"},t.createElement("span",{className:"text-yellow-500 font-black text-sm"},"$",Math.round(z).toLocaleString()),o.discount>0&&t.createElement("span",{className:"text-slate-500 text-[10px] line-through"},"$",o.basePrice.toLocaleString())),t.createElement("div",{className:"flex items-center gap-2"},t.createElement("div",{className:"flex bg-black/40 rounded-lg border border-white/5 overflow-hidden"},t.createElement("button",{onClick:()=>N(Math.max(1,w-1)),className:"px-2 py-1 text-slate-400 hover:text-white hover:bg-white/5 transition"},"-"),t.createElement("span",{className:"px-2 py-1 text-xs text-white font-bold min-w-[24px] text-center"},w),t.createElement("button",{onClick:()=>N(Math.min(o.stock||99,w+1)),className:"px-2 py-1 text-slate-400 hover:text-white hover:bg-white/5 transition"},"+")),t.createElement("button",{onClick:()=>y(o,w),className:"flex-1 bg-yellow-600 hover:bg-yellow-500 text-white py-1.5 rounded-lg text-[10px] font-black transition flex items-center justify-center gap-1 shadow-lg shadow-yellow-900/20"},t.createElement(Ae,{className:"w-3 h-3"})," LISTO")))))},Ce=t.memo(({settings:o,products:y,addToCart:w,controlPanel:N,coupons:z,appId:ce})=>{if(!(()=>{try{return String(window.location.href||"").includes("sustia=1")?!0:new URLSearchParams(window.location.search).get("sustia")==="1"}catch{return!1}})()&&o?.subscriptionPlan!=="premium")return null;let[E,R]=C(!1),[O,ee]=C(!1),ue=o?.botImage||"sustia-ai-v2.jpg",de=`sustore_sustia_chat_${ce}`,te={role:"model",text:"Â¡Hola! Soy SustIA ðŸ¤–, tu asistente personal. Â¿Buscas algo especial hoy? Puedo verificar stock y agregar productos a tu carrito."},[P,T]=C([te]),[H,ae]=C(""),[oe,re]=C(!1),[se,j]=C(null),ne=_(null),ie=_(P),V=_(!1),W=_(null),B=_(!0),v=Array.isArray(y)?y:[],me=Array.isArray(z)?z:[],pe=!!o?.aiAssistant?.enabled;Q(()=>{let a=()=>{try{ee(document?.documentElement?.classList?.contains("dark-mode")===!0)}catch{ee(!1)}};a();let s;try{s=new MutationObserver(()=>a()),document?.documentElement&&s.observe(document.documentElement,{attributes:!0,attributeFilter:["class"]})}catch{}return()=>{try{s?.disconnect?.()}catch{}}},[]);let k=a=>a==null?"":String(a).toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").trim(),fe=a=>{let s=k(a);if(!s)return[];let r=s.split(/[\s,.;:!?/()\\[\]{}"â€œâ€'â€™\-+*_]+/).filter(Boolean),i=new Set(["el","la","los","las","un","una","unos","unas","de","del","en","con","sin","para","por","a","al","que","como","cual","cuales","donde","cuando","quien","quienes","hola","buenas","buenos","dia","dias","tardes","noches","busco","buscar","tenes","tienes","precio","vale","cuesta","quiero","necesito","hay","me","te","mi","mis","tu","tus","agrega","agregar","agregame","agregalo","sumar","sumame","poner","pone","comprar","compralo","llevo","carrito","bolsa","cesta","mas","menos","muy","super","re"]);return r.filter(l=>l.length>1&&!i.has(l)&&!/^\d+$/.test(l))},K=(a,s)=>{if(!a)return null;let r=parseFloat(String(a).replace(",","."));return Number.isFinite(r)?s.includes(`${a}k`)||s.includes(`${a} k`)||s.includes(`${a}mil`)||s.includes(`${a} mil`)?r*1e3:r:null},he=a=>{let s=k(a),r=s.match(/\b(?:x|por)\s*(\d{1,3})\b/);if(r)return Math.max(1,Math.min(99,parseInt(r[1],10)));let i=s.match(/\b(\d{1,3})\s*(?:u|ud|uds|unidad|unidades|pcs|piezas)\b/);if(i)return Math.max(1,Math.min(99,parseInt(i[1],10)));let l=s.match(/\b(\d{1,2})\b/);return l&&s.match(/\b(agrega|agregar|agregame|sum[aÃ¡]|pone|poner|met[eÃ©]|quiero|llevo|comprar)\b/)?Math.max(1,Math.min(99,parseInt(l[1],10))):1},q=a=>{let s=[];return Array.isArray(a?.categories)&&s.push(...a.categories),typeof a?.category=="string"&&a.category.trim()&&s.push(a.category),s.filter(Boolean).map(r=>String(r).trim()).filter(Boolean)},U=a=>{let s=Number(a?.basePrice)||0,r=Number(a?.discount)||0;return s*(1-r/100)},be=Ne(()=>{let a=o?.storeName?String(o.storeName):"",s=o?.aboutUsText?String(o.aboutUsText):"",r=!!o?.shippingDelivery?.enabled,i=!!o?.shippingPickup?.enabled,l=Number(o?.shippingDelivery?.fee)||0,f=Number(o?.shippingDelivery?.freeAbove)||0,d=o?.shippingPickup?.address||"",p=[];i&&p.push(`Retiro en local: ${d||"a coordinar"}.`),r&&(f>0?p.push(`EnvÃ­o a domicilio: $${l.toLocaleString()} (gratis desde $${f.toLocaleString()}).`):p.push(`EnvÃ­o a domicilio: $${l.toLocaleString()}.`));let g=!!o?.paymentMercadoPago?.enabled,L=!!o?.paymentTransfer?.enabled,x=!!o?.paymentCash&&i,$=[];g&&$.push("Tarjeta (Mercado Pago)"),L&&$.push("Transferencia"),x&&$.push("Efectivo (solo retiro en local)");let A=[...new Set([...Array.isArray(o?.categories)?o.categories:[],...v.flatMap(c=>q(c))])].map(c=>String(c).trim()).filter(Boolean).slice(0,20),S=v.filter(c=>c&&(Number(c.stock)||0)>0&&c.isActive!==!1).map(c=>({name:String(c.name||"").trim(),price:U(c),discount:Number(c.discount)||0,featured:!!c.isFeatured,cats:q(c).slice(0,2).join(", ")})).filter(c=>c.name).sort((c,M)=>M.discount-c.discount||Number(M.featured)-Number(c.featured)||c.price-M.price).slice(0,25).map(c=>`${c.name} â€” $${Math.round(c.price).toLocaleString()}${c.cats?` â€” ${c.cats}`:""}`);return{storeName:a,aboutUsText:s,shipping:p.join(" "),payments:$.join(", "),categories:A,productHints:S}},[o,v]),ge=async({userText:a,history:s,signal:r})=>{let i=await fetch("/api/ai/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userText:a,messages:Array.isArray(s)?s:[],context:be}),signal:r}),l=await i.json().catch(()=>({}));if(!i.ok)throw new Error(l?.error||"ai_error");if(!l?.text||typeof l.text!="string")throw new Error("ai_invalid");return{text:l.text}};Q(()=>{ne.current?.scrollIntoView({behavior:"smooth"})},[P,E]),Q(()=>{ie.current=P},[P]),Q(()=>()=>{B.current=!1},[]);let J=(a,s)=>{if(!s||typeof s!="string"||!a||typeof a!="string")return!1;let r=k(a),i=k(s);if(r.includes(i))return!0;let l=0,f=-1;for(let d of i){let p=r.indexOf(d,f+1);p>-1&&(l++,f=p)}return l/i.length>.75},xe=async(a,s)=>{await new Promise(e=>setTimeout(e,800));let r=k(a),i=he(r);if(r.length<=1)return{text:"Te leÃ­, pero me falta info ðŸ˜Š. Â¿QuÃ© estÃ¡s buscando? (ej: 'auriculares', 'zapatillas', 'envÃ­o', 'pagos')"};if(r.match(/\b(hola|holas|buen dia|buenos dias|buenas tardes|buenas noches|buenas|hello|hi|hey|que tal|como estas|como va|todo bien)\b/))return{text:"Â¡Hola! ðŸ‘‹ Â¿QuÃ© querÃ©s hacer? PodÃ©s pedirme productos, ofertas, cupones, envÃ­o, pagos o que agregue algo al carrito."};if(r.match(/\b(quien sos|que sos|que haces|sos real|sos un bot|asistente)\b/))return{text:`Soy SustIA${o?.storeName?` de **${o.storeName}**`:""}. Puedo ayudarte a encontrar productos, ver ofertas/cupones y armar el carrito mÃ¡s rÃ¡pido.`};if(r.match(/\b(categorias|categoria|rubros|rubro|secciones)\b/)){let e=[...new Set(v.flatMap(m=>q(m)))],n=[...new Set([...Array.isArray(o?.categories)?o.categories:[],...e])].map(m=>String(m).trim()).filter(Boolean);return n.length===0?{text:"TodavÃ­a no tengo categorÃ­as configuradas. Decime quÃ© estÃ¡s buscando y lo resuelvo igual."}:{text:`Tenemos estas categorÃ­as:

${n.slice(0,10).map(m=>`- ${m}`).join(`
`)}

Decime cuÃ¡l te interesa y te muestro opciones.`}}if(r.match(/\b(sobre|info|informacion|quienes somos|about)\b/)){let e=o?.aboutUsText||"";return e.trim()?{text:e.trim()}:{text:"Esta tienda todavÃ­a no cargÃ³ su secciÃ³n â€œSobre nosotrosâ€. Â¿QuerÃ©s que te ayude a encontrar un producto?"}}if(N){if(r.match(/modo\s*(?:oscuro|noche|dark)/))return N.setDarkMode(!0),{text:"He activado el modo oscuro ðŸŒ™. Â¿Mejor para tus ojos?"};if(r.match(/modo\s*(?:claro|dia|light)/))return N.setDarkMode(!1),{text:"He activado el modo claro â˜€ï¸."};if(r.match(/(?:ver|abrir|ir al)\s*(?:carrito|bolsa|cesta)/))return N.openCart(),{text:"Abriendo tu carrito de compras... ðŸ›’"}}if(r.match(/\b(envio|envios|entrega|delivery|domicilio|retiro|retirar|local|pickup)\b/)){let e=!!o?.shippingDelivery?.enabled,n=!!o?.shippingPickup?.enabled,u=Number(o?.shippingDelivery?.fee)||0,m=Number(o?.shippingDelivery?.freeAbove)||0,h=o?.shippingPickup?.address||"",b=[];return n&&b.push(`ðŸ“ Retiro en local: ${h?`**${h}**`:"a coordinar"}.`),e&&(m>0?b.push(`ðŸšš EnvÃ­o a domicilio: $${u.toLocaleString()} (gratis desde $${m.toLocaleString()}).`):b.push(`ðŸšš EnvÃ­o a domicilio: $${u.toLocaleString()}.`)),!n&&!e&&b.push("TodavÃ­a no tengo configurado el mÃ©todo de entrega para esta tienda."),b.push("Si me decÃ­s tu ciudad/zona, te digo lo mejor para vos."),{text:b.join(`
`)}}if(r.match(/\b(pago|pagos|tarjeta|mercado\s*pago|transferencia|cbu|alias|efectivo)\b/)){let e=!!o?.paymentMercadoPago?.enabled,n=!!o?.paymentTransfer?.enabled,u=!!o?.paymentCash&&!!o?.shippingPickup?.enabled,m=n&&r.match(/\b(alias|cbu|transferencia)\b/),h=[];if(e&&h.push("ðŸ’³ Tarjeta (Mercado Pago)"),n&&h.push("ðŸ¦ Transferencia"),u&&h.push("ðŸ’µ Efectivo (solo retiro en local)"),h.length===0)return{text:"TodavÃ­a no tengo mÃ©todos de pago configurados para esta tienda. Si querÃ©s, te paso WhatsApp para coordinar."};if(m){let b=o?.paymentTransfer?.holderName?String(o.paymentTransfer.holderName).trim():"",Y=o?.paymentTransfer?.alias?String(o.paymentTransfer.alias).trim():"",Z=o?.paymentTransfer?.cbu?String(o.paymentTransfer.cbu).trim():"",D=["Para transferir, usÃ¡ estos datos:"];return b&&D.push(`- Titular: ${b}`),Y&&D.push(`- Alias: ${Y}`),Z&&D.push(`- CBU: ${Z}`),!b&&!Y&&!Z&&D.push("- AÃºn no estÃ¡n cargados los datos de transferencia para esta tienda."),{text:D.join(`
`)}}return{text:`PodÃ©s pagar con:

${h.map(b=>`- ${b}`).join(`
`)}

Â¿Con cuÃ¡l preferÃ­s?`}}if(r.match(/\b(ayuda|soporte|contacto|human|persona|asesor)\b/))return o?.whatsappLink?{text:`Claro. Si necesitas asistencia personalizada con un humano ðŸ§‘â€ðŸ’», escrÃ­benos a nuestro WhatsApp: ${o.whatsappLink} ðŸ“²`}:{text:"Estoy diseÃ±ado para ayudarte a encontrar productos las 24hs. ðŸ¤– Â¿Buscas algo en especÃ­fico?"};if(r.match(/\b(descuento|promo|cupon|oferta|codigo|rebaja)\b/)){let e=me.filter(u=>{if(!u?.code)return!1;let m=!u.expirationDate||new Date(u.expirationDate)>new Date,h=Array.isArray(u.usedBy)?u.usedBy.length:0,b=!u.usageLimit||h<u.usageLimit;return m&&b}),n=v.filter(u=>(Number(u?.discount)||0)>0&&(Number(u?.stock)||0)>0);return e.length>0?{text:`Â¡SÃ­! Tenemos estos cupones disponibles para ti:

${e.filter(m=>m?.code).map(m=>`ðŸŽ« **${m.code}** (${m.type==="percentage"?m.value+"%":"$"+m.value} OFF)`).join(`
`)}

Â¡Ãšsalos al finalizar tu compra! ðŸ›’`}:n.length>0?(j({type:"show_deals",data:n.sort(()=>.5-Math.random()).slice(0,5)}),{text:`No tengo cÃ³digos de cupÃ³n activos ahora, pero sÃ­ tenemos **${n.length}** productos con descuento. Â¿QuerÃ©s que te muestre los mejores? ðŸ·ï¸`}):{text:"Por el momento no tengo cÃ³digos promocionales activos, pero nuestros precios son los mejores del mercado. ðŸ˜‰"}}if(se){if(r.match(/\b(si|claro|dale|bueno|yes|por favor|obvio)\b/)){let e=se;if(j(null),e.type==="suggest_cross_sell")return{text:"Â¡Excelente! Mira estas oportunidades que seleccionÃ© para ti: ðŸ”¥",products:e.data};if(e.type==="show_deals")return{text:"Listo. Estas son algunas ofertas que valen la pena ahora mismo:",products:e.data}}else if(r.match(/\b(no|gracias|paso|cancelar|asi esta bien)\b/))return j(null),{text:"Entendido. Â¿Necesitas ayuda con algo mÃ¡s? ðŸ˜Š"}}let l=r.match(/(?:mas|muy|super)\s*(?:barato|economico|bajo)|oferta|menos|mas\s*economico/),f=r.match(/(?:mas|muy|super)\s*(?:caro|mejor|calidad|top|premium)|costoso|lujo/),d=r.match(/(?:agrega|agregar|agregame|sum[aÃ¡]|pone|poner|met[eÃ©]|comprar|quiero|dame|carrito|llevo|lo quiero)/),p=0,g=1/0,L=r.match(/(?:menos|menor|bajo)\s*(?:de|a|que)?\s*\$?\s*(\d+(?:[.,]\d+)?)(?:\s*(?:k|mil))?/);if(L){let e=K(L[1],r);e!==null&&(g=e)}let x=r.match(/entre\s*\$?\s*(\d+(?:[.,]\d+)?)(?:\s*(?:k|mil))?\s*y\s*\$?\s*(\d+(?:[.,]\d+)?)(?:\s*(?:k|mil))?/);if(x){let e=K(x[1],r),n=K(x[2],r);e!==null&&(p=e),n!==null&&(g=n)}let A=[...new Set(v.flatMap(e=>q(e)))].find(e=>J(e,r)||J(r,e)),S=A?A.toLowerCase():null,c=new Map([["celu","celular"],["cel","celular"],["tele","televisor"],["tv","televisor"],["compu","computadora"],["notebook","laptop"],["auris","auriculares"],["zapas","zapatillas"],["remera","camiseta"],["remeras","camisetas"]]),M=fe(r).flatMap(e=>{let n=c.get(e);return n?[e,n]:[e]});if(M.length===0&&!S&&!l&&!f&&!d)return{text:"Â¿Me decÃ­s quÃ© producto o categorÃ­a querÃ©s ver? Si querÃ©s, tambiÃ©n podÃ©s preguntar por 'envÃ­o', 'pagos' o 'cupones'."};let I=v.filter(e=>(Number(e?.stock)||0)>0&&e?.isActive!==!1);I=I.filter(e=>{let n=U(e);return n>=p&&n<=g}),S&&(I=I.filter(e=>q(e).some(n=>n.toLowerCase()===S)));let F=I.map(e=>{let n=0,u=k(e.name),m=k(e.description);return M.forEach(h=>{u.includes(h)?n+=10:J(u,h)&&(n+=5),m.includes(h)&&(n+=2)}),e.isFeatured&&(n+=5),e.discount>0&&(n+=3),l&&(n+=1/(U(e)||1)*1e4),f&&(n+=U(e)/100),{product:e,score:n}}).filter(e=>e.score>0).sort((e,n)=>n.score-e.score).slice(0,5).map(e=>e.product);if(F.length===0)return{text:"No encontrÃ© exactamente lo que buscÃ¡s, pero probando con otra palabra o viendo nuestras categorÃ­as seguro lo hallamos. ðŸ”Ž"};if(d&&F.length>0){let e=F[0];w(e,i);let n=v.filter(u=>u.id!==e.id&&(Number(u.stock)||0)>0&&u.isActive!==!1).sort(()=>.5-Math.random()).slice(0,3);return n.length>0?(j({type:"suggest_cross_sell",data:n}),{text:`Â¡Listo! AgreguÃ© **${i}x ${e.name}** a tu carrito. ðŸ›’

Â¿Te gustarÃ­a ver algunos productos destacados para complementar tu compra? ðŸ‘€`,products:[e]}):{text:`Â¡Listo! AgreguÃ© **${i}x ${e.name}** a tu carrito. ðŸ›’ Â¿Algo mÃ¡s?`,products:[e]}}let G="EncontrÃ© estas opciones. Â¿QuerÃ©s que te muestre mÃ¡s o me decÃ­s un presupuesto?";return S&&(G=`EncontrÃ© esto en la categorÃ­a ${S}:`),l&&(G="Las opciones mÃ¡s econÃ³micas:"),{text:G,products:F}},ve=async(a,s)=>{let r=null,i=new Promise((l,f)=>{r=setTimeout(()=>f(new Error("timeout")),s)});try{return await Promise.race([a,i])}finally{r&&clearTimeout(r)}},X=async(a,s={})=>{let r=!!s.alreadyAddedUser,i=String(a||"").trim().slice(0,300);if(!i)return;if(V.current){if(!r){let d={role:"client",text:i};T(p=>[...p,d])}W.current={text:i,alreadyAddedUser:!0};return}V.current=!0,ae("");let l=r?null:{role:"client",text:i},f=[...ie.current||[],...l?[l]:[]];l&&T(d=>[...d,l]),re(!0);try{let d=await ve(xe(i,f),12e3);if(!B.current)return;let p=d?.text&&typeof d.text=="string"?d.text:"PerdÃ³n, tuve un problema procesando eso. Â¿PodÃ©s reformularlo?",g=Array.isArray(d?.products)?d.products:void 0;if(pe&&(!g||g.length===0)&&/no encontr[eÃ©]|no tengo eso|no lo tengo|probando con otra palabra/i.test(p)){let x=new AbortController,$=setTimeout(()=>x.abort(),8500);try{let A=await ge({userText:i,history:f,signal:x.signal});A?.text&&(p=A.text)}catch{}clearTimeout($)}T(x=>[...x,{role:"model",text:p,products:g}])}catch{if(!B.current)return;let p=o?.whatsappLink?`Uy, se me trabÃ³ por un momento. Si querÃ©s, hablÃ¡ por WhatsApp: ${o.whatsappLink}`:"Uy, se me trabÃ³ por un momento. Â¿Probamos de nuevo?";T(g=>[...g,{role:"model",text:p}])}finally{B.current&&re(!1),V.current=!1;let d=W.current;d&&d.text&&(W.current=null,setTimeout(()=>X(d.text,{alreadyAddedUser:d.alreadyAddedUser===!0}),0))}},ye=async()=>X(H),we=a=>{let s=String(a||"").trim();s&&X(s)};return t.createElement("div",{className:"fixed bottom-4 right-4 z-[9999] flex flex-col items-end pointer-events-none"},E&&t.createElement("div",{className:"bg-[#0f0f0f]/95 backdrop-blur-2xl border border-white/10 rounded-[2rem] w-[calc(100vw-2rem)] sm:w-80 md:w-96 h-[min(600px,80dvh)] shadow-[0_20px_50px_rgba(0,0,0,0.5)] flex flex-col mb-4 animate-fade-up overflow-hidden font-sans pointer-events-auto ring-1 ring-white/10 relative mr-0 sm:mr-0"},t.createElement("div",{className:"bg-gradient-to-r from-yellow-500 to-amber-600 p-5 flex justify-between items-center relative z-10"},t.createElement("div",{className:"flex items-center gap-3"},t.createElement("div",{className:"p-1 bg-white/20 rounded-full backdrop-blur-md overflow-hidden border border-white/30"},t.createElement("img",{src:ue,className:"w-9 h-9 object-cover rounded-full",alt:"SustIA"})),t.createElement("div",null,t.createElement("h3",{className:"font-black text-white text-sm tracking-tight"},"SustIA AI"),t.createElement("p",{className:"text-[10px] text-white/90 font-bold flex items-center gap-1.5"},t.createElement("span",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse shadow-[0_0_8px_rgba(74,222,128,0.8)]"}),"En lÃ­nea"))),t.createElement("div",{className:"flex items-center gap-1"},t.createElement("button",{onClick:()=>{try{localStorage.removeItem(de)}catch{}j(null),T([te])},className:"text-white/80 hover:text-white p-2 hover:bg-white/10 rounded-full transition-colors",title:"Limpiar chat"},t.createElement($e,{className:"w-5 h-5"})),t.createElement("button",{onClick:()=>R(!1),className:"text-white/80 hover:text-white p-2 hover:bg-white/10 rounded-full transition-colors",title:"Cerrar"},t.createElement(le,{className:"w-5 h-5"})))),t.createElement("div",{className:`px-4 py-2 border-b ${O?"bg-[#111] border-white/5":"bg-slate-50 border-slate-200"}`},t.createElement("div",{className:"flex gap-2 overflow-x-auto pb-1 custom-scrollbar"},[{label:"Ofertas",value:"Mostrame ofertas"},{label:"Cupones",value:"TenÃ©s cupones?"},{label:"EnvÃ­o",value:"CÃ³mo es el envÃ­o?"},{label:"Pagos",value:"QuÃ© medios de pago hay?"},{label:"CategorÃ­as",value:"QuÃ© categorÃ­as tenÃ©s?"},{label:"WhatsApp",value:"Necesito hablar con una persona"}].map(a=>t.createElement("button",{key:a.label,type:"button","data-testid":`quick-action-${a.label.toLowerCase()}`,onClick:()=>{we(a.value)},className:O?"shrink-0 px-3 py-1.5 rounded-full text-[11px] font-bold border border-white/10 bg-[#1a1a1a] text-white hover:bg-[#222] transition":"shrink-0 px-3 py-1.5 rounded-full text-[11px] font-bold border border-slate-200 bg-white text-slate-800 hover:bg-slate-50 transition"},t.createElement("span",{className:O?"text-white":"text-slate-800"},a.label))))),t.createElement("div",{className:"flex-1 overflow-y-auto p-5 space-y-6 bg-[#0a0a0a]/50 custom-scrollbar relative"},P.map((a,s)=>t.createElement("div",{key:s,className:`flex flex-col ${a.role==="client"?"items-end":"items-start"} animate-fade-in`},t.createElement("div",{className:`max-w-[85%] p-4 rounded-2xl text-[13px] leading-relaxed shadow-lg ${a.role==="client"?"bg-gradient-to-br from-yellow-500 to-amber-600 text-white rounded-tr-none border border-white/10":"bg-[#1a1a1a] text-slate-200 rounded-tl-none border border-white/5"}`},t.createElement("p",{className:"whitespace-pre-wrap"},a.text)),a.products&&a.products.length>0&&t.createElement("div",{className:"mt-3 flex gap-3 overflow-x-auto pb-2 w-full custom-scrollbar pl-1 snap-x"},a.products.map(r=>t.createElement(Se,{key:r.id,product:r,onAdd:(i,l)=>{w(i,l),T(f=>[...f,{role:"model",text:`Agregado ${l}x ${i.name} al carrito! ðŸ›’`}])}}))))),oe&&t.createElement("div",{className:"flex justify-start"},t.createElement("div",{className:"bg-[#1a1a1a] p-3 rounded-2xl rounded-bl-none border border-white/5 flex gap-1"},t.createElement("span",{className:"w-1.5 h-1.5 bg-slate-500 rounded-full animate-bounce"}),t.createElement("span",{className:"w-1.5 h-1.5 bg-slate-500 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),t.createElement("span",{className:"w-1.5 h-1.5 bg-slate-500 rounded-full animate-bounce",style:{animationDelay:"0.2s"}}))),t.createElement("div",{ref:ne})),t.createElement("div",{className:"p-3 bg-[#0a0a0a] border-t border-white/10 relative z-0"},t.createElement("form",{onSubmit:a=>{a.preventDefault(),ye()},className:"flex gap-2 items-center"},t.createElement("input",{className:"flex-1 bg-[#1a1a1a] border border-white/10 rounded-full px-4 py-2.5 text-sm text-white focus:border-yellow-500/50 outline-none transition placeholder:text-slate-600",placeholder:"Escribe aquÃ­...",value:H,onChange:a=>ae(a.target.value)}),t.createElement("button",{type:"submit",className:"p-2.5 bg-yellow-600 hover:bg-yellow-500 text-white rounded-full transition shadow-lg shadow-yellow-600/20 disabled:opacity-50 disabled:cursor-not-allowed",disabled:oe||!H.trim()},t.createElement(ke,{className:"w-4 h-4"}))))),t.createElement("button",{onClick:()=>R(!E),className:"pointer-events-auto w-14 h-14 bg-gradient-to-br from-yellow-500 to-amber-600 rounded-full flex items-center justify-center shadow-[0_0_20px_rgba(234,179,8,0.4)] hover:scale-110 transition-transform group relative z-50"},E?t.createElement(le,{className:"w-6 h-6 text-white"}):t.createElement("div",{className:"w-full h-full p-1"},t.createElement("img",{src:"sustia-ai-v2.jpg",className:"w-full h-full object-cover rounded-full opacity-95 group-hover:scale-110 transition-transform duration-300",alt:"SustIA"})),!E&&t.createElement("span",{className:"absolute -top-1 -right-1 flex h-4 w-4"},t.createElement("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-yellow-400 opacity-75"}),t.createElement("span",{className:"relative inline-flex rounded-full h-4 w-4 bg-yellow-500 border border-black"}))))},(o,y)=>!(o.settings?.subscriptionPlan!==y.settings?.subscriptionPlan||o.products!==y.products)),ze=Ce;export{ze as default};
//# sourceMappingURL=SustIABot-K3BFNV27.js.map
